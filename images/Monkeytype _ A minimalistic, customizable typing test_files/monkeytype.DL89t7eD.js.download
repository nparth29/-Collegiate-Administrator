const __vite__fileDeps=["js/commandline.BFniHDVA.js","js/vendor.B2_VaVuT.js","js/firebase.D1y6uPl-.js","js/misc.CpwTlSyF.js","css/index.BDWkSVRv.css","js/howler.CZUQdRba.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);import{e as Yf,s as xi,d as Rn,t as tr,a as to,b as Ct,h as Qe,c as pZ,f as Ge,p as Wo,g as Jt,i as Qt,j as Xg,k as _k,m as d$,n as vg,o as mZ,r as vr,q as ob,u as Ka,v as Be,w as bg,x as l$,y as mi,z as ja,A as Ic,B as fZ,C as Ir,D as db,E as Pc,F as hZ,G as gZ,H as Vc,I as u$,J as c$,K as lb,L as p$,M as Tl,N as yZ,O as vZ,P as ow,Q as Is,R as bZ,S as wZ,T as qC,U as kk,V as xk,W as _Z,X as kZ,Y as WC,Z as xZ,l as FC}from"./misc.CpwTlSyF.js";import{i as CZ,g as TZ,$ as d,t as Ck,A as SZ,U as Yu,e as $Z,s as AZ,a as s0,b as LZ,c as zC,p as HC,d as ol,f as MZ,h as EZ,j as OZ,n as IZ,k as PZ,l as ZZ,m as NZ,o as zt,q as RZ,r as jZ,z as qt,u as DZ,v as BZ,w as qZ,x as ns,y as xa,H as ey,C as Xs,B as WZ,D as FZ,E as zZ,F as HZ,L as UZ,G as VZ,I as KZ,P as GZ,S as QZ,T as YZ,J as JZ,K as XZ,M as eN,N as tN,O as UC,Q as m$,R as La,V as f$,W as VC,X as aN,Y as sN,Z as nN,_ as iN,a0 as rN,a1 as oN,a2 as h$,a3 as g$,a4 as y$,a5 as dN,a6 as v$,a7 as lN,a8 as uN,a9 as b$,aa as cN,ab as Tk,ac as Sk,ad as w$,ae as pN,af as mN,ag as fN,ah as hN,ai as gN}from"./vendor.B2_VaVuT.js";import{i as Se,g as ub,a as Kc,b as y,c as yN,d as ao,s as vN,A as da,e as bN,f as wN,h as _N,n as dw,j as KC}from"./firebase.D1y6uPl-.js";const kN="modulepreload",xN=function(t){return"/"+t},GC={},$k=function(e,a,s){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),r=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(a.map(o=>{if(o=xN(o),o in GC)return;GC[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":kN,l||(m.as="script",m.crossOrigin=""),m.href=o,r&&m.setAttribute("nonce",r),document.head.appendChild(m),l)return new Promise((f,h)=>{m.addEventListener("load",f),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return n.then(()=>e()).catch(i=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=i,window.dispatchEvent(r),!r.defaultPrevented)throw i})};let _$=!0;function pd(t){_$=t}function Gc(){return _$}function CN(t){const e=new AbortController;return setTimeout(()=>e.abort(new Error("request timed out")),t),e.signal}function TN(t){return async e=>{try{const a={...e.headers,"X-Client-Version":Yf.clientVersion};if(Se()){const o=await TZ(ub());a.Authorization=`Bearer ${o}`}const s={method:e.method,headers:a,body:e.body},n=(AbortSignal==null?void 0:AbortSignal.timeout)===void 0,i=await fetch(e.path,{...s,signal:n?CN(t):AbortSignal.timeout(t)}),r=await i.json();return i.status>=400&&console.error(`${e.method} ${e.path} failed`,{status:i.status,...r}),{status:i.status,body:r,headers:i.headers??new Headers}}catch(a){let s="Unknown error";return a instanceof Error&&(a.message.includes("timed out")?s="request took too long to complete":s=a.message),{status:500,body:{message:s},headers:new Headers}}}}function k$(t,e,a=1e4){return CZ(t,{baseUrl:e,jsonQuery:!0,api:TN(a),baseHeaders:{Accept:"application/json"}})}var St;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function a(n){throw new Error}t.assertNever=a,t.arrayToEnum=n=>{let i={};for(let r of n)i[r]=r;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),r={};for(let o of i)r[o]=n[o];return t.objectValues(r)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.push(r);return i},t.find=(n,i)=>{for(let r of n)if(i(r))return r},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(r=>typeof r=="string"?`'${r}'`:r).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(St||(St={}));var n0;(function(t){t.mergeShapes=(e,a)=>({...e,...a})})(n0||(n0={}));var ne=St.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zr=t=>{switch(typeof t){case"undefined":return ne.undefined;case"string":return ne.string;case"number":return isNaN(t)?ne.nan:ne.number;case"boolean":return ne.boolean;case"function":return ne.function;case"bigint":return ne.bigint;case"symbol":return ne.symbol;case"object":return Array.isArray(t)?ne.array:t===null?ne.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ne.promise:typeof Map<"u"&&t instanceof Map?ne.map:typeof Set<"u"&&t instanceof Set?ne.set:typeof Date<"u"&&t instanceof Date?ne.date:ne.object;default:return ne.unknown}},N=St.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),SN=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Sn=class x$ extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let a=e||function(i){return i.message},s={_errors:[]},n=i=>{for(let r of i.issues)if(r.code==="invalid_union")r.unionErrors.map(n);else if(r.code==="invalid_return_type")n(r.returnTypeError);else if(r.code==="invalid_arguments")n(r.argumentsError);else if(r.path.length===0)s._errors.push(a(r));else{let o=s,l=0;for(;l<r.path.length;){let c=r.path[l];l===r.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(a(r))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),s}static assert(e){if(!(e instanceof x$))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,St.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){let a={},s=[];for(let n of this.issues)n.path.length>0?(a[n.path[0]]=a[n.path[0]]||[],a[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:a}}get formErrors(){return this.flatten()}};Sn.create=t=>new Sn(t);var Sl=(t,e)=>{let a;switch(t.code){case N.invalid_type:t.received===ne.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case N.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,St.jsonStringifyReplacer)}`;break;case N.unrecognized_keys:a=`Unrecognized key(s) in object: ${St.joinValues(t.keys,", ")}`;break;case N.invalid_union:a="Invalid input";break;case N.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${St.joinValues(t.options)}`;break;case N.invalid_enum_value:a=`Invalid enum value. Expected ${St.joinValues(t.options)}, received '${t.received}'`;break;case N.invalid_arguments:a="Invalid function arguments";break;case N.invalid_return_type:a="Invalid function return type";break;case N.invalid_date:a="Invalid date";break;case N.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:St.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case N.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case N.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case N.custom:a="Invalid input";break;case N.invalid_intersection_types:a="Intersection results could not be merged";break;case N.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case N.not_finite:a="Number must be finite";break;default:a=e.defaultError,St.assertNever(t)}return{message:a}},C$=Sl;function $N(t){C$=t}function ty(){return C$}var ay=t=>{let{data:e,path:a,errorMaps:s,issueData:n}=t,i=[...a,...n.path||[]],r={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="",l=s.filter(c=>!!c).slice().reverse();for(let c of l)o=c(r,{data:e,defaultError:o}).message;return{...n,path:i,message:o}},AN=[];function G(t,e){let a=ty(),s=ay({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===Sl?void 0:Sl].filter(n=>!!n)});t.common.issues.push(s)}var ys=class T${constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){let s=[];for(let n of a){if(n.status==="aborted")return qe;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,a){let s=[];for(let n of a){let i=await n.key,r=await n.value;s.push({key:i,value:r})}return T$.mergeObjectSync(e,s)}static mergeObjectSync(e,a){let s={};for(let n of a){let{key:i,value:r}=n;if(i.status==="aborted"||r.status==="aborted")return qe;i.status==="dirty"&&e.dirty(),r.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof r.value<"u"||n.alwaysSet)&&(s[i.value]=r.value)}return{status:e.value,value:s}}},qe=Object.freeze({status:"aborted"}),sy=t=>({status:"dirty",value:t}),Qa=t=>({status:"valid",value:t}),i0=t=>t.status==="aborted",r0=t=>t.status==="dirty",Qc=t=>t.status==="valid",Yc=t=>typeof Promise<"u"&&t instanceof Promise;function ny(t,e,a,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function S$(t,e,a,s,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,a),a}var ge;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ge||(ge={}));var Ju,Xu,Ci=class{constructor(e,a,s,n){this._cachedPath=[],this.parent=e,this.data=a,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},QC=(t,e)=>{if(Qc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let a=new Sn(t.common.issues);return this._error=a,this._error}}};function Xe(t){if(!t)return{};let{errorMap:e,invalid_type_error:a,required_error:s,description:n}=t;if(e&&(a||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,r)=>{var o,l;let{message:c}=t;return i.code==="invalid_enum_value"?{message:c??r.defaultError}:typeof r.data>"u"?{message:(o=c??s)!==null&&o!==void 0?o:r.defaultError}:i.code!=="invalid_type"?{message:r.defaultError}:{message:(l=c??a)!==null&&l!==void 0?l:r.defaultError}},description:n}}var ot=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Zr(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:Zr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ys,ctx:{common:e.parent.common,data:e.data,parsedType:Zr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let a=this._parse(e);if(Yc(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){let a=this._parse(e);return Promise.resolve(a)}parse(e,a){let s=this.safeParse(e,a);if(s.success)return s.data;throw s.error}safeParse(e,a){var s;let n={common:{issues:[],async:(s=a==null?void 0:a.async)!==null&&s!==void 0?s:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return QC(n,i)}async parseAsync(e,a){let s=await this.safeParseAsync(e,a);if(s.success)return s.data;throw s.error}async safeParseAsync(e,a){let s={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zr(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(Yc(n)?n:Promise.resolve(n));return QC(s,i)}refine(e,a){let s=n=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(n):a;return this._refinement((n,i)=>{let r=e(n),o=()=>i.addIssue({code:N.custom,...s(n)});return typeof Promise<"u"&&r instanceof Promise?r.then(l=>l?!0:(o(),!1)):r?!0:(o(),!1)})}refinement(e,a){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof a=="function"?a(s,n):a),!1))}_refinement(e){return new jn({schema:this,typeName:Me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return fi.create(this,this._def)}nullable(){return no.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return md.create(this,this._def)}promise(){return Ll.create(this,this._def)}or(e){return np.create([this,e],this._def)}and(e){return ip.create(this,e,this._def)}transform(e){return new jn({...Xe(this._def),schema:this,typeName:Me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let a=typeof e=="function"?e:()=>e;return new lp({...Xe(this._def),innerType:this,defaultValue:a,typeName:Me.ZodDefault})}brand(){return new Ak({typeName:Me.ZodBranded,type:this,...Xe(this._def)})}catch(e){let a=typeof e=="function"?e:()=>e;return new up({...Xe(this._def),innerType:this,catchValue:a,typeName:Me.ZodCatch})}describe(e){let a=this.constructor;return new a({...this._def,description:e})}pipe(e){return Lk.create(this,e)}readonly(){return cp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},LN=/^c[^\s-]{8,}$/i,MN=/^[0-9a-z]+$/,EN=/^[0-9A-HJKMNP-TV-Z]{26}$/,ON=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,IN=/^[a-z0-9_-]{21}$/i,PN=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ZN=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,NN="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",lw,RN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,jN=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,DN=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$$="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",BN=new RegExp(`^${$$}$`);function A$(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function qN(t){return new RegExp(`^${A$(t)}$`)}function L$(t){let e=`${$$}T${A$(t)}`,a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function WN(t,e){return!!((e==="v4"||!e)&&RN.test(t)||(e==="v6"||!e)&&jN.test(t))}var $l=class ec extends ot{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ne.string){let n=this._getOrReturnCtx(e);return G(n,{code:N.invalid_type,expected:ne.string,received:n.parsedType}),qe}let a=new ys,s;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:N.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="max")e.data.length>n.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:N.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="length"){let i=e.data.length>n.value,r=e.data.length<n.value;(i||r)&&(s=this._getOrReturnCtx(e,s),i?G(s,{code:N.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):r&&G(s,{code:N.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),a.dirty())}else if(n.kind==="email")ZN.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"email",code:N.invalid_string,message:n.message}),a.dirty());else if(n.kind==="emoji")lw||(lw=new RegExp(NN,"u")),lw.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"emoji",code:N.invalid_string,message:n.message}),a.dirty());else if(n.kind==="uuid")ON.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"uuid",code:N.invalid_string,message:n.message}),a.dirty());else if(n.kind==="nanoid")IN.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"nanoid",code:N.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid")LN.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"cuid",code:N.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid2")MN.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"cuid2",code:N.invalid_string,message:n.message}),a.dirty());else if(n.kind==="ulid")EN.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"ulid",code:N.invalid_string,message:n.message}),a.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),G(s,{validation:"url",code:N.invalid_string,message:n.message}),a.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"regex",code:N.invalid_string,message:n.message}),a.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(s=this._getOrReturnCtx(e,s),G(s,{code:N.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),a.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(s=this._getOrReturnCtx(e,s),G(s,{code:N.invalid_string,validation:{startsWith:n.value},message:n.message}),a.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(s=this._getOrReturnCtx(e,s),G(s,{code:N.invalid_string,validation:{endsWith:n.value},message:n.message}),a.dirty()):n.kind==="datetime"?L$(n).test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:N.invalid_string,validation:"datetime",message:n.message}),a.dirty()):n.kind==="date"?BN.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:N.invalid_string,validation:"date",message:n.message}),a.dirty()):n.kind==="time"?qN(n).test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:N.invalid_string,validation:"time",message:n.message}),a.dirty()):n.kind==="duration"?PN.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"duration",code:N.invalid_string,message:n.message}),a.dirty()):n.kind==="ip"?WN(e.data,n.version)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"ip",code:N.invalid_string,message:n.message}),a.dirty()):n.kind==="base64"?DN.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"base64",code:N.invalid_string,message:n.message}),a.dirty()):St.assertNever(n);return{status:a.value,value:e.data}}_regex(e,a,s){return this.refinement(n=>e.test(n),{validation:a,code:N.invalid_string,...ge.errToObj(s)})}_addCheck(e){return new ec({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ge.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ge.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ge.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ge.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ge.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ge.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ge.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ge.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ge.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ge.errToObj(e)})}datetime(e){var a,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(a=e==null?void 0:e.offset)!==null&&a!==void 0?a:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...ge.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ge.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ge.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,...ge.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,...ge.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,...ge.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,...ge.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,...ge.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,...ge.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,...ge.errToObj(a)})}nonempty(e){return this.min(1,ge.errToObj(e))}trim(){return new ec({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ec({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ec({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};$l.create=t=>{var e;return new $l({checks:[],typeName:Me.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Xe(t)})};function FN(t,e){let a=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=a>s?a:s,i=parseInt(t.toFixed(n).replace(".","")),r=parseInt(e.toFixed(n).replace(".",""));return i%r/Math.pow(10,n)}var Jc=class o0 extends ot{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ne.number){let n=this._getOrReturnCtx(e);return G(n,{code:N.invalid_type,expected:ne.number,received:n.parsedType}),qe}let a,s=new ys;for(let n of this._def.checks)n.kind==="int"?St.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{code:N.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),G(a,{code:N.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),G(a,{code:N.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="multipleOf"?FN(e.data,n.value)!==0&&(a=this._getOrReturnCtx(e,a),G(a,{code:N.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),G(a,{code:N.not_finite,message:n.message}),s.dirty()):St.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,ge.toString(a))}gt(e,a){return this.setLimit("min",e,!1,ge.toString(a))}lte(e,a){return this.setLimit("max",e,!0,ge.toString(a))}lt(e,a){return this.setLimit("max",e,!1,ge.toString(a))}setLimit(e,a,s,n){return new o0({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:ge.toString(n)}]})}_addCheck(e){return new o0({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ge.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ge.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ge.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ge.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ge.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:ge.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:ge.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ge.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ge.toString(e)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&St.isInteger(e.value))}get isFinite(){let e=null,a=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(a===null||s.value>a)&&(a=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(a)&&Number.isFinite(e)}};Jc.create=t=>new Jc({checks:[],typeName:Me.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});var Xc=class d0 extends ot{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ne.bigint){let n=this._getOrReturnCtx(e);return G(n,{code:N.invalid_type,expected:ne.bigint,received:n.parsedType}),qe}let a,s=new ys;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),G(a,{code:N.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),G(a,{code:N.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),G(a,{code:N.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):St.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,ge.toString(a))}gt(e,a){return this.setLimit("min",e,!1,ge.toString(a))}lte(e,a){return this.setLimit("max",e,!0,ge.toString(a))}lt(e,a){return this.setLimit("max",e,!1,ge.toString(a))}setLimit(e,a,s,n){return new d0({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:ge.toString(n)}]})}_addCheck(e){return new d0({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ge.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ge.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ge.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ge.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:ge.toString(a)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};Xc.create=t=>{var e;return new Xc({checks:[],typeName:Me.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Xe(t)})};var ep=class extends ot{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ne.boolean){let a=this._getOrReturnCtx(e);return G(a,{code:N.invalid_type,expected:ne.boolean,received:a.parsedType}),qe}return Qa(e.data)}};ep.create=t=>new ep({typeName:Me.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});var tp=class M$ extends ot{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ne.date){let n=this._getOrReturnCtx(e);return G(n,{code:N.invalid_type,expected:ne.date,received:n.parsedType}),qe}if(isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return G(n,{code:N.invalid_date}),qe}let a=new ys,s;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:N.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),a.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:N.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),a.dirty()):St.assertNever(n);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new M$({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:ge.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:ge.toString(a)})}get minDate(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}};tp.create=t=>new tp({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Me.ZodDate,...Xe(t)});var iy=class extends ot{_parse(e){if(this._getType(e)!==ne.symbol){let a=this._getOrReturnCtx(e);return G(a,{code:N.invalid_type,expected:ne.symbol,received:a.parsedType}),qe}return Qa(e.data)}};iy.create=t=>new iy({typeName:Me.ZodSymbol,...Xe(t)});var ap=class extends ot{_parse(e){if(this._getType(e)!==ne.undefined){let a=this._getOrReturnCtx(e);return G(a,{code:N.invalid_type,expected:ne.undefined,received:a.parsedType}),qe}return Qa(e.data)}};ap.create=t=>new ap({typeName:Me.ZodUndefined,...Xe(t)});var sp=class extends ot{_parse(e){if(this._getType(e)!==ne.null){let a=this._getOrReturnCtx(e);return G(a,{code:N.invalid_type,expected:ne.null,received:a.parsedType}),qe}return Qa(e.data)}};sp.create=t=>new sp({typeName:Me.ZodNull,...Xe(t)});var Al=class extends ot{constructor(){super(...arguments),this._any=!0}_parse(e){return Qa(e.data)}};Al.create=t=>new Al({typeName:Me.ZodAny,...Xe(t)});var Vo=class extends ot{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qa(e.data)}};Vo.create=t=>new Vo({typeName:Me.ZodUnknown,...Xe(t)});var ar=class extends ot{_parse(e){let a=this._getOrReturnCtx(e);return G(a,{code:N.invalid_type,expected:ne.never,received:a.parsedType}),qe}};ar.create=t=>new ar({typeName:Me.ZodNever,...Xe(t)});var ry=class extends ot{_parse(e){if(this._getType(e)!==ne.undefined){let a=this._getOrReturnCtx(e);return G(a,{code:N.invalid_type,expected:ne.void,received:a.parsedType}),qe}return Qa(e.data)}};ry.create=t=>new ry({typeName:Me.ZodVoid,...Xe(t)});var md=class wg extends ot{_parse(e){let{ctx:a,status:s}=this._processInputParams(e),n=this._def;if(a.parsedType!==ne.array)return G(a,{code:N.invalid_type,expected:ne.array,received:a.parsedType}),qe;if(n.exactLength!==null){let r=a.data.length>n.exactLength.value,o=a.data.length<n.exactLength.value;(r||o)&&(G(a,{code:r?N.too_big:N.too_small,minimum:o?n.exactLength.value:void 0,maximum:r?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&a.data.length<n.minLength.value&&(G(a,{code:N.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&a.data.length>n.maxLength.value&&(G(a,{code:N.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),a.common.async)return Promise.all([...a.data].map((r,o)=>n.type._parseAsync(new Ci(a,r,a.path,o)))).then(r=>ys.mergeArray(s,r));let i=[...a.data].map((r,o)=>n.type._parseSync(new Ci(a,r,a.path,o)));return ys.mergeArray(s,i)}get element(){return this._def.type}min(e,a){return new wg({...this._def,minLength:{value:e,message:ge.toString(a)}})}max(e,a){return new wg({...this._def,maxLength:{value:e,message:ge.toString(a)}})}length(e,a){return new wg({...this._def,exactLength:{value:e,message:ge.toString(a)}})}nonempty(e){return this.min(1,e)}};md.create=(t,e)=>new md({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Me.ZodArray,...Xe(e)});function Gd(t){if(t instanceof en){let e={};for(let a in t.shape){let s=t.shape[a];e[a]=fi.create(Gd(s))}return new en({...t._def,shape:()=>e})}else return t instanceof md?new md({...t._def,type:Gd(t.element)}):t instanceof fi?fi.create(Gd(t.unwrap())):t instanceof no?no.create(Gd(t.unwrap())):t instanceof so?so.create(t.items.map(e=>Gd(e))):t}var en=class pn extends ot{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),a=St.objectKeys(e);return this._cached={shape:e,keys:a}}_parse(e){if(this._getType(e)!==ne.object){let l=this._getOrReturnCtx(e);return G(l,{code:N.invalid_type,expected:ne.object,received:l.parsedType}),qe}let{status:a,ctx:s}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof ar&&this._def.unknownKeys==="strip"))for(let l in s.data)i.includes(l)||r.push(l);let o=[];for(let l of i){let c=n[l],m=s.data[l];o.push({key:{status:"valid",value:l},value:c._parse(new Ci(s,m,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ar){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of r)o.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(l==="strict")r.length>0&&(G(s,{code:N.unrecognized_keys,keys:r}),a.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of r){let m=s.data[c];o.push({key:{status:"valid",value:c},value:l._parse(new Ci(s,m,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of o){let m=await c.key,f=await c.value;l.push({key:m,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>ys.mergeObjectSync(a,l)):ys.mergeObjectSync(a,o)}get shape(){return this._def.shape()}strict(e){return ge.errToObj,new pn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,s)=>{var n,i,r,o;let l=(r=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,a,s).message)!==null&&r!==void 0?r:s.defaultError;return a.code==="unrecognized_keys"?{message:(o=ge.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new pn({...this._def,unknownKeys:"strip"})}passthrough(){return new pn({...this._def,unknownKeys:"passthrough"})}extend(e){return new pn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new pn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Me.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new pn({...this._def,catchall:e})}pick(e){let a={};return St.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(a[s]=this.shape[s])}),new pn({...this._def,shape:()=>a})}omit(e){let a={};return St.objectKeys(this.shape).forEach(s=>{e[s]||(a[s]=this.shape[s])}),new pn({...this._def,shape:()=>a})}deepPartial(){return Gd(this)}partial(e){let a={};return St.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?a[s]=n:a[s]=n.optional()}),new pn({...this._def,shape:()=>a})}required(e){let a={};return St.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])a[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof fi;)n=n._def.innerType;a[s]=n}}),new pn({...this._def,shape:()=>a})}keyof(){return N$(St.objectKeys(this.shape))}};en.create=(t,e)=>new en({shape:()=>t,unknownKeys:"strip",catchall:ar.create(),typeName:Me.ZodObject,...Xe(e)});en.strictCreate=(t,e)=>new en({shape:()=>t,unknownKeys:"strict",catchall:ar.create(),typeName:Me.ZodObject,...Xe(e)});en.lazycreate=(t,e)=>new en({shape:t,unknownKeys:"strip",catchall:ar.create(),typeName:Me.ZodObject,...Xe(e)});var np=class extends ot{_parse(e){let{ctx:a}=this._processInputParams(e),s=this._def.options;function n(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return a.common.issues.push(...o.ctx.common.issues),o.result;let r=i.map(o=>new Sn(o.ctx.common.issues));return G(a,{code:N.invalid_union,unionErrors:r}),qe}if(a.common.async)return Promise.all(s.map(async i=>{let r={...a,common:{...a.common,issues:[]},parent:null};return{result:await i._parseAsync({data:a.data,path:a.path,parent:r}),ctx:r}})).then(n);{let i,r=[];for(let l of s){let c={...a,common:{...a.common,issues:[]},parent:null},m=l._parseSync({data:a.data,path:a.path,parent:c});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:c}),c.common.issues.length&&r.push(c.common.issues)}if(i)return a.common.issues.push(...i.ctx.common.issues),i.result;let o=r.map(l=>new Sn(l));return G(a,{code:N.invalid_union,unionErrors:o}),qe}}get options(){return this._def.options}};np.create=(t,e)=>new np({options:t,typeName:Me.ZodUnion,...Xe(e)});var Cr=t=>t instanceof rp?Cr(t.schema):t instanceof jn?Cr(t.innerType()):t instanceof op?[t.value]:t instanceof Jf?t.options:t instanceof dp?St.objectValues(t.enum):t instanceof lp?Cr(t._def.innerType):t instanceof ap?[void 0]:t instanceof sp?[null]:t instanceof fi?[void 0,...Cr(t.unwrap())]:t instanceof no?[null,...Cr(t.unwrap())]:t instanceof Ak||t instanceof cp?Cr(t.unwrap()):t instanceof up?Cr(t._def.innerType):[],E$=class O$ extends ot{_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ne.object)return G(a,{code:N.invalid_type,expected:ne.object,received:a.parsedType}),qe;let s=this.discriminator,n=a.data[s],i=this.optionsMap.get(n);return i?a.common.async?i._parseAsync({data:a.data,path:a.path,parent:a}):i._parseSync({data:a.data,path:a.path,parent:a}):(G(a,{code:N.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),qe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,s){let n=new Map;for(let i of a){let r=Cr(i.shape[e]);if(!r.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of r){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new O$({typeName:Me.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:n,...Xe(s)})}};function l0(t,e){let a=Zr(t),s=Zr(e);if(t===e)return{valid:!0,data:t};if(a===ne.object&&s===ne.object){let n=St.objectKeys(e),i=St.objectKeys(t).filter(o=>n.indexOf(o)!==-1),r={...t,...e};for(let o of i){let l=l0(t[o],e[o]);if(!l.valid)return{valid:!1};r[o]=l.data}return{valid:!0,data:r}}else if(a===ne.array&&s===ne.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let r=t[i],o=e[i],l=l0(r,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return a===ne.date&&s===ne.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ip=class extends ot{_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=(i,r)=>{if(i0(i)||i0(r))return qe;let o=l0(i.value,r.value);return o.valid?((r0(i)||r0(r))&&a.dirty(),{status:a.value,value:o.data}):(G(s,{code:N.invalid_intersection_types}),qe)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,r])=>n(i,r)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};ip.create=(t,e,a)=>new ip({left:t,right:e,typeName:Me.ZodIntersection,...Xe(a)});var so=class I$ extends ot{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.array)return G(s,{code:N.invalid_type,expected:ne.array,received:s.parsedType}),qe;if(s.data.length<this._def.items.length)return G(s,{code:N.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qe;!this._def.rest&&s.data.length>this._def.items.length&&(G(s,{code:N.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());let n=[...s.data].map((i,r)=>{let o=this._def.items[r]||this._def.rest;return o?o._parse(new Ci(s,i,s.path,r)):null}).filter(i=>!!i);return s.common.async?Promise.all(n).then(i=>ys.mergeArray(a,i)):ys.mergeArray(a,n)}get items(){return this._def.items}rest(e){return new I$({...this._def,rest:e})}};so.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new so({items:t,typeName:Me.ZodTuple,rest:null,...Xe(e)})};var P$=class u0 extends ot{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.object)return G(s,{code:N.invalid_type,expected:ne.object,received:s.parsedType}),qe;let n=[],i=this._def.keyType,r=this._def.valueType;for(let o in s.data)n.push({key:i._parse(new Ci(s,o,s.path,o)),value:r._parse(new Ci(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?ys.mergeObjectAsync(a,n):ys.mergeObjectSync(a,n)}get element(){return this._def.valueType}static create(e,a,s){return a instanceof ot?new u0({keyType:e,valueType:a,typeName:Me.ZodRecord,...Xe(s)}):new u0({keyType:$l.create(),valueType:e,typeName:Me.ZodRecord,...Xe(a)})}},oy=class extends ot{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.map)return G(s,{code:N.invalid_type,expected:ne.map,received:s.parsedType}),qe;let n=this._def.keyType,i=this._def.valueType,r=[...s.data.entries()].map(([o,l],c)=>({key:n._parse(new Ci(s,o,s.path,[c,"key"])),value:i._parse(new Ci(s,l,s.path,[c,"value"]))}));if(s.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of r){let c=await l.key,m=await l.value;if(c.status==="aborted"||m.status==="aborted")return qe;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}})}else{let o=new Map;for(let l of r){let c=l.key,m=l.value;if(c.status==="aborted"||m.status==="aborted")return qe;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}}}};oy.create=(t,e,a)=>new oy({valueType:e,keyType:t,typeName:Me.ZodMap,...Xe(a)});var dy=class c0 extends ot{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.set)return G(s,{code:N.invalid_type,expected:ne.set,received:s.parsedType}),qe;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(G(s,{code:N.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),a.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(G(s,{code:N.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),a.dirty());let i=this._def.valueType;function r(l){let c=new Set;for(let m of l){if(m.status==="aborted")return qe;m.status==="dirty"&&a.dirty(),c.add(m.value)}return{status:a.value,value:c}}let o=[...s.data.values()].map((l,c)=>i._parse(new Ci(s,l,s.path,c)));return s.common.async?Promise.all(o).then(l=>r(l)):r(o)}min(e,a){return new c0({...this._def,minSize:{value:e,message:ge.toString(a)}})}max(e,a){return new c0({...this._def,maxSize:{value:e,message:ge.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}};dy.create=(t,e)=>new dy({valueType:t,minSize:null,maxSize:null,typeName:Me.ZodSet,...Xe(e)});var Z$=class _g extends ot{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ne.function)return G(a,{code:N.invalid_type,expected:ne.function,received:a.parsedType}),qe;function s(o,l){return ay({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,ty(),Sl].filter(c=>!!c),issueData:{code:N.invalid_arguments,argumentsError:l}})}function n(o,l){return ay({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,ty(),Sl].filter(c=>!!c),issueData:{code:N.invalid_return_type,returnTypeError:l}})}let i={errorMap:a.common.contextualErrorMap},r=a.data;if(this._def.returns instanceof Ll){let o=this;return Qa(async function(...l){let c=new Sn([]),m=await o._def.args.parseAsync(l,i).catch(h=>{throw c.addIssue(s(l,h)),c}),f=await Reflect.apply(r,this,m);return await o._def.returns._def.type.parseAsync(f,i).catch(h=>{throw c.addIssue(n(f,h)),c})})}else{let o=this;return Qa(function(...l){let c=o._def.args.safeParse(l,i);if(!c.success)throw new Sn([s(l,c.error)]);let m=Reflect.apply(r,this,c.data),f=o._def.returns.safeParse(m,i);if(!f.success)throw new Sn([n(m,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new _g({...this._def,args:so.create(e).rest(Vo.create())})}returns(e){return new _g({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,s){return new _g({args:e||so.create([]).rest(Vo.create()),returns:a||Vo.create(),typeName:Me.ZodFunction,...Xe(s)})}},rp=class extends ot{get schema(){return this._def.getter()}_parse(e){let{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}};rp.create=(t,e)=>new rp({getter:t,typeName:Me.ZodLazy,...Xe(e)});var op=class extends ot{_parse(e){if(e.data!==this._def.value){let a=this._getOrReturnCtx(e);return G(a,{received:a.data,code:N.invalid_literal,expected:this._def.value}),qe}return{status:"valid",value:e.data}}get value(){return this._def.value}};op.create=(t,e)=>new op({value:t,typeName:Me.ZodLiteral,...Xe(e)});function N$(t,e){return new Jf({values:t,typeName:Me.ZodEnum,...Xe(e)})}var Jf=class p0 extends ot{constructor(){super(...arguments),Ju.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let a=this._getOrReturnCtx(e),s=this._def.values;return G(a,{expected:St.joinValues(s),received:a.parsedType,code:N.invalid_type}),qe}if(ny(this,Ju)||S$(this,Ju,new Set(this._def.values)),!ny(this,Ju).has(e.data)){let a=this._getOrReturnCtx(e),s=this._def.values;return G(a,{received:a.data,code:N.invalid_enum_value,options:s}),qe}return Qa(e.data)}get options(){return this._def.values}get enum(){let e={};for(let a of this._def.values)e[a]=a;return e}get Values(){let e={};for(let a of this._def.values)e[a]=a;return e}get Enum(){let e={};for(let a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return p0.create(e,{...this._def,...a})}exclude(e,a=this._def){return p0.create(this.options.filter(s=>!e.includes(s)),{...this._def,...a})}};Ju=new WeakMap;Jf.create=N$;var dp=class extends ot{constructor(){super(...arguments),Xu.set(this,void 0)}_parse(e){let a=St.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==ne.string&&s.parsedType!==ne.number){let n=St.objectValues(a);return G(s,{expected:St.joinValues(n),received:s.parsedType,code:N.invalid_type}),qe}if(ny(this,Xu)||S$(this,Xu,new Set(St.getValidEnumValues(this._def.values))),!ny(this,Xu).has(e.data)){let n=St.objectValues(a);return G(s,{received:s.data,code:N.invalid_enum_value,options:n}),qe}return Qa(e.data)}get enum(){return this._def.values}};Xu=new WeakMap;dp.create=(t,e)=>new dp({values:t,typeName:Me.ZodNativeEnum,...Xe(e)});var Ll=class extends ot{unwrap(){return this._def.type}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ne.promise&&a.common.async===!1)return G(a,{code:N.invalid_type,expected:ne.promise,received:a.parsedType}),qe;let s=a.parsedType===ne.promise?a.data:Promise.resolve(a.data);return Qa(s.then(n=>this._def.type.parseAsync(n,{path:a.path,errorMap:a.common.contextualErrorMap})))}};Ll.create=(t,e)=>new Ll({type:t,typeName:Me.ZodPromise,...Xe(e)});var jn=class extends ot{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:r=>{G(s,r),r.fatal?a.abort():a.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let r=n.transform(s.data,i);if(s.common.async)return Promise.resolve(r).then(async o=>{if(a.value==="aborted")return qe;let l=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return l.status==="aborted"?qe:l.status==="dirty"||a.value==="dirty"?sy(l.value):l});{if(a.value==="aborted")return qe;let o=this._def.schema._parseSync({data:r,path:s.path,parent:s});return o.status==="aborted"?qe:o.status==="dirty"||a.value==="dirty"?sy(o.value):o}}if(n.type==="refinement"){let r=o=>{let l=n.refinement(o,i);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?qe:(o.status==="dirty"&&a.dirty(),r(o.value),{status:a.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?qe:(o.status==="dirty"&&a.dirty(),r(o.value).then(()=>({status:a.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){let r=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Qc(r))return r;let o=n.transform(r.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(r=>Qc(r)?Promise.resolve(n.transform(r.value,i)).then(o=>({status:a.value,value:o})):r);St.assertNever(n)}};jn.create=(t,e,a)=>new jn({schema:t,typeName:Me.ZodEffects,effect:e,...Xe(a)});jn.createWithPreprocess=(t,e,a)=>new jn({schema:e,effect:{type:"preprocess",transform:t},typeName:Me.ZodEffects,...Xe(a)});var fi=class extends ot{_parse(e){return this._getType(e)===ne.undefined?Qa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};fi.create=(t,e)=>new fi({innerType:t,typeName:Me.ZodOptional,...Xe(e)});var no=class extends ot{_parse(e){return this._getType(e)===ne.null?Qa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};no.create=(t,e)=>new no({innerType:t,typeName:Me.ZodNullable,...Xe(e)});var lp=class extends ot{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return a.parsedType===ne.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:a.path,parent:a})}removeDefault(){return this._def.innerType}};lp.create=(t,e)=>new lp({innerType:t,typeName:Me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Xe(e)});var up=class extends ot{_parse(e){let{ctx:a}=this._processInputParams(e),s={...a,common:{...a.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Yc(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Sn(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Sn(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};up.create=(t,e)=>new up({innerType:t,typeName:Me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Xe(e)});var ly=class extends ot{_parse(e){if(this._getType(e)!==ne.nan){let a=this._getOrReturnCtx(e);return G(a,{code:N.invalid_type,expected:ne.nan,received:a.parsedType}),qe}return{status:"valid",value:e.data}}};ly.create=t=>new ly({typeName:Me.ZodNaN,...Xe(t)});var zN=Symbol("zod_brand"),Ak=class extends ot{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return this._def.type._parse({data:s,path:a.path,parent:a})}unwrap(){return this._def.type}},Lk=class R$ extends ot{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?qe:n.status==="dirty"?(a.dirty(),sy(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?qe:n.status==="dirty"?(a.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,a){return new R$({in:e,out:a,typeName:Me.ZodPipeline})}},cp=class extends ot{_parse(e){let a=this._def.innerType._parse(e),s=n=>(Qc(n)&&(n.value=Object.freeze(n.value)),n);return Yc(a)?a.then(n=>s(n)):s(a)}unwrap(){return this._def.innerType}};cp.create=(t,e)=>new cp({innerType:t,typeName:Me.ZodReadonly,...Xe(e)});function j$(t,e={},a){return t?Al.create().superRefine((s,n)=>{var i,r;if(!t(s)){let o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,l=(r=(i=o.fatal)!==null&&i!==void 0?i:a)!==null&&r!==void 0?r:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:l})}}):Al.create()}var HN={object:en.lazycreate},Me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Me||(Me={}));var UN=(t,e={message:`Input not instance of ${t.name}`})=>j$(a=>a instanceof t,e),D$=$l.create,B$=Jc.create,VN=ly.create,KN=Xc.create,q$=ep.create,GN=tp.create,QN=iy.create,YN=ap.create,JN=sp.create,XN=Al.create,eR=Vo.create,tR=ar.create,aR=ry.create,sR=md.create,nR=en.create,iR=en.strictCreate,rR=np.create,oR=E$.create,dR=ip.create,lR=so.create,uR=P$.create,cR=oy.create,pR=dy.create,mR=Z$.create,fR=rp.create,m0=op.create,hR=Jf.create,gR=dp.create,yR=Ll.create,YC=jn.create,vR=fi.create,bR=no.create,wR=jn.createWithPreprocess,_R=Lk.create,kR=()=>D$().optional(),xR=()=>B$().optional(),CR=()=>q$().optional(),TR={string:t=>$l.create({...t,coerce:!0}),number:t=>Jc.create({...t,coerce:!0}),boolean:t=>ep.create({...t,coerce:!0}),bigint:t=>Xc.create({...t,coerce:!0}),date:t=>tp.create({...t,coerce:!0})},SR=qe,p=Object.freeze({__proto__:null,defaultErrorMap:Sl,setErrorMap:$N,getErrorMap:ty,makeIssue:ay,EMPTY_PATH:AN,addIssueToContext:G,ParseStatus:ys,INVALID:qe,DIRTY:sy,OK:Qa,isAborted:i0,isDirty:r0,isValid:Qc,isAsync:Yc,get util(){return St},get objectUtil(){return n0},ZodParsedType:ne,getParsedType:Zr,ZodType:ot,datetimeRegex:L$,ZodString:$l,ZodNumber:Jc,ZodBigInt:Xc,ZodBoolean:ep,ZodDate:tp,ZodSymbol:iy,ZodUndefined:ap,ZodNull:sp,ZodAny:Al,ZodUnknown:Vo,ZodNever:ar,ZodVoid:ry,ZodArray:md,ZodObject:en,ZodUnion:np,ZodDiscriminatedUnion:E$,ZodIntersection:ip,ZodTuple:so,ZodRecord:P$,ZodMap:oy,ZodSet:dy,ZodFunction:Z$,ZodLazy:rp,ZodLiteral:op,ZodEnum:Jf,ZodNativeEnum:dp,ZodPromise:Ll,ZodEffects:jn,ZodTransformer:jn,ZodOptional:fi,ZodNullable:no,ZodDefault:lp,ZodCatch:up,ZodNaN:ly,BRAND:zN,ZodBranded:Ak,ZodPipeline:Lk,ZodReadonly:cp,custom:j$,Schema:ot,ZodSchema:ot,late:HN,get ZodFirstPartyTypeKind(){return Me},coerce:TR,any:XN,array:sR,bigint:KN,boolean:q$,date:GN,discriminatedUnion:oR,effect:YC,enum:hR,function:mR,instanceof:UN,intersection:dR,lazy:fR,literal:m0,map:cR,nan:VN,nativeEnum:gR,never:tR,null:JN,nullable:bR,number:B$,object:nR,oboolean:CR,onumber:xR,optional:vR,ostring:kR,pipeline:_R,preprocess:wR,promise:yR,record:uR,set:pR,strictObject:iR,string:D$,symbol:QN,transformer:YC,tuple:lR,undefined:YN,union:rR,unknown:eR,void:aR,NEVER:SR,ZodIssueCode:N,quotelessJson:SN,ZodError:Sn}),uw=t=>typeof(t==null?void 0:t.passthrough)=="function",$R=(t,e)=>uw(t)?uw(e)?t.merge(e):t:uw(e)?e:Object.assign({},t,e);p.object({name:p.literal("ZodError"),issues:p.array(p.object({path:p.array(p.union([p.string(),p.number()])),message:p.string().optional(),code:p.nativeEnum(p.ZodIssueCode)}).catchall(p.any()))});var AR=Symbol("ContractNoBody"),LR=t=>"method"in t&&"path"in t,W$=(t,e)=>Object.fromEntries(Object.entries(t).map(([a,s])=>{var n,i,r;return LR(s)?[a,{...s,path:e!=null&&e.pathPrefix?e.pathPrefix+s.path:s.path,headers:$R(e==null?void 0:e.baseHeaders,s.headers),strictStatusCodes:(n=s.strictStatusCodes)!==null&&n!==void 0?n:e==null?void 0:e.strictStatusCodes,validateResponseOnClient:(i=s.validateResponseOnClient)!==null&&i!==void 0?i:e==null?void 0:e.validateResponseOnClient,responses:{...e==null?void 0:e.commonResponses,...s.responses},metadata:e!=null&&e.metadata?{...e==null?void 0:e.metadata,...(r=s.metadata)!==null&&r!==void 0?r:{}}:s.metadata}]:[a,W$(s,e)]})),cw=Symbol("ContractPlainType"),Ss=()=>({router:(t,e)=>W$(t,e),query:t=>t,mutation:t=>t,responses:t=>t,response:()=>cw,body:()=>cw,type:()=>cw,otherResponse:({contentType:t,body:e})=>({contentType:t,body:e}),noBody:()=>AR}),De=p.object({message:p.string()}),MR=De.extend({validationErrors:p.array(p.string())}),dl=De,JC=dl.extend({errorId:p.string(),uid:p.string().optional()});function Ed(t){return De.extend({data:t.nullable()})}function kt(t){return De.extend({data:t})}var Ds={400:dl.describe("Generic client error"),401:dl.describe("Authentication required but not provided or invalid"),403:dl.describe("Operation not permitted"),422:MR.describe("Request validation failed"),429:dl.describe("Rate limit exceeded"),500:JC.describe("Generic server error"),503:JC.describe("Endpoint disabled or server is under maintenance")},hi=p.string().regex(/^\d+$/,'Needs to be a number or a number represented as a string e.g. "10".').or(p.number().transform(String)),Ml=()=>p.string().regex(/^[a-zA-Z0-9_]+$/),Zt=Ml(),ER=Ml().max(50),ka=p.string().max(50).regex(/^[a-zA-Z0-9_+]+$/,"Can only contain letters [a-zA-Z0-9_+]"),XC=p.string().nullable().optional().transform(t=>t??void 0),Zc=p.number().nonnegative().max(100),eT=p.number().nonnegative().max(420),OR=p.enum(["repeat","random","shuffle"]),IR=p.enum(["word","time","section"]),PR=p.object({uid:Zt}).strict(),ZR=kt(p.object({banned:p.boolean()})).strict(),NR=p.object({reports:p.array(p.object({reportId:p.string()}).strict()).nonempty()}).strict(),RR=p.object({reports:p.array(p.object({reportId:p.string(),reason:p.string().optional()}).strict()).nonempty()}).strict(),jR=p.object({email:p.string().email()}).strict(),DR=Ss(),BR=DR.router({test:{summary:"test permission",description:"Check for admin permission for the current user",method:"GET",path:"",responses:{200:De}},toggleBan:{summary:"toggle user ban",description:"Ban an unbanned user or unban a banned user.",method:"POST",path:"/toggleBan",body:PR,responses:{200:ZR}},acceptReports:{summary:"accept reports",description:"Accept one or many reports",method:"POST",path:"/report/accept",body:NR,responses:{200:De}},rejectReports:{summary:"reject reports",description:"Reject one or many reports",method:"POST",path:"/report/reject",body:RR,responses:{200:De}},sendForgotPasswordEmail:{summary:"send forgot password email",description:"Send a forgot password email to the given user email",method:"POST",path:"/sendForgotPasswordEmail",body:jR,responses:{200:De}}},{pathPrefix:"/admin",strictStatusCodes:!0,metadata:{openApiTags:"admin",authenticationOptions:{noCache:!0},rateLimit:"adminLimit",requirePermission:"admin",requireConfiguration:{path:"admin.endpointsEnabled",invalidMessage:"Admin endpoints are currently disabled."}},commonResponses:Ds}),F$=p.object({name:p.string().regex(/^[0-9a-zA-Z_.-]+$/).max(20),enabled:p.boolean()}),z$=F$.extend({createdOn:p.number().min(0),modifiedOn:p.number().min(0),lastUsedOn:p.number().min(0).or(p.literal(-1))}),qR=p.record(Zt,z$),WR=kt(qR),H$=F$,FR=kt(p.object({apeKeyId:Zt,apeKey:p.string().base64(),apeKeyDetails:z$})),zR=H$.partial(),tT=p.object({apeKeyId:Zt}),aT=Ss(),HR=aT.router({get:{summary:"get ape keys",description:"Get ape keys of the current user.",method:"GET",path:"",responses:{200:WR},metadata:{rateLimit:"apeKeysGet"}},add:{summary:"add ape key",description:"Add an ape key for the current user.",method:"POST",path:"",body:H$.strict(),responses:{200:FR},metadata:{rateLimit:"apeKeysGenerate"}},save:{summary:"update ape key",description:"Update an existing ape key for the current user.",method:"PATCH",path:"/:apeKeyId",pathParams:tT,body:zR.strict(),responses:{200:De},metadata:{rateLimit:"apeKeysGenerate"}},delete:{summary:"delete ape key",description:"Delete ape key by id.",method:"DELETE",path:"/:apeKeyId",pathParams:tT,body:aT.noBody(),responses:{200:De},metadata:{rateLimit:"apeKeysGenerate"}}},{pathPrefix:"/ape-keys",strictStatusCodes:!0,metadata:{openApiTags:"ape-keys",requirePermission:"canManageApeKeys",requireConfiguration:{path:"apeKeys.endpointsEnabled",invalidMessage:"ApeKeys are currently disabled."}},commonResponses:Ds}),Mk=p.enum(["normal","expert","master"]),Qd=p.object({acc:p.number().nonnegative().max(100),consistency:p.number().nonnegative().max(100),difficulty:Mk,lazyMode:p.boolean().optional(),language:p.string().max(100).regex(/[\w+]+/),punctuation:p.boolean().optional(),numbers:p.boolean().optional(),raw:p.number().nonnegative(),wpm:p.number().nonnegative(),timestamp:p.number().nonnegative()}),cb=p.object({time:p.record(hi.describe("Number of seconds as string"),p.array(Qd)),words:p.record(hi.describe("Number of words as string"),p.array(Qd)),quote:p.record(hi,p.array(Qd)),custom:p.record(p.literal("custom"),p.array(Qd)),zen:p.record(p.literal("zen"),p.array(Qd))}),UR=p.union([p.literal("10"),p.literal("25"),p.literal("50"),p.literal("100")]),VR=p.union([p.literal("15"),p.literal("30"),p.literal("60"),p.literal("120")]),KR=p.union([p.literal("short"),p.literal("medium"),p.literal("long"),p.literal("thicc")]),Ao=cb.keyof(),Od=p.union([hi,m0("zen"),m0("custom")],{errorMap:()=>({message:'Needs to be either a number, "zen" or "custom".'})}),GR=p.enum(["off","slow","medium","fast"]),QR=p.enum(["off","esc","tab","enter"]),YR=p.union([p.literal(-3),p.literal(-2),p.literal(-1),p.literal(0),p.literal(1),p.literal(2),p.literal(3)]),JR=p.array(YR),sT=p.enum(["off","default","block","outline","underline","carrot","banana"]),XR=p.enum(["off","on","max"]),ej=p.enum(["off","below","replace"]),tj=p.enum(["off","bar","text","mini"]),pw=p.enum(["off","text","mini"]),aj=p.enum(["off","on","fav","light","dark","custom"]),sj=p.enum(["black","sub","text","main"]),nj=p.enum(["0.25","0.5","0.75","1"]),ij=p.enum(["off","word","letter"]),rj=p.enum(["off","static","react","next"]),oj=p.enum(["staggered","alice","matrix","split","split_matrix","steno","steno_matrix"]),dj=p.enum(["lowercase","uppercase","blank","dynamic"]),lj=p.enum(["always","layout","never"]),uj=p.number().min(.5).max(3.5).step(.1),cj=p.enum(["manual","on"]),pj=p.enum(["off","1","2","3","4"]),mj=p.enum(["off","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"]),fj=p.number().min(0).max(1),hj=p.enum(["off","average","pb","tagPb","last","custom","daily"]),gj=p.tuple([p.enum(["on","off"]),p.enum(["on","off"]),p.enum(["on","off"]),p.enum(["on","off"])]),yj=p.enum(["off","custom"]),vj=p.enum(["off","letter","word","next_word","next_two_words","next_three_words"]),bj=p.enum(["off","letter","word"]),wj=p.enum(["wpm","cpm","wps","cps","wph"]),_j=p.enum(["off","result","on","sellout"]),kj=p.enum(["off","custom"]),xj=p.enum(["off","typing"]),Cj=p.enum(["off","on","keymap"]),Tj=p.enum(["cover","contain","max"]),Sj=p.tuple([p.number(),p.number(),p.number(),p.number()]),$j=p.string().regex(/^[0-9a-zA-Z_#]+$/),Aj=p.enum(["off","1","2","3","4"]),Lj=p.enum(["off","fixed","flex"]),Mj=p.enum(["off","speed","acc","both"]),Kn=p.string().regex(/^#([\da-f]{3}){1,2}$/i),U$=Mk,Ek=p.tuple([Kn,Kn,Kn,Kn,Kn,Kn,Kn,Kn,Kn,Kn]),Ej=p.array(Ml().max(50)),V$=p.string().max(100).regex(/[\w#]+/),Oj=p.number().nonnegative(),Ij=p.number().nonnegative(),Pj=p.number().nonnegative().max(100),Zj=p.number().nonnegative(),Nj=p.number().int().nonnegative(),Rj=p.number().int().nonnegative(),jj=p.string().max(50).regex(/^[a-zA-Z0-9_\-+.]+$/),mw=Ml().max(50),Dj=p.string().max(50).regex(/^[a-zA-Z0-9\-_]+$/gi),Bj=p.string().max(50).regex(/^[a-zA-Z0-9\-_]+$/gi),qj=p.number().positive(),Wj=p.number().min(20).max(1e3).or(p.literal(0)),Fj=p.string().regex(/(https|http):\/\/(www\.|).+\..+\/.+(\.png|\.gif|\.jpeg|\.jpg)/gi).or(p.literal("")),zj=p.object({theme:mw,themeLight:mw,themeDark:mw,autoSwitchTheme:p.boolean(),customTheme:p.boolean(),customThemeColors:Ek,favThemes:Ej,showKeyTips:p.boolean(),smoothCaret:GR,quickRestart:QR,punctuation:p.boolean(),numbers:p.boolean(),words:Rj,time:Nj,mode:Ao,quoteLength:JR,language:ka,fontSize:qj,freedomMode:p.boolean(),difficulty:U$,blindMode:p.boolean(),quickEnd:p.boolean(),caretStyle:sT,paceCaretStyle:sT,flipTestColors:p.boolean(),layout:Bj,funbox:V$,confidenceMode:XR,indicateTypos:ej,timerStyle:tj,liveSpeedStyle:pw,liveAccStyle:pw,liveBurstStyle:pw,colorfulMode:p.boolean(),randomTheme:aj,timerColor:sj,timerOpacity:nj,stopOnError:ij,showAllLines:p.boolean(),keymapMode:rj,keymapStyle:oj,keymapLegendStyle:dj,keymapLayout:Dj,keymapShowTopRow:lj,keymapSize:uj,fontFamily:jj,smoothLineScroll:p.boolean(),alwaysShowDecimalPlaces:p.boolean(),alwaysShowWordsHistory:p.boolean(),singleListCommandLine:cj,capsLockWarning:p.boolean(),playSoundOnError:pj,playSoundOnClick:mj,soundVolume:fj,startGraphsAtZero:p.boolean(),showOutOfFocusWarning:p.boolean(),paceCaret:hj,paceCaretCustomSpeed:Oj,repeatedPace:p.boolean(),accountChart:gj,minWpm:yj,minWpmCustomSpeed:Ij,highlightMode:vj,tapeMode:bj,typingSpeedUnit:wj,ads:_j,hideExtraLetters:p.boolean(),strictSpace:p.boolean(),minAcc:kj,minAccCustom:Pj,monkey:p.boolean(),repeatQuotes:xj,oppositeShiftMode:Cj,customBackground:Fj,customBackgroundSize:Tj,customBackgroundFilter:Sj,customLayoutfluid:$j,monkeyPowerLevel:Aj,minBurst:Lj,minBurstCustomSpeed:Zj,burstHeatmap:p.boolean(),britishEnglish:p.boolean(),lazyMode:p.boolean(),showAverage:Mj,maxLineWidth:Wj}).strict(),Ok=zj.partial(),Hj=Ed(Ok),nT=Ss(),Uj=nT.router({get:{summary:"get config",description:"Get config of the current user.",method:"GET",path:"",responses:{200:Hj},metadata:{rateLimit:"configGet"}},save:{summary:"update config",description:"Update the config of the current user. Only provided values will be updated while the missing values will be unchanged.",method:"PATCH",path:"",body:Ok.strict(),responses:{200:De},metadata:{rateLimit:"configUpdate"}},delete:{summary:"delete config",description:"Delete/reset the config for the current user.",method:"DELETE",path:"",body:nT.noBody(),responses:{200:De},metadata:{rateLimit:"configDelete"}}},{pathPrefix:"/configs",strictStatusCodes:!0,metadata:{openApiTags:"configs"},commonResponses:Ds}),Vj=p.string().regex(/^[0-9a-zA-Z_-]+$/).max(16);p.enum(["full","partial"]);var iT=p.enum(["test","behavior","input","sound","caret","appearance","theme","hideElements","ads","hidden"]),Kj=p.array(iT).min(1).superRefine((t,e)=>{iT.options.forEach(a=>{t.filter(s=>s===a).length>1&&e.addIssue({code:p.ZodIssueCode.custom,message:"No duplicates allowed."})})}),Ik=p.object({_id:Zt,name:Vj,settingGroups:Kj.nullable().optional(),config:Ok.extend({tags:p.array(ER).optional()})}),Gj=Ik.partial({config:!0,settingGroups:!0}),Qj=kt(p.array(Ik)),Yj=Ik.omit({_id:!0}),Jj=kt(p.object({presetId:Zt})),Xj=p.object({presetId:Zt}),rT=Ss(),eD=rT.router({get:{summary:"get presets",description:"Get presets of the current user.",method:"GET",path:"",responses:{200:Qj},metadata:{rateLimit:"presetsGet"}},add:{summary:"add preset",description:"Add a new preset for the current user.",method:"POST",path:"",body:Yj.strict(),responses:{200:Jj},metadata:{rateLimit:"presetsAdd"}},save:{summary:"update preset",description:"Update an existing preset for the current user.",method:"PATCH",path:"",body:Gj.strict(),responses:{200:De},metadata:{rateLimit:"presetsEdit"}},delete:{summary:"delete preset",description:"Delete preset by id.",method:"DELETE",path:"/:presetId",pathParams:Xj,body:rT.noBody(),responses:{200:De},metadata:{rateLimit:"presetsRemove"}}},{pathPrefix:"/presets",strictStatusCodes:!0,metadata:{openApiTags:"presets"},commonResponses:Ds}),K$=p.object({_id:Zt,message:p.string(),date:p.number().int().min(0).optional(),level:p.number().int().optional(),sticky:p.boolean().optional()}),tD=kt(p.array(K$)),aD=Ss(),sD=aD.router({get:{summary:"get psas",description:"Get list of public service announcements",method:"GET",path:"",responses:{200:tD}}},{pathPrefix:"/psas",strictStatusCodes:!0,metadata:{openApiTags:"psas",authenticationOptions:{isPublic:!0},rateLimit:"psaGet"},commonResponses:Ds}),nD=p.record(hi,p.number().int()),iD=p.object({timeTyping:p.number().nonnegative(),testsCompleted:p.number().int().nonnegative(),testsStarted:p.number().int().nonnegative()}),rD=p.object({language:ka,mode:Ao,mode2:Od}).strict(),oD=kt(nD),dD=kt(iD),lD=Ss(),uD=lD.router({getSpeedHistogram:{summary:"get speed histogram",description:"get number of users personal bests grouped by wpm level (multiples of ten)",method:"GET",path:"/speedHistogram",query:rD,responses:{200:oD}},getTypingStats:{summary:"get typing stats",description:"get number of tests and time users spend typing.",method:"GET",path:"/typingStats",responses:{200:dD}}},{pathPrefix:"/public",strictStatusCodes:!0,metadata:{openApiTags:"public",authenticationOptions:{isPublic:!0},rateLimit:"publicStatsGet"},commonResponses:Ds}),G$=p.object({wpm:p.number().nonnegative(),acc:p.number().nonnegative().min(0).max(100),timestamp:p.number().int().nonnegative(),raw:p.number().nonnegative(),consistency:p.number().nonnegative().optional(),uid:p.string(),name:p.string(),discordId:p.string().optional(),discordAvatar:p.string().optional(),rank:p.number().nonnegative().int(),badgeId:p.number().int().optional(),isPremium:p.boolean().optional()}),Q$=p.object({count:p.number().int().nonnegative(),rank:p.number().int().nonnegative().optional(),entry:G$.optional()}),cD=Q$.extend({minWpm:p.number().nonnegative()}),Y$=p.object({uid:p.string(),name:p.string(),discordId:p.string().optional(),discordAvatar:p.string().optional(),badgeId:p.number().int().optional(),lastActivityTimestamp:p.number().int().nonnegative(),timeTypedSeconds:p.number().nonnegative(),rank:p.number().nonnegative().int(),totalXp:p.number().nonnegative().int()}),pD=Y$.extend({count:p.number().int().nonnegative()}),Pk=p.object({language:ka,mode:Ao,mode2:Od}),Zk=p.object({skip:p.number().int().nonnegative().optional(),limit:p.number().int().nonnegative().max(50).optional()}),mD=Pk.merge(Zk),oT=kt(p.array(G$)),fD=kt(Q$),J$=Pk.extend({daysBefore:p.literal(1).optional()}),hD=J$.merge(Zk),gD=kt(cD),yD=Zk.extend({weeksBefore:p.literal(1).optional()}),vD=kt(p.array(Y$)),bD=Ed(pD.partial()),wD=Ss(),_D=wD.router({get:{summary:"get leaderboard",description:"Get all-time leaderboard.",method:"GET",path:"",query:mD.strict(),responses:{200:oT},metadata:{authenticationOptions:{isPublic:!0}}},getRank:{summary:"get leaderboard rank",description:"Get the rank of the current user on the all-time leaderboard",method:"GET",path:"/rank",query:Pk.strict(),responses:{200:fD},metadata:{authenticationOptions:{acceptApeKeys:!0}}},getDaily:{summary:"get daily leaderboard",description:"Get daily leaderboard.",method:"GET",path:"/daily",query:hD.strict(),responses:{200:oT},metadata:{authenticationOptions:{isPublic:!0},requireConfiguration:{path:"dailyLeaderboards.enabled",invalidMessage:"Daily leaderboards are not available at this time."}}},getDailyRank:{summary:"get daily leaderboard rank",description:"Get the rank of the current user on the daily leaderboard",method:"GET",path:"/daily/rank",query:J$.strict(),responses:{200:gD},metadata:{requireConfiguration:{path:"dailyLeaderboards.enabled",invalidMessage:"Daily leaderboards are not available at this time."}}},getWeeklyXp:{summary:"get weekly xp leaderboard",description:"Get weekly xp leaderboard",method:"GET",path:"/xp/weekly",query:yD.strict(),responses:{200:vD},metadata:{authenticationOptions:{isPublic:!0},requireConfiguration:{path:"leaderboards.weeklyXp.enabled",invalidMessage:"Weekly XP leaderboards are not available at this time."}}},getWeeklyXpRank:{summary:"get weekly xp leaderboard rank",description:"Get the rank of the current user on the weekly xp leaderboard",method:"GET",path:"/xp/weekly/rank",responses:{200:bD},metadata:{requireConfiguration:{path:"leaderboards.weeklyXp.enabled",invalidMessage:"Weekly XP leaderboards are not available at this time."}}}},{pathPrefix:"/leaderboards",strictStatusCodes:!0,metadata:{openApiTags:"leaderboards",rateLimit:"leaderboardsGet"},commonResponses:Ds}),kD=p.object({acc:Zc,seconds:p.number().nonnegative()}),xD=p.object({wpm:p.array(p.number().nonnegative()).max(122),raw:p.array(p.number().nonnegative()).max(122),err:p.array(p.number().nonnegative()).max(122)}),dT=p.object({average:p.number().nonnegative(),sd:p.number().nonnegative()}),CD=p.object({textLen:p.number().int().nonnegative(),mode:OR,pipeDelimiter:p.boolean(),limit:p.object({mode:IR,value:p.number().nonnegative()})}),TD=p.tuple([p.number().int().nonnegative(),p.number().int().nonnegative(),p.number().int().nonnegative(),p.number().int().nonnegative()]),X$=p.object({wpm:eT,rawWpm:eT,charStats:TD,acc:Zc.min(50),mode:Ao,mode2:Od,quoteLength:p.number().int().nonnegative().max(3).optional(),timestamp:p.number().int().nonnegative(),testDuration:p.number().min(1),consistency:Zc,keyConsistency:Zc,chartData:xD.or(p.literal("toolong")),uid:Zt,restartCount:p.number().int().nonnegative().optional(),incompleteTestSeconds:p.number().nonnegative().optional(),afkDuration:p.number().nonnegative().optional(),tags:p.array(Zt).optional(),bailedOut:p.boolean().optional(),blindMode:p.boolean().optional(),lazyMode:p.boolean().optional(),funbox:V$.optional(),language:ka.optional(),difficulty:U$.optional(),numbers:p.boolean().optional(),punctuation:p.boolean().optional()}),e1=X$.extend({_id:Zt,keySpacingStats:dT.optional(),keyDurationStats:dT.optional(),name:p.string(),isPb:p.boolean().optional()}),SD=X$.required({restartCount:!0,incompleteTestSeconds:!0,afkDuration:!0,tags:!0,bailedOut:!0,blindMode:!0,lazyMode:!0,funbox:!0,language:!0,difficulty:!0,numbers:!0,punctuation:!0}).extend({charTotal:p.number().int().nonnegative(),challenge:Ml().max(100).optional(),customText:CD.optional(),hash:Ml().max(100),keyDuration:p.array(p.number().nonnegative()).or(p.literal("toolong")),keySpacing:p.array(p.number().nonnegative()).or(p.literal("toolong")),keyOverlap:p.number().nonnegative(),lastKeyToEnd:p.number().nonnegative(),startToFirstKey:p.number().nonnegative(),wpmConsistency:Zc,stopOnLetter:p.boolean(),incompleteTests:p.array(kD)}).strict(),$D=p.object({base:p.number().int().optional(),fullAccuracy:p.number().int().optional(),quote:p.number().int().optional(),corrected:p.number().int().optional(),punctuation:p.number().int().optional(),numbers:p.number().int().optional(),funbox:p.number().int().optional(),streak:p.number().int().optional(),incomplete:p.number().int().optional(),daily:p.number().int().optional(),accPenalty:p.number().int().optional(),configMultiplier:p.number().int().optional()}),AD=p.object({insertedId:Zt,isPb:p.boolean(),tagPbs:p.array(Zt),dailyLeaderboardRank:p.number().int().nonnegative().optional(),weeklyXpLeaderboardRank:p.number().int().nonnegative().optional(),xp:p.number().int().nonnegative(),dailyXpBonus:p.boolean(),xpBreakdown:$D,streak:p.number().int().nonnegative()}),LD=p.object({onOrAfterTimestamp:p.number().int().min(15894288e5).optional().describe("Timestamp of the earliest result to fetch. If omitted the most recent results are fetched."),offset:p.number().int().nonnegative().optional().describe("Offset of the item at which to begin the response."),limit:p.number().int().nonnegative().max(1e3).optional().describe("Limit results to the given amount.")}),MD=kt(p.array(e1)),ED=p.object({result:SD}),OD=kt(AD),ID=p.object({tagIds:p.array(Zt),resultId:Zt}),PD=kt(p.object({tagPbs:p.array(Zt)})),ZD=kt(e1),lT=Ss(),ND=lT.router({get:{summary:"get results",description:"Gets up to 1000 results",method:"GET",path:"",query:LD.strict(),responses:{200:MD},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:{normal:"resultsGet",apeKey:"resultsGetApe"}}},add:{summary:"add result",description:"Add a test result for the current user",method:"POST",path:"",body:ED.strict(),responses:{200:OD},metadata:{rateLimit:"resultsAdd",requireConfiguration:{path:"results.savingEnabled",invalidMessage:"Results are not being saved at this time."}}},updateTags:{summary:"update result tags",description:"Labels a result with the specified tags",method:"PATCH",path:"/tags",body:ID.strict(),responses:{200:PD},metadata:{rateLimit:"resultsTagsUpdate"}},deleteAll:{summary:"delete all results",description:"Delete all results for the current user",method:"DELETE",path:"",body:lT.noBody(),responses:{200:De},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"resultsDeleteAll"}},getLast:{summary:"get last result",description:"Gets a user's last saved result",path:"/last",method:"GET",responses:{200:ZD},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"resultsGet"}}},{pathPrefix:"/results",strictStatusCodes:!0,metadata:{openApiTags:"results"},commonResponses:Ds}),uT=p.object({language:p.string(),mode:p.string(),mode2:p.string()}).strict(),cT=p.object({minRank:p.number().int().nonnegative(),maxRank:p.number().int().nonnegative(),minReward:p.number().int().nonnegative(),maxReward:p.number().int().nonnegative()}).strict(),t1=p.object({maintenance:p.boolean(),dev:p.object({responseSlowdownMs:p.number().int().nonnegative()}),quotes:p.object({reporting:p.object({enabled:p.boolean(),maxReports:p.number().int().nonnegative(),contentReportLimit:p.number().int().nonnegative()}),submissionsEnabled:p.boolean(),maxFavorites:p.number().int().nonnegative()}),results:p.object({savingEnabled:p.boolean(),objectHashCheckEnabled:p.boolean(),filterPresets:p.object({enabled:p.boolean(),maxPresetsPerUser:p.number().int().nonnegative()}),limits:p.object({regularUser:p.number().int().nonnegative(),premiumUser:p.number().int().nonnegative()}),maxBatchSize:p.number().int().nonnegative()}),users:p.object({signUp:p.boolean(),lastHashesCheck:p.object({enabled:p.boolean(),maxHashes:p.number().int().nonnegative()}),autoBan:p.object({enabled:p.boolean(),maxCount:p.number().int().nonnegative(),maxHours:p.number().int().nonnegative()}),profiles:p.object({enabled:p.boolean()}),discordIntegration:p.object({enabled:p.boolean()}),xp:p.object({enabled:p.boolean(),funboxBonus:p.number(),gainMultiplier:p.number(),maxDailyBonus:p.number(),minDailyBonus:p.number(),streak:p.object({enabled:p.boolean(),maxStreakDays:p.number().nonnegative(),maxStreakMultiplier:p.number()})}),inbox:p.object({enabled:p.boolean(),maxMail:p.number().int().nonnegative()}),premium:p.object({enabled:p.boolean()})}),admin:p.object({endpointsEnabled:p.boolean()}),apeKeys:p.object({endpointsEnabled:p.boolean(),acceptKeys:p.boolean(),maxKeysPerUser:p.number().int().nonnegative(),apeKeyBytes:p.number().int().nonnegative(),apeKeySaltRounds:p.number().int().nonnegative()}),rateLimiting:p.object({badAuthentication:p.object({enabled:p.boolean(),penalty:p.number(),flaggedStatusCodes:p.array(p.number().int().nonnegative())})}),dailyLeaderboards:p.object({enabled:p.boolean(),leaderboardExpirationTimeInDays:p.number().nonnegative(),maxResults:p.number().int().nonnegative(),validModeRules:p.array(uT),scheduleRewardsModeRules:p.array(uT),topResultsToAnnounce:p.number().int().positive(),xpRewardBrackets:p.array(cT)}),leaderboards:p.object({weeklyXp:p.object({enabled:p.boolean(),expirationTimeInDays:p.number().nonnegative(),xpRewardBrackets:p.array(cT)})})}),RD=kt(t1),jD=t1.deepPartial(),DD=p.object({configuration:jD.strict()}).strict(),BD=kt(p.object({})),qD=Ss(),WD=qD.router({get:{summary:"get configuration",description:"Get server configuration",method:"GET",path:"",responses:{200:RD},metadata:{authenticationOptions:{isPublic:!0}}},update:{summary:"update configuration",description:"Update the server configuration. Only provided values will be updated while the missing values will be unchanged.",method:"PATCH",path:"",body:DD,responses:{200:De},metadata:{authenticationOptions:{noCache:!0,isPublicOnDev:!0},rateLimit:"adminLimit",requirePermission:"admin"}},getSchema:{summary:"get configuration schema",description:"Get schema definition of the server configuration.",method:"GET",path:"/schema",responses:{200:BD},metadata:{authenticationOptions:{isPublicOnDev:!0,noCache:!0},rateLimit:"adminLimit",requirePermission:"admin"}}},{pathPrefix:"/configuration",strictStatusCodes:!0,metadata:{openApiTags:"configuration"},commonResponses:Ds}),FD=p.object({username:p.string(),createUser:p.boolean().optional().describe("If `true` create user with <username>@example.com and password `password`. If false user has to exist."),firstTestTimestamp:p.number().int().nonnegative().optional(),lastTestTimestamp:p.number().int().nonnegative().optional(),minTestsPerDay:p.number().int().nonnegative().optional(),maxTestsPerDay:p.number().int().nonnegative().optional()}),zD=kt(p.object({uid:Zt,email:p.string().email()})),HD=Ss(),UD=HD.router({generateData:{summary:"generate data",description:"Generate test results for the given user.",method:"POST",path:"/generateData",body:FD.strict(),responses:{200:zD}}},{pathPrefix:"/dev",strictStatusCodes:!0,metadata:{openApiTags:"development",authenticationOptions:{isPublicOnDev:!0}},commonResponses:Ds}),pT={a:["","","","",""],c:["","",""],d:["",""],e:["","","","","",""],g:[""],h:[""],i:["","","",""],j:["",""],k:[""],l:["",""],n:[""],o:["","","","","","","","","",""],p:[""],q:[""],s:[""],u:["","","","",""],v:["",""],x:["",""],y:["",""],z:["",""]};function VD(t){for(let e in pT)pT[e].forEach(a=>{t=t.replace(a,e)});return t}function KD(t,e){let a=t.toLowerCase().split(/[.,"/#!?$%^&*;:{}=\-_`~()\s\n]+/g).map(s=>VD(GD(s)??""));return QD.some(s=>a.some(n=>e==="word"?n.startsWith(s):n.includes(s)))}function GD(t){return t===void 0||t===""?t:t.replace(/[\u0300-\u036F]/g,"").trim().replace(/\n{3,}/g,`

`).replace(/\s{3,}/g,"  ")}function a1(t,e){return e.refine(a=>!KD(a,t),a=>({message:`Profanity detected. Please remove it. If you believe this is a mistake, please contact us. (${a})`}))}var QD=["miodec","bitly","niqqa","niqqer","ni99a","ni99er","niggas","niga","niger","retard","ahole","anus","ash0le","asholes","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","biatch","bitch","bitches","blow job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","carpet muncher","cawk","cawks","clit","cnts","cntz","cock","cockhead","cock-head","cocks","cocksucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagit","fags","fagz","faigs","flipping the bird","fudge packer","fukah","fuken","fuker","fukin","fukk","fukkah","fukken","fukker","fukkin","g00k","gayboy","gaygirl","gayz","god-damned","h00r","h0ar","h0re","jackoff","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","lezzian","lipshits","lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","phuc","phuck","phuk","phuker","phukker","poonani","pr1c","pr1ck","pr1k","puss","pussee","pussy","puuke","puuker","qweers","qweerz","qweir","recktum","rectum","retard","sadist","scank","schlong","semen","sex","sexy","sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","shitty","shity","shitz","shyt","shyte","shytty","shyty","skanck","skank","skankee","skankey","skanks","skanky","slut","sluts","slutty","slutz","son-of-a-bitch","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","wh00r","wh0re","whore","xrated","b!+ch","bitch","blowjob","clit","arschloch","shit","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","masturbate","masterbat","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","dyke","fuck","shit","amcik","andskota","arse","assrammer","ayir","bi7ch","bitch","bollock","breasts","butt-pirate","cabron","cazzo","chraa","chuj","cunt","daygo","dego","dick","dike","dupa","dziwka","ejackulate","ekrem","enculer","fag","fanculo","fanny","feces","felcher","ficken","flikker","foreskin","fotze","futkretzn","gook","guiena","h4x0r","helvete","hoer","honkey","huevon","injun","jizz","kanker","klootzak","kraut","knulle","kuksuger","kurac","kurwa","kusi","kyrpa","lesbo","mamhoon","masturbat","merd","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger","orospu","paska","perse","picka","pierdol","pillu","pimmel","piss","pizda","poontsee","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef","rautenberg","schaffer","scheiss","schlampe","schmuck","sh!t","sharmuta","sharmute","skurwysyn","sphencter","spierdalaj","splooge","suka","b00b","testicle","titt","twat","vittu","wank","wetback","wichser","zabourah"],s1=p.object({_id:Zt,name:p.string().regex(/^[0-9a-zA-Z_.-]+$/).max(16),pb:p.object({no:p.boolean(),yes:p.boolean()}).strict(),difficulty:p.record(Mk,p.boolean()),mode:p.record(Ao,p.boolean()),words:p.record(UR.or(p.literal("custom")),p.boolean()),time:p.record(VR.or(p.literal("custom")),p.boolean()),quoteLength:p.record(KR,p.boolean()),punctuation:p.object({on:p.boolean(),off:p.boolean()}).strict(),numbers:p.object({on:p.boolean(),off:p.boolean()}).strict(),date:p.object({last_day:p.boolean(),last_week:p.boolean(),last_month:p.boolean(),last_3months:p.boolean(),all:p.boolean()}).strict(),tags:p.record(p.string(),p.boolean()),language:p.record(ka,p.boolean()),funbox:p.record(p.string(),p.boolean())}),n1=p.number().int().min(-11).max(12),i1=p.object({lastResultTimestamp:p.number().int().nonnegative(),length:p.number().int().nonnegative(),maxLength:p.number().int().nonnegative(),hourOffset:n1.optional()}).strict(),Nk=p.object({_id:Zt,name:p.string(),personalBests:cb}).strict();function ju(t){return a1("word",t).optional().transform(e=>e===null?void 0:e)}var pb=p.object({bio:ju(p.string().max(250)).or(p.literal("")),keyboard:ju(p.string().max(75)).or(p.literal("")),socialProfiles:p.object({twitter:ju(p.string().max(20).regex(/^[0-9a-zA-Z_.-]+$/)).or(p.literal("")),github:ju(p.string().max(39).regex(/^[0-9a-zA-Z_.-]+$/)).or(p.literal("")),website:ju(p.string().url().max(200).startsWith("https://")).or(p.literal(""))}).strict().optional()}).strict(),r1=p.string().regex(/^[0-9a-zA-Z_-]+$/).max(16),mb=p.object({_id:Zt,name:r1,colors:Ek}).strict(),YD=p.object({startTimestamp:p.number().int().nonnegative(),expirationTimestamp:p.number().int().nonnegative().or(p.literal(-1).describe("lifetime premium"))}),JD=p.record(ka,p.record(hi.describe("quoteId as string"),p.number().nonnegative())),XD=p.record(Ao,p.record(Od,p.record(ka,p.number().int().nonnegative()))),eB=p.object({rank:p.number().int().nonnegative().optional(),count:p.number().int().nonnegative()}),tB=p.object({time:p.record(Od,p.record(ka,eB.optional()))}),o1=p.object({id:p.number().int().nonnegative(),selected:p.boolean().optional()}).strict(),aB=p.object({badges:p.array(o1)}).strict(),sB=p.boolean().describe("Admin for all languages if true").or(ka.describe("Admin for the given language")),d1=p.object({testsByDays:p.array(p.number().int().nonnegative().or(p.null())).describe("Number of tests by day. Last element of the array is on the date `lastDay`. `null` means no tests on that day."),lastDay:p.number().int().nonnegative().describe("Timestamp of the last day included in the test activity")}).strict(),nB=p.record(hi.describe("year"),p.array(p.number().int().nonnegative().nullable().describe("number of tests, position in the array is the day of the year"))),l1=p.record(ka,p.array(hi)),fb=p.object({name:p.string(),email:p.string().email(),uid:p.string(),addedAt:p.number().int().nonnegative(),personalBests:cb,lastReultHashes:p.array(p.string()).optional(),completedTests:p.number().int().nonnegative().optional(),startedTests:p.number().int().nonnegative().optional(),timeTyping:p.number().nonnegative().optional().describe("time typing in seconds"),streak:i1.optional(),xp:p.number().int().nonnegative().optional(),discordId:p.string().optional(),discordAvatar:p.string().optional(),tags:p.array(Nk).optional(),profileDetails:pb.optional(),customThemes:p.array(mb).optional(),premium:YD.optional(),isPremium:p.boolean().optional(),quoteRatings:JD.optional(),favoriteQuotes:l1.optional(),lbMemory:XD.optional(),allTimeLbs:tB,inventory:aB.optional(),banned:p.boolean().optional(),lbOptOut:p.boolean().optional(),verified:p.boolean().optional(),needsToChangeName:p.boolean().optional(),quoteMod:sB.optional(),resultFilterPresets:p.array(s1).optional(),testActivity:d1.optional()}),u1=p.string().regex(/^[0-9a-zA-Z_.-]+$/).max(16),iB=p.object({completedTests:p.number().int().nonnegative().optional(),startedTests:p.number().int().nonnegative().optional(),timeTyping:p.number().int().nonnegative().optional()}),rB=fb.pick({uid:!0,name:!0,banned:!0,addedAt:!0,discordId:!0,discordAvatar:!0,xp:!0,lbOptOut:!0,isPremium:!0,inventory:!0,allTimeLbs:!0}).extend({typingStats:iB,personalBests:cb.pick({time:!0,words:!0}),streak:p.number().int().nonnegative(),maxStreak:p.number().int().nonnegative(),details:pb}).partial({inventory:!0,details:!0,allTimeLbs:!0,uid:!0}),c1=p.enum(["xp","badge"]),oB=p.object({type:p.literal(c1.enum.xp),item:p.number().int()}),dB=p.object({type:p.literal(c1.enum.badge),item:o1}),lB=oB.or(dB),uB=p.object({id:Zt,subject:p.string(),body:p.string(),timestamp:p.number().int().nonnegative(),read:p.boolean(),rewards:p.array(lB)}),cB=p.enum(["Inappropriate name","Inappropriate bio","Inappropriate social links","Suspected cheating"]),pB=kt(fb.extend({inboxUnreadSize:p.number().int().nonnegative()})),Rk=a1("substring",p.string().min(1).max(16).regex(/^[\da-zA-Z_-]+$/,"Can only contain lower/uppercase letters, underscare and minus.")),mB=p.object({email:p.string().email().optional(),name:Rk,uid:p.string().optional(),captcha:p.string()}),fB=p.object({name:Rk}),hB=p.object({name:Rk}),gB=p.object({mode:Ao,mode2:Od,language:ka,rank:p.number().int().nonnegative()}),yB=p.object({newEmail:p.string().email(),previousEmail:p.string().email()}),vB=p.object({newPassword:p.string().min(6)}),bB=p.object({mode:Ao,mode2:Od.optional()}),wB=Ed(Qd),_B=s1,kB=kt(Zt.describe("Id of the created result filter preset")),xB=p.object({presetId:Zt}),CB=kt(p.array(Nk)),TB=p.object({tagName:u1}),SB=kt(Nk),$B=p.object({tagId:Zt,newName:u1}),mT=p.object({tagId:Zt}),AB=kt(p.array(mb)),LB=p.object({name:r1,colors:Ek}),MB=kt(mb.pick({_id:!0,name:!0})),EB=p.object({themeId:Zt}),OB=p.object({themeId:Zt,theme:mb.pick({name:!0,colors:!0})}),IB=kt(p.object({url:p.string().url()})),PB=p.object({tokenType:p.string(),accessToken:p.string(),state:p.string().length(20)}),ZB=kt(fb.pick({discordId:!0,discordAvatar:!0})),NB=kt(fb.pick({completedTests:!0,startedTests:!0,timeTyping:!0})),RB=p.object({hourOffset:n1}),jB=kt(l1),DB=p.object({language:ka,quoteId:hi}),BB=p.object({language:ka,quoteId:hi}),qB=p.object({uidOrName:p.string()}),WB=p.object({isUid:p.string().length(0).transform(t=>t==="").or(p.boolean()).default(!1)}),FB=kt(rB),zB=pb.extend({selectedBadgeId:p.number().int().nonnegative().optional().or(p.literal(-1).describe("no badge selected"))}),HB=kt(pb),UB=kt(p.object({inbox:p.array(uB),maxMail:p.number().int()})),VB=p.object({mailIdsToDelete:p.array(p.string().uuid()).min(1).optional(),mailIdsToMarkRead:p.array(p.string().uuid()).min(1).optional()}),KB=p.object({uid:p.string(),reason:cB,comment:p.string().regex(/^([.]|[^/<>])+$/).max(250).optional().or(p.string().length(0)),captcha:p.string()}),GB=p.object({email:p.string().email()}),QB=Ed(nB),YB=Ed(d1),JB=Ed(i1),Gn=Ss(),XB=Gn.router({get:{summary:"get user",description:"Get a user's data.",method:"GET",path:"",responses:{200:pB},metadata:{rateLimit:"userGet"}},create:{summary:"create user",description:"Creates a new user",method:"POST",path:"/signup",body:mB.strict(),responses:{200:De},metadata:{rateLimit:"userSignup",requireConfiguration:{path:"users.signUp",invalidMessage:"Sign up is temporarily disabled"}}},getNameAvailability:{summary:"check name",description:"Checks to see if a username is available",method:"GET",path:"/checkName/:name",pathParams:fB.strict(),responses:{200:De.describe("Name is available"),409:De.describe("Name is not available")},metadata:{authenticationOptions:{isPublic:!0},rateLimit:"userCheckName"}},delete:{summary:"delete user",description:"Deletes a user's account",method:"DELETE",path:"",body:Gn.noBody(),responses:{200:De},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userDelete"}},reset:{summary:"reset user",description:"Completely resets a user's account to a blank state",method:"PATCH",path:"/reset",body:Gn.noBody(),responses:{200:De},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userReset"}},updateName:{summary:"update username",description:"Updates a user's name",method:"PATCH",path:"/name",body:hB.strict(),responses:{200:De},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userUpdateName"}},updateLeaderboardMemory:{summary:"update lbMemory",description:"Updates a user's cached leaderboard state",method:"PATCH",path:"/leaderboardMemory",body:gB.strict(),responses:{200:De},metadata:{rateLimit:"userUpdateLBMemory"}},updateEmail:{summary:"update email",description:"Updates a user's email",method:"PATCH",path:"/email",body:yB.strict(),responses:{200:De},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userUpdateEmail"}},updatePassword:{summary:"update password",description:"Updates a user's email",method:"PATCH",path:"/password",body:vB.strict(),responses:{200:De},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userUpdateEmail"}},getPersonalBests:{summary:"get personal bests",description:"Get user's personal bests",method:"GET",path:"/personalBests",query:bB.strict(),responses:{200:wB},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"userGet"}},deletePersonalBests:{summary:"delete personal bests",description:"Deletes a user's personal bests",method:"DELETE",path:"/personalBests",body:Gn.noBody(),responses:{200:De},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userClearPB"}},optOutOfLeaderboards:{summary:"leaderboards opt out",description:"Opt out of the leaderboards",method:"POST",path:"/optOutOfLeaderboards",body:Gn.noBody(),responses:{200:De},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userOptOutOfLeaderboards"}},addResultFilterPreset:{summary:"add result filter preset",description:"Add a result filter preset",method:"POST",path:"/resultFilterPresets",body:_B.strict(),responses:{200:kB},metadata:{rateLimit:"userCustomFilterAdd",requireConfiguration:{path:"results.filterPresets.enabled",invalidMessage:"Result filter presets are not available at this time."}}},removeResultFilterPreset:{summary:"remove result filter preset",description:"Remove a result filter preset",method:"DELETE",path:"/resultFilterPresets/:presetId",pathParams:xB.strict(),body:Gn.noBody(),responses:{200:De},metadata:{rateLimit:"userCustomFilterRemove",requireConfiguration:{path:"results.filterPresets.enabled",invalidMessage:"Result filter presets are not available at this time."}}},getTags:{summary:"get tags",description:"Get the users tags",method:"GET",path:"/tags",responses:{200:CB},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"userTagsGet"}},createTag:{summary:"add tag",description:"Add a tag for the current user",method:"POST",path:"/tags",body:TB.strict(),responses:{200:SB},metadata:{rateLimit:"userTagsAdd"}},editTag:{summary:"edit tag",description:"Edit a tag",method:"PATCH",path:"/tags",body:$B.strict(),responses:{200:De},metadata:{rateLimit:"userTagsEdit"}},deleteTag:{summary:"delete tag",description:"Delete a tag",method:"DELETE",path:"/tags/:tagId",pathParams:mT.strict(),body:Gn.noBody(),responses:{200:De},metadata:{rateLimit:"userTagsRemove"}},deleteTagPersonalBest:{summary:"delete tag PBs",description:"Delete personal bests of a tag",method:"DELETE",path:"/tags/:tagId/personalBest",pathParams:mT.strict(),body:Gn.noBody(),responses:{200:De},metadata:{rateLimit:"userTagsClearPB"}},getCustomThemes:{summary:"get custom themes",description:"Get custom themes for the current user",method:"GET",path:"/customThemes",responses:{200:AB},metadata:{rateLimit:"userCustomThemeGet"}},addCustomTheme:{summary:"add custom themes",description:"Add a custom theme for the current user",method:"POST",path:"/customThemes",body:LB.strict(),responses:{200:MB},metadata:{rateLimit:"userCustomThemeAdd"}},deleteCustomTheme:{summary:"delete custom themes",description:"Delete a custom theme",method:"DELETE",path:"/customThemes",body:EB.strict(),responses:{200:De},metadata:{rateLimit:"userCustomThemeRemove"}},editCustomTheme:{summary:"edit custom themes",description:"Edit a custom theme",method:"PATCH",path:"/customThemes",body:OB.strict(),responses:{200:De},metadata:{rateLimit:"userCustomThemeEdit"}},getDiscordOAuth:{summary:"discord oauth",description:"Start OAuth authentication with discord",method:"GET",path:"/discord/oauth",responses:{200:IB},metadata:{rateLimit:"userDiscordLink",requireConfiguration:{path:"users.discordIntegration.enabled",invalidMessage:"Discord integration is not available at this time"}}},linkDiscord:{summary:"link with discord",description:"Links a user's account with a discord account",method:"POST",path:"/discord/link",body:PB.strict(),responses:{200:ZB},metadata:{rateLimit:"userDiscordLink",requireConfiguration:{path:"users.discordIntegration.enabled",invalidMessage:"Discord integration is not available at this time"}}},unlinkDiscord:{summary:"unlink discord",description:"Unlinks a user's account with a discord account",method:"POST",path:"/discord/unlink",body:Gn.noBody(),responses:{200:De},metadata:{rateLimit:"userDiscordUnlink"}},getStats:{summary:"get stats",description:"Gets a user's typing stats data",method:"GET",path:"/stats",responses:{200:NB},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"userGet"}},setStreakHourOffset:{summary:"set streak hour offset",description:"Sets a user's streak hour offset",method:"POST",path:"/setStreakHourOffset",body:RB.strict(),responses:{200:De},metadata:{rateLimit:"setStreakHourOffset"}},getFavoriteQuotes:{summary:"get favorite quotes",description:"Gets a user's favorite quotes",method:"GET",path:"/favoriteQuotes",responses:{200:jB},metadata:{rateLimit:"quoteFavoriteGet"}},addQuoteToFavorites:{summary:"add favorite quotes",description:"Add a quote to the user's favorite quotes",method:"POST",path:"/favoriteQuotes",body:DB.strict(),responses:{200:De},metadata:{rateLimit:"quoteFavoritePost"}},removeQuoteFromFavorites:{summary:"remove favorite quotes",description:"Remove a quote to the user's favorite quotes",method:"DELETE",path:"/favoriteQuotes",body:BB.strict(),responses:{200:De},metadata:{rateLimit:"quoteFavoriteDelete"}},getProfile:{summary:"get profile",description:"Gets a user's profile",method:"GET",path:"/:uidOrName/profile",pathParams:qB.strict(),query:WB.strict(),responses:{200:FB,404:dl.describe("User not found")},metadata:{authenticationOptions:{isPublic:!0},rateLimit:"userProfileGet",requireConfiguration:{path:"users.profiles.enabled",invalidMessage:"Profiles are not available at this time"}}},updateProfile:{summary:"update profile",description:"Update a user's profile",method:"PATCH",path:"/profile",body:zB.strict(),responses:{200:HB},metadata:{rateLimit:"userProfileUpdate",requireConfiguration:{path:"users.profiles.enabled",invalidMessage:"Profiles are not available at this time"}}},getInbox:{summary:"get inbox",description:"Gets the user's inbox",method:"GET",path:"/inbox",responses:{200:UB},metadata:{rateLimit:"userMailGet",requireConfiguration:{path:"users.inbox.enabled",invalidMessage:"Your inbox is not available at this time."}}},updateInbox:{summary:"update inbox",description:"Updates the user's inbox",method:"PATCH",body:VB.strict(),path:"/inbox",responses:{200:De},metadata:{rateLimit:"userMailUpdate",requireConfiguration:{path:"users.inbox.enabled",invalidMessage:"Your inbox is not available at this time."}}},report:{summary:"report user",description:"Report a user",method:"POST",path:"/report",body:KB.strict(),responses:{200:De},metadata:{rateLimit:"quoteReportSubmit",requirePermission:"canReport",requireConfiguration:{path:"quotes.reporting.enabled",invalidMessage:"User reporting is unavailable."}}},verificationEmail:{summary:"send verification email",description:"Send a verification email",method:"GET",path:"/verificationEmail",responses:{200:De},metadata:{authenticationOptions:{noCache:!0},rateLimit:"userRequestVerificationEmail"}},forgotPasswordEmail:{summary:"send forgot password email",description:"Send a forgot password email",method:"POST",path:"/forgotPasswordEmail",body:GB.strict(),responses:{200:De},metadata:{authenticationOptions:{isPublic:!0},rateLimit:"userForgotPasswordEmail"}},revokeAllTokens:{summary:"revoke all tokens",description:"Revoke all tokens for the current user.",method:"POST",path:"/revokeAllTokens",body:Gn.noBody(),responses:{200:De},metadata:{authenticationOptions:{requireFreshToken:!0,noCache:!0},rateLimit:"userRevokeAllTokens"}},getTestActivity:{summary:"get test activity",description:"Get user's test activity",method:"GET",path:"/testActivity",responses:{200:QB},metadata:{rateLimit:"userTestActivity"}},getCurrentTestActivity:{summary:"get current test activity",description:"Get test activity for the last up to 372 days for the current user ",method:"GET",path:"/currentTestActivity",responses:{200:YB},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"userCurrentTestActivity"}},getStreak:{summary:"get streak",description:"Get user's streak data",method:"GET",path:"/streak",responses:{200:JB},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"userStreak"}}},{pathPrefix:"/users",strictStatusCodes:!0,metadata:{openApiTags:"users"},commonResponses:Ds}),Xf=p.number().int().nonnegative().or(p.string().regex(/^\d+$/).transform(Number)),eq=p.object({id:Xf.optional(),text:p.string(),source:p.string(),length:p.number().int().positive(),approvedBy:p.string().describe("The approvers name")}),tq=p.object({_id:Zt,text:p.string(),source:p.string(),language:ka,submittedBy:Zt.describe("uid of the submitter"),timestamp:p.number().int().nonnegative(),approved:p.boolean()}),aq=p.object({_id:Zt,language:ka,quoteId:Xf,average:p.number().nonnegative(),ratings:p.number().int().nonnegative(),totalRating:p.number().nonnegative()}),sq=p.enum(["Grammatical error","Duplicate quote","Inappropriate content","Low quality content","Incorrect source"]),nq=kt(p.array(tq)),iq=kt(p.object({isEnabled:p.boolean()})),rq=p.object({text:p.string().min(60),source:p.string(),language:ka,captcha:p.string()}),oq=p.object({quoteId:Zt,editText:XC,editSource:XC}),dq=kt(eq),lq=p.object({quoteId:Zt}),uq=p.object({quoteId:Xf,language:ka}),cq=Ed(aq),pq=p.object({quoteId:Xf,language:ka,rating:p.number().int().min(1).max(5)}),mq=p.object({quoteId:Xf,quoteLanguage:ka,reason:sq,comment:p.string().regex(/^([.]|[^/<>])+$/).max(250).optional().or(p.string().length(0)),captcha:p.string()}),fq=Ss(),hq=fq.router({get:{summary:"get quote submissions",description:"Get list of quote submissions",method:"GET",path:"",responses:{200:nq},metadata:{rateLimit:"newQuotesGet",requirePermission:"quoteMod"}},isSubmissionEnabled:{summary:"is submission enabled",description:"Check if submissions are enabled.",method:"GET",path:"/isSubmissionEnabled",responses:{200:iq},metadata:{authenticationOptions:{isPublic:!0},rateLimit:"newQuotesIsSubmissionEnabled"}},add:{summary:"submit quote",description:"Add a quote submission",method:"POST",path:"",body:rq.strict(),responses:{200:De},metadata:{rateLimit:"newQuotesAdd",requireConfiguration:{path:"quotes.submissionsEnabled",invalidMessage:"Quote submission is disabled temporarily. The queue is quite long and we need some time to catch up."}}},approveSubmission:{summary:"submit quote",description:"Add a quote submission",method:"POST",path:"/approve",body:oq.strict(),responses:{200:dq},metadata:{rateLimit:"newQuotesAction",requirePermission:"quoteMod"}},rejectSubmission:{summary:"reject quote",description:"Reject a quote submission",method:"POST",path:"/reject",body:lq.strict(),responses:{200:De},metadata:{rateLimit:"newQuotesAction",requirePermission:"quoteMod"}},getRating:{summary:"get rating",description:"Get quote rating",method:"GET",path:"/rating",query:uq.strict(),responses:{200:cq},metadata:{rateLimit:"quoteRatingsGet"}},addRating:{summary:"add rating",description:"Add a quote rating",method:"POST",path:"/rating",body:pq.strict(),responses:{200:De},metadata:{rateLimit:"quoteRatingsSubmit"}},report:{summary:"report quote",description:"Report a quote",method:"POST",path:"/report",body:mq.strict(),responses:{200:De},metadata:{rateLimit:"quoteReportSubmit",requirePermission:"canReport",requireConfiguration:{path:"quotes.reporting.enabled",invalidMessage:"Quote reporting is unavailable."}}}},{pathPrefix:"/quotes",strictStatusCodes:!0,metadata:{openApiTags:"quotes"},commonResponses:Ds}),gq=p.object({action:p.literal("published").or(p.string()),release:p.object({id:p.string().or(p.number().transform(String))}).optional()});kt(p.array(K$));var yq=Ss(),vq=yq.router({postGithubRelease:{summary:"Github release",description:"Announce github release.",method:"POST",path:"/githubRelease",body:gq,headers:p.object({"x-hub-signature-256":p.string()}),responses:{200:De}}},{pathPrefix:"/webhooks",strictStatusCodes:!0,metadata:{openApiTags:"webhooks",authenticationOptions:{isGithubWebhook:!0},rateLimit:"webhookLimit"},commonResponses:Ds}),bq=Ss(),wq=bq.router({admin:BR,apeKeys:HR,configs:Uj,presets:eD,psas:sD,public:uD,leaderboards:_D,results:ND,configuration:WD,dev:UD,users:XB,quotes:hq,webhooks:vq}),$t;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function a(n){throw new Error}t.assertNever=a,t.arrayToEnum=n=>{let i={};for(let r of n)i[r]=r;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),r={};for(let o of i)r[o]=n[o];return t.objectValues(r)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.push(r);return i},t.find=(n,i)=>{for(let r of n)if(i(r))return r},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(r=>typeof r=="string"?`'${r}'`:r).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})($t||($t={}));var f0;(function(t){t.mergeShapes=(e,a)=>({...e,...a})})(f0||(f0={}));var ie=$t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Nr=t=>{switch(typeof t){case"undefined":return ie.undefined;case"string":return ie.string;case"number":return isNaN(t)?ie.nan:ie.number;case"boolean":return ie.boolean;case"function":return ie.function;case"bigint":return ie.bigint;case"symbol":return ie.symbol;case"object":return Array.isArray(t)?ie.array:t===null?ie.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ie.promise:typeof Map<"u"&&t instanceof Map?ie.map:typeof Set<"u"&&t instanceof Set?ie.set:typeof Date<"u"&&t instanceof Date?ie.date:ie.object;default:return ie.unknown}},R=$t.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_q=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),$n=class p1 extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let a=e||function(i){return i.message},s={_errors:[]},n=i=>{for(let r of i.issues)if(r.code==="invalid_union")r.unionErrors.map(n);else if(r.code==="invalid_return_type")n(r.returnTypeError);else if(r.code==="invalid_arguments")n(r.argumentsError);else if(r.path.length===0)s._errors.push(a(r));else{let o=s,l=0;for(;l<r.path.length;){let c=r.path[l];l===r.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(a(r))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),s}static assert(e){if(!(e instanceof p1))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$t.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){let a={},s=[];for(let n of this.issues)n.path.length>0?(a[n.path[0]]=a[n.path[0]]||[],a[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:a}}get formErrors(){return this.flatten()}};$n.create=t=>new $n(t);var El=(t,e)=>{let a;switch(t.code){case R.invalid_type:t.received===ie.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case R.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,$t.jsonStringifyReplacer)}`;break;case R.unrecognized_keys:a=`Unrecognized key(s) in object: ${$t.joinValues(t.keys,", ")}`;break;case R.invalid_union:a="Invalid input";break;case R.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${$t.joinValues(t.options)}`;break;case R.invalid_enum_value:a=`Invalid enum value. Expected ${$t.joinValues(t.options)}, received '${t.received}'`;break;case R.invalid_arguments:a="Invalid function arguments";break;case R.invalid_return_type:a="Invalid function return type";break;case R.invalid_date:a="Invalid date";break;case R.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:$t.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case R.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case R.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case R.custom:a="Invalid input";break;case R.invalid_intersection_types:a="Intersection results could not be merged";break;case R.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case R.not_finite:a="Number must be finite";break;default:a=e.defaultError,$t.assertNever(t)}return{message:a}},m1=El;function kq(t){m1=t}function uy(){return m1}var cy=t=>{let{data:e,path:a,errorMaps:s,issueData:n}=t,i=[...a,...n.path||[]],r={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="",l=s.filter(c=>!!c).slice().reverse();for(let c of l)o=c(r,{data:e,defaultError:o}).message;return{...n,path:i,message:o}},xq=[];function Q(t,e){let a=uy(),s=cy({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===El?void 0:El].filter(n=>!!n)});t.common.issues.push(s)}var vs=class f1{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){let s=[];for(let n of a){if(n.status==="aborted")return We;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,a){let s=[];for(let n of a){let i=await n.key,r=await n.value;s.push({key:i,value:r})}return f1.mergeObjectSync(e,s)}static mergeObjectSync(e,a){let s={};for(let n of a){let{key:i,value:r}=n;if(i.status==="aborted"||r.status==="aborted")return We;i.status==="dirty"&&e.dirty(),r.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof r.value<"u"||n.alwaysSet)&&(s[i.value]=r.value)}return{status:e.value,value:s}}},We=Object.freeze({status:"aborted"}),py=t=>({status:"dirty",value:t}),Ya=t=>({status:"valid",value:t}),h0=t=>t.status==="aborted",g0=t=>t.status==="dirty",pp=t=>t.status==="valid",mp=t=>typeof Promise<"u"&&t instanceof Promise;function my(t,e,a,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function h1(t,e,a,s,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,a),a}var ye;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ye||(ye={}));var tc,ac,Ti=class{constructor(e,a,s,n){this._cachedPath=[],this.parent=e,this.data=a,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},fT=(t,e)=>{if(pp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let a=new $n(t.common.issues);return this._error=a,this._error}}};function et(t){if(!t)return{};let{errorMap:e,invalid_type_error:a,required_error:s,description:n}=t;if(e&&(a||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,r)=>{var o,l;let{message:c}=t;return i.code==="invalid_enum_value"?{message:c??r.defaultError}:typeof r.data>"u"?{message:(o=c??s)!==null&&o!==void 0?o:r.defaultError}:i.code!=="invalid_type"?{message:r.defaultError}:{message:(l=c??a)!==null&&l!==void 0?l:r.defaultError}},description:n}}var dt=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Nr(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:Nr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new vs,ctx:{common:e.parent.common,data:e.data,parsedType:Nr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let a=this._parse(e);if(mp(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){let a=this._parse(e);return Promise.resolve(a)}parse(e,a){let s=this.safeParse(e,a);if(s.success)return s.data;throw s.error}safeParse(e,a){var s;let n={common:{issues:[],async:(s=a==null?void 0:a.async)!==null&&s!==void 0?s:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return fT(n,i)}async parseAsync(e,a){let s=await this.safeParseAsync(e,a);if(s.success)return s.data;throw s.error}async safeParseAsync(e,a){let s={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nr(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(mp(n)?n:Promise.resolve(n));return fT(s,i)}refine(e,a){let s=n=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(n):a;return this._refinement((n,i)=>{let r=e(n),o=()=>i.addIssue({code:R.custom,...s(n)});return typeof Promise<"u"&&r instanceof Promise?r.then(l=>l?!0:(o(),!1)):r?!0:(o(),!1)})}refinement(e,a){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof a=="function"?a(s,n):a),!1))}_refinement(e){return new Dn({schema:this,typeName:Ee.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return gi.create(this,this._def)}nullable(){return ro.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fd.create(this,this._def)}promise(){return Pl.create(this,this._def)}or(e){return wp.create([this,e],this._def)}and(e){return _p.create(this,e,this._def)}transform(e){return new Dn({...et(this._def),schema:this,typeName:Ee.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let a=typeof e=="function"?e:()=>e;return new Tp({...et(this._def),innerType:this,defaultValue:a,typeName:Ee.ZodDefault})}brand(){return new jk({typeName:Ee.ZodBranded,type:this,...et(this._def)})}catch(e){let a=typeof e=="function"?e:()=>e;return new Sp({...et(this._def),innerType:this,catchValue:a,typeName:Ee.ZodCatch})}describe(e){let a=this.constructor;return new a({...this._def,description:e})}pipe(e){return Dk.create(this,e)}readonly(){return $p.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Cq=/^c[^\s-]{8,}$/i,Tq=/^[0-9a-z]+$/,Sq=/^[0-9A-HJKMNP-TV-Z]{26}$/,$q=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Aq=/^[a-z0-9_-]{21}$/i,Lq=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Mq=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Eq="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",fw,Oq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Iq=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Pq=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,g1="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Zq=new RegExp(`^${g1}$`);function y1(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Nq(t){return new RegExp(`^${y1(t)}$`)}function v1(t){let e=`${g1}T${y1(t)}`,a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function Rq(t,e){return!!((e==="v4"||!e)&&Oq.test(t)||(e==="v6"||!e)&&Iq.test(t))}var Ol=class sc extends dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ie.string){let n=this._getOrReturnCtx(e);return Q(n,{code:R.invalid_type,expected:ie.string,received:n.parsedType}),We}let a=new vs,s;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:R.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="max")e.data.length>n.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:R.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="length"){let i=e.data.length>n.value,r=e.data.length<n.value;(i||r)&&(s=this._getOrReturnCtx(e,s),i?Q(s,{code:R.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):r&&Q(s,{code:R.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),a.dirty())}else if(n.kind==="email")Mq.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"email",code:R.invalid_string,message:n.message}),a.dirty());else if(n.kind==="emoji")fw||(fw=new RegExp(Eq,"u")),fw.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"emoji",code:R.invalid_string,message:n.message}),a.dirty());else if(n.kind==="uuid")$q.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"uuid",code:R.invalid_string,message:n.message}),a.dirty());else if(n.kind==="nanoid")Aq.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"nanoid",code:R.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid")Cq.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cuid",code:R.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid2")Tq.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cuid2",code:R.invalid_string,message:n.message}),a.dirty());else if(n.kind==="ulid")Sq.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"ulid",code:R.invalid_string,message:n.message}),a.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Q(s,{validation:"url",code:R.invalid_string,message:n.message}),a.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"regex",code:R.invalid_string,message:n.message}),a.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(s=this._getOrReturnCtx(e,s),Q(s,{code:R.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),a.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(s=this._getOrReturnCtx(e,s),Q(s,{code:R.invalid_string,validation:{startsWith:n.value},message:n.message}),a.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(s=this._getOrReturnCtx(e,s),Q(s,{code:R.invalid_string,validation:{endsWith:n.value},message:n.message}),a.dirty()):n.kind==="datetime"?v1(n).test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:R.invalid_string,validation:"datetime",message:n.message}),a.dirty()):n.kind==="date"?Zq.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:R.invalid_string,validation:"date",message:n.message}),a.dirty()):n.kind==="time"?Nq(n).test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:R.invalid_string,validation:"time",message:n.message}),a.dirty()):n.kind==="duration"?Lq.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"duration",code:R.invalid_string,message:n.message}),a.dirty()):n.kind==="ip"?Rq(e.data,n.version)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"ip",code:R.invalid_string,message:n.message}),a.dirty()):n.kind==="base64"?Pq.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"base64",code:R.invalid_string,message:n.message}),a.dirty()):$t.assertNever(n);return{status:a.value,value:e.data}}_regex(e,a,s){return this.refinement(n=>e.test(n),{validation:a,code:R.invalid_string,...ye.errToObj(s)})}_addCheck(e){return new sc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ye.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ye.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ye.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ye.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ye.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ye.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ye.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ye.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ye.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ye.errToObj(e)})}datetime(e){var a,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(a=e==null?void 0:e.offset)!==null&&a!==void 0?a:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...ye.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ye.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ye.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,...ye.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,...ye.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,...ye.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,...ye.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,...ye.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,...ye.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,...ye.errToObj(a)})}nonempty(e){return this.min(1,ye.errToObj(e))}trim(){return new sc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new sc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new sc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};Ol.create=t=>{var e;return new Ol({checks:[],typeName:Ee.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...et(t)})};function jq(t,e){let a=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=a>s?a:s,i=parseInt(t.toFixed(n).replace(".","")),r=parseInt(e.toFixed(n).replace(".",""));return i%r/Math.pow(10,n)}var fp=class y0 extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ie.number){let n=this._getOrReturnCtx(e);return Q(n,{code:R.invalid_type,expected:ie.number,received:n.parsedType}),We}let a,s=new vs;for(let n of this._def.checks)n.kind==="int"?$t.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),Q(a,{code:R.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),Q(a,{code:R.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),Q(a,{code:R.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="multipleOf"?jq(e.data,n.value)!==0&&(a=this._getOrReturnCtx(e,a),Q(a,{code:R.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),Q(a,{code:R.not_finite,message:n.message}),s.dirty()):$t.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,ye.toString(a))}gt(e,a){return this.setLimit("min",e,!1,ye.toString(a))}lte(e,a){return this.setLimit("max",e,!0,ye.toString(a))}lt(e,a){return this.setLimit("max",e,!1,ye.toString(a))}setLimit(e,a,s,n){return new y0({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:ye.toString(n)}]})}_addCheck(e){return new y0({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ye.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ye.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:ye.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ye.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ye.toString(e)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&$t.isInteger(e.value))}get isFinite(){let e=null,a=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(a===null||s.value>a)&&(a=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(a)&&Number.isFinite(e)}};fp.create=t=>new fp({checks:[],typeName:Ee.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...et(t)});var hp=class v0 extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ie.bigint){let n=this._getOrReturnCtx(e);return Q(n,{code:R.invalid_type,expected:ie.bigint,received:n.parsedType}),We}let a,s=new vs;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),Q(a,{code:R.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),Q(a,{code:R.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),Q(a,{code:R.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):$t.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,ye.toString(a))}gt(e,a){return this.setLimit("min",e,!1,ye.toString(a))}lte(e,a){return this.setLimit("max",e,!0,ye.toString(a))}lt(e,a){return this.setLimit("max",e,!1,ye.toString(a))}setLimit(e,a,s,n){return new v0({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:ye.toString(n)}]})}_addCheck(e){return new v0({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(a)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};hp.create=t=>{var e;return new hp({checks:[],typeName:Ee.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...et(t)})};var gp=class extends dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ie.boolean){let a=this._getOrReturnCtx(e);return Q(a,{code:R.invalid_type,expected:ie.boolean,received:a.parsedType}),We}return Ya(e.data)}};gp.create=t=>new gp({typeName:Ee.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...et(t)});var yp=class b1 extends dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ie.date){let n=this._getOrReturnCtx(e);return Q(n,{code:R.invalid_type,expected:ie.date,received:n.parsedType}),We}if(isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return Q(n,{code:R.invalid_date}),We}let a=new vs,s;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:R.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),a.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:R.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),a.dirty()):$t.assertNever(n);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new b1({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:ye.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:ye.toString(a)})}get minDate(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}};yp.create=t=>new yp({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ee.ZodDate,...et(t)});var fy=class extends dt{_parse(e){if(this._getType(e)!==ie.symbol){let a=this._getOrReturnCtx(e);return Q(a,{code:R.invalid_type,expected:ie.symbol,received:a.parsedType}),We}return Ya(e.data)}};fy.create=t=>new fy({typeName:Ee.ZodSymbol,...et(t)});var vp=class extends dt{_parse(e){if(this._getType(e)!==ie.undefined){let a=this._getOrReturnCtx(e);return Q(a,{code:R.invalid_type,expected:ie.undefined,received:a.parsedType}),We}return Ya(e.data)}};vp.create=t=>new vp({typeName:Ee.ZodUndefined,...et(t)});var bp=class extends dt{_parse(e){if(this._getType(e)!==ie.null){let a=this._getOrReturnCtx(e);return Q(a,{code:R.invalid_type,expected:ie.null,received:a.parsedType}),We}return Ya(e.data)}};bp.create=t=>new bp({typeName:Ee.ZodNull,...et(t)});var Il=class extends dt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ya(e.data)}};Il.create=t=>new Il({typeName:Ee.ZodAny,...et(t)});var Ko=class extends dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ya(e.data)}};Ko.create=t=>new Ko({typeName:Ee.ZodUnknown,...et(t)});var sr=class extends dt{_parse(e){let a=this._getOrReturnCtx(e);return Q(a,{code:R.invalid_type,expected:ie.never,received:a.parsedType}),We}};sr.create=t=>new sr({typeName:Ee.ZodNever,...et(t)});var hy=class extends dt{_parse(e){if(this._getType(e)!==ie.undefined){let a=this._getOrReturnCtx(e);return Q(a,{code:R.invalid_type,expected:ie.void,received:a.parsedType}),We}return Ya(e.data)}};hy.create=t=>new hy({typeName:Ee.ZodVoid,...et(t)});var fd=class kg extends dt{_parse(e){let{ctx:a,status:s}=this._processInputParams(e),n=this._def;if(a.parsedType!==ie.array)return Q(a,{code:R.invalid_type,expected:ie.array,received:a.parsedType}),We;if(n.exactLength!==null){let r=a.data.length>n.exactLength.value,o=a.data.length<n.exactLength.value;(r||o)&&(Q(a,{code:r?R.too_big:R.too_small,minimum:o?n.exactLength.value:void 0,maximum:r?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&a.data.length<n.minLength.value&&(Q(a,{code:R.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&a.data.length>n.maxLength.value&&(Q(a,{code:R.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),a.common.async)return Promise.all([...a.data].map((r,o)=>n.type._parseAsync(new Ti(a,r,a.path,o)))).then(r=>vs.mergeArray(s,r));let i=[...a.data].map((r,o)=>n.type._parseSync(new Ti(a,r,a.path,o)));return vs.mergeArray(s,i)}get element(){return this._def.type}min(e,a){return new kg({...this._def,minLength:{value:e,message:ye.toString(a)}})}max(e,a){return new kg({...this._def,maxLength:{value:e,message:ye.toString(a)}})}length(e,a){return new kg({...this._def,exactLength:{value:e,message:ye.toString(a)}})}nonempty(e){return this.min(1,e)}};fd.create=(t,e)=>new fd({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ee.ZodArray,...et(e)});function Yd(t){if(t instanceof tn){let e={};for(let a in t.shape){let s=t.shape[a];e[a]=gi.create(Yd(s))}return new tn({...t._def,shape:()=>e})}else return t instanceof fd?new fd({...t._def,type:Yd(t.element)}):t instanceof gi?gi.create(Yd(t.unwrap())):t instanceof ro?ro.create(Yd(t.unwrap())):t instanceof io?io.create(t.items.map(e=>Yd(e))):t}var tn=class mn extends dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),a=$t.objectKeys(e);return this._cached={shape:e,keys:a}}_parse(e){if(this._getType(e)!==ie.object){let l=this._getOrReturnCtx(e);return Q(l,{code:R.invalid_type,expected:ie.object,received:l.parsedType}),We}let{status:a,ctx:s}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof sr&&this._def.unknownKeys==="strip"))for(let l in s.data)i.includes(l)||r.push(l);let o=[];for(let l of i){let c=n[l],m=s.data[l];o.push({key:{status:"valid",value:l},value:c._parse(new Ti(s,m,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof sr){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of r)o.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(l==="strict")r.length>0&&(Q(s,{code:R.unrecognized_keys,keys:r}),a.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of r){let m=s.data[c];o.push({key:{status:"valid",value:c},value:l._parse(new Ti(s,m,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of o){let m=await c.key,f=await c.value;l.push({key:m,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>vs.mergeObjectSync(a,l)):vs.mergeObjectSync(a,o)}get shape(){return this._def.shape()}strict(e){return ye.errToObj,new mn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,s)=>{var n,i,r,o;let l=(r=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,a,s).message)!==null&&r!==void 0?r:s.defaultError;return a.code==="unrecognized_keys"?{message:(o=ye.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new mn({...this._def,unknownKeys:"strip"})}passthrough(){return new mn({...this._def,unknownKeys:"passthrough"})}extend(e){return new mn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new mn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ee.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new mn({...this._def,catchall:e})}pick(e){let a={};return $t.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(a[s]=this.shape[s])}),new mn({...this._def,shape:()=>a})}omit(e){let a={};return $t.objectKeys(this.shape).forEach(s=>{e[s]||(a[s]=this.shape[s])}),new mn({...this._def,shape:()=>a})}deepPartial(){return Yd(this)}partial(e){let a={};return $t.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?a[s]=n:a[s]=n.optional()}),new mn({...this._def,shape:()=>a})}required(e){let a={};return $t.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])a[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof gi;)n=n._def.innerType;a[s]=n}}),new mn({...this._def,shape:()=>a})}keyof(){return T1($t.objectKeys(this.shape))}};tn.create=(t,e)=>new tn({shape:()=>t,unknownKeys:"strip",catchall:sr.create(),typeName:Ee.ZodObject,...et(e)});tn.strictCreate=(t,e)=>new tn({shape:()=>t,unknownKeys:"strict",catchall:sr.create(),typeName:Ee.ZodObject,...et(e)});tn.lazycreate=(t,e)=>new tn({shape:t,unknownKeys:"strip",catchall:sr.create(),typeName:Ee.ZodObject,...et(e)});var wp=class extends dt{_parse(e){let{ctx:a}=this._processInputParams(e),s=this._def.options;function n(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return a.common.issues.push(...o.ctx.common.issues),o.result;let r=i.map(o=>new $n(o.ctx.common.issues));return Q(a,{code:R.invalid_union,unionErrors:r}),We}if(a.common.async)return Promise.all(s.map(async i=>{let r={...a,common:{...a.common,issues:[]},parent:null};return{result:await i._parseAsync({data:a.data,path:a.path,parent:r}),ctx:r}})).then(n);{let i,r=[];for(let l of s){let c={...a,common:{...a.common,issues:[]},parent:null},m=l._parseSync({data:a.data,path:a.path,parent:c});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:c}),c.common.issues.length&&r.push(c.common.issues)}if(i)return a.common.issues.push(...i.ctx.common.issues),i.result;let o=r.map(l=>new $n(l));return Q(a,{code:R.invalid_union,unionErrors:o}),We}}get options(){return this._def.options}};wp.create=(t,e)=>new wp({options:t,typeName:Ee.ZodUnion,...et(e)});var Tr=t=>t instanceof kp?Tr(t.schema):t instanceof Dn?Tr(t.innerType()):t instanceof xp?[t.value]:t instanceof eh?t.options:t instanceof Cp?$t.objectValues(t.enum):t instanceof Tp?Tr(t._def.innerType):t instanceof vp?[void 0]:t instanceof bp?[null]:t instanceof gi?[void 0,...Tr(t.unwrap())]:t instanceof ro?[null,...Tr(t.unwrap())]:t instanceof jk||t instanceof $p?Tr(t.unwrap()):t instanceof Sp?Tr(t._def.innerType):[],w1=class _1 extends dt{_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ie.object)return Q(a,{code:R.invalid_type,expected:ie.object,received:a.parsedType}),We;let s=this.discriminator,n=a.data[s],i=this.optionsMap.get(n);return i?a.common.async?i._parseAsync({data:a.data,path:a.path,parent:a}):i._parseSync({data:a.data,path:a.path,parent:a}):(Q(a,{code:R.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),We)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,s){let n=new Map;for(let i of a){let r=Tr(i.shape[e]);if(!r.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of r){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new _1({typeName:Ee.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:n,...et(s)})}};function b0(t,e){let a=Nr(t),s=Nr(e);if(t===e)return{valid:!0,data:t};if(a===ie.object&&s===ie.object){let n=$t.objectKeys(e),i=$t.objectKeys(t).filter(o=>n.indexOf(o)!==-1),r={...t,...e};for(let o of i){let l=b0(t[o],e[o]);if(!l.valid)return{valid:!1};r[o]=l.data}return{valid:!0,data:r}}else if(a===ie.array&&s===ie.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let r=t[i],o=e[i],l=b0(r,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return a===ie.date&&s===ie.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var _p=class extends dt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=(i,r)=>{if(h0(i)||h0(r))return We;let o=b0(i.value,r.value);return o.valid?((g0(i)||g0(r))&&a.dirty(),{status:a.value,value:o.data}):(Q(s,{code:R.invalid_intersection_types}),We)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,r])=>n(i,r)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};_p.create=(t,e,a)=>new _p({left:t,right:e,typeName:Ee.ZodIntersection,...et(a)});var io=class k1 extends dt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ie.array)return Q(s,{code:R.invalid_type,expected:ie.array,received:s.parsedType}),We;if(s.data.length<this._def.items.length)return Q(s,{code:R.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),We;!this._def.rest&&s.data.length>this._def.items.length&&(Q(s,{code:R.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());let n=[...s.data].map((i,r)=>{let o=this._def.items[r]||this._def.rest;return o?o._parse(new Ti(s,i,s.path,r)):null}).filter(i=>!!i);return s.common.async?Promise.all(n).then(i=>vs.mergeArray(a,i)):vs.mergeArray(a,n)}get items(){return this._def.items}rest(e){return new k1({...this._def,rest:e})}};io.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new io({items:t,typeName:Ee.ZodTuple,rest:null,...et(e)})};var x1=class w0 extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ie.object)return Q(s,{code:R.invalid_type,expected:ie.object,received:s.parsedType}),We;let n=[],i=this._def.keyType,r=this._def.valueType;for(let o in s.data)n.push({key:i._parse(new Ti(s,o,s.path,o)),value:r._parse(new Ti(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?vs.mergeObjectAsync(a,n):vs.mergeObjectSync(a,n)}get element(){return this._def.valueType}static create(e,a,s){return a instanceof dt?new w0({keyType:e,valueType:a,typeName:Ee.ZodRecord,...et(s)}):new w0({keyType:Ol.create(),valueType:e,typeName:Ee.ZodRecord,...et(a)})}},gy=class extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ie.map)return Q(s,{code:R.invalid_type,expected:ie.map,received:s.parsedType}),We;let n=this._def.keyType,i=this._def.valueType,r=[...s.data.entries()].map(([o,l],c)=>({key:n._parse(new Ti(s,o,s.path,[c,"key"])),value:i._parse(new Ti(s,l,s.path,[c,"value"]))}));if(s.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of r){let c=await l.key,m=await l.value;if(c.status==="aborted"||m.status==="aborted")return We;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}})}else{let o=new Map;for(let l of r){let c=l.key,m=l.value;if(c.status==="aborted"||m.status==="aborted")return We;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}}}};gy.create=(t,e,a)=>new gy({valueType:e,keyType:t,typeName:Ee.ZodMap,...et(a)});var yy=class _0 extends dt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ie.set)return Q(s,{code:R.invalid_type,expected:ie.set,received:s.parsedType}),We;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(Q(s,{code:R.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),a.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(Q(s,{code:R.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),a.dirty());let i=this._def.valueType;function r(l){let c=new Set;for(let m of l){if(m.status==="aborted")return We;m.status==="dirty"&&a.dirty(),c.add(m.value)}return{status:a.value,value:c}}let o=[...s.data.values()].map((l,c)=>i._parse(new Ti(s,l,s.path,c)));return s.common.async?Promise.all(o).then(l=>r(l)):r(o)}min(e,a){return new _0({...this._def,minSize:{value:e,message:ye.toString(a)}})}max(e,a){return new _0({...this._def,maxSize:{value:e,message:ye.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}};yy.create=(t,e)=>new yy({valueType:t,minSize:null,maxSize:null,typeName:Ee.ZodSet,...et(e)});var C1=class xg extends dt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ie.function)return Q(a,{code:R.invalid_type,expected:ie.function,received:a.parsedType}),We;function s(o,l){return cy({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,uy(),El].filter(c=>!!c),issueData:{code:R.invalid_arguments,argumentsError:l}})}function n(o,l){return cy({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,uy(),El].filter(c=>!!c),issueData:{code:R.invalid_return_type,returnTypeError:l}})}let i={errorMap:a.common.contextualErrorMap},r=a.data;if(this._def.returns instanceof Pl){let o=this;return Ya(async function(...l){let c=new $n([]),m=await o._def.args.parseAsync(l,i).catch(h=>{throw c.addIssue(s(l,h)),c}),f=await Reflect.apply(r,this,m);return await o._def.returns._def.type.parseAsync(f,i).catch(h=>{throw c.addIssue(n(f,h)),c})})}else{let o=this;return Ya(function(...l){let c=o._def.args.safeParse(l,i);if(!c.success)throw new $n([s(l,c.error)]);let m=Reflect.apply(r,this,c.data),f=o._def.returns.safeParse(m,i);if(!f.success)throw new $n([n(m,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new xg({...this._def,args:io.create(e).rest(Ko.create())})}returns(e){return new xg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,s){return new xg({args:e||io.create([]).rest(Ko.create()),returns:a||Ko.create(),typeName:Ee.ZodFunction,...et(s)})}},kp=class extends dt{get schema(){return this._def.getter()}_parse(e){let{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}};kp.create=(t,e)=>new kp({getter:t,typeName:Ee.ZodLazy,...et(e)});var xp=class extends dt{_parse(e){if(e.data!==this._def.value){let a=this._getOrReturnCtx(e);return Q(a,{received:a.data,code:R.invalid_literal,expected:this._def.value}),We}return{status:"valid",value:e.data}}get value(){return this._def.value}};xp.create=(t,e)=>new xp({value:t,typeName:Ee.ZodLiteral,...et(e)});function T1(t,e){return new eh({values:t,typeName:Ee.ZodEnum,...et(e)})}var eh=class k0 extends dt{constructor(){super(...arguments),tc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let a=this._getOrReturnCtx(e),s=this._def.values;return Q(a,{expected:$t.joinValues(s),received:a.parsedType,code:R.invalid_type}),We}if(my(this,tc)||h1(this,tc,new Set(this._def.values)),!my(this,tc).has(e.data)){let a=this._getOrReturnCtx(e),s=this._def.values;return Q(a,{received:a.data,code:R.invalid_enum_value,options:s}),We}return Ya(e.data)}get options(){return this._def.values}get enum(){let e={};for(let a of this._def.values)e[a]=a;return e}get Values(){let e={};for(let a of this._def.values)e[a]=a;return e}get Enum(){let e={};for(let a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return k0.create(e,{...this._def,...a})}exclude(e,a=this._def){return k0.create(this.options.filter(s=>!e.includes(s)),{...this._def,...a})}};tc=new WeakMap;eh.create=T1;var Cp=class extends dt{constructor(){super(...arguments),ac.set(this,void 0)}_parse(e){let a=$t.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==ie.string&&s.parsedType!==ie.number){let n=$t.objectValues(a);return Q(s,{expected:$t.joinValues(n),received:s.parsedType,code:R.invalid_type}),We}if(my(this,ac)||h1(this,ac,new Set($t.getValidEnumValues(this._def.values))),!my(this,ac).has(e.data)){let n=$t.objectValues(a);return Q(s,{received:s.data,code:R.invalid_enum_value,options:n}),We}return Ya(e.data)}get enum(){return this._def.values}};ac=new WeakMap;Cp.create=(t,e)=>new Cp({values:t,typeName:Ee.ZodNativeEnum,...et(e)});var Pl=class extends dt{unwrap(){return this._def.type}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ie.promise&&a.common.async===!1)return Q(a,{code:R.invalid_type,expected:ie.promise,received:a.parsedType}),We;let s=a.parsedType===ie.promise?a.data:Promise.resolve(a.data);return Ya(s.then(n=>this._def.type.parseAsync(n,{path:a.path,errorMap:a.common.contextualErrorMap})))}};Pl.create=(t,e)=>new Pl({type:t,typeName:Ee.ZodPromise,...et(e)});var Dn=class extends dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ee.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:r=>{Q(s,r),r.fatal?a.abort():a.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let r=n.transform(s.data,i);if(s.common.async)return Promise.resolve(r).then(async o=>{if(a.value==="aborted")return We;let l=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return l.status==="aborted"?We:l.status==="dirty"||a.value==="dirty"?py(l.value):l});{if(a.value==="aborted")return We;let o=this._def.schema._parseSync({data:r,path:s.path,parent:s});return o.status==="aborted"?We:o.status==="dirty"||a.value==="dirty"?py(o.value):o}}if(n.type==="refinement"){let r=o=>{let l=n.refinement(o,i);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?We:(o.status==="dirty"&&a.dirty(),r(o.value),{status:a.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?We:(o.status==="dirty"&&a.dirty(),r(o.value).then(()=>({status:a.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){let r=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!pp(r))return r;let o=n.transform(r.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(r=>pp(r)?Promise.resolve(n.transform(r.value,i)).then(o=>({status:a.value,value:o})):r);$t.assertNever(n)}};Dn.create=(t,e,a)=>new Dn({schema:t,typeName:Ee.ZodEffects,effect:e,...et(a)});Dn.createWithPreprocess=(t,e,a)=>new Dn({schema:e,effect:{type:"preprocess",transform:t},typeName:Ee.ZodEffects,...et(a)});var gi=class extends dt{_parse(e){return this._getType(e)===ie.undefined?Ya(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};gi.create=(t,e)=>new gi({innerType:t,typeName:Ee.ZodOptional,...et(e)});var ro=class extends dt{_parse(e){return this._getType(e)===ie.null?Ya(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ro.create=(t,e)=>new ro({innerType:t,typeName:Ee.ZodNullable,...et(e)});var Tp=class extends dt{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return a.parsedType===ie.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:a.path,parent:a})}removeDefault(){return this._def.innerType}};Tp.create=(t,e)=>new Tp({innerType:t,typeName:Ee.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...et(e)});var Sp=class extends dt{_parse(e){let{ctx:a}=this._processInputParams(e),s={...a,common:{...a.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return mp(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $n(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new $n(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Sp.create=(t,e)=>new Sp({innerType:t,typeName:Ee.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...et(e)});var vy=class extends dt{_parse(e){if(this._getType(e)!==ie.nan){let a=this._getOrReturnCtx(e);return Q(a,{code:R.invalid_type,expected:ie.nan,received:a.parsedType}),We}return{status:"valid",value:e.data}}};vy.create=t=>new vy({typeName:Ee.ZodNaN,...et(t)});var Dq=Symbol("zod_brand"),jk=class extends dt{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return this._def.type._parse({data:s,path:a.path,parent:a})}unwrap(){return this._def.type}},Dk=class S1 extends dt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?We:n.status==="dirty"?(a.dirty(),py(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?We:n.status==="dirty"?(a.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,a){return new S1({in:e,out:a,typeName:Ee.ZodPipeline})}},$p=class extends dt{_parse(e){let a=this._def.innerType._parse(e),s=n=>(pp(n)&&(n.value=Object.freeze(n.value)),n);return mp(a)?a.then(n=>s(n)):s(a)}unwrap(){return this._def.innerType}};$p.create=(t,e)=>new $p({innerType:t,typeName:Ee.ZodReadonly,...et(e)});function $1(t,e={},a){return t?Il.create().superRefine((s,n)=>{var i,r;if(!t(s)){let o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,l=(r=(i=o.fatal)!==null&&i!==void 0?i:a)!==null&&r!==void 0?r:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:l})}}):Il.create()}var Bq={object:tn.lazycreate},Ee;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ee||(Ee={}));var qq=(t,e={message:`Input not instance of ${t.name}`})=>$1(a=>a instanceof t,e),A1=Ol.create,L1=fp.create,Wq=vy.create,Fq=hp.create,M1=gp.create,zq=yp.create,Hq=fy.create,Uq=vp.create,Vq=bp.create,Kq=Il.create,Gq=Ko.create,Qq=sr.create,Yq=hy.create,Jq=fd.create,Xq=tn.create,eW=tn.strictCreate,tW=wp.create,aW=w1.create,sW=_p.create,nW=io.create,iW=x1.create,rW=gy.create,oW=yy.create,dW=C1.create,lW=kp.create,uW=xp.create,cW=eh.create,pW=Cp.create,mW=Pl.create,hT=Dn.create,fW=gi.create,hW=ro.create,gW=Dn.createWithPreprocess,yW=Dk.create,vW=()=>A1().optional(),bW=()=>L1().optional(),wW=()=>M1().optional(),_W={string:t=>Ol.create({...t,coerce:!0}),number:t=>fp.create({...t,coerce:!0}),boolean:t=>gp.create({...t,coerce:!0}),bigint:t=>hp.create({...t,coerce:!0}),date:t=>yp.create({...t,coerce:!0})},kW=We,wt=Object.freeze({__proto__:null,defaultErrorMap:El,setErrorMap:kq,getErrorMap:uy,makeIssue:cy,EMPTY_PATH:xq,addIssueToContext:Q,ParseStatus:vs,INVALID:We,DIRTY:py,OK:Ya,isAborted:h0,isDirty:g0,isValid:pp,isAsync:mp,get util(){return $t},get objectUtil(){return f0},ZodParsedType:ie,getParsedType:Nr,ZodType:dt,datetimeRegex:v1,ZodString:Ol,ZodNumber:fp,ZodBigInt:hp,ZodBoolean:gp,ZodDate:yp,ZodSymbol:fy,ZodUndefined:vp,ZodNull:bp,ZodAny:Il,ZodUnknown:Ko,ZodNever:sr,ZodVoid:hy,ZodArray:fd,ZodObject:tn,ZodUnion:wp,ZodDiscriminatedUnion:w1,ZodIntersection:_p,ZodTuple:io,ZodRecord:x1,ZodMap:gy,ZodSet:yy,ZodFunction:C1,ZodLazy:kp,ZodLiteral:xp,ZodEnum:eh,ZodNativeEnum:Cp,ZodPromise:Pl,ZodEffects:Dn,ZodTransformer:Dn,ZodOptional:gi,ZodNullable:ro,ZodDefault:Tp,ZodCatch:Sp,ZodNaN:vy,BRAND:Dq,ZodBranded:jk,ZodPipeline:Dk,ZodReadonly:$p,custom:$1,Schema:dt,ZodSchema:dt,late:Bq,get ZodFirstPartyTypeKind(){return Ee},coerce:_W,any:Kq,array:Jq,bigint:Fq,boolean:M1,date:zq,discriminatedUnion:aW,effect:hT,enum:cW,function:dW,instanceof:qq,intersection:sW,lazy:lW,literal:uW,map:rW,nan:Wq,nativeEnum:pW,never:Qq,null:Vq,nullable:hW,number:L1,object:Xq,oboolean:wW,onumber:bW,optional:fW,ostring:vW,pipeline:yW,preprocess:gW,promise:mW,record:iW,set:oW,strictObject:eW,string:A1,symbol:Hq,transformer:hT,tuple:nW,undefined:Uq,union:tW,unknown:Gq,void:Yq,NEVER:kW,ZodIssueCode:R,quotelessJson:_q,ZodError:$n}),hw=t=>typeof(t==null?void 0:t.passthrough)=="function",xW=(t,e)=>hw(t)?hw(e)?t.merge(e):t:hw(e)?e:Object.assign({},t,e);wt.object({name:wt.literal("ZodError"),issues:wt.array(wt.object({path:wt.array(wt.union([wt.string(),wt.number()])),message:wt.string().optional(),code:wt.nativeEnum(wt.ZodIssueCode)}).catchall(wt.any()))});var CW=Symbol("ContractNoBody"),TW=t=>"method"in t&&"path"in t,E1=(t,e)=>Object.fromEntries(Object.entries(t).map(([a,s])=>{var n,i,r;return TW(s)?[a,{...s,path:e!=null&&e.pathPrefix?e.pathPrefix+s.path:s.path,headers:xW(e==null?void 0:e.baseHeaders,s.headers),strictStatusCodes:(n=s.strictStatusCodes)!==null&&n!==void 0?n:e==null?void 0:e.strictStatusCodes,validateResponseOnClient:(i=s.validateResponseOnClient)!==null&&i!==void 0?i:e==null?void 0:e.validateResponseOnClient,responses:{...e==null?void 0:e.commonResponses,...s.responses},metadata:e!=null&&e.metadata?{...e==null?void 0:e.metadata,...(r=s.metadata)!==null&&r!==void 0?r:{}}:s.metadata}]:[a,E1(s,e)]})),gw=Symbol("ContractPlainType"),SW=()=>({router:(t,e)=>E1(t,e),query:t=>t,mutation:t=>t,responses:t=>t,response:()=>gw,body:()=>gw,type:()=>gw,otherResponse:({contentType:t,body:e})=>({contentType:t,body:e}),noBody:()=>CW}),Bk=wt.object({message:wt.string()}),$W=Bk.extend({validationErrors:wt.array(wt.string())}),nc=Bk,gT=nc.extend({errorId:wt.string(),uid:wt.string().optional()});function AW(t){return Bk.extend({data:t})}var LW={400:nc.describe("Generic client error"),401:nc.describe("Authentication required but not provided or invalid"),403:nc.describe("Operation not permitted"),422:$W.describe("Request validation failed"),429:nc.describe("Rate limit exceeded"),500:gT.describe("Generic server error"),503:gT.describe("Endpoint disabled or server is under maintenance")};wt.string().regex(/^\d+$/,'Needs to be a number or a number represented as a string e.g. "10".').or(wt.number().transform(String));var O1=()=>wt.string().regex(/^[a-zA-Z0-9_]+$/),MW=O1();O1().max(50);wt.string().max(50).regex(/^[a-zA-Z0-9_+]+$/,"Can only contain letters [a-zA-Z0-9_+]");wt.string().nullable().optional().transform(t=>t??void 0);wt.number().nonnegative().max(100);wt.number().nonnegative().max(420);wt.enum(["repeat","random","shuffle"]);wt.enum(["word","time","section"]);var EW=wt.object({username:wt.string(),createUser:wt.boolean().optional().describe("If `true` create user with <username>@example.com and password `password`. If false user has to exist."),firstTestTimestamp:wt.number().int().nonnegative().optional(),lastTestTimestamp:wt.number().int().nonnegative().optional(),minTestsPerDay:wt.number().int().nonnegative().optional(),maxTestsPerDay:wt.number().int().nonnegative().optional()}),OW=AW(wt.object({uid:MW,email:wt.string().email()})),IW=SW(),PW=IW.router({generateData:{summary:"generate data",description:"Generate test results for the given user.",method:"POST",path:"/generateData",body:EW.strict(),responses:{200:OW}}},{pathPrefix:"/dev",strictStatusCodes:!0,metadata:{openApiTags:"development",authenticationOptions:{isPublicOnDev:!0}},commonResponses:LW});const I1=Yf.backendUrl,ZW=k$(wq,I1,1e4),NW=k$(PW,I1,24e4),K={...ZW,dev:NW};async function Fh(){}class Ii{constructor(e){this.name=e.name,this.element=e.element,this.pathname=e.path,this.beforeHide=e.beforeHide??Fh,this.afterHide=e.afterHide??Fh,this.beforeShow=e.beforeShow??Fh,this.afterShow=e.afterShow??Fh}}const hb=new Map;function $s(t,e=!0){const a=document.getElementById(t)??void 0;if(a===void 0)throw new Error(`Element with id ${t} not found`);hb.set(t,a),e&&Ga(t)}function Ga(t){const e=hb.get(t);e?e.remove():$s(t,!0)}const RW={popups:document.getElementById("popups"),main:document.querySelector("main")};function js(t,e){const a=hb.get(t);RW[e].append(a)}function jW(t){return hb.has(t)}function ni(t,e=!1){const a=e?100:1e3;d(".pageLoading .fill, .pageAccount .preloader .fill").stop(!0,e).animate({width:t+"%"},a)}function by(t){d(".pageLoading .text, .pageAccount .preloader .text").text(t)}async function P1(){return new Promise(t=>{xi(d(".pageLoading .preloader .icon"),d(".pageLoading .preloader .barWrapper"),125,async()=>{t()}),xi(d(".pageAccount .preloader .icon"),d(".pageAccount .preloader .barWrapper"),125,async()=>{t()})})}const DW=new Ii({name:"loading",element:d(".page.pageLoading"),path:"/",afterHide:async()=>{Ga("pageLoading")},beforeShow:async()=>{js("pageLoading","main")}}),BW={theme:"serika_dark",themeLight:"serika",themeDark:"serika_dark",autoSwitchTheme:!1,customTheme:!1,customThemeColors:["#323437","#e2b714","#e2b714","#646669","#2c2e31","#d1d0c5","#ca4754","#7e2a33","#ca4754","#7e2a33"],favThemes:[],showKeyTips:!0,smoothCaret:"medium",quickRestart:"off",punctuation:!1,numbers:!1,words:50,time:30,mode:"time",quoteLength:[1],language:"english",fontSize:2,freedomMode:!1,difficulty:"normal",blindMode:!1,quickEnd:!1,caretStyle:"default",paceCaretStyle:"default",flipTestColors:!1,layout:"default",funbox:"none",confidenceMode:"off",indicateTypos:"off",timerStyle:"mini",liveSpeedStyle:"off",liveAccStyle:"off",liveBurstStyle:"off",colorfulMode:!1,randomTheme:"off",timerColor:"main",timerOpacity:"1",stopOnError:"off",showAllLines:!1,keymapMode:"off",keymapStyle:"staggered",keymapLegendStyle:"lowercase",keymapLayout:"overrideSync",keymapShowTopRow:"layout",keymapSize:1,fontFamily:"Roboto_Mono",smoothLineScroll:!1,alwaysShowDecimalPlaces:!1,alwaysShowWordsHistory:!1,singleListCommandLine:"on",capsLockWarning:!0,playSoundOnError:"off",playSoundOnClick:"off",soundVolume:.5,startGraphsAtZero:!0,showOutOfFocusWarning:!0,paceCaret:"off",paceCaretCustomSpeed:100,repeatedPace:!0,accountChart:["on","on","on","on"],minWpm:"off",minWpmCustomSpeed:100,highlightMode:"letter",typingSpeedUnit:"wpm",ads:"result",hideExtraLetters:!1,strictSpace:!1,minAcc:"off",minAccCustom:90,monkey:!1,repeatQuotes:"off",oppositeShiftMode:"off",customBackground:"",customBackgroundSize:"cover",customBackgroundFilter:[0,1,1,1],customLayoutfluid:"qwerty#dvorak#colemak",monkeyPowerLevel:"off",minBurst:"off",minBurstCustomSpeed:100,burstHeatmap:!1,britishEnglish:!1,lazyMode:!1,showAverage:"off",tapeMode:"off",maxLineWidth:0},Ba=Rn(BW),Z1=[];function qW(t){Z1.push(t)}window.addEventListener("load",()=>{window.addEventListener("online",()=>{yT(!0)}),window.addEventListener("offline",()=>{yT(!1)})});function yT(t){Z1.forEach(e=>{try{e(t)}catch(a){console.error("Connection event subscriber threw an error"),console.error(a)}})}let xn=!1,hd=!1,pa=!1,ds=null,th=!0,jo=!1,x0=1;function N1(t){xn=t}function WW(t){hd=t}function qk(t){pa=t}function R1(t){ds=t}function Tne(t){th=t}function j1(t){jo=t}function Wk(t){x0=t}let Ap=navigator.onLine;function ma(){return Ap}let Nc,C0=!1;function gb(){C0||Nc===void 0&&(Nc=Kc("No internet connection",0,"exclamation-triangle",!1,()=>{C0=!0,Nc=void 0}))}const FW=Ck(1e4,()=>{Ap?(y("You're back online",1,{customTitle:"Connection"}),Nc!==void 0&&d(`#bannerCenter .banner[id="${Nc}"] .closeButton`).trigger("click"),C0=!1):pa||gb()});qW(t=>{Ap=t,FW()});window.addEventListener("load",()=>{Ap=navigator.onLine,Ap||gb()});function _n(t,e,a){const s=vT(t),n=vT(e);if(s&&n){const i={r:s.r,g:s.g,b:s.b,a:1},r={r:n.r,g:n.g,b:n.b,a},o=SZ(i,r);return zW(o.r,o.g,o.b)}else return"#000000"}function vT(t){if(t.length!==4&&t.length!==7||!t.startsWith("#"))return;let e,a,s;if(t.length===4)e=+("0x"+t[1]+t[1]),a=+("0x"+t[2]+t[2]),s=+("0x"+t[3]+t[3]);else if(t.length===7)e=+("0x"+t[1]+t[2]),a=+("0x"+t[3]+t[4]),s=+("0x"+t[5]+t[6]);else return;return{r:e,g:a,b:s}}function zW(t,e,a){return"#"+((1<<24)+(t<<16)+(e<<8)+a).toString(16).slice(1)}function wy(t){let e,a,s;t.length===4?(e="0x"+t[1]+t[1],a="0x"+t[2]+t[2],s="0x"+t[3]+t[3]):t.length===7?(e="0x"+t[1]+t[2],a="0x"+t[3]+t[4],s="0x"+t[5]+t[6]):(e=0,a=0,s=0),e/=255,a/=255,s/=255;const n=Math.min(e,a,s),i=Math.max(e,a,s),r=i-n;let o=0,l=0,c=0;return r===0?o=0:i===e?o=(a-s)/r%6:i===a?o=(s-e)/r+2:o=(e-a)/r+4,o=Math.round(o*60),o<0&&(o+=360),c=(i+n)/2,l=r===0?0:r/(1-Math.abs(2*c-1)),l=+(l*100).toFixed(1),c=+(c*100).toFixed(1),{hue:o,sat:l,lgt:c,string:"hsl("+o+","+l+"%,"+c+"%)"}}function HW(t){return wy(t).lgt>=50}function D1(t){return wy(t).lgt<50}function UW(t){const e=t.match(/^rgb\((\d+), \s*(\d+), \s*(\d+)\)$/);if(e===null||e.length<3)return;function a(s){return("0"+parseInt(s).toString(16)).slice(-2)}return"#"+a(e[1])+a(e[2])+a(e[3])}async function VW(t){try{if(!t)throw new Error("No URL");const e=await fetch(t);if(e.ok)return await e.json();throw new Error(`${e.status} ${e.statusText}`)}catch(e){throw console.error("Error fetching JSON: "+t,e),e}}function KW(t,e){const a=new Map;return async(...s)=>{const n=s[0];if(a.has(n)){const r=await a.get(n);if(r!==void 0)return r}const i=t.apply(null,s);return a.set(n,i),i}}const As=KW(VW);async function ah(){try{return await As("/layouts/_list.json")}catch{throw new Error("Layouts JSON fetch failed")}}async function sh(t){const a=(await ah())[t];if(a===void 0)throw new Error(`Layout ${t} is undefined`);return a}let Fo;async function Fk(){if(Fo)return Fo;{let t=await As("/themes/_list.json");return t=t.sort((e,a)=>{const s=e.name.toLowerCase(),n=a.name.toLowerCase();return s<n?-1:s>n?1:0}),Fo=t,Fo}}let zh;async function GW(){if(zh)return zh;{if(Fo||await Fk(),!Fo)throw new Error("Themes list is undefined");let t=[...Fo];return t=t.sort((e,a)=>{const s=wy(e.bgColor);return wy(a.bgColor).lgt-s.lgt}),zh=t,zh}}async function zk(){try{return await As("/languages/_list.json")}catch{throw new Error("Language list JSON fetch failed")}}async function Hk(){try{return await As("/languages/_groups.json")}catch{throw new Error("Language groups JSON fetch failed")}}let Hh;async function nh(t){return(Hh===void 0||Hh.name!==t)&&(Hh=await As(`/languages/${t}.json`)),Hh}async function QW(t){const e=await nh(t);return e.orderedByFrequency===!0?"yes":e.orderedByFrequency===!1?"no":"unknown"}async function Lo(t){return await nh(t)}async function YW(t){let e;return(await Hk()).forEach(s=>{e===void 0&&s.languages.includes(t)&&(e=s)}),e}let Uh;async function ku(){if(Uh)return Uh;{let t=await As("/funbox/_list.json");return t=t.sort((e,a)=>{const s=e.name.toLowerCase(),n=a.name.toLowerCase();return s<n?-1:s>n?1:0}),Uh=t,Uh}}class B1{constructor(e,a,s){this.title=e,this.author=a,this.words=s}}async function JW(t){return(await ku()).find(function(a){return a.name===t})}let Vh;async function XW(){if(Vh)return Vh;{let t=await As("/fonts/_list.json");return t=t.sort((e,a)=>{const s=e.name.toLowerCase(),n=a.name.toLowerCase();return s<n?-1:s>n?1:0}),Vh=t,Vh}}async function eF(){try{return await As("/challenges/_list.json")}catch{throw new Error("Challenge list JSON fetch failed")}}async function tF(){try{return await As("/about/supporters.json")}catch{throw new Error("Supporters list JSON fetch failed")}}async function aF(){try{return await As("/about/contributors.json")}catch{throw new Error("Contributors list JSON fetch failed")}}async function sF(){const t=await As("https://api.github.com/repos/monkeytypegame/monkeytype/releases?per_page=1");if(t[0]===void 0||t[0].name===void 0)throw new Error("No release found");return t[0].name}async function nF(){return As("https://api.github.com/repos/monkeytypegame/monkeytype/releases?per_page=5")}function Lp(t){return iF(q1(t))}function iF(t){const e={};for(const a of tr(Ba)){const s=t[a]??Ba[a];e[a]=s}return e}function q1(t){if(t.quickTab===!0&&t.quickRestart===void 0&&(t.quickRestart="tab"),typeof t.smoothCaret=="boolean"&&(t.smoothCaret=t.smoothCaret?"medium":"off"),t.swapEscAndTab===!0&&t.quickRestart===void 0&&(t.quickRestart="esc"),t.alwaysShowCPM===!0&&t.typingSpeedUnit===void 0&&(t.typingSpeedUnit="cpm"),t.showAverage==="wpm"&&(t.showAverage="speed"),typeof t.playSoundOnError=="boolean"&&(t.playSoundOnError=t.playSoundOnError?"1":"off"),t.showTimerProgress===!1&&t.timerStyle===void 0&&(t.timerStyle="off"),t.showLiveWpm===!0&&t.liveSpeedStyle===void 0){let e="mini";t.timerStyle!=="bar"&&t.timerStyle!=="off"&&(e=t.timerStyle),t.liveSpeedStyle=e}if(t.showLiveBurst===!0&&t.liveBurstStyle===void 0){let e="mini";t.timerStyle!=="bar"&&t.timerStyle!=="off"&&(e=t.timerStyle),t.liveBurstStyle=e}if(t.showLiveAcc===!0&&t.liveAccStyle===void 0){let e="mini";t.timerStyle!=="bar"&&t.timerStyle!=="off"&&(e=t.timerStyle),t.liveAccStyle=e}return typeof t.soundVolume=="string"&&(t.soundVolume=parseFloat(t.soundVolume)),t}class Cg{constructor(e,a,s=!1){const n=new Yu(a),i=this.getInterval(n,s);this.startDay=i.start,this.endDay=i.end,this.data=this.buildData(e,n),this.isFullYear=s}getInterval(e,a=!1){const s=a?$Z(e):new Date;let n=AZ(e);return a||(n=s0(LZ(s,52),1),zC(n)||(n=HC(n))),{start:n,end:s}}buildData(e,a){const s=new Array(Math.max(0,386-e.length)).fill(void 0);s.push(...e);const n=ol(this.endDay,this.startDay)+1,i=s.length-n+ol(this.endDay,a);return s.slice(i)}getMonths(){const e=MZ({start:this.startDay,end:this.endDay}),a=[];for(let s=0;s<e.length;s++){const n=e[s];let i=s===0?this.startDay:EZ(n),r=s===e.length-1?this.endDay:OZ(i);zC(i)||(i=(s===0?HC:IZ)(i)),PZ(r)||(r=ZZ(r));const o=NZ(r,i,{roundingMethod:"ceil"});o>2?a.push({text:zt(n,"MMM").toLowerCase(),weeks:o}):s==0&&a.push({text:"",weeks:o})}return a}getDays(){const e=[],a=this.getBuckets(),s=r=>{if(r===void 0||r===null||r===0)return"0";for(let o=0;o<4;o++)if(r<=(a[o]??0))return(1+o).toString();return"4"};for(let r=0;r<this.startDay.getDay();r++)e.push({level:"filler"});const n=ol(this.endDay,this.startDay);let i=this.startDay;for(let r=0;r<=n;r++){const o=this.data[r],l=zt(i,"EEEE dd MMM yyyy");e.push({level:s(o),label:o!=null?`${o} ${o==1?"test":"tests"} on ${l}`:`no activity on ${l}`}),i=s0(i,1)}for(let r=this.endDay.getDay();r<6;r++)e.push({level:"filler"});return e}getTotalTests(){const e=ol(this.endDay,this.startDay);return this.data.slice(0,e+1).reduce((a,s)=>(a??0)+(s??0),0)??0}getBuckets(){const a=this.data.filter(r=>r!=null).sort((r,o)=>r-o),s=a.slice(Math.round(a.length*.1),a.length-Math.round(a.length*.1)),i=s.reduce((r,o)=>r+o,0)/s.length;return[Math.floor(i/2),Math.round(i),Math.round(i*1.5)]}}class rF extends Cg{constructor(e,a){super(e,a),this.lastDay=new Yu(a)}increment(e){const a=new Yu(e),s=new Yu(this.lastDay);if(RZ(a,s)){const n=this.data.length-1;this.data[n]=(this.data[n]||0)+1}else{if(jZ(a,s))throw new Error("cannot alter data in the past.");{const n=ol(a,s)-1;for(let r=0;r<n;r++)this.data.push(void 0);this.data.push(1);const i=this.getInterval(a);this.startDay=i.start,this.endDay=i.end,this.lastDay=a}}this.data=this.buildData(this.data,this.lastDay)}getFullYearCalendar(){const e=new Date;return this.lastDay.getFullYear()!==new Yu(e).getFullYear()?new Cg([],e,!0):new Cg(this.data,this.lastDay,!0)}}const oF={results:void 0,personalBests:{time:{},words:{},quote:{},zen:{},custom:{}},name:"",email:"",uid:"",isPremium:!1,config:Ba,customThemes:[],presets:[],tags:[],banned:void 0,verified:void 0,lbMemory:{time:{15:{english:0},60:{english:0}}},typingStats:{timeTyping:0,startedTests:0,completedTests:0},quoteRatings:void 0,quoteMod:!1,favoriteQuotes:{},addedAt:0,filterPresets:[],xp:0,inboxUnreadSize:0,streak:0,maxStreak:0,streakHourOffset:void 0,allTimeLbs:{time:{15:{english:{count:0,rank:0}},60:{english:{count:0,rank:0}}}}},bT=Rn(oF);let pe;class ic extends Error{constructor(e,a){super(e),this.responseCode=a,this.name="SnapshotInitError",this.responseCode=a}}function A(){return pe}function Ea(t){const e=pe==null?void 0:pe.banned,a=pe==null?void 0:pe.verified,s=pe==null?void 0:pe.lbOptOut;try{t==null||delete t.banned}catch{}try{t==null||delete t.verified}catch{}try{t==null||delete t.lbOptOut}catch{}pe=t,pe&&(pe.banned=e,pe.verified=a,pe.lbOptOut=s)}async function dF(){var e,a,s,n,i,r,o;const t=bT;try{if(!Se())return!1;const[l,c,m]=await Promise.all([K.users.get(),K.configs.get(),K.presets.get()]);if(l.status!==200)throw new ic(`${l.body.message} (user)`,l.status);if(c.status!==200)throw new ic(`${c.body.message} (config)`,c.status);if(m.status!==200)throw new ic(`${m.body.message} (presets)`,m.status);const f=l.body.data,h=c.body.data,v=m.body.data;if(f===null)throw new ic("Request was successful but user data is null",200);if(h!==null&&"config"in h)throw new Error("Config data is not in the correct format. Please refresh the page or contact support.");t.name=f.name,t.personalBests=f.personalBests,t.personalBests??(t.personalBests={time:{},words:{},quote:{},zen:{},custom:{}});for(const _ of["time","words","quote","zen","custom"])(e=t.personalBests)[_]??(e[_]={});t.banned=f.banned,t.lbOptOut=f.lbOptOut,t.verified=f.verified,t.discordId=f.discordId,t.discordAvatar=f.discordAvatar,t.needsToChangeName=f.needsToChangeName,t.typingStats={timeTyping:f.timeTyping??0,startedTests:f.startedTests??0,completedTests:f.completedTests??0},t.quoteMod=f.quoteMod,t.favoriteQuotes=f.favoriteQuotes??{},t.quoteRatings=f.quoteRatings,t.details=f.profileDetails,t.addedAt=f.addedAt,t.inventory=f.inventory,t.xp=f.xp??0,t.inboxUnreadSize=f.inboxUnreadSize??0,t.streak=((a=f==null?void 0:f.streak)==null?void 0:a.length)??0,t.maxStreak=((s=f==null?void 0:f.streak)==null?void 0:s.maxLength)??0,t.filterPresets=f.resultFilterPresets??[],t.isPremium=(f==null?void 0:f.isPremium)??!1,t.allTimeLbs=f.allTimeLbs,f.testActivity!==void 0&&(t.testActivity=new rF(f.testActivity.testsByDays,new Date(f.testActivity.lastDay)));const w=(n=f==null?void 0:f.streak)==null?void 0:n.hourOffset;if(t.streakHourOffset=w??void 0,f.lbMemory!==void 0&&(t.lbMemory=f.lbMemory),h==null?t.config={...Ba}:t.config=Lp(h),t.customThemes=f.customThemes??[],t.tags=((i=f.tags)==null?void 0:i.map(_=>({..._,display:_.name.replaceAll("_"," ")})))??[],t.tags=(r=t.tags)==null?void 0:r.sort((_,S)=>_.name>S.name?1:_.name<S.name?-1:0),v!=null){const _=v.map(S=>({...S,display:S.name.replace(/_/gi," ")}));t.presets=_,t.presets=(o=t.presets)==null?void 0:o.sort((S,M)=>S.name>M.name?1:S.name<M.name?-1:0)}return pe=t,pe}catch(l){throw pe=bT,l}}async function Uk(t){var s;if(!Se()||!pe||pe.results!==void 0&&(t===void 0||pe.results.length>t)||!ma())return!1;pe.results===void 0&&(by("Downloading results..."),ni(90));const e=await K.results.get({query:{offset:t}});if(e.status!==200)return y("Error getting results: "+e.body.message,-1),!1;const a=e.body.data.map(n=>(n.bailedOut===void 0&&(n.bailedOut=!1),n.blindMode===void 0&&(n.blindMode=!1),n.lazyMode===void 0&&(n.lazyMode=!1),n.difficulty===void 0&&(n.difficulty="normal"),n.funbox===void 0&&(n.funbox="none"),(n.language===void 0||n.language===null)&&(n.language="english"),n.numbers===void 0&&(n.numbers=!1),n.punctuation===void 0&&(n.punctuation=!1),n.numbers===void 0&&(n.numbers=!1),n.quoteLength===void 0&&(n.quoteLength=-1),n.restartCount===void 0&&(n.restartCount=0),n.incompleteTestSeconds===void 0&&(n.incompleteTestSeconds=0),n.afkDuration===void 0&&(n.afkDuration=0),n.tags===void 0&&(n.tags=[]),n));if(a==null||a.sort((n,i)=>i.timestamp-n.timestamp),pe.results!==void 0&&pe.results.length>0){const n=(s=to(pe.results))==null?void 0:s.timestamp,i=a.filter(r=>r.timestamp<n);pe.results.push(...i)}else pe.results=a;return!0}async function lF(t){if(!pe)return!1;if(pe.customThemes===void 0&&(pe.customThemes=[]),pe.customThemes.length>=10)return y("Too many custom themes!",0),!1;const e=await K.users.addCustomTheme({body:{...t}});if(e.status!==200)return y("Error adding custom theme: "+e.body.message,-1),!1;if(e.body.data===null)return y("Error adding custom theme: No data returned",-1),!1;const a={...t,_id:e.body.data._id};return pe.customThemes.push(a),!0}async function uF(t,e){var i;if(!Se()||!pe)return!1;pe.customThemes===void 0&&(pe.customThemes=[]);const a=(i=pe.customThemes)==null?void 0:i.find(r=>r._id===t);if(!a)return y("Editing failed: Custom theme with id: "+t+" does not exist",-1),!1;const s=await K.users.editCustomTheme({body:{themeId:t,theme:e}});if(s.status!==200)return y("Error editing custom theme: "+s.body.message,-1),!1;const n={...e,_id:t};return pe.customThemes[pe.customThemes.indexOf(a)]=n,!0}async function cF(t){var s,n;if(!Se()||!pe||!((s=pe.customThemes)==null?void 0:s.find(i=>i._id===t)))return!1;const a=await K.users.deleteCustomTheme({body:{themeId:t}});return a.status!==200?(y("Error deleting custom theme: "+a.body.message,-1),!1):(pe.customThemes=(n=pe.customThemes)==null?void 0:n.filter(i=>i._id!==t),!0)}async function W1(t,e,a,s,n,i,r){const o=A();if(!o)return[0,0];function l(){var M;const m=[];(M=o==null?void 0:o.tags)==null||M.forEach(I=>{I.active===!0&&m.push(I._id)});let f=0,h=0,v=0,w=0,_=0,S=0;if((o==null?void 0:o.results)!==void 0){for(const I of o.results)if(I.mode===t&&(I.punctuation??!1)===a&&(I.numbers??!1)===s&&I.language===n&&I.difficulty===i&&(I.lazyMode===r||I.lazyMode===void 0&&!r)&&(m.length===0||m.some(me=>{var P;return(P=I.tags)==null?void 0:P.includes(me)}))){if(`${I.mode2}`!=`${e}`&&t!=="quote")continue;if(S<10&&(v+=I.wpm,w+=I.acc,S++),`${I.mode2}`==`${e}`&&(f+=I.wpm,h+=I.acc,_++,_>=10))break}}return _===0&&t==="quote"?[v/S,w/S]:[f/_,h/_]}return o===null||await Uk()===null?[0,0]:l()}async function pF(t,e,a,s,n,i,r){const o=A();if(!o)return 0;function l(){var h;const m=[];(h=o==null?void 0:o.tags)==null||h.forEach(v=>{v.active===!0&&m.push(v._id)});let f=0;if((o==null?void 0:o.results)!==void 0){for(const v of o.results)if(v.mode===t&&(v.punctuation??!1)===a&&(v.numbers??!1)===s&&v.language===n&&v.difficulty===i&&(v.lazyMode===r||v.lazyMode===void 0&&!r)&&(m.length===0||m.some(w=>{var _;return(_=v.tags)==null?void 0:_.includes(w)}))){if(v.timestamp<Date.now()-864e5||`${v.mode2}`!=`${e}`&&t!=="quote")continue;v.wpm>f&&(f=v.wpm)}}return f}return o===null||await Uk()===null?0:l()}async function mF(t,e,a,s,n,i,r){const o=A();if(!o)return 0;let l=0;for(const c of o.tags){if(!c.active)continue;const m=await F1(c._id,t,e,a,s,n,i,r);m>l&&(l=m)}return l}async function Mp(t,e,a,s,n,i,r,o){var m,f;if(!(await ku()).filter(h=>o==null?void 0:o.split("#").includes(h.name)).every(h=>h.canGetPb))return;const c=(f=(m=pe==null?void 0:pe.personalBests)==null?void 0:m[t])==null?void 0:f[e];return c==null?void 0:c.find(h=>(h.punctuation??!1)===a&&(h.numbers??!1)===s&&h.difficulty===i&&h.language===n&&(h.lazyMode??!1)===r)}async function fF(t,e,a,s,n,i,r,o,l,c,m){if(t==="quote"||!pe)return;function f(){var v,w;if(!pe)return;let h=!1;pe.personalBests??(pe.personalBests={time:{},words:{},quote:{},zen:{},custom:{}}),(v=pe.personalBests)[t]??(v[t]={[e]:[]}),(w=pe.personalBests[t])[e]??(w[e]=[]),pe.personalBests[t][e].forEach(_=>{(_.punctuation??!1)===a&&(_.numbers??!1)===s&&_.difficulty===i&&_.language===n&&(_.lazyMode??!1)===r&&(h=!0,_.wpm=o,_.acc=l,_.raw=c,_.timestamp=Date.now(),_.consistency=m,_.lazyMode=r)}),h||pe.personalBests[t][e].push({language:n,difficulty:i,lazyMode:r,punctuation:a,numbers:s,wpm:o,acc:l,raw:c,timestamp:Date.now(),consistency:m})}pe!==null&&f()}async function F1(t,e,a,s,n,i,r,o){var f,h,v,w;if(pe===null)return 0;let l=0;const c=(((f=A())==null?void 0:f.tags)??[]).filter(_=>_._id===t)[0];return c===void 0||(c.personalBests??(c.personalBests={time:{},words:{},quote:{},zen:{},custom:{}}),(h=c.personalBests)[e]??(h[e]={[a]:[]}),(v=c.personalBests[e])[a]??(v[a]=[]),l=((w=(c.personalBests[e][a]??[]).find(_=>(_.punctuation??!1)===s&&(_.numbers??!1)===n&&_.difficulty===r&&_.language===i&&(_.lazyMode===o||_.lazyMode===void 0&&!o)))==null?void 0:w.wpm)??0),l}async function hF(t,e,a,s,n,i,r,o,l,c,m,f){if(!pe||e==="quote")return;function h(){var w,_,S;const v=(w=pe==null?void 0:pe.tags)==null?void 0:w.filter(M=>M._id===t)[0];v.personalBests??(v.personalBests={time:{},words:{},quote:{},zen:{},custom:{}}),(_=v.personalBests)[e]??(_[e]={[a]:[]}),(S=v.personalBests[e])[a]??(S[a]=[]);try{let M=!1;v.personalBests[e][a].forEach(I=>{(I.punctuation??!1)===s&&(I.numbers??!1)===n&&I.difficulty===r&&I.language===i&&(I.lazyMode===o||I.lazyMode===void 0&&!o)&&(M=!0,I.wpm=l,I.acc=c,I.raw=m,I.timestamp=Date.now(),I.consistency=f,I.lazyMode=o)}),M||v.personalBests[e][a].push({language:i,difficulty:r,lazyMode:o,punctuation:s,numbers:n,wpm:l,acc:c,raw:m,timestamp:Date.now(),consistency:f})}catch{v.personalBests={time:{},words:{},quote:{},zen:{},custom:{}},v.personalBests[e][a]=[{language:i,difficulty:r,lazyMode:o,punctuation:s,numbers:n,wpm:l,acc:c,raw:m,timestamp:Date.now(),consistency:f}]}}pe!==null&&h()}async function wT(t,e,a,s,n=!1){var i,r,o;{const l=t,c=e,m=A();if(!m)return;m.lbMemory===void 0&&(m.lbMemory={time:{15:{english:0},60:{english:0}}}),m.lbMemory[l]===void 0&&(m.lbMemory[l]={15:{english:0},60:{english:0}}),m.lbMemory[l][c]===void 0&&(m.lbMemory[l][c]={});const f=(o=(r=(i=m.lbMemory)==null?void 0:i[l])==null?void 0:r[c])==null?void 0:o[a],h=m.lbMemory[l][c];h[a]=s,n&&f!==s&&await K.users.updateLeaderboardMemory({body:{mode:t,mode2:e,language:a,rank:s}}),Ea(m)}}async function z1(t){if(Se()){const e=await K.configs.save({body:t});e.status!==200&&y("Failed to save config: "+e.body.message,-1)}}async function gF(){if(Se()){const t=await K.configs.delete();t.status!==200&&y("Failed to reset config: "+t.body.message,-1)}}function H1(t){const e=A();e&&((e==null?void 0:e.results)!==void 0&&(e.results.unshift(t),Ea(e)),e.testActivity!==void 0&&(e.testActivity.increment(new Date(t.timestamp)),Ea(e)))}function U1(t,e){const a=A();a&&(a.typingStats===void 0&&(a.typingStats={timeTyping:0,startedTests:0,completedTests:0}),a.typingStats.timeTyping+=e,a.typingStats.startedTests+=t,a.typingStats.completedTests+=1,Ea(a))}function V1(t){const e=A();e&&(e.xp===void 0&&(e.xp=0),e.xp+=t,Ea(e))}function yF(t){const e=A();e&&(e.inventory===void 0&&(e.inventory={badges:[]}),e.inventory.badges.push(t),Ea(e))}function vF(t){const e=A();e&&(e.streak=t,e.streak>e.maxStreak&&(e.maxStreak=e.streak),Ea(e))}async function bF(t){var a;if(!Se()||pe===void 0)return;if(t==="current")return pe.testActivity;const e=new Date().getFullYear().toString();if(t===e)return(a=pe.testActivity)==null?void 0:a.getFullYearCalendar();if(pe.testActivityByYear===void 0){if(!ma())return;Ct();const s=await K.users.getTestActivity();if(s.status!==200){y("Error getting test activities: "+s.body.message,-1),Qe();return}pe.testActivityByYear={};for(const n in s.body.data){if(n===e)continue;const i=s.body.data[n]??[],r=s0(new Date(parseInt(n),0,1),i.length);pe.testActivityByYear[n]=new Cg(i,r,!0)}Qe()}return pe.testActivityByYear[t]}const K1=[];function ih(){d("#words, #koInputVisualContainer").css("transition","none").removeClass("blurred"),d(".outOfFocusWarning").addClass("hidden"),pZ(K1)}function wF(){K1.push(setTimeout(()=>{d("#words, #koInputVisualContainer").css("transition","0.25s").addClass("blurred"),d(".outOfFocusWarning").removeClass("hidden")},1e3))}function G1(t,e,a){a===void 0?y(`Invalid value for ${t} (${e}). Please try to change this setting again.`,-1):y(`Invalid value for ${t} (${e}). ${a}`,-1),console.error(`Invalid value key ${t} value ${e} type ${typeof e}`)}function fe(t,e,a){const s=a.safeParse(e).success;return s||G1(t,e,void 0),s}function aa(t,e){return fe(t,e,qt.boolean())}async function _F(t,e,a){let s=!1,n;for(const i of a)switch(i){case"layoutfluid":{if(typeof e!="string")break;const r=e.split(/[# ]+/);if(r.length<2||r.length>5)break;try{await ah()}catch(l){n=Ge(l,"Failed to validate layoutfluid value");break}const o=await Promise.all(r.map(async l=>sh(l)));if(!o.every(l=>l!==void 0)){n=`The following inputted layouts do not exist: ${r.map((m,f)=>[m,o[f]]).filter(([m,f])=>f===void 0).map(([m])=>m).join(", ")}`;break}s=!0;break}}return s||G1(t,e,n),s}const Q1=[];function Gt(t){Q1.push(t)}function z(t,e,a,s,n){Q1.forEach(i=>{try{i(t,e,a,s,n)}catch(r){console.error("Config event subscriber threw an error"),console.error(r)}})}let T0;async function nr(t,e){try{qZ(T0,t,e)}catch{console.log("Analytics unavailable")}}const Kh=localStorage.getItem("acceptedCookies");let _y;Kh!=null&&Kh!==""?_y=JSON.parse(Kh):_y=null;_y!==null&&_y.analytics&&S0();function S0(){try{T0=DZ(yN),BZ(T0,!0),d("body").append(`
    <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=UA-165993088-1"
  ><\/script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "UA-165993088-1");
  <\/script>`)}catch(t){console.error(Ge(t,"Failed to activate analytics"))}}const kF=[{name:"Prime Ape",description:"Paying for a monthly subscription",icon:"fa-dollar-sign",test:t=>t.isPremium===!0},{name:"Banned",description:"This account is banned",icon:"fa-gavel",color:"var(--error-color)",test:t=>t.banned===!0},{name:"LbOptOut",description:"This account has opted out of leaderboards",icon:"fa-crown",color:"var(--error-color)",test:t=>t.lbOptOut===!0}],xF={iconsOnly:!1};function CF(t){return kF.filter(a=>a.test(t))}function TF(t,e){const a=`<i class="fas ${t.icon}"></i>`;if(e.iconsOnly)return a;const s=[];return t.background!==void 0&&s.push(`background: ${t.background};`),(t==null?void 0:t.color)!==void 0&&s.push(`color: ${t.color};`),(t==null?void 0:t.customStyle)!==void 0&&s.push(t.customStyle),`<div class="flag" ${`aria-label="${t.description}" data-balloon-pos="right"`} style="${s.join("")}">${a}</div>`}function yb(t,e){const a={...xF,...e};return CF(t).map(s=>TF(s,a)).join("")}function ky(t){return Math.floor((Math.sqrt(392*t+22801)-53)/98)}function SF(t){return 49*(t-1)+100}function $F(t){return(49*Math.pow(t,2)+53*t-102)/2}function Ep(t){const e=ky(t);return{level:e,levelCurrentXp:t-$F(e),levelMaxXp:SF(e)}}let za={bg:"#323437",main:"#e2b714",caret:"#e2b714",sub:"#646669",subAlt:"#2c2e31",text:"#d1d0c5",error:"#ca4754",errorExtra:"#7e2a33",colorfulError:"#ca4754",colorfulErrorExtra:"#7e2a33"};async function Ps(t){return za[t]||rh(),za[t]}async function Mo(){return za.bg||rh(),za}function AF(){za={bg:"",main:"",caret:"",sub:"",subAlt:"",text:"",error:"",errorExtra:"",colorfulError:"",colorfulErrorExtra:""}}function rh(){const t=getComputedStyle(document.body);za.bg=t.getPropertyValue("--bg-color").replace(" ",""),za.main=t.getPropertyValue("--main-color").replace(" ",""),za.caret=t.getPropertyValue("--caret-color").replace(" ",""),za.sub=t.getPropertyValue("--sub-color").replace(" ",""),za.subAlt=t.getPropertyValue("--sub-alt-color").replace(" ",""),za.text=t.getPropertyValue("--text-color").replace(" ",""),za.error=t.getPropertyValue("--error-color").replace(" ",""),za.errorExtra=t.getPropertyValue("--error-extra-color").replace(" ",""),za.colorfulError=t.getPropertyValue("--colorful-error-color").replace(" ",""),za.colorfulErrorExtra=t.getPropertyValue("--colorful-error-extra-color").replace(" ","")}let xy=!1;function LF(){xy||(xy=!0,console.error("Slow timer, disabling animations"))}function Op(){xy=!1}function ya(){return xy}let Cy=!1,ga=!1,Y1=!1,No={currentXp:0,addedXp:0,breakdown:void 0};const Fi=d("nav .xpBar .xpBreakdown .total"),Cn=d("nav .xpBar .xpBreakdown .list"),qi=d("nav .level"),ai=d("nav .xpBar .bar"),Tg=d("nav .xpBar");async function MF(){if(ga=!0,!Cy)return;Y1?Fi.text(`+${No.addedXp}`):zs(No.addedXp,!0),Cn.stop(!0,!0).empty().addClass("hidden"),qi.text(ky(No.currentXp+No.addedXp));const t=Ep(No.currentXp+No.addedXp),e=t.level+t.levelCurrentXp/t.levelMaxXp;ai.css("width",`${e%1*100}%`),await Qt(2e3),Cy=!1,Tg.stop(!0,!0).css("opacity",1).animate({opacity:0},ya()?0:Jt(250))}function _T(t){const e=Ep(t),a=e.levelCurrentXp/e.levelMaxXp;qi.text(e.level),ai.css({width:a*100+"%"})}async function J1(t,e,a){ga=!1,Cy=!0,No={currentXp:t,addedXp:e,breakdown:a},qi.text(ky(t));const s=Ep(t),n=Ep(t+e),i=s.level+s.levelCurrentXp/s.levelMaxXp,r=n.level+n.levelCurrentXp/n.levelMaxXp,o=Cn;Cn.stop(!0,!0).css("opacity",0).empty(),Tg.stop(!0,!0).css("opacity",0),Fi.text("");const l=Wo(Tg,{opacity:"1"},ya()?0:Jt(125),"linear"),c=Wo(Cn,{opacity:"1"},ya()?0:Jt(125),"linear");if(a!==void 0?(o.removeClass("hidden"),Promise.all([l,c])):o.addClass("hidden"),ga)return;const m=OF(i,r),f=EF(e,a);await Promise.all([m,f]),!ga&&(await Qt(5e3),!ga&&(Cy=!1,qi.text(ky(t+e)),Tg.stop(!0,!0).css("opacity",1).animate({opacity:0},ya()?0:Jt(250))))}async function zs(t,e=!1){if(!e&&ga)return;Fi.text(`+${t}`);const a=(Math.random()*2-1)/4,s=(Math.random()+1)/2;Fi.stop(!0,!0).css({transition:"initial",borderSpacing:100}).animate({borderSpacing:0},{step(n){Fi.css("transform",`scale(${1+n/200*s}) rotate(${n/10*a}deg)`)},duration:Jt(2e3),easing:"easeOutCubic",complete:()=>{Fi.css({backgroundColor:"",transition:""})}})}async function Fs(t,e,a){if(ga)return;if(e===void 0)Cn.append(`<div class="line" data-string='${t}'><div>${t}</div><div></div></div>`);else if(typeof e=="string")Cn.append(`
      <div class="line" data-string='${t}'>
      <div class="${a==null?void 0:a.extraClass}">${t}</div>
      <div class="${a==null?void 0:a.extraClass}">${e}</div>
      </div>`);else{const n=e==null?void 0:e>=0;Cn.append(`
      <div class="line" data-string='${t}'>

        <div class="${a==null?void 0:a.extraClass}">${t}</div>
        <div class="${n?"positive":"negative"} ${a==null?void 0:a.extraClass}">${n?"+":"-"}${Math.abs(e)}</div>
      </div>`)}if(a!=null&&a.noAnimation)return;const s=Cn.find(`.line[data-string='${t}']`);s.css("opacity",0),await Wo(s,{opacity:"1"},Jt(250),"swing")}async function EF(t,e){if(ga)return;if(Cn.css("opacity",1),!e){Fi.text(`+${t}`);return}const a=Jt(250);let s=0;Cn.empty(),Cn.removeClass("hidden"),Fi.text("+0"),s+=e.base??0,Fi.text(`+${s}`),await Fs("time typing",e.base,{noAnimation:!0}),await Qt(a),e.fullAccuracy?(await Qt(a),s+=e.fullAccuracy,zs(s),await Fs("perfect",e.fullAccuracy)):e.corrected&&(await Qt(a),s+=e.corrected,zs(s),await Fs("clean",e.corrected)),!ga&&(e.quote?(await Qt(a),s+=e.quote,zs(s),await Fs("quote",e.quote)):(e.punctuation&&(await Qt(a),s+=e.punctuation,zs(s),await Fs("punctuation",e.punctuation)),e.numbers&&(await Qt(a),s+=e.numbers,zs(s),await Fs("numbers",e.numbers))),!ga&&(e.funbox&&(await Qt(a),s+=e.funbox,zs(s),await Fs("funbox",e.funbox)),!ga&&(e.streak&&(await Qt(a),s+=e.streak,zs(s),await Fs("streak",e.streak)),!ga&&(e.accPenalty&&(await Qt(a),s-=e.accPenalty,zs(s),await Fs("accuracy penalty",e.accPenalty*-1)),!ga&&(e.incomplete&&(await Qt(a),s+=e.incomplete,zs(s),await Fs("incomplete tests",e.incomplete)),!ga&&(e.configMultiplier&&(await Qt(a),s*=e.configMultiplier,zs(s),await Fs("global multiplier",`x${e.configMultiplier}`)),!ga&&(e.daily&&(await Qt(a),s+=e.daily,zs(s),await Fs("daily bonus",e.daily)),Y1=!0,!ga&&await Qt(a))))))))}async function OF(t,e){if(ga)return;const a=e-t;if(ai.css("width",`${t%1*100}%`),e%1===0){if(await Wo(ai,{width:"100%"},ya()?0:Jt(1e3),"easeOutExpo"),ga)return;yw(),ai.css("width","0%")}else if(Math.floor(t)===Math.floor(e))await Wo(ai,{width:`${e%1*100}%`},ya()?0:Jt(1e3),"easeOutExpo");else{const s=Math.min(1e3/a,200);let n=a,i=!1,r=s,o="linear",l=1-t%1;do{if(ga)return;n-1<1&&(r=Xg(n-1,0,.5,1e3,200),o="easeOutQuad"),i&&(yw(),ai.css("width","0%"),l=1),await Wo(ai,{width:"100%"},ya()?0:Jt(r),o),n-=l,i=!0}while(n>1);if(ga||(yw(),ai.css("width","0%"),ga))return;await Wo(ai,{width:`${n%1*100}%`},ya()?0:Jt(1e3),"easeOutExpo")}}async function yw(){const t=await Mo();qi.text(parseInt(qi.text())+1);const e=Math.random()*2-1,a=Math.random()+1;qi.stop(!0,!0).css({backgroundColor:t.main,borderSpacing:100,transition:"initial"}).animate({backgroundColor:t.sub,borderSpacing:0},{step(s){qi.css("transform",`scale(${1+s/200*a}) rotate(${s/10*e}deg)`)},duration:Jt(2e3),easing:"easeOutCubic",complete:()=>{qi.css({backgroundColor:"",transition:""})}})}let $0=!1;function IF(){d("nav .accountButtonAndMenu").addClass("hidden"),d("nav .textButton.view-login").addClass("hidden")}function Ys(t){t?(d("header nav .account").css("opacity",1).css("pointer-events","none"),$0?(d("header nav .view-account .loading").css("opacity",1).removeClass("hidden"),d("header nav .view-account .avatar").stop(!0,!0).css({opacity:1}).animate({opacity:0},100,()=>{d("header nav .view-account .avatar").addClass("hidden")})):(d("header nav .view-account .loading").stop(!0,!0).removeClass("hidden").css({opacity:0}).animate({opacity:1},100),d("header nav .view-account .user").stop(!0,!0).css({opacity:1}).animate({opacity:0},100,()=>{d("header nav .view-account .user").addClass("hidden")}))):(d("header nav .account").css("opacity",1).css("pointer-events","auto"),$0?(d("header nav .view-account .loading").css("opacity",1).addClass("hidden"),d("header nav .view-account .avatar").stop(!0,!0).removeClass("hidden").css({opacity:0}).animate({opacity:1},100)):(d("header nav .view-account .loading").stop(!0,!0).css({opacity:1}).animate({opacity:0},100,()=>{d("header nav .view-account .loading").addClass("hidden")}),d("header nav .view-account .user").stop(!0,!0).removeClass("hidden").css({opacity:0}).animate({opacity:1},100)))}function kT(t){d("header nav .view-account > .text").text(t)}function xT(t){d("nav .textButton.view-account > .text").append(yb(t,{iconsOnly:!0}))}function Ty(t,e){(e??"")&&(t??"")?_k(t,e).then(a=>{a!==null&&(d("header nav .view-account .avatar").css("background-image",`url(${a})`),$0=!0,d("header nav .view-account .user").addClass("hidden"),d("header nav .view-account .avatar").removeClass("hidden"))}):(d("header nav .view-account .avatar").addClass("hidden"),d("header nav .view-account .user").removeClass("hidden"))}function Vk(t){if(Se()){const{xp:e,discordId:a,discordAvatar:s,name:n}=t;kT(n),xT(t??{}),_T(e),Ty(a??"",s??""),d("nav .accountButtonAndMenu .menu .items .goToProfile").attr("href",`/profile/${n}`),xi(d("nav .textButton.view-login"),d("nav .accountButtonAndMenu"),250)}else xi(d("nav .accountButtonAndMenu"),d("nav .textButton.view-login"),250,async()=>{kT(""),xT({}),_T(0),Ty(void 0,void 0)})}var HS;const PF=(HS=window.matchMedia("(pointer:coarse)"))==null?void 0:HS.matches;PF&&d("nav .accountButtonAndMenu .textButton.view-account").attr("href","");const Kk=[{name:"nausea",info:"I think I'm gonna be sick.",hasCSS:!0},{name:"round_round_baby",info:"...right round, like a record baby. Right, round round round.",hasCSS:!0},{name:"simon_says",info:"Type what simon says.",properties:["changesWordsVisibility","usesLayout"],forcedConfig:{highlightMode:["letter","off"]},hasCSS:!0},{name:"mirror",info:"Everything is mirrored!",hasCSS:!0},{name:"upside_down",info:"Everything is upside down!",hasCSS:!0},{name:"tts",info:"Listen closely.",properties:["changesWordsVisibility","speaks"],forcedConfig:{highlightMode:["letter","off"]},hasCSS:!0},{name:"choo_choo",info:"All the letters are spinning!",properties:["noLigatures","conflictsWithSymmetricChars"],hasCSS:!0},{name:"arrows",info:"Play it on a pad!",properties:["ignoresLanguage","ignoresLayout","nospace","noLetters","symmetricChars"],forcedConfig:{punctuation:[!1],numbers:[!1],highlightMode:["letter","off"]}},{name:"rAnDoMcAsE",info:"I kInDa LiKe HoW iNeFfIcIeNt QwErTy Is.",properties:["changesCapitalisation"]},{name:"capitals",info:"Capitalize Every Word.",properties:["changesCapitalisation"]},{name:"layoutfluid",info:"Switch between layouts specified below proportionately to the length of the test.",properties:["changesLayout","noInfiniteDuration"]},{name:"earthquake",info:"Everybody get down! The words are shaking!",properties:["noLigatures"],hasCSS:!0},{name:"space_balls",info:"In a galaxy far far away.",hasCSS:!0},{name:"gibberish",info:"Anvbuefl dizzs eoos alsb?",properties:["ignoresLanguage","unspeakable"]},{name:"58008",alias:"numbers",info:"A special mode for accountants.",properties:["ignoresLanguage","ignoresLayout","noLetters"],forcedConfig:{numbers:[!1]}},{name:"ascii",info:"Where was the ampersand again?. Only ASCII characters.",properties:["ignoresLanguage","noLetters","unspeakable"],forcedConfig:{numbers:[!1]}},{name:"specials",info:"!@#$%^&*. Only special characters.",properties:["ignoresLanguage","noLetters","unspeakable"],forcedConfig:{punctuation:[!1],numbers:[!1]}},{name:"plus_zero",info:"React quickly! Only the current word is visible.",properties:["changesWordsVisibility","toPush:1","noInfiniteDuration"]},{name:"plus_one",info:"Only one future word is visible.",properties:["changesWordsVisibility","toPush:2","noInfiniteDuration"]},{name:"plus_two",info:"Only two future words are visible.",properties:["changesWordsVisibility","toPush:3","noInfiniteDuration"]},{name:"plus_three",info:"Only three future words are visible.",properties:["changesWordsVisibility","toPush:4","noInfiniteDuration"]},{name:"read_ahead_easy",info:"Only the current word is invisible.",properties:["changesWordsVisibility"],forcedConfig:{highlightMode:["letter","off"]},hasCSS:!0},{name:"read_ahead",info:"Current and the next word are invisible!",properties:["changesWordsVisibility"],forcedConfig:{highlightMode:["letter","off"]},hasCSS:!0},{name:"read_ahead_hard",info:"Current and the next two words are invisible!",properties:["changesWordsVisibility"],forcedConfig:{highlightMode:["letter","off"]},hasCSS:!0},{name:"memory",info:"Test your memory. Remember the words and type them blind.",properties:["changesWordsVisibility","noInfiniteDuration"],forcedConfig:{mode:["words","quote","custom"]}},{name:"nospace",info:"Whoneedsspacesanyway?",properties:["nospace"],forcedConfig:{highlightMode:["letter","off"]}},{name:"poetry",info:"Practice typing some beautiful prose.",properties:["noInfiniteDuration","ignoresLanguage"],forcedConfig:{punctuation:[!1],numbers:[!1]}},{name:"wikipedia",info:"Practice typing wikipedia sections.",properties:["noInfiniteDuration","ignoresLanguage"],forcedConfig:{punctuation:[!1],numbers:[!1]}},{name:"weakspot",info:"Focus on slow and mistyped letters.",properties:["changesWordsFrequency"]},{name:"pseudolang",info:"Nonsense words that look like the current language.",properties:["unspeakable","ignoresLanguage"]},{name:"IPv4",alias:"network",info:"For sysadmins.",properties:["ignoresLanguage","ignoresLayout","noLetters"],forcedConfig:{numbers:[!1]}},{name:"IPv6",alias:"network",info:"For sysadmins with a long beard.",properties:["ignoresLanguage","ignoresLayout","noLetters"],forcedConfig:{numbers:[!1]}},{name:"binary",alias:"numbers",info:"01000010 01100101 01100101 01110000 00100000 01100010 01101111 01101111 01110000 00101110",properties:["ignoresLanguage","ignoresLayout","noLetters"],forcedConfig:{numbers:[!1],punctuation:[!1]}},{name:"hexadecimal",info:"0x38 0x20 0x74 0x69 0x6D 0x65 0x73 0x20 0x6D 0x6F 0x72 0x65 0x20 0x62 0x6F 0x6F 0x70 0x21",properties:["ignoresLanguage","ignoresLayout","noLetters"],forcedConfig:{numbers:[!1]}},{name:"zipf",alias:"frequency",info:"Words are generated according to Zipf's law. (not all languages will produce Zipfy results, use with caution)",properties:["changesWordsFrequency"]},{name:"morse",info:"-.../././.--./ -.../---/---/.--./-.-.--/ ",properties:["ignoresLanguage","ignoresLayout","noLetters","nospace"]},{name:"crt",info:"Go back to the 1980s",properties:["noLigatures"]},{name:"backwards",info:"...sdrawkcab epyt ot yrt woN",properties:["noLigatures","conflictsWithSymmetricChars","wordOrder:reverse"]},{name:"ddoouubblleedd",info:"TTyyppee eevveerryytthhiinngg ttwwiiccee..",properties:["noLigatures"]},{name:"instant_messaging",info:"Who needs shift anyway?",properties:["changesCapitalisation"]}];function ZF(){return Kk}function Ye(t){const e=[];for(const a of t.split("#")){const s=Kk.find(n=>n.name===a);s&&e.push(s)}return e}function Wt(t,e){const a=Kk.find(s=>s.name===t);if(!a)throw new Error(`Funbox ${t} not found.`);a.functions=e}function NF(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function X1(t){return t.replace(/([A-Z])/g," $1").trim().toLowerCase()}function eA(t){try{return t.charAt(t.length-1)}catch{return""}}function CT(t,e,a){return e>t.length-1?t:t.substring(0,e)+a+t.substring(e+1)}function oh(t){return t.split(/ +/).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function Zl(t){return t.charAt(0).toUpperCase()+t.slice(1)}function RF(t,e){const a=[];let s=[];const n=new Set(e);for(const i of t)n.has(i)?(s.length>0&&a.push(s.join("")),a.push(i),s=[]):s.push(i);return s.length>0&&a.push(s.join("")),a}function oo(t,e=!1){let a="";return e?a=ii(t):a=t,a.replace(/_/g," ")}function ii(t){return t.replace(/_\d*k$/g,"")}function tA(t){const e={"":'"',"":'"',"":'"',"":"'","":"'",",":",","":"-","":"...","":"<<","":">>","":"-","":" ","":" ","":" "};return t.replace(/[,\u2007\u202F\u00A0]/g,a=>e[a]||"")}function Ui(t){const e=[];for(const a of t)e.push(a);return e}function aA(t,e,a=!1){let s;e.length>t.length&&(s=e,e=t,t=s);let n=t.filter(function(i){return e.includes(i)});return a?[...new Set(n)]:n}function A0(t,e,a){var s;if(Ye(a).length===0)return{result:!0};if(t==="words"||t==="time")return e===0?(a==="nospace"&&console.log("break"),Ye(a).filter(i=>{var r;return(r=i.properties)==null?void 0:r.includes("noInfiniteDuration")}).length>0?{result:!1,forcedConfigs:[t==="words"?10:15]}:{result:!0}):{result:!0};{const n={};for(const i of Ye(a))if(i.forcedConfig)for(const r in i.forcedConfig)n[r]===void 0?n[r]=i.forcedConfig[r]:n[r]=aA(n[r],i.forcedConfig[r],!0);if(n[t]===void 0)return{result:!0};if(((s=n[t])==null?void 0:s.length)===0)throw new Error("No intersection of forced configs");return{result:(n[t]??[]).includes(e),forcedConfigs:n[t]}}}function Id(t,e,a,s=!1){let n=0;if(t==="mode"){let i=[];i=i.concat(Ye(a).filter(r=>{var o,l;return((o=r.forcedConfig)==null?void 0:o.mode)!==void 0&&!((l=r.forcedConfig)!=null&&l.mode.includes(e))})),e==="zen"&&(i=i.concat(Ye(a).filter(r=>{var o,l,c,m,f,h,v,w,_,S,M;return((o=r.functions)==null?void 0:o.getWord)??((l=r.functions)==null?void 0:l.pullSection)??((c=r.functions)==null?void 0:c.alterText)??((m=r.functions)==null?void 0:m.withWords)??((f=r.properties)==null?void 0:f.includes("changesCapitalisation"))??((h=r.properties)==null?void 0:h.includes("nospace"))??((v=r.properties)==null?void 0:v.find(I=>I.startsWith("toPush:")))??((w=r.properties)==null?void 0:w.includes("changesWordsVisibility"))??((_=r.properties)==null?void 0:_.includes("speaks"))??((S=r.properties)==null?void 0:S.includes("changesLayout"))??((M=r.properties)==null?void 0:M.includes("changesWordsFrequency"))}))),(e==="quote"||e==="custom")&&(i=i.concat(Ye(a).filter(r=>{var o,l,c,m;return((o=r.functions)==null?void 0:o.getWord)??((l=r.functions)==null?void 0:l.pullSection)??((c=r.functions)==null?void 0:c.withWords)??((m=r.properties)==null?void 0:m.includes("changesWordsFrequency"))}))),i.length>0&&(n+=1)}if(t==="words"||t==="time"){if(!A0(t,e,a).result)if(s)n+=1;else return y("Active funboxes do not support infinite tests",0),!1}else A0(t,e,a).result||(n+=1);return n>0?(s||y(`You can't set ${X1(t)} to ${e.toString()} with currently active funboxes.`,0,{duration:5}),!1):!0}function sA(t,e){console.log("cansetfunboxwithconfig",t,e.mode);let a=e.funbox;a==="none"?a=t:a+="#"+t;const s=[];for(const[n,i]of Object.entries(e))Id(n,i,a,!0)||s.push({key:n,value:i});if(s.length>0){const n=[];for(const i of s)n.push(`${Zl(X1(i.key))} cannot be set to ${i.value.toString()}.`);return y(`You can't enable ${t.replace(/_/g," ")}:<br>${n.join("<br>")}`,0,{duration:5,allowHTML:!0}),!1}else return!0}function Gk(t,e){if(e==="none"||t==="none")return!0;let a=Ye(t);e!==void 0&&(a=a.concat(ZF().filter(T=>T.name===e)));const s=Ye(t).filter(T=>t.split("#").find(L=>L===T.name)!==void 0).length===t.split("#").length,n=a.filter(T=>{var L,V,na;return((L=T.functions)==null?void 0:L.getWord)??((V=T.functions)==null?void 0:V.pullSection)??((na=T.functions)==null?void 0:na.withWords)}).length<=1,i=a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="changesLayout")}).length===0||a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="ignoresLayout"||V==="usesLayout")}).length===0,r=a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="nospace"||V.startsWith("toPush"))}).length<=1,o=a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="changesWordsVisibility")}).length<=1,l=a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="changesWordsFrequency")}).length<=1,c=a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="changesWordsFrequency")}).length===0||a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="ignoresLanguage")}).length===0,m=a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="noLetters")}).length===0||a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="changesCapitalisation")}).length===0,f=a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="conflictsWithSymmetricChars")}).length===0||a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="symmetricChars")}).length===0,h=a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="speaks")}).length<=1,v=a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="speaks")}).length===0||a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="speaks")}).length===1&&a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="unspeakable")}).length===0||a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="ignoresLanguage")}).length===0,w=a.filter(T=>{var L,V;return(((L=T.properties)==null?void 0:L.find(na=>na.startsWith("toPush:")))??"")||((V=T.functions)==null?void 0:V.pullSection)}).length<=1,_=a.filter(T=>T.hasCSS==!0).length<=1,S=a.filter(T=>{var L;return(L=T.functions)==null?void 0:L.punctuateWord}).length<=1,M=a.filter(T=>{var L;return(L=T.functions)==null?void 0:L.isCharCorrect}).length<=1,I=a.filter(T=>{var L;return(L=T.functions)==null?void 0:L.getWordHtml}).length<=1,me=a.filter(T=>{var L;return(L=T.properties)==null?void 0:L.find(V=>V==="changesCapitalisation")}).length<=1,P={};let $=!0;for(const T of a)if(T.forcedConfig)for(const L in T.forcedConfig)if(P[L]){if(aA(P[L],T.forcedConfig[L],!0).length===0){$=!1;break}}else P[L]=T.forcedConfig[L];return s&&n&&i&&r&&o&&l&&c&&m&&f&&h&&v&&w&&_&&S&&M&&I&&me&&$}var At;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function a(n){throw new Error}t.assertNever=a,t.arrayToEnum=n=>{let i={};for(let r of n)i[r]=r;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),r={};for(let o of i)r[o]=n[o];return t.objectValues(r)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.push(r);return i},t.find=(n,i)=>{for(let r of n)if(i(r))return r},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(r=>typeof r=="string"?`'${r}'`:r).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(At||(At={}));var L0;(function(t){t.mergeShapes=(e,a)=>({...e,...a})})(L0||(L0={}));var re=At.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rr=t=>{switch(typeof t){case"undefined":return re.undefined;case"string":return re.string;case"number":return isNaN(t)?re.nan:re.number;case"boolean":return re.boolean;case"function":return re.function;case"bigint":return re.bigint;case"symbol":return re.symbol;case"object":return Array.isArray(t)?re.array:t===null?re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?re.promise:typeof Map<"u"&&t instanceof Map?re.map:typeof Set<"u"&&t instanceof Set?re.set:typeof Date<"u"&&t instanceof Date?re.date:re.object;default:return re.unknown}},j=At.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jF=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),An=class nA extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let a=e||function(i){return i.message},s={_errors:[]},n=i=>{for(let r of i.issues)if(r.code==="invalid_union")r.unionErrors.map(n);else if(r.code==="invalid_return_type")n(r.returnTypeError);else if(r.code==="invalid_arguments")n(r.argumentsError);else if(r.path.length===0)s._errors.push(a(r));else{let o=s,l=0;for(;l<r.path.length;){let c=r.path[l];l===r.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(a(r))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),s}static assert(e){if(!(e instanceof nA))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,At.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){let a={},s=[];for(let n of this.issues)n.path.length>0?(a[n.path[0]]=a[n.path[0]]||[],a[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:a}}get formErrors(){return this.flatten()}};An.create=t=>new An(t);var Nl=(t,e)=>{let a;switch(t.code){case j.invalid_type:t.received===re.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case j.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,At.jsonStringifyReplacer)}`;break;case j.unrecognized_keys:a=`Unrecognized key(s) in object: ${At.joinValues(t.keys,", ")}`;break;case j.invalid_union:a="Invalid input";break;case j.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${At.joinValues(t.options)}`;break;case j.invalid_enum_value:a=`Invalid enum value. Expected ${At.joinValues(t.options)}, received '${t.received}'`;break;case j.invalid_arguments:a="Invalid function arguments";break;case j.invalid_return_type:a="Invalid function return type";break;case j.invalid_date:a="Invalid date";break;case j.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:At.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case j.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case j.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case j.custom:a="Invalid input";break;case j.invalid_intersection_types:a="Intersection results could not be merged";break;case j.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case j.not_finite:a="Number must be finite";break;default:a=e.defaultError,At.assertNever(t)}return{message:a}},iA=Nl;function DF(t){iA=t}function Sy(){return iA}var $y=t=>{let{data:e,path:a,errorMaps:s,issueData:n}=t,i=[...a,...n.path||[]],r={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="",l=s.filter(c=>!!c).slice().reverse();for(let c of l)o=c(r,{data:e,defaultError:o}).message;return{...n,path:i,message:o}},BF=[];function Y(t,e){let a=Sy(),s=$y({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===Nl?void 0:Nl].filter(n=>!!n)});t.common.issues.push(s)}var bs=class rA{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){let s=[];for(let n of a){if(n.status==="aborted")return Fe;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,a){let s=[];for(let n of a){let i=await n.key,r=await n.value;s.push({key:i,value:r})}return rA.mergeObjectSync(e,s)}static mergeObjectSync(e,a){let s={};for(let n of a){let{key:i,value:r}=n;if(i.status==="aborted"||r.status==="aborted")return Fe;i.status==="dirty"&&e.dirty(),r.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof r.value<"u"||n.alwaysSet)&&(s[i.value]=r.value)}return{status:e.value,value:s}}},Fe=Object.freeze({status:"aborted"}),Ay=t=>({status:"dirty",value:t}),Ja=t=>({status:"valid",value:t}),M0=t=>t.status==="aborted",E0=t=>t.status==="dirty",Ip=t=>t.status==="valid",Pp=t=>typeof Promise<"u"&&t instanceof Promise;function Ly(t,e,a,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function oA(t,e,a,s,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,a),a}var ve;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ve||(ve={}));var rc,oc,Si=class{constructor(e,a,s,n){this._cachedPath=[],this.parent=e,this.data=a,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},TT=(t,e)=>{if(Ip(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let a=new An(t.common.issues);return this._error=a,this._error}}};function tt(t){if(!t)return{};let{errorMap:e,invalid_type_error:a,required_error:s,description:n}=t;if(e&&(a||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,r)=>{var o,l;let{message:c}=t;return i.code==="invalid_enum_value"?{message:c??r.defaultError}:typeof r.data>"u"?{message:(o=c??s)!==null&&o!==void 0?o:r.defaultError}:i.code!=="invalid_type"?{message:r.defaultError}:{message:(l=c??a)!==null&&l!==void 0?l:r.defaultError}},description:n}}var lt=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Rr(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:Rr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new bs,ctx:{common:e.parent.common,data:e.data,parsedType:Rr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let a=this._parse(e);if(Pp(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){let a=this._parse(e);return Promise.resolve(a)}parse(e,a){let s=this.safeParse(e,a);if(s.success)return s.data;throw s.error}safeParse(e,a){var s;let n={common:{issues:[],async:(s=a==null?void 0:a.async)!==null&&s!==void 0?s:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return TT(n,i)}async parseAsync(e,a){let s=await this.safeParseAsync(e,a);if(s.success)return s.data;throw s.error}async safeParseAsync(e,a){let s={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rr(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(Pp(n)?n:Promise.resolve(n));return TT(s,i)}refine(e,a){let s=n=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(n):a;return this._refinement((n,i)=>{let r=e(n),o=()=>i.addIssue({code:j.custom,...s(n)});return typeof Promise<"u"&&r instanceof Promise?r.then(l=>l?!0:(o(),!1)):r?!0:(o(),!1)})}refinement(e,a){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof a=="function"?a(s,n):a),!1))}_refinement(e){return new Bn({schema:this,typeName:Oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return yi.create(this,this._def)}nullable(){return uo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return gd.create(this,this._def)}promise(){return Dl.create(this,this._def)}or(e){return qp.create([this,e],this._def)}and(e){return Wp.create(this,e,this._def)}transform(e){return new Bn({...tt(this._def),schema:this,typeName:Oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let a=typeof e=="function"?e:()=>e;return new Up({...tt(this._def),innerType:this,defaultValue:a,typeName:Oe.ZodDefault})}brand(){return new Qk({typeName:Oe.ZodBranded,type:this,...tt(this._def)})}catch(e){let a=typeof e=="function"?e:()=>e;return new Vp({...tt(this._def),innerType:this,catchValue:a,typeName:Oe.ZodCatch})}describe(e){let a=this.constructor;return new a({...this._def,description:e})}pipe(e){return Yk.create(this,e)}readonly(){return Kp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},qF=/^c[^\s-]{8,}$/i,WF=/^[0-9a-z]+$/,FF=/^[0-9A-HJKMNP-TV-Z]{26}$/,zF=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,HF=/^[a-z0-9_-]{21}$/i,UF=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,VF=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,KF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",vw,GF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,QF=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,YF=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",JF=new RegExp(`^${dA}$`);function lA(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function XF(t){return new RegExp(`^${lA(t)}$`)}function uA(t){let e=`${dA}T${lA(t)}`,a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function e5(t,e){return!!((e==="v4"||!e)&&GF.test(t)||(e==="v6"||!e)&&QF.test(t))}var Rl=class dc extends lt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==re.string){let n=this._getOrReturnCtx(e);return Y(n,{code:j.invalid_type,expected:re.string,received:n.parsedType}),Fe}let a=new bs,s;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(s=this._getOrReturnCtx(e,s),Y(s,{code:j.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="max")e.data.length>n.value&&(s=this._getOrReturnCtx(e,s),Y(s,{code:j.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="length"){let i=e.data.length>n.value,r=e.data.length<n.value;(i||r)&&(s=this._getOrReturnCtx(e,s),i?Y(s,{code:j.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):r&&Y(s,{code:j.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),a.dirty())}else if(n.kind==="email")VF.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"email",code:j.invalid_string,message:n.message}),a.dirty());else if(n.kind==="emoji")vw||(vw=new RegExp(KF,"u")),vw.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"emoji",code:j.invalid_string,message:n.message}),a.dirty());else if(n.kind==="uuid")zF.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"uuid",code:j.invalid_string,message:n.message}),a.dirty());else if(n.kind==="nanoid")HF.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"nanoid",code:j.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid")qF.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"cuid",code:j.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid2")WF.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"cuid2",code:j.invalid_string,message:n.message}),a.dirty());else if(n.kind==="ulid")FF.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"ulid",code:j.invalid_string,message:n.message}),a.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Y(s,{validation:"url",code:j.invalid_string,message:n.message}),a.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"regex",code:j.invalid_string,message:n.message}),a.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(s=this._getOrReturnCtx(e,s),Y(s,{code:j.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),a.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(s=this._getOrReturnCtx(e,s),Y(s,{code:j.invalid_string,validation:{startsWith:n.value},message:n.message}),a.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(s=this._getOrReturnCtx(e,s),Y(s,{code:j.invalid_string,validation:{endsWith:n.value},message:n.message}),a.dirty()):n.kind==="datetime"?uA(n).test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{code:j.invalid_string,validation:"datetime",message:n.message}),a.dirty()):n.kind==="date"?JF.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{code:j.invalid_string,validation:"date",message:n.message}),a.dirty()):n.kind==="time"?XF(n).test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{code:j.invalid_string,validation:"time",message:n.message}),a.dirty()):n.kind==="duration"?UF.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"duration",code:j.invalid_string,message:n.message}),a.dirty()):n.kind==="ip"?e5(e.data,n.version)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"ip",code:j.invalid_string,message:n.message}),a.dirty()):n.kind==="base64"?YF.test(e.data)||(s=this._getOrReturnCtx(e,s),Y(s,{validation:"base64",code:j.invalid_string,message:n.message}),a.dirty()):At.assertNever(n);return{status:a.value,value:e.data}}_regex(e,a,s){return this.refinement(n=>e.test(n),{validation:a,code:j.invalid_string,...ve.errToObj(s)})}_addCheck(e){return new dc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ve.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ve.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ve.errToObj(e)})}datetime(e){var a,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(a=e==null?void 0:e.offset)!==null&&a!==void 0?a:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...ve.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ve.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ve.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,...ve.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,...ve.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,...ve.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,...ve.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,...ve.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,...ve.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,...ve.errToObj(a)})}nonempty(e){return this.min(1,ve.errToObj(e))}trim(){return new dc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new dc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new dc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};Rl.create=t=>{var e;return new Rl({checks:[],typeName:Oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...tt(t)})};function t5(t,e){let a=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=a>s?a:s,i=parseInt(t.toFixed(n).replace(".","")),r=parseInt(e.toFixed(n).replace(".",""));return i%r/Math.pow(10,n)}var Zp=class O0 extends lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==re.number){let n=this._getOrReturnCtx(e);return Y(n,{code:j.invalid_type,expected:re.number,received:n.parsedType}),Fe}let a,s=new bs;for(let n of this._def.checks)n.kind==="int"?At.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),Y(a,{code:j.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),Y(a,{code:j.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),Y(a,{code:j.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="multipleOf"?t5(e.data,n.value)!==0&&(a=this._getOrReturnCtx(e,a),Y(a,{code:j.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),Y(a,{code:j.not_finite,message:n.message}),s.dirty()):At.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,ve.toString(a))}gt(e,a){return this.setLimit("min",e,!1,ve.toString(a))}lte(e,a){return this.setLimit("max",e,!0,ve.toString(a))}lt(e,a){return this.setLimit("max",e,!1,ve.toString(a))}setLimit(e,a,s,n){return new O0({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:ve.toString(n)}]})}_addCheck(e){return new O0({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ve.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ve.toString(e)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&At.isInteger(e.value))}get isFinite(){let e=null,a=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(a===null||s.value>a)&&(a=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(a)&&Number.isFinite(e)}};Zp.create=t=>new Zp({checks:[],typeName:Oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...tt(t)});var Np=class I0 extends lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==re.bigint){let n=this._getOrReturnCtx(e);return Y(n,{code:j.invalid_type,expected:re.bigint,received:n.parsedType}),Fe}let a,s=new bs;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),Y(a,{code:j.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),Y(a,{code:j.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),Y(a,{code:j.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):At.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,ve.toString(a))}gt(e,a){return this.setLimit("min",e,!1,ve.toString(a))}lte(e,a){return this.setLimit("max",e,!0,ve.toString(a))}lt(e,a){return this.setLimit("max",e,!1,ve.toString(a))}setLimit(e,a,s,n){return new I0({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:ve.toString(n)}]})}_addCheck(e){return new I0({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(a)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};Np.create=t=>{var e;return new Np({checks:[],typeName:Oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...tt(t)})};var Rp=class extends lt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==re.boolean){let a=this._getOrReturnCtx(e);return Y(a,{code:j.invalid_type,expected:re.boolean,received:a.parsedType}),Fe}return Ja(e.data)}};Rp.create=t=>new Rp({typeName:Oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...tt(t)});var jp=class cA extends lt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==re.date){let n=this._getOrReturnCtx(e);return Y(n,{code:j.invalid_type,expected:re.date,received:n.parsedType}),Fe}if(isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return Y(n,{code:j.invalid_date}),Fe}let a=new bs,s;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(s=this._getOrReturnCtx(e,s),Y(s,{code:j.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),a.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(s=this._getOrReturnCtx(e,s),Y(s,{code:j.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),a.dirty()):At.assertNever(n);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new cA({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:ve.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:ve.toString(a)})}get minDate(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}};jp.create=t=>new jp({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Oe.ZodDate,...tt(t)});var My=class extends lt{_parse(e){if(this._getType(e)!==re.symbol){let a=this._getOrReturnCtx(e);return Y(a,{code:j.invalid_type,expected:re.symbol,received:a.parsedType}),Fe}return Ja(e.data)}};My.create=t=>new My({typeName:Oe.ZodSymbol,...tt(t)});var Dp=class extends lt{_parse(e){if(this._getType(e)!==re.undefined){let a=this._getOrReturnCtx(e);return Y(a,{code:j.invalid_type,expected:re.undefined,received:a.parsedType}),Fe}return Ja(e.data)}};Dp.create=t=>new Dp({typeName:Oe.ZodUndefined,...tt(t)});var Bp=class extends lt{_parse(e){if(this._getType(e)!==re.null){let a=this._getOrReturnCtx(e);return Y(a,{code:j.invalid_type,expected:re.null,received:a.parsedType}),Fe}return Ja(e.data)}};Bp.create=t=>new Bp({typeName:Oe.ZodNull,...tt(t)});var jl=class extends lt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ja(e.data)}};jl.create=t=>new jl({typeName:Oe.ZodAny,...tt(t)});var Go=class extends lt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ja(e.data)}};Go.create=t=>new Go({typeName:Oe.ZodUnknown,...tt(t)});var ir=class extends lt{_parse(e){let a=this._getOrReturnCtx(e);return Y(a,{code:j.invalid_type,expected:re.never,received:a.parsedType}),Fe}};ir.create=t=>new ir({typeName:Oe.ZodNever,...tt(t)});var Ey=class extends lt{_parse(e){if(this._getType(e)!==re.undefined){let a=this._getOrReturnCtx(e);return Y(a,{code:j.invalid_type,expected:re.void,received:a.parsedType}),Fe}return Ja(e.data)}};Ey.create=t=>new Ey({typeName:Oe.ZodVoid,...tt(t)});var gd=class Sg extends lt{_parse(e){let{ctx:a,status:s}=this._processInputParams(e),n=this._def;if(a.parsedType!==re.array)return Y(a,{code:j.invalid_type,expected:re.array,received:a.parsedType}),Fe;if(n.exactLength!==null){let r=a.data.length>n.exactLength.value,o=a.data.length<n.exactLength.value;(r||o)&&(Y(a,{code:r?j.too_big:j.too_small,minimum:o?n.exactLength.value:void 0,maximum:r?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&a.data.length<n.minLength.value&&(Y(a,{code:j.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&a.data.length>n.maxLength.value&&(Y(a,{code:j.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),a.common.async)return Promise.all([...a.data].map((r,o)=>n.type._parseAsync(new Si(a,r,a.path,o)))).then(r=>bs.mergeArray(s,r));let i=[...a.data].map((r,o)=>n.type._parseSync(new Si(a,r,a.path,o)));return bs.mergeArray(s,i)}get element(){return this._def.type}min(e,a){return new Sg({...this._def,minLength:{value:e,message:ve.toString(a)}})}max(e,a){return new Sg({...this._def,maxLength:{value:e,message:ve.toString(a)}})}length(e,a){return new Sg({...this._def,exactLength:{value:e,message:ve.toString(a)}})}nonempty(e){return this.min(1,e)}};gd.create=(t,e)=>new gd({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Oe.ZodArray,...tt(e)});function Jd(t){if(t instanceof an){let e={};for(let a in t.shape){let s=t.shape[a];e[a]=yi.create(Jd(s))}return new an({...t._def,shape:()=>e})}else return t instanceof gd?new gd({...t._def,type:Jd(t.element)}):t instanceof yi?yi.create(Jd(t.unwrap())):t instanceof uo?uo.create(Jd(t.unwrap())):t instanceof lo?lo.create(t.items.map(e=>Jd(e))):t}var an=class fn extends lt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),a=At.objectKeys(e);return this._cached={shape:e,keys:a}}_parse(e){if(this._getType(e)!==re.object){let l=this._getOrReturnCtx(e);return Y(l,{code:j.invalid_type,expected:re.object,received:l.parsedType}),Fe}let{status:a,ctx:s}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof ir&&this._def.unknownKeys==="strip"))for(let l in s.data)i.includes(l)||r.push(l);let o=[];for(let l of i){let c=n[l],m=s.data[l];o.push({key:{status:"valid",value:l},value:c._parse(new Si(s,m,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ir){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of r)o.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(l==="strict")r.length>0&&(Y(s,{code:j.unrecognized_keys,keys:r}),a.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of r){let m=s.data[c];o.push({key:{status:"valid",value:c},value:l._parse(new Si(s,m,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of o){let m=await c.key,f=await c.value;l.push({key:m,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>bs.mergeObjectSync(a,l)):bs.mergeObjectSync(a,o)}get shape(){return this._def.shape()}strict(e){return ve.errToObj,new fn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,s)=>{var n,i,r,o;let l=(r=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,a,s).message)!==null&&r!==void 0?r:s.defaultError;return a.code==="unrecognized_keys"?{message:(o=ve.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new fn({...this._def,unknownKeys:"strip"})}passthrough(){return new fn({...this._def,unknownKeys:"passthrough"})}extend(e){return new fn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new fn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Oe.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new fn({...this._def,catchall:e})}pick(e){let a={};return At.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(a[s]=this.shape[s])}),new fn({...this._def,shape:()=>a})}omit(e){let a={};return At.objectKeys(this.shape).forEach(s=>{e[s]||(a[s]=this.shape[s])}),new fn({...this._def,shape:()=>a})}deepPartial(){return Jd(this)}partial(e){let a={};return At.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?a[s]=n:a[s]=n.optional()}),new fn({...this._def,shape:()=>a})}required(e){let a={};return At.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])a[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof yi;)n=n._def.innerType;a[s]=n}}),new fn({...this._def,shape:()=>a})}keyof(){return yA(At.objectKeys(this.shape))}};an.create=(t,e)=>new an({shape:()=>t,unknownKeys:"strip",catchall:ir.create(),typeName:Oe.ZodObject,...tt(e)});an.strictCreate=(t,e)=>new an({shape:()=>t,unknownKeys:"strict",catchall:ir.create(),typeName:Oe.ZodObject,...tt(e)});an.lazycreate=(t,e)=>new an({shape:t,unknownKeys:"strip",catchall:ir.create(),typeName:Oe.ZodObject,...tt(e)});var qp=class extends lt{_parse(e){let{ctx:a}=this._processInputParams(e),s=this._def.options;function n(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return a.common.issues.push(...o.ctx.common.issues),o.result;let r=i.map(o=>new An(o.ctx.common.issues));return Y(a,{code:j.invalid_union,unionErrors:r}),Fe}if(a.common.async)return Promise.all(s.map(async i=>{let r={...a,common:{...a.common,issues:[]},parent:null};return{result:await i._parseAsync({data:a.data,path:a.path,parent:r}),ctx:r}})).then(n);{let i,r=[];for(let l of s){let c={...a,common:{...a.common,issues:[]},parent:null},m=l._parseSync({data:a.data,path:a.path,parent:c});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:c}),c.common.issues.length&&r.push(c.common.issues)}if(i)return a.common.issues.push(...i.ctx.common.issues),i.result;let o=r.map(l=>new An(l));return Y(a,{code:j.invalid_union,unionErrors:o}),Fe}}get options(){return this._def.options}};qp.create=(t,e)=>new qp({options:t,typeName:Oe.ZodUnion,...tt(e)});var Sr=t=>t instanceof Fp?Sr(t.schema):t instanceof Bn?Sr(t.innerType()):t instanceof zp?[t.value]:t instanceof dh?t.options:t instanceof Hp?At.objectValues(t.enum):t instanceof Up?Sr(t._def.innerType):t instanceof Dp?[void 0]:t instanceof Bp?[null]:t instanceof yi?[void 0,...Sr(t.unwrap())]:t instanceof uo?[null,...Sr(t.unwrap())]:t instanceof Qk||t instanceof Kp?Sr(t.unwrap()):t instanceof Vp?Sr(t._def.innerType):[],pA=class mA extends lt{_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==re.object)return Y(a,{code:j.invalid_type,expected:re.object,received:a.parsedType}),Fe;let s=this.discriminator,n=a.data[s],i=this.optionsMap.get(n);return i?a.common.async?i._parseAsync({data:a.data,path:a.path,parent:a}):i._parseSync({data:a.data,path:a.path,parent:a}):(Y(a,{code:j.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Fe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,s){let n=new Map;for(let i of a){let r=Sr(i.shape[e]);if(!r.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of r){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new mA({typeName:Oe.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:n,...tt(s)})}};function P0(t,e){let a=Rr(t),s=Rr(e);if(t===e)return{valid:!0,data:t};if(a===re.object&&s===re.object){let n=At.objectKeys(e),i=At.objectKeys(t).filter(o=>n.indexOf(o)!==-1),r={...t,...e};for(let o of i){let l=P0(t[o],e[o]);if(!l.valid)return{valid:!1};r[o]=l.data}return{valid:!0,data:r}}else if(a===re.array&&s===re.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let r=t[i],o=e[i],l=P0(r,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return a===re.date&&s===re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Wp=class extends lt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=(i,r)=>{if(M0(i)||M0(r))return Fe;let o=P0(i.value,r.value);return o.valid?((E0(i)||E0(r))&&a.dirty(),{status:a.value,value:o.data}):(Y(s,{code:j.invalid_intersection_types}),Fe)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,r])=>n(i,r)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};Wp.create=(t,e,a)=>new Wp({left:t,right:e,typeName:Oe.ZodIntersection,...tt(a)});var lo=class fA extends lt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==re.array)return Y(s,{code:j.invalid_type,expected:re.array,received:s.parsedType}),Fe;if(s.data.length<this._def.items.length)return Y(s,{code:j.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Fe;!this._def.rest&&s.data.length>this._def.items.length&&(Y(s,{code:j.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());let n=[...s.data].map((i,r)=>{let o=this._def.items[r]||this._def.rest;return o?o._parse(new Si(s,i,s.path,r)):null}).filter(i=>!!i);return s.common.async?Promise.all(n).then(i=>bs.mergeArray(a,i)):bs.mergeArray(a,n)}get items(){return this._def.items}rest(e){return new fA({...this._def,rest:e})}};lo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new lo({items:t,typeName:Oe.ZodTuple,rest:null,...tt(e)})};var hA=class Z0 extends lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==re.object)return Y(s,{code:j.invalid_type,expected:re.object,received:s.parsedType}),Fe;let n=[],i=this._def.keyType,r=this._def.valueType;for(let o in s.data)n.push({key:i._parse(new Si(s,o,s.path,o)),value:r._parse(new Si(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?bs.mergeObjectAsync(a,n):bs.mergeObjectSync(a,n)}get element(){return this._def.valueType}static create(e,a,s){return a instanceof lt?new Z0({keyType:e,valueType:a,typeName:Oe.ZodRecord,...tt(s)}):new Z0({keyType:Rl.create(),valueType:e,typeName:Oe.ZodRecord,...tt(a)})}},Oy=class extends lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==re.map)return Y(s,{code:j.invalid_type,expected:re.map,received:s.parsedType}),Fe;let n=this._def.keyType,i=this._def.valueType,r=[...s.data.entries()].map(([o,l],c)=>({key:n._parse(new Si(s,o,s.path,[c,"key"])),value:i._parse(new Si(s,l,s.path,[c,"value"]))}));if(s.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of r){let c=await l.key,m=await l.value;if(c.status==="aborted"||m.status==="aborted")return Fe;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}})}else{let o=new Map;for(let l of r){let c=l.key,m=l.value;if(c.status==="aborted"||m.status==="aborted")return Fe;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}}}};Oy.create=(t,e,a)=>new Oy({valueType:e,keyType:t,typeName:Oe.ZodMap,...tt(a)});var Iy=class N0 extends lt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==re.set)return Y(s,{code:j.invalid_type,expected:re.set,received:s.parsedType}),Fe;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(Y(s,{code:j.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),a.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(Y(s,{code:j.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),a.dirty());let i=this._def.valueType;function r(l){let c=new Set;for(let m of l){if(m.status==="aborted")return Fe;m.status==="dirty"&&a.dirty(),c.add(m.value)}return{status:a.value,value:c}}let o=[...s.data.values()].map((l,c)=>i._parse(new Si(s,l,s.path,c)));return s.common.async?Promise.all(o).then(l=>r(l)):r(o)}min(e,a){return new N0({...this._def,minSize:{value:e,message:ve.toString(a)}})}max(e,a){return new N0({...this._def,maxSize:{value:e,message:ve.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}};Iy.create=(t,e)=>new Iy({valueType:t,minSize:null,maxSize:null,typeName:Oe.ZodSet,...tt(e)});var gA=class $g extends lt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==re.function)return Y(a,{code:j.invalid_type,expected:re.function,received:a.parsedType}),Fe;function s(o,l){return $y({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Sy(),Nl].filter(c=>!!c),issueData:{code:j.invalid_arguments,argumentsError:l}})}function n(o,l){return $y({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Sy(),Nl].filter(c=>!!c),issueData:{code:j.invalid_return_type,returnTypeError:l}})}let i={errorMap:a.common.contextualErrorMap},r=a.data;if(this._def.returns instanceof Dl){let o=this;return Ja(async function(...l){let c=new An([]),m=await o._def.args.parseAsync(l,i).catch(h=>{throw c.addIssue(s(l,h)),c}),f=await Reflect.apply(r,this,m);return await o._def.returns._def.type.parseAsync(f,i).catch(h=>{throw c.addIssue(n(f,h)),c})})}else{let o=this;return Ja(function(...l){let c=o._def.args.safeParse(l,i);if(!c.success)throw new An([s(l,c.error)]);let m=Reflect.apply(r,this,c.data),f=o._def.returns.safeParse(m,i);if(!f.success)throw new An([n(m,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new $g({...this._def,args:lo.create(e).rest(Go.create())})}returns(e){return new $g({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,s){return new $g({args:e||lo.create([]).rest(Go.create()),returns:a||Go.create(),typeName:Oe.ZodFunction,...tt(s)})}},Fp=class extends lt{get schema(){return this._def.getter()}_parse(e){let{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}};Fp.create=(t,e)=>new Fp({getter:t,typeName:Oe.ZodLazy,...tt(e)});var zp=class extends lt{_parse(e){if(e.data!==this._def.value){let a=this._getOrReturnCtx(e);return Y(a,{received:a.data,code:j.invalid_literal,expected:this._def.value}),Fe}return{status:"valid",value:e.data}}get value(){return this._def.value}};zp.create=(t,e)=>new zp({value:t,typeName:Oe.ZodLiteral,...tt(e)});function yA(t,e){return new dh({values:t,typeName:Oe.ZodEnum,...tt(e)})}var dh=class R0 extends lt{constructor(){super(...arguments),rc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let a=this._getOrReturnCtx(e),s=this._def.values;return Y(a,{expected:At.joinValues(s),received:a.parsedType,code:j.invalid_type}),Fe}if(Ly(this,rc)||oA(this,rc,new Set(this._def.values)),!Ly(this,rc).has(e.data)){let a=this._getOrReturnCtx(e),s=this._def.values;return Y(a,{received:a.data,code:j.invalid_enum_value,options:s}),Fe}return Ja(e.data)}get options(){return this._def.values}get enum(){let e={};for(let a of this._def.values)e[a]=a;return e}get Values(){let e={};for(let a of this._def.values)e[a]=a;return e}get Enum(){let e={};for(let a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return R0.create(e,{...this._def,...a})}exclude(e,a=this._def){return R0.create(this.options.filter(s=>!e.includes(s)),{...this._def,...a})}};rc=new WeakMap;dh.create=yA;var Hp=class extends lt{constructor(){super(...arguments),oc.set(this,void 0)}_parse(e){let a=At.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==re.string&&s.parsedType!==re.number){let n=At.objectValues(a);return Y(s,{expected:At.joinValues(n),received:s.parsedType,code:j.invalid_type}),Fe}if(Ly(this,oc)||oA(this,oc,new Set(At.getValidEnumValues(this._def.values))),!Ly(this,oc).has(e.data)){let n=At.objectValues(a);return Y(s,{received:s.data,code:j.invalid_enum_value,options:n}),Fe}return Ja(e.data)}get enum(){return this._def.values}};oc=new WeakMap;Hp.create=(t,e)=>new Hp({values:t,typeName:Oe.ZodNativeEnum,...tt(e)});var Dl=class extends lt{unwrap(){return this._def.type}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==re.promise&&a.common.async===!1)return Y(a,{code:j.invalid_type,expected:re.promise,received:a.parsedType}),Fe;let s=a.parsedType===re.promise?a.data:Promise.resolve(a.data);return Ja(s.then(n=>this._def.type.parseAsync(n,{path:a.path,errorMap:a.common.contextualErrorMap})))}};Dl.create=(t,e)=>new Dl({type:t,typeName:Oe.ZodPromise,...tt(e)});var Bn=class extends lt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:r=>{Y(s,r),r.fatal?a.abort():a.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let r=n.transform(s.data,i);if(s.common.async)return Promise.resolve(r).then(async o=>{if(a.value==="aborted")return Fe;let l=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return l.status==="aborted"?Fe:l.status==="dirty"||a.value==="dirty"?Ay(l.value):l});{if(a.value==="aborted")return Fe;let o=this._def.schema._parseSync({data:r,path:s.path,parent:s});return o.status==="aborted"?Fe:o.status==="dirty"||a.value==="dirty"?Ay(o.value):o}}if(n.type==="refinement"){let r=o=>{let l=n.refinement(o,i);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?Fe:(o.status==="dirty"&&a.dirty(),r(o.value),{status:a.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?Fe:(o.status==="dirty"&&a.dirty(),r(o.value).then(()=>({status:a.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){let r=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Ip(r))return r;let o=n.transform(r.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(r=>Ip(r)?Promise.resolve(n.transform(r.value,i)).then(o=>({status:a.value,value:o})):r);At.assertNever(n)}};Bn.create=(t,e,a)=>new Bn({schema:t,typeName:Oe.ZodEffects,effect:e,...tt(a)});Bn.createWithPreprocess=(t,e,a)=>new Bn({schema:e,effect:{type:"preprocess",transform:t},typeName:Oe.ZodEffects,...tt(a)});var yi=class extends lt{_parse(e){return this._getType(e)===re.undefined?Ja(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};yi.create=(t,e)=>new yi({innerType:t,typeName:Oe.ZodOptional,...tt(e)});var uo=class extends lt{_parse(e){return this._getType(e)===re.null?Ja(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};uo.create=(t,e)=>new uo({innerType:t,typeName:Oe.ZodNullable,...tt(e)});var Up=class extends lt{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return a.parsedType===re.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:a.path,parent:a})}removeDefault(){return this._def.innerType}};Up.create=(t,e)=>new Up({innerType:t,typeName:Oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...tt(e)});var Vp=class extends lt{_parse(e){let{ctx:a}=this._processInputParams(e),s={...a,common:{...a.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Pp(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new An(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new An(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Vp.create=(t,e)=>new Vp({innerType:t,typeName:Oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...tt(e)});var Py=class extends lt{_parse(e){if(this._getType(e)!==re.nan){let a=this._getOrReturnCtx(e);return Y(a,{code:j.invalid_type,expected:re.nan,received:a.parsedType}),Fe}return{status:"valid",value:e.data}}};Py.create=t=>new Py({typeName:Oe.ZodNaN,...tt(t)});var a5=Symbol("zod_brand"),Qk=class extends lt{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return this._def.type._parse({data:s,path:a.path,parent:a})}unwrap(){return this._def.type}},Yk=class vA extends lt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Fe:n.status==="dirty"?(a.dirty(),Ay(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Fe:n.status==="dirty"?(a.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,a){return new vA({in:e,out:a,typeName:Oe.ZodPipeline})}},Kp=class extends lt{_parse(e){let a=this._def.innerType._parse(e),s=n=>(Ip(n)&&(n.value=Object.freeze(n.value)),n);return Pp(a)?a.then(n=>s(n)):s(a)}unwrap(){return this._def.innerType}};Kp.create=(t,e)=>new Kp({innerType:t,typeName:Oe.ZodReadonly,...tt(e)});function bA(t,e={},a){return t?jl.create().superRefine((s,n)=>{var i,r;if(!t(s)){let o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,l=(r=(i=o.fatal)!==null&&i!==void 0?i:a)!==null&&r!==void 0?r:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:l})}}):jl.create()}var s5={object:an.lazycreate},Oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Oe||(Oe={}));var n5=(t,e={message:`Input not instance of ${t.name}`})=>bA(a=>a instanceof t,e),wA=Rl.create,_A=Zp.create,i5=Py.create,r5=Np.create,kA=Rp.create,o5=jp.create,d5=My.create,l5=Dp.create,u5=Bp.create,c5=jl.create,p5=Go.create,m5=ir.create,f5=Ey.create,h5=gd.create,g5=an.create,y5=an.strictCreate,v5=qp.create,b5=pA.create,w5=Wp.create,_5=lo.create,k5=hA.create,x5=Oy.create,C5=Iy.create,T5=gA.create,S5=Fp.create,j0=zp.create,$5=dh.create,A5=Hp.create,L5=Dl.create,ST=Bn.create,M5=yi.create,E5=uo.create,O5=Bn.createWithPreprocess,I5=Yk.create,P5=()=>wA().optional(),Z5=()=>_A().optional(),N5=()=>kA().optional(),R5={string:t=>Rl.create({...t,coerce:!0}),number:t=>Zp.create({...t,coerce:!0}),boolean:t=>Rp.create({...t,coerce:!0}),bigint:t=>Np.create({...t,coerce:!0}),date:t=>jp.create({...t,coerce:!0})},j5=Fe,C=Object.freeze({__proto__:null,defaultErrorMap:Nl,setErrorMap:DF,getErrorMap:Sy,makeIssue:$y,EMPTY_PATH:BF,addIssueToContext:Y,ParseStatus:bs,INVALID:Fe,DIRTY:Ay,OK:Ja,isAborted:M0,isDirty:E0,isValid:Ip,isAsync:Pp,get util(){return At},get objectUtil(){return L0},ZodParsedType:re,getParsedType:Rr,ZodType:lt,datetimeRegex:uA,ZodString:Rl,ZodNumber:Zp,ZodBigInt:Np,ZodBoolean:Rp,ZodDate:jp,ZodSymbol:My,ZodUndefined:Dp,ZodNull:Bp,ZodAny:jl,ZodUnknown:Go,ZodNever:ir,ZodVoid:Ey,ZodArray:gd,ZodObject:an,ZodUnion:qp,ZodDiscriminatedUnion:pA,ZodIntersection:Wp,ZodTuple:lo,ZodRecord:hA,ZodMap:Oy,ZodSet:Iy,ZodFunction:gA,ZodLazy:Fp,ZodLiteral:zp,ZodEnum:dh,ZodNativeEnum:Hp,ZodPromise:Dl,ZodEffects:Bn,ZodTransformer:Bn,ZodOptional:yi,ZodNullable:uo,ZodDefault:Up,ZodCatch:Vp,ZodNaN:Py,BRAND:a5,ZodBranded:Qk,ZodPipeline:Yk,ZodReadonly:Kp,custom:bA,Schema:lt,ZodSchema:lt,late:s5,get ZodFirstPartyTypeKind(){return Oe},coerce:R5,any:c5,array:h5,bigint:r5,boolean:kA,date:o5,discriminatedUnion:b5,effect:ST,enum:$5,function:T5,instanceof:n5,intersection:w5,lazy:S5,literal:j0,map:x5,nan:i5,nativeEnum:A5,never:m5,null:u5,nullable:E5,number:_A,object:g5,oboolean:N5,onumber:Z5,optional:M5,ostring:P5,pipeline:I5,preprocess:O5,promise:L5,record:k5,set:C5,strictObject:y5,string:wA,symbol:d5,transformer:ST,tuple:_5,undefined:l5,union:v5,unknown:p5,void:f5,NEVER:j5,ZodIssueCode:j,quotelessJson:jF,ZodError:An}),Ag=C.string().regex(/^\d+$/,'Needs to be a number or a number represented as a string e.g. "10".').or(C.number().transform(String)),vb=()=>C.string().regex(/^[a-zA-Z0-9_]+$/);vb();vb().max(50);var D5=C.string().max(50).regex(/^[a-zA-Z0-9_+]+$/,"Can only contain letters [a-zA-Z0-9_+]");C.string().nullable().optional().transform(t=>t??void 0);C.number().nonnegative().max(100);C.number().nonnegative().max(420);C.enum(["repeat","random","shuffle"]);C.enum(["word","time","section"]);var xA=C.enum(["normal","expert","master"]),Du=C.object({acc:C.number().nonnegative().max(100),consistency:C.number().nonnegative().max(100),difficulty:xA,lazyMode:C.boolean().optional(),language:C.string().max(100).regex(/[\w+]+/),punctuation:C.boolean().optional(),numbers:C.boolean().optional(),raw:C.number().nonnegative(),wpm:C.number().nonnegative(),timestamp:C.number().nonnegative()}),B5=C.object({time:C.record(Ag.describe("Number of seconds as string"),C.array(Du)),words:C.record(Ag.describe("Number of words as string"),C.array(Du)),quote:C.record(Ag,C.array(Du)),custom:C.record(C.literal("custom"),C.array(Du)),zen:C.record(C.literal("zen"),C.array(Du))});C.union([C.literal("10"),C.literal("25"),C.literal("50"),C.literal("100")]);C.union([C.literal("15"),C.literal("30"),C.literal("60"),C.literal("120")]);C.union([C.literal("short"),C.literal("medium"),C.literal("long"),C.literal("thicc")]);var q5=B5.keyof();C.union([Ag,j0("zen"),j0("custom")],{errorMap:()=>({message:'Needs to be either a number, "zen" or "custom".'})});var CA=C.enum(["off","slow","medium","fast"]),TA=C.enum(["off","esc","tab","enter"]),SA=C.union([C.literal(-3),C.literal(-2),C.literal(-1),C.literal(0),C.literal(1),C.literal(2),C.literal(3)]),$A=C.array(SA),Zy=C.enum(["off","default","block","outline","underline","carrot","banana"]),AA=C.enum(["off","on","max"]),LA=C.enum(["off","below","replace"]),MA=C.enum(["off","bar","text","mini"]),gl=C.enum(["off","text","mini"]),EA=C.enum(["off","on","fav","light","dark","custom"]),OA=C.enum(["black","sub","text","main"]),IA=C.enum(["0.25","0.5","0.75","1"]),PA=C.enum(["off","word","letter"]),ZA=C.enum(["off","static","react","next"]),NA=C.enum(["staggered","alice","matrix","split","split_matrix","steno","steno_matrix"]),RA=C.enum(["lowercase","uppercase","blank","dynamic"]),jA=C.enum(["always","layout","never"]),DA=C.number().min(.5).max(3.5).step(.1),BA=C.enum(["manual","on"]),qA=C.enum(["off","1","2","3","4"]),WA=C.enum(["off","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"]),FA=C.number().min(0).max(1),zA=C.enum(["off","average","pb","tagPb","last","custom","daily"]),HA=C.tuple([C.enum(["on","off"]),C.enum(["on","off"]),C.enum(["on","off"]),C.enum(["on","off"])]),UA=C.enum(["off","custom"]),VA=C.enum(["off","letter","word","next_word","next_two_words","next_three_words"]),KA=C.enum(["off","letter","word"]),GA=C.enum(["wpm","cpm","wps","cps","wph"]),QA=C.enum(["off","result","on","sellout"]),YA=C.enum(["off","custom"]),JA=C.enum(["off","typing"]),XA=C.enum(["off","on","keymap"]),Jk=C.enum(["cover","contain","max"]),Xk=C.tuple([C.number(),C.number(),C.number(),C.number()]),W5=C.string().regex(/^[0-9a-zA-Z_#]+$/),eL=C.enum(["off","1","2","3","4"]),tL=C.enum(["off","fixed","flex"]),aL=C.enum(["off","speed","acc","both"]),Qn=C.string().regex(/^#([\da-f]{3}){1,2}$/i),sL=xA,ex=C.tuple([Qn,Qn,Qn,Qn,Qn,Qn,Qn,Qn,Qn,Qn]),nL=C.array(vb().max(50)),tx=C.string().max(100).regex(/[\w#]+/),iL=C.number().nonnegative(),rL=C.number().nonnegative(),oL=C.number().nonnegative().max(100),dL=C.number().nonnegative(),lL=C.number().int().nonnegative(),uL=C.number().int().nonnegative(),cL=C.string().max(50).regex(/^[a-zA-Z0-9_\-+.]+$/),Qo=vb().max(50),pL=C.string().max(50).regex(/^[a-zA-Z0-9\-_]+$/gi),mL=C.string().max(50).regex(/^[a-zA-Z0-9\-_]+$/gi),fL=C.number().positive(),hL=C.number().min(20).max(1e3).or(C.literal(0)),gL=C.string().regex(/(https|http):\/\/(www\.|).+\..+\/.+(\.png|\.gif|\.jpeg|\.jpg)/gi).or(C.literal("")),yL=C.object({theme:Qo,themeLight:Qo,themeDark:Qo,autoSwitchTheme:C.boolean(),customTheme:C.boolean(),customThemeColors:ex,favThemes:nL,showKeyTips:C.boolean(),smoothCaret:CA,quickRestart:TA,punctuation:C.boolean(),numbers:C.boolean(),words:uL,time:lL,mode:q5,quoteLength:$A,language:D5,fontSize:fL,freedomMode:C.boolean(),difficulty:sL,blindMode:C.boolean(),quickEnd:C.boolean(),caretStyle:Zy,paceCaretStyle:Zy,flipTestColors:C.boolean(),layout:mL,funbox:tx,confidenceMode:AA,indicateTypos:LA,timerStyle:MA,liveSpeedStyle:gl,liveAccStyle:gl,liveBurstStyle:gl,colorfulMode:C.boolean(),randomTheme:EA,timerColor:OA,timerOpacity:IA,stopOnError:PA,showAllLines:C.boolean(),keymapMode:ZA,keymapStyle:NA,keymapLegendStyle:RA,keymapLayout:pL,keymapShowTopRow:jA,keymapSize:DA,fontFamily:cL,smoothLineScroll:C.boolean(),alwaysShowDecimalPlaces:C.boolean(),alwaysShowWordsHistory:C.boolean(),singleListCommandLine:BA,capsLockWarning:C.boolean(),playSoundOnError:qA,playSoundOnClick:WA,soundVolume:FA,startGraphsAtZero:C.boolean(),showOutOfFocusWarning:C.boolean(),paceCaret:zA,paceCaretCustomSpeed:iL,repeatedPace:C.boolean(),accountChart:HA,minWpm:UA,minWpmCustomSpeed:rL,highlightMode:VA,tapeMode:KA,typingSpeedUnit:GA,ads:QA,hideExtraLetters:C.boolean(),strictSpace:C.boolean(),minAcc:YA,minAccCustom:oL,monkey:C.boolean(),repeatQuotes:JA,oppositeShiftMode:XA,customBackground:gL,customBackgroundSize:Jk,customBackgroundFilter:Xk,customLayoutfluid:W5,monkeyPowerLevel:eL,minBurst:tL,minBurstCustomSpeed:dL,burstHeatmap:C.boolean(),britishEnglish:C.boolean(),lazyMode:C.boolean(),showAverage:aL,maxLineWidth:hL}).strict(),F5=yL.partial(),Lt;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function a(n){throw new Error}t.assertNever=a,t.arrayToEnum=n=>{let i={};for(let r of n)i[r]=r;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),r={};for(let o of i)r[o]=n[o];return t.objectValues(r)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.push(r);return i},t.find=(n,i)=>{for(let r of n)if(i(r))return r},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(r=>typeof r=="string"?`'${r}'`:r).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Lt||(Lt={}));var D0;(function(t){t.mergeShapes=(e,a)=>({...e,...a})})(D0||(D0={}));var oe=Lt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),jr=t=>{switch(typeof t){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return isNaN(t)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(t)?oe.array:t===null?oe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?oe.promise:typeof Map<"u"&&t instanceof Map?oe.map:typeof Set<"u"&&t instanceof Set?oe.set:typeof Date<"u"&&t instanceof Date?oe.date:oe.object;default:return oe.unknown}},D=Lt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),z5=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Ln=class vL extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let a=e||function(i){return i.message},s={_errors:[]},n=i=>{for(let r of i.issues)if(r.code==="invalid_union")r.unionErrors.map(n);else if(r.code==="invalid_return_type")n(r.returnTypeError);else if(r.code==="invalid_arguments")n(r.argumentsError);else if(r.path.length===0)s._errors.push(a(r));else{let o=s,l=0;for(;l<r.path.length;){let c=r.path[l];l===r.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(a(r))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),s}static assert(e){if(!(e instanceof vL))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Lt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){let a={},s=[];for(let n of this.issues)n.path.length>0?(a[n.path[0]]=a[n.path[0]]||[],a[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:a}}get formErrors(){return this.flatten()}};Ln.create=t=>new Ln(t);var Bl=(t,e)=>{let a;switch(t.code){case D.invalid_type:t.received===oe.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case D.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,Lt.jsonStringifyReplacer)}`;break;case D.unrecognized_keys:a=`Unrecognized key(s) in object: ${Lt.joinValues(t.keys,", ")}`;break;case D.invalid_union:a="Invalid input";break;case D.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${Lt.joinValues(t.options)}`;break;case D.invalid_enum_value:a=`Invalid enum value. Expected ${Lt.joinValues(t.options)}, received '${t.received}'`;break;case D.invalid_arguments:a="Invalid function arguments";break;case D.invalid_return_type:a="Invalid function return type";break;case D.invalid_date:a="Invalid date";break;case D.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:Lt.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case D.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case D.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case D.custom:a="Invalid input";break;case D.invalid_intersection_types:a="Intersection results could not be merged";break;case D.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case D.not_finite:a="Number must be finite";break;default:a=e.defaultError,Lt.assertNever(t)}return{message:a}},bL=Bl;function H5(t){bL=t}function Ny(){return bL}var Ry=t=>{let{data:e,path:a,errorMaps:s,issueData:n}=t,i=[...a,...n.path||[]],r={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="",l=s.filter(c=>!!c).slice().reverse();for(let c of l)o=c(r,{data:e,defaultError:o}).message;return{...n,path:i,message:o}},U5=[];function J(t,e){let a=Ny(),s=Ry({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===Bl?void 0:Bl].filter(n=>!!n)});t.common.issues.push(s)}var ws=class wL{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){let s=[];for(let n of a){if(n.status==="aborted")return ze;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,a){let s=[];for(let n of a){let i=await n.key,r=await n.value;s.push({key:i,value:r})}return wL.mergeObjectSync(e,s)}static mergeObjectSync(e,a){let s={};for(let n of a){let{key:i,value:r}=n;if(i.status==="aborted"||r.status==="aborted")return ze;i.status==="dirty"&&e.dirty(),r.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof r.value<"u"||n.alwaysSet)&&(s[i.value]=r.value)}return{status:e.value,value:s}}},ze=Object.freeze({status:"aborted"}),jy=t=>({status:"dirty",value:t}),Xa=t=>({status:"valid",value:t}),B0=t=>t.status==="aborted",q0=t=>t.status==="dirty",Gp=t=>t.status==="valid",Qp=t=>typeof Promise<"u"&&t instanceof Promise;function Dy(t,e,a,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function _L(t,e,a,s,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,a),a}var be;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(be||(be={}));var lc,uc,$i=class{constructor(e,a,s,n){this._cachedPath=[],this.parent=e,this.data=a,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},$T=(t,e)=>{if(Gp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let a=new Ln(t.common.issues);return this._error=a,this._error}}};function at(t){if(!t)return{};let{errorMap:e,invalid_type_error:a,required_error:s,description:n}=t;if(e&&(a||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,r)=>{var o,l;let{message:c}=t;return i.code==="invalid_enum_value"?{message:c??r.defaultError}:typeof r.data>"u"?{message:(o=c??s)!==null&&o!==void 0?o:r.defaultError}:i.code!=="invalid_type"?{message:r.defaultError}:{message:(l=c??a)!==null&&l!==void 0?l:r.defaultError}},description:n}}var ut=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return jr(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:jr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ws,ctx:{common:e.parent.common,data:e.data,parsedType:jr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let a=this._parse(e);if(Qp(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){let a=this._parse(e);return Promise.resolve(a)}parse(e,a){let s=this.safeParse(e,a);if(s.success)return s.data;throw s.error}safeParse(e,a){var s;let n={common:{issues:[],async:(s=a==null?void 0:a.async)!==null&&s!==void 0?s:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:jr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return $T(n,i)}async parseAsync(e,a){let s=await this.safeParseAsync(e,a);if(s.success)return s.data;throw s.error}async safeParseAsync(e,a){let s={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:jr(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(Qp(n)?n:Promise.resolve(n));return $T(s,i)}refine(e,a){let s=n=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(n):a;return this._refinement((n,i)=>{let r=e(n),o=()=>i.addIssue({code:D.custom,...s(n)});return typeof Promise<"u"&&r instanceof Promise?r.then(l=>l?!0:(o(),!1)):r?!0:(o(),!1)})}refinement(e,a){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof a=="function"?a(s,n):a),!1))}_refinement(e){return new qn({schema:this,typeName:Ie.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return vi.create(this,this._def)}nullable(){return po.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return yd.create(this,this._def)}promise(){return Fl.create(this,this._def)}or(e){return sm.create([this,e],this._def)}and(e){return nm.create(this,e,this._def)}transform(e){return new qn({...at(this._def),schema:this,typeName:Ie.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let a=typeof e=="function"?e:()=>e;return new dm({...at(this._def),innerType:this,defaultValue:a,typeName:Ie.ZodDefault})}brand(){return new ax({typeName:Ie.ZodBranded,type:this,...at(this._def)})}catch(e){let a=typeof e=="function"?e:()=>e;return new lm({...at(this._def),innerType:this,catchValue:a,typeName:Ie.ZodCatch})}describe(e){let a=this.constructor;return new a({...this._def,description:e})}pipe(e){return sx.create(this,e)}readonly(){return um.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},V5=/^c[^\s-]{8,}$/i,K5=/^[0-9a-z]+$/,G5=/^[0-9A-HJKMNP-TV-Z]{26}$/,Q5=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Y5=/^[a-z0-9_-]{21}$/i,J5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,X5=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,e4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",bw,t4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,a4=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,s4=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",n4=new RegExp(`^${kL}$`);function xL(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function i4(t){return new RegExp(`^${xL(t)}$`)}function CL(t){let e=`${kL}T${xL(t)}`,a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function r4(t,e){return!!((e==="v4"||!e)&&t4.test(t)||(e==="v6"||!e)&&a4.test(t))}var ql=class cc extends ut{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==oe.string){let n=this._getOrReturnCtx(e);return J(n,{code:D.invalid_type,expected:oe.string,received:n.parsedType}),ze}let a=new ws,s;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:D.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="max")e.data.length>n.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:D.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="length"){let i=e.data.length>n.value,r=e.data.length<n.value;(i||r)&&(s=this._getOrReturnCtx(e,s),i?J(s,{code:D.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):r&&J(s,{code:D.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),a.dirty())}else if(n.kind==="email")X5.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"email",code:D.invalid_string,message:n.message}),a.dirty());else if(n.kind==="emoji")bw||(bw=new RegExp(e4,"u")),bw.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"emoji",code:D.invalid_string,message:n.message}),a.dirty());else if(n.kind==="uuid")Q5.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"uuid",code:D.invalid_string,message:n.message}),a.dirty());else if(n.kind==="nanoid")Y5.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"nanoid",code:D.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid")V5.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"cuid",code:D.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid2")K5.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"cuid2",code:D.invalid_string,message:n.message}),a.dirty());else if(n.kind==="ulid")G5.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"ulid",code:D.invalid_string,message:n.message}),a.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),J(s,{validation:"url",code:D.invalid_string,message:n.message}),a.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"regex",code:D.invalid_string,message:n.message}),a.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(s=this._getOrReturnCtx(e,s),J(s,{code:D.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),a.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(s=this._getOrReturnCtx(e,s),J(s,{code:D.invalid_string,validation:{startsWith:n.value},message:n.message}),a.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(s=this._getOrReturnCtx(e,s),J(s,{code:D.invalid_string,validation:{endsWith:n.value},message:n.message}),a.dirty()):n.kind==="datetime"?CL(n).test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{code:D.invalid_string,validation:"datetime",message:n.message}),a.dirty()):n.kind==="date"?n4.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{code:D.invalid_string,validation:"date",message:n.message}),a.dirty()):n.kind==="time"?i4(n).test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{code:D.invalid_string,validation:"time",message:n.message}),a.dirty()):n.kind==="duration"?J5.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"duration",code:D.invalid_string,message:n.message}),a.dirty()):n.kind==="ip"?r4(e.data,n.version)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"ip",code:D.invalid_string,message:n.message}),a.dirty()):n.kind==="base64"?s4.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"base64",code:D.invalid_string,message:n.message}),a.dirty()):Lt.assertNever(n);return{status:a.value,value:e.data}}_regex(e,a,s){return this.refinement(n=>e.test(n),{validation:a,code:D.invalid_string,...be.errToObj(s)})}_addCheck(e){return new cc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...be.errToObj(e)})}url(e){return this._addCheck({kind:"url",...be.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...be.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...be.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...be.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...be.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...be.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...be.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...be.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...be.errToObj(e)})}datetime(e){var a,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(a=e==null?void 0:e.offset)!==null&&a!==void 0?a:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...be.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...be.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...be.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,...be.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,...be.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,...be.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,...be.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,...be.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,...be.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,...be.errToObj(a)})}nonempty(e){return this.min(1,be.errToObj(e))}trim(){return new cc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new cc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new cc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};ql.create=t=>{var e;return new ql({checks:[],typeName:Ie.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...at(t)})};function o4(t,e){let a=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=a>s?a:s,i=parseInt(t.toFixed(n).replace(".","")),r=parseInt(e.toFixed(n).replace(".",""));return i%r/Math.pow(10,n)}var Yp=class W0 extends ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==oe.number){let n=this._getOrReturnCtx(e);return J(n,{code:D.invalid_type,expected:oe.number,received:n.parsedType}),ze}let a,s=new ws;for(let n of this._def.checks)n.kind==="int"?Lt.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),J(a,{code:D.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),J(a,{code:D.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),J(a,{code:D.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="multipleOf"?o4(e.data,n.value)!==0&&(a=this._getOrReturnCtx(e,a),J(a,{code:D.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),J(a,{code:D.not_finite,message:n.message}),s.dirty()):Lt.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,be.toString(a))}gt(e,a){return this.setLimit("min",e,!1,be.toString(a))}lte(e,a){return this.setLimit("max",e,!0,be.toString(a))}lt(e,a){return this.setLimit("max",e,!1,be.toString(a))}setLimit(e,a,s,n){return new W0({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:be.toString(n)}]})}_addCheck(e){return new W0({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:be.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:be.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:be.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:be.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:be.toString(e)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Lt.isInteger(e.value))}get isFinite(){let e=null,a=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(a===null||s.value>a)&&(a=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(a)&&Number.isFinite(e)}};Yp.create=t=>new Yp({checks:[],typeName:Ie.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...at(t)});var Jp=class F0 extends ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==oe.bigint){let n=this._getOrReturnCtx(e);return J(n,{code:D.invalid_type,expected:oe.bigint,received:n.parsedType}),ze}let a,s=new ws;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),J(a,{code:D.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),J(a,{code:D.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),J(a,{code:D.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):Lt.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,be.toString(a))}gt(e,a){return this.setLimit("min",e,!1,be.toString(a))}lte(e,a){return this.setLimit("max",e,!0,be.toString(a))}lt(e,a){return this.setLimit("max",e,!1,be.toString(a))}setLimit(e,a,s,n){return new F0({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:be.toString(n)}]})}_addCheck(e){return new F0({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:be.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(a)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};Jp.create=t=>{var e;return new Jp({checks:[],typeName:Ie.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...at(t)})};var Xp=class extends ut{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==oe.boolean){let a=this._getOrReturnCtx(e);return J(a,{code:D.invalid_type,expected:oe.boolean,received:a.parsedType}),ze}return Xa(e.data)}};Xp.create=t=>new Xp({typeName:Ie.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...at(t)});var em=class TL extends ut{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==oe.date){let n=this._getOrReturnCtx(e);return J(n,{code:D.invalid_type,expected:oe.date,received:n.parsedType}),ze}if(isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return J(n,{code:D.invalid_date}),ze}let a=new ws,s;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:D.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),a.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:D.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),a.dirty()):Lt.assertNever(n);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new TL({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:be.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:be.toString(a)})}get minDate(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}};em.create=t=>new em({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ie.ZodDate,...at(t)});var By=class extends ut{_parse(e){if(this._getType(e)!==oe.symbol){let a=this._getOrReturnCtx(e);return J(a,{code:D.invalid_type,expected:oe.symbol,received:a.parsedType}),ze}return Xa(e.data)}};By.create=t=>new By({typeName:Ie.ZodSymbol,...at(t)});var tm=class extends ut{_parse(e){if(this._getType(e)!==oe.undefined){let a=this._getOrReturnCtx(e);return J(a,{code:D.invalid_type,expected:oe.undefined,received:a.parsedType}),ze}return Xa(e.data)}};tm.create=t=>new tm({typeName:Ie.ZodUndefined,...at(t)});var am=class extends ut{_parse(e){if(this._getType(e)!==oe.null){let a=this._getOrReturnCtx(e);return J(a,{code:D.invalid_type,expected:oe.null,received:a.parsedType}),ze}return Xa(e.data)}};am.create=t=>new am({typeName:Ie.ZodNull,...at(t)});var Wl=class extends ut{constructor(){super(...arguments),this._any=!0}_parse(e){return Xa(e.data)}};Wl.create=t=>new Wl({typeName:Ie.ZodAny,...at(t)});var Yo=class extends ut{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Xa(e.data)}};Yo.create=t=>new Yo({typeName:Ie.ZodUnknown,...at(t)});var rr=class extends ut{_parse(e){let a=this._getOrReturnCtx(e);return J(a,{code:D.invalid_type,expected:oe.never,received:a.parsedType}),ze}};rr.create=t=>new rr({typeName:Ie.ZodNever,...at(t)});var qy=class extends ut{_parse(e){if(this._getType(e)!==oe.undefined){let a=this._getOrReturnCtx(e);return J(a,{code:D.invalid_type,expected:oe.void,received:a.parsedType}),ze}return Xa(e.data)}};qy.create=t=>new qy({typeName:Ie.ZodVoid,...at(t)});var yd=class Lg extends ut{_parse(e){let{ctx:a,status:s}=this._processInputParams(e),n=this._def;if(a.parsedType!==oe.array)return J(a,{code:D.invalid_type,expected:oe.array,received:a.parsedType}),ze;if(n.exactLength!==null){let r=a.data.length>n.exactLength.value,o=a.data.length<n.exactLength.value;(r||o)&&(J(a,{code:r?D.too_big:D.too_small,minimum:o?n.exactLength.value:void 0,maximum:r?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&a.data.length<n.minLength.value&&(J(a,{code:D.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&a.data.length>n.maxLength.value&&(J(a,{code:D.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),a.common.async)return Promise.all([...a.data].map((r,o)=>n.type._parseAsync(new $i(a,r,a.path,o)))).then(r=>ws.mergeArray(s,r));let i=[...a.data].map((r,o)=>n.type._parseSync(new $i(a,r,a.path,o)));return ws.mergeArray(s,i)}get element(){return this._def.type}min(e,a){return new Lg({...this._def,minLength:{value:e,message:be.toString(a)}})}max(e,a){return new Lg({...this._def,maxLength:{value:e,message:be.toString(a)}})}length(e,a){return new Lg({...this._def,exactLength:{value:e,message:be.toString(a)}})}nonempty(e){return this.min(1,e)}};yd.create=(t,e)=>new yd({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ie.ZodArray,...at(e)});function Xd(t){if(t instanceof sn){let e={};for(let a in t.shape){let s=t.shape[a];e[a]=vi.create(Xd(s))}return new sn({...t._def,shape:()=>e})}else return t instanceof yd?new yd({...t._def,type:Xd(t.element)}):t instanceof vi?vi.create(Xd(t.unwrap())):t instanceof po?po.create(Xd(t.unwrap())):t instanceof co?co.create(t.items.map(e=>Xd(e))):t}var sn=class hn extends ut{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),a=Lt.objectKeys(e);return this._cached={shape:e,keys:a}}_parse(e){if(this._getType(e)!==oe.object){let l=this._getOrReturnCtx(e);return J(l,{code:D.invalid_type,expected:oe.object,received:l.parsedType}),ze}let{status:a,ctx:s}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof rr&&this._def.unknownKeys==="strip"))for(let l in s.data)i.includes(l)||r.push(l);let o=[];for(let l of i){let c=n[l],m=s.data[l];o.push({key:{status:"valid",value:l},value:c._parse(new $i(s,m,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof rr){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of r)o.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(l==="strict")r.length>0&&(J(s,{code:D.unrecognized_keys,keys:r}),a.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of r){let m=s.data[c];o.push({key:{status:"valid",value:c},value:l._parse(new $i(s,m,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of o){let m=await c.key,f=await c.value;l.push({key:m,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>ws.mergeObjectSync(a,l)):ws.mergeObjectSync(a,o)}get shape(){return this._def.shape()}strict(e){return be.errToObj,new hn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,s)=>{var n,i,r,o;let l=(r=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,a,s).message)!==null&&r!==void 0?r:s.defaultError;return a.code==="unrecognized_keys"?{message:(o=be.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new hn({...this._def,unknownKeys:"strip"})}passthrough(){return new hn({...this._def,unknownKeys:"passthrough"})}extend(e){return new hn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new hn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ie.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new hn({...this._def,catchall:e})}pick(e){let a={};return Lt.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(a[s]=this.shape[s])}),new hn({...this._def,shape:()=>a})}omit(e){let a={};return Lt.objectKeys(this.shape).forEach(s=>{e[s]||(a[s]=this.shape[s])}),new hn({...this._def,shape:()=>a})}deepPartial(){return Xd(this)}partial(e){let a={};return Lt.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?a[s]=n:a[s]=n.optional()}),new hn({...this._def,shape:()=>a})}required(e){let a={};return Lt.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])a[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof vi;)n=n._def.innerType;a[s]=n}}),new hn({...this._def,shape:()=>a})}keyof(){return EL(Lt.objectKeys(this.shape))}};sn.create=(t,e)=>new sn({shape:()=>t,unknownKeys:"strip",catchall:rr.create(),typeName:Ie.ZodObject,...at(e)});sn.strictCreate=(t,e)=>new sn({shape:()=>t,unknownKeys:"strict",catchall:rr.create(),typeName:Ie.ZodObject,...at(e)});sn.lazycreate=(t,e)=>new sn({shape:t,unknownKeys:"strip",catchall:rr.create(),typeName:Ie.ZodObject,...at(e)});var sm=class extends ut{_parse(e){let{ctx:a}=this._processInputParams(e),s=this._def.options;function n(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return a.common.issues.push(...o.ctx.common.issues),o.result;let r=i.map(o=>new Ln(o.ctx.common.issues));return J(a,{code:D.invalid_union,unionErrors:r}),ze}if(a.common.async)return Promise.all(s.map(async i=>{let r={...a,common:{...a.common,issues:[]},parent:null};return{result:await i._parseAsync({data:a.data,path:a.path,parent:r}),ctx:r}})).then(n);{let i,r=[];for(let l of s){let c={...a,common:{...a.common,issues:[]},parent:null},m=l._parseSync({data:a.data,path:a.path,parent:c});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:c}),c.common.issues.length&&r.push(c.common.issues)}if(i)return a.common.issues.push(...i.ctx.common.issues),i.result;let o=r.map(l=>new Ln(l));return J(a,{code:D.invalid_union,unionErrors:o}),ze}}get options(){return this._def.options}};sm.create=(t,e)=>new sm({options:t,typeName:Ie.ZodUnion,...at(e)});var $r=t=>t instanceof im?$r(t.schema):t instanceof qn?$r(t.innerType()):t instanceof rm?[t.value]:t instanceof lh?t.options:t instanceof om?Lt.objectValues(t.enum):t instanceof dm?$r(t._def.innerType):t instanceof tm?[void 0]:t instanceof am?[null]:t instanceof vi?[void 0,...$r(t.unwrap())]:t instanceof po?[null,...$r(t.unwrap())]:t instanceof ax||t instanceof um?$r(t.unwrap()):t instanceof lm?$r(t._def.innerType):[],SL=class $L extends ut{_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==oe.object)return J(a,{code:D.invalid_type,expected:oe.object,received:a.parsedType}),ze;let s=this.discriminator,n=a.data[s],i=this.optionsMap.get(n);return i?a.common.async?i._parseAsync({data:a.data,path:a.path,parent:a}):i._parseSync({data:a.data,path:a.path,parent:a}):(J(a,{code:D.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),ze)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,s){let n=new Map;for(let i of a){let r=$r(i.shape[e]);if(!r.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of r){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new $L({typeName:Ie.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:n,...at(s)})}};function z0(t,e){let a=jr(t),s=jr(e);if(t===e)return{valid:!0,data:t};if(a===oe.object&&s===oe.object){let n=Lt.objectKeys(e),i=Lt.objectKeys(t).filter(o=>n.indexOf(o)!==-1),r={...t,...e};for(let o of i){let l=z0(t[o],e[o]);if(!l.valid)return{valid:!1};r[o]=l.data}return{valid:!0,data:r}}else if(a===oe.array&&s===oe.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let r=t[i],o=e[i],l=z0(r,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return a===oe.date&&s===oe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var nm=class extends ut{_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=(i,r)=>{if(B0(i)||B0(r))return ze;let o=z0(i.value,r.value);return o.valid?((q0(i)||q0(r))&&a.dirty(),{status:a.value,value:o.data}):(J(s,{code:D.invalid_intersection_types}),ze)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,r])=>n(i,r)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};nm.create=(t,e,a)=>new nm({left:t,right:e,typeName:Ie.ZodIntersection,...at(a)});var co=class AL extends ut{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==oe.array)return J(s,{code:D.invalid_type,expected:oe.array,received:s.parsedType}),ze;if(s.data.length<this._def.items.length)return J(s,{code:D.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ze;!this._def.rest&&s.data.length>this._def.items.length&&(J(s,{code:D.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());let n=[...s.data].map((i,r)=>{let o=this._def.items[r]||this._def.rest;return o?o._parse(new $i(s,i,s.path,r)):null}).filter(i=>!!i);return s.common.async?Promise.all(n).then(i=>ws.mergeArray(a,i)):ws.mergeArray(a,n)}get items(){return this._def.items}rest(e){return new AL({...this._def,rest:e})}};co.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new co({items:t,typeName:Ie.ZodTuple,rest:null,...at(e)})};var LL=class H0 extends ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==oe.object)return J(s,{code:D.invalid_type,expected:oe.object,received:s.parsedType}),ze;let n=[],i=this._def.keyType,r=this._def.valueType;for(let o in s.data)n.push({key:i._parse(new $i(s,o,s.path,o)),value:r._parse(new $i(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?ws.mergeObjectAsync(a,n):ws.mergeObjectSync(a,n)}get element(){return this._def.valueType}static create(e,a,s){return a instanceof ut?new H0({keyType:e,valueType:a,typeName:Ie.ZodRecord,...at(s)}):new H0({keyType:ql.create(),valueType:e,typeName:Ie.ZodRecord,...at(a)})}},Wy=class extends ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==oe.map)return J(s,{code:D.invalid_type,expected:oe.map,received:s.parsedType}),ze;let n=this._def.keyType,i=this._def.valueType,r=[...s.data.entries()].map(([o,l],c)=>({key:n._parse(new $i(s,o,s.path,[c,"key"])),value:i._parse(new $i(s,l,s.path,[c,"value"]))}));if(s.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of r){let c=await l.key,m=await l.value;if(c.status==="aborted"||m.status==="aborted")return ze;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}})}else{let o=new Map;for(let l of r){let c=l.key,m=l.value;if(c.status==="aborted"||m.status==="aborted")return ze;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}}}};Wy.create=(t,e,a)=>new Wy({valueType:e,keyType:t,typeName:Ie.ZodMap,...at(a)});var Fy=class U0 extends ut{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==oe.set)return J(s,{code:D.invalid_type,expected:oe.set,received:s.parsedType}),ze;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(J(s,{code:D.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),a.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(J(s,{code:D.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),a.dirty());let i=this._def.valueType;function r(l){let c=new Set;for(let m of l){if(m.status==="aborted")return ze;m.status==="dirty"&&a.dirty(),c.add(m.value)}return{status:a.value,value:c}}let o=[...s.data.values()].map((l,c)=>i._parse(new $i(s,l,s.path,c)));return s.common.async?Promise.all(o).then(l=>r(l)):r(o)}min(e,a){return new U0({...this._def,minSize:{value:e,message:be.toString(a)}})}max(e,a){return new U0({...this._def,maxSize:{value:e,message:be.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}};Fy.create=(t,e)=>new Fy({valueType:t,minSize:null,maxSize:null,typeName:Ie.ZodSet,...at(e)});var ML=class Mg extends ut{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==oe.function)return J(a,{code:D.invalid_type,expected:oe.function,received:a.parsedType}),ze;function s(o,l){return Ry({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Ny(),Bl].filter(c=>!!c),issueData:{code:D.invalid_arguments,argumentsError:l}})}function n(o,l){return Ry({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Ny(),Bl].filter(c=>!!c),issueData:{code:D.invalid_return_type,returnTypeError:l}})}let i={errorMap:a.common.contextualErrorMap},r=a.data;if(this._def.returns instanceof Fl){let o=this;return Xa(async function(...l){let c=new Ln([]),m=await o._def.args.parseAsync(l,i).catch(h=>{throw c.addIssue(s(l,h)),c}),f=await Reflect.apply(r,this,m);return await o._def.returns._def.type.parseAsync(f,i).catch(h=>{throw c.addIssue(n(f,h)),c})})}else{let o=this;return Xa(function(...l){let c=o._def.args.safeParse(l,i);if(!c.success)throw new Ln([s(l,c.error)]);let m=Reflect.apply(r,this,c.data),f=o._def.returns.safeParse(m,i);if(!f.success)throw new Ln([n(m,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Mg({...this._def,args:co.create(e).rest(Yo.create())})}returns(e){return new Mg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,s){return new Mg({args:e||co.create([]).rest(Yo.create()),returns:a||Yo.create(),typeName:Ie.ZodFunction,...at(s)})}},im=class extends ut{get schema(){return this._def.getter()}_parse(e){let{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}};im.create=(t,e)=>new im({getter:t,typeName:Ie.ZodLazy,...at(e)});var rm=class extends ut{_parse(e){if(e.data!==this._def.value){let a=this._getOrReturnCtx(e);return J(a,{received:a.data,code:D.invalid_literal,expected:this._def.value}),ze}return{status:"valid",value:e.data}}get value(){return this._def.value}};rm.create=(t,e)=>new rm({value:t,typeName:Ie.ZodLiteral,...at(e)});function EL(t,e){return new lh({values:t,typeName:Ie.ZodEnum,...at(e)})}var lh=class V0 extends ut{constructor(){super(...arguments),lc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let a=this._getOrReturnCtx(e),s=this._def.values;return J(a,{expected:Lt.joinValues(s),received:a.parsedType,code:D.invalid_type}),ze}if(Dy(this,lc)||_L(this,lc,new Set(this._def.values)),!Dy(this,lc).has(e.data)){let a=this._getOrReturnCtx(e),s=this._def.values;return J(a,{received:a.data,code:D.invalid_enum_value,options:s}),ze}return Xa(e.data)}get options(){return this._def.values}get enum(){let e={};for(let a of this._def.values)e[a]=a;return e}get Values(){let e={};for(let a of this._def.values)e[a]=a;return e}get Enum(){let e={};for(let a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return V0.create(e,{...this._def,...a})}exclude(e,a=this._def){return V0.create(this.options.filter(s=>!e.includes(s)),{...this._def,...a})}};lc=new WeakMap;lh.create=EL;var om=class extends ut{constructor(){super(...arguments),uc.set(this,void 0)}_parse(e){let a=Lt.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==oe.string&&s.parsedType!==oe.number){let n=Lt.objectValues(a);return J(s,{expected:Lt.joinValues(n),received:s.parsedType,code:D.invalid_type}),ze}if(Dy(this,uc)||_L(this,uc,new Set(Lt.getValidEnumValues(this._def.values))),!Dy(this,uc).has(e.data)){let n=Lt.objectValues(a);return J(s,{received:s.data,code:D.invalid_enum_value,options:n}),ze}return Xa(e.data)}get enum(){return this._def.values}};uc=new WeakMap;om.create=(t,e)=>new om({values:t,typeName:Ie.ZodNativeEnum,...at(e)});var Fl=class extends ut{unwrap(){return this._def.type}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==oe.promise&&a.common.async===!1)return J(a,{code:D.invalid_type,expected:oe.promise,received:a.parsedType}),ze;let s=a.parsedType===oe.promise?a.data:Promise.resolve(a.data);return Xa(s.then(n=>this._def.type.parseAsync(n,{path:a.path,errorMap:a.common.contextualErrorMap})))}};Fl.create=(t,e)=>new Fl({type:t,typeName:Ie.ZodPromise,...at(e)});var qn=class extends ut{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ie.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:r=>{J(s,r),r.fatal?a.abort():a.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let r=n.transform(s.data,i);if(s.common.async)return Promise.resolve(r).then(async o=>{if(a.value==="aborted")return ze;let l=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return l.status==="aborted"?ze:l.status==="dirty"||a.value==="dirty"?jy(l.value):l});{if(a.value==="aborted")return ze;let o=this._def.schema._parseSync({data:r,path:s.path,parent:s});return o.status==="aborted"?ze:o.status==="dirty"||a.value==="dirty"?jy(o.value):o}}if(n.type==="refinement"){let r=o=>{let l=n.refinement(o,i);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?ze:(o.status==="dirty"&&a.dirty(),r(o.value),{status:a.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?ze:(o.status==="dirty"&&a.dirty(),r(o.value).then(()=>({status:a.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){let r=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Gp(r))return r;let o=n.transform(r.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(r=>Gp(r)?Promise.resolve(n.transform(r.value,i)).then(o=>({status:a.value,value:o})):r);Lt.assertNever(n)}};qn.create=(t,e,a)=>new qn({schema:t,typeName:Ie.ZodEffects,effect:e,...at(a)});qn.createWithPreprocess=(t,e,a)=>new qn({schema:e,effect:{type:"preprocess",transform:t},typeName:Ie.ZodEffects,...at(a)});var vi=class extends ut{_parse(e){return this._getType(e)===oe.undefined?Xa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};vi.create=(t,e)=>new vi({innerType:t,typeName:Ie.ZodOptional,...at(e)});var po=class extends ut{_parse(e){return this._getType(e)===oe.null?Xa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};po.create=(t,e)=>new po({innerType:t,typeName:Ie.ZodNullable,...at(e)});var dm=class extends ut{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return a.parsedType===oe.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:a.path,parent:a})}removeDefault(){return this._def.innerType}};dm.create=(t,e)=>new dm({innerType:t,typeName:Ie.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...at(e)});var lm=class extends ut{_parse(e){let{ctx:a}=this._processInputParams(e),s={...a,common:{...a.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Qp(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ln(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Ln(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};lm.create=(t,e)=>new lm({innerType:t,typeName:Ie.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...at(e)});var zy=class extends ut{_parse(e){if(this._getType(e)!==oe.nan){let a=this._getOrReturnCtx(e);return J(a,{code:D.invalid_type,expected:oe.nan,received:a.parsedType}),ze}return{status:"valid",value:e.data}}};zy.create=t=>new zy({typeName:Ie.ZodNaN,...at(t)});var d4=Symbol("zod_brand"),ax=class extends ut{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return this._def.type._parse({data:s,path:a.path,parent:a})}unwrap(){return this._def.type}},sx=class OL extends ut{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?ze:n.status==="dirty"?(a.dirty(),jy(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?ze:n.status==="dirty"?(a.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,a){return new OL({in:e,out:a,typeName:Ie.ZodPipeline})}},um=class extends ut{_parse(e){let a=this._def.innerType._parse(e),s=n=>(Gp(n)&&(n.value=Object.freeze(n.value)),n);return Qp(a)?a.then(n=>s(n)):s(a)}unwrap(){return this._def.innerType}};um.create=(t,e)=>new um({innerType:t,typeName:Ie.ZodReadonly,...at(e)});function IL(t,e={},a){return t?Wl.create().superRefine((s,n)=>{var i,r;if(!t(s)){let o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,l=(r=(i=o.fatal)!==null&&i!==void 0?i:a)!==null&&r!==void 0?r:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:l})}}):Wl.create()}var l4={object:sn.lazycreate},Ie;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ie||(Ie={}));var u4=(t,e={message:`Input not instance of ${t.name}`})=>IL(a=>a instanceof t,e),PL=ql.create,ZL=Yp.create,c4=zy.create,p4=Jp.create,NL=Xp.create,m4=em.create,f4=By.create,h4=tm.create,g4=am.create,y4=Wl.create,v4=Yo.create,b4=rr.create,w4=qy.create,_4=yd.create,k4=sn.create,x4=sn.strictCreate,C4=sm.create,T4=SL.create,S4=nm.create,$4=co.create,A4=LL.create,L4=Wy.create,M4=Fy.create,E4=ML.create,O4=im.create,K0=rm.create,I4=lh.create,P4=om.create,Z4=Fl.create,AT=qn.create,N4=vi.create,R4=po.create,j4=qn.createWithPreprocess,D4=sx.create,B4=()=>PL().optional(),q4=()=>ZL().optional(),W4=()=>NL().optional(),F4={string:t=>ql.create({...t,coerce:!0}),number:t=>Yp.create({...t,coerce:!0}),boolean:t=>Xp.create({...t,coerce:!0}),bigint:t=>Jp.create({...t,coerce:!0}),date:t=>em.create({...t,coerce:!0})},z4=ze,Le=Object.freeze({__proto__:null,defaultErrorMap:Bl,setErrorMap:H5,getErrorMap:Ny,makeIssue:Ry,EMPTY_PATH:U5,addIssueToContext:J,ParseStatus:ws,INVALID:ze,DIRTY:jy,OK:Xa,isAborted:B0,isDirty:q0,isValid:Gp,isAsync:Qp,get util(){return Lt},get objectUtil(){return D0},ZodParsedType:oe,getParsedType:jr,ZodType:ut,datetimeRegex:CL,ZodString:ql,ZodNumber:Yp,ZodBigInt:Jp,ZodBoolean:Xp,ZodDate:em,ZodSymbol:By,ZodUndefined:tm,ZodNull:am,ZodAny:Wl,ZodUnknown:Yo,ZodNever:rr,ZodVoid:qy,ZodArray:yd,ZodObject:sn,ZodUnion:sm,ZodDiscriminatedUnion:SL,ZodIntersection:nm,ZodTuple:co,ZodRecord:LL,ZodMap:Wy,ZodSet:Fy,ZodFunction:ML,ZodLazy:im,ZodLiteral:rm,ZodEnum:lh,ZodNativeEnum:om,ZodPromise:Fl,ZodEffects:qn,ZodTransformer:qn,ZodOptional:vi,ZodNullable:po,ZodDefault:dm,ZodCatch:lm,ZodNaN:zy,BRAND:d4,ZodBranded:ax,ZodPipeline:sx,ZodReadonly:um,custom:IL,Schema:ut,ZodSchema:ut,late:l4,get ZodFirstPartyTypeKind(){return Ie},coerce:F4,any:y4,array:_4,bigint:p4,boolean:NL,date:m4,discriminatedUnion:T4,effect:AT,enum:I4,function:E4,instanceof:u4,intersection:S4,lazy:O4,literal:K0,map:L4,nan:c4,nativeEnum:P4,never:b4,null:g4,nullable:R4,number:ZL,object:k4,oboolean:W4,onumber:q4,optional:N4,ostring:B4,pipeline:D4,preprocess:j4,promise:Z4,record:A4,set:M4,strictObject:x4,string:PL,symbol:f4,transformer:AT,tuple:$4,undefined:h4,union:C4,unknown:v4,void:w4,NEVER:z4,ZodIssueCode:D,quotelessJson:z5,ZodError:Ln}),Eg=Le.string().regex(/^\d+$/,'Needs to be a number or a number represented as a string e.g. "10".').or(Le.number().transform(String)),RL=()=>Le.string().regex(/^[a-zA-Z0-9_]+$/);RL();RL().max(50);Le.string().max(50).regex(/^[a-zA-Z0-9_+]+$/,"Can only contain letters [a-zA-Z0-9_+]");Le.string().nullable().optional().transform(t=>t??void 0);Le.number().nonnegative().max(100);Le.number().nonnegative().max(420);Le.enum(["repeat","random","shuffle"]);Le.enum(["word","time","section"]);var H4=Le.enum(["normal","expert","master"]),Bu=Le.object({acc:Le.number().nonnegative().max(100),consistency:Le.number().nonnegative().max(100),difficulty:H4,lazyMode:Le.boolean().optional(),language:Le.string().max(100).regex(/[\w+]+/),punctuation:Le.boolean().optional(),numbers:Le.boolean().optional(),raw:Le.number().nonnegative(),wpm:Le.number().nonnegative(),timestamp:Le.number().nonnegative()}),U4=Le.object({time:Le.record(Eg.describe("Number of seconds as string"),Le.array(Bu)),words:Le.record(Eg.describe("Number of words as string"),Le.array(Bu)),quote:Le.record(Eg,Le.array(Bu)),custom:Le.record(Le.literal("custom"),Le.array(Bu)),zen:Le.record(Le.literal("zen"),Le.array(Bu))});Le.union([Le.literal("10"),Le.literal("25"),Le.literal("50"),Le.literal("100")]);Le.union([Le.literal("15"),Le.literal("30"),Le.literal("60"),Le.literal("120")]);Le.union([Le.literal("short"),Le.literal("medium"),Le.literal("long"),Le.literal("thicc")]);var V4=U4.keyof();Le.union([Eg,K0("zen"),K0("custom")],{errorMap:()=>({message:'Needs to be either a number, "zen" or "custom".'})});var Mt;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function a(n){throw new Error}t.assertNever=a,t.arrayToEnum=n=>{let i={};for(let r of n)i[r]=r;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),r={};for(let o of i)r[o]=n[o];return t.objectValues(r)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.push(r);return i},t.find=(n,i)=>{for(let r of n)if(i(r))return r},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(r=>typeof r=="string"?`'${r}'`:r).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Mt||(Mt={}));var G0;(function(t){t.mergeShapes=(e,a)=>({...e,...a})})(G0||(G0={}));var de=Mt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Dr=t=>{switch(typeof t){case"undefined":return de.undefined;case"string":return de.string;case"number":return isNaN(t)?de.nan:de.number;case"boolean":return de.boolean;case"function":return de.function;case"bigint":return de.bigint;case"symbol":return de.symbol;case"object":return Array.isArray(t)?de.array:t===null?de.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?de.promise:typeof Map<"u"&&t instanceof Map?de.map:typeof Set<"u"&&t instanceof Set?de.set:typeof Date<"u"&&t instanceof Date?de.date:de.object;default:return de.unknown}},B=Mt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),K4=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Mn=class jL extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let a=e||function(i){return i.message},s={_errors:[]},n=i=>{for(let r of i.issues)if(r.code==="invalid_union")r.unionErrors.map(n);else if(r.code==="invalid_return_type")n(r.returnTypeError);else if(r.code==="invalid_arguments")n(r.argumentsError);else if(r.path.length===0)s._errors.push(a(r));else{let o=s,l=0;for(;l<r.path.length;){let c=r.path[l];l===r.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(a(r))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),s}static assert(e){if(!(e instanceof jL))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Mt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){let a={},s=[];for(let n of this.issues)n.path.length>0?(a[n.path[0]]=a[n.path[0]]||[],a[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:a}}get formErrors(){return this.flatten()}};Mn.create=t=>new Mn(t);var zl=(t,e)=>{let a;switch(t.code){case B.invalid_type:t.received===de.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case B.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,Mt.jsonStringifyReplacer)}`;break;case B.unrecognized_keys:a=`Unrecognized key(s) in object: ${Mt.joinValues(t.keys,", ")}`;break;case B.invalid_union:a="Invalid input";break;case B.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${Mt.joinValues(t.options)}`;break;case B.invalid_enum_value:a=`Invalid enum value. Expected ${Mt.joinValues(t.options)}, received '${t.received}'`;break;case B.invalid_arguments:a="Invalid function arguments";break;case B.invalid_return_type:a="Invalid function return type";break;case B.invalid_date:a="Invalid date";break;case B.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:Mt.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case B.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case B.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case B.custom:a="Invalid input";break;case B.invalid_intersection_types:a="Intersection results could not be merged";break;case B.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case B.not_finite:a="Number must be finite";break;default:a=e.defaultError,Mt.assertNever(t)}return{message:a}},DL=zl;function G4(t){DL=t}function Hy(){return DL}var Uy=t=>{let{data:e,path:a,errorMaps:s,issueData:n}=t,i=[...a,...n.path||[]],r={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="",l=s.filter(c=>!!c).slice().reverse();for(let c of l)o=c(r,{data:e,defaultError:o}).message;return{...n,path:i,message:o}},Q4=[];function X(t,e){let a=Hy(),s=Uy({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===zl?void 0:zl].filter(n=>!!n)});t.common.issues.push(s)}var _s=class BL{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){let s=[];for(let n of a){if(n.status==="aborted")return He;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,a){let s=[];for(let n of a){let i=await n.key,r=await n.value;s.push({key:i,value:r})}return BL.mergeObjectSync(e,s)}static mergeObjectSync(e,a){let s={};for(let n of a){let{key:i,value:r}=n;if(i.status==="aborted"||r.status==="aborted")return He;i.status==="dirty"&&e.dirty(),r.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof r.value<"u"||n.alwaysSet)&&(s[i.value]=r.value)}return{status:e.value,value:s}}},He=Object.freeze({status:"aborted"}),Vy=t=>({status:"dirty",value:t}),es=t=>({status:"valid",value:t}),Q0=t=>t.status==="aborted",Y0=t=>t.status==="dirty",cm=t=>t.status==="valid",pm=t=>typeof Promise<"u"&&t instanceof Promise;function Ky(t,e,a,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function qL(t,e,a,s,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,a),a}var we;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(we||(we={}));var pc,mc,Ai=class{constructor(e,a,s,n){this._cachedPath=[],this.parent=e,this.data=a,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},LT=(t,e)=>{if(cm(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let a=new Mn(t.common.issues);return this._error=a,this._error}}};function st(t){if(!t)return{};let{errorMap:e,invalid_type_error:a,required_error:s,description:n}=t;if(e&&(a||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,r)=>{var o,l;let{message:c}=t;return i.code==="invalid_enum_value"?{message:c??r.defaultError}:typeof r.data>"u"?{message:(o=c??s)!==null&&o!==void 0?o:r.defaultError}:i.code!=="invalid_type"?{message:r.defaultError}:{message:(l=c??a)!==null&&l!==void 0?l:r.defaultError}},description:n}}var ct=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Dr(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:Dr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new _s,ctx:{common:e.parent.common,data:e.data,parsedType:Dr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let a=this._parse(e);if(pm(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){let a=this._parse(e);return Promise.resolve(a)}parse(e,a){let s=this.safeParse(e,a);if(s.success)return s.data;throw s.error}safeParse(e,a){var s;let n={common:{issues:[],async:(s=a==null?void 0:a.async)!==null&&s!==void 0?s:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Dr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return LT(n,i)}async parseAsync(e,a){let s=await this.safeParseAsync(e,a);if(s.success)return s.data;throw s.error}async safeParseAsync(e,a){let s={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Dr(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(pm(n)?n:Promise.resolve(n));return LT(s,i)}refine(e,a){let s=n=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(n):a;return this._refinement((n,i)=>{let r=e(n),o=()=>i.addIssue({code:B.custom,...s(n)});return typeof Promise<"u"&&r instanceof Promise?r.then(l=>l?!0:(o(),!1)):r?!0:(o(),!1)})}refinement(e,a){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof a=="function"?a(s,n):a),!1))}_refinement(e){return new Wn({schema:this,typeName:Pe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return bi.create(this,this._def)}nullable(){return fo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return vd.create(this,this._def)}promise(){return Vl.create(this,this._def)}or(e){return bm.create([this,e],this._def)}and(e){return wm.create(this,e,this._def)}transform(e){return new Wn({...st(this._def),schema:this,typeName:Pe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let a=typeof e=="function"?e:()=>e;return new Cm({...st(this._def),innerType:this,defaultValue:a,typeName:Pe.ZodDefault})}brand(){return new nx({typeName:Pe.ZodBranded,type:this,...st(this._def)})}catch(e){let a=typeof e=="function"?e:()=>e;return new Tm({...st(this._def),innerType:this,catchValue:a,typeName:Pe.ZodCatch})}describe(e){let a=this.constructor;return new a({...this._def,description:e})}pipe(e){return ix.create(this,e)}readonly(){return Sm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Y4=/^c[^\s-]{8,}$/i,J4=/^[0-9a-z]+$/,X4=/^[0-9A-HJKMNP-TV-Z]{26}$/,ez=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tz=/^[a-z0-9_-]{21}$/i,az=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,sz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",ww,iz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rz=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,oz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,WL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dz=new RegExp(`^${WL}$`);function FL(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function lz(t){return new RegExp(`^${FL(t)}$`)}function zL(t){let e=`${WL}T${FL(t)}`,a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function uz(t,e){return!!((e==="v4"||!e)&&iz.test(t)||(e==="v6"||!e)&&rz.test(t))}var Hl=class fc extends ct{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==de.string){let n=this._getOrReturnCtx(e);return X(n,{code:B.invalid_type,expected:de.string,received:n.parsedType}),He}let a=new _s,s;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:B.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="max")e.data.length>n.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:B.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="length"){let i=e.data.length>n.value,r=e.data.length<n.value;(i||r)&&(s=this._getOrReturnCtx(e,s),i?X(s,{code:B.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):r&&X(s,{code:B.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),a.dirty())}else if(n.kind==="email")sz.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"email",code:B.invalid_string,message:n.message}),a.dirty());else if(n.kind==="emoji")ww||(ww=new RegExp(nz,"u")),ww.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"emoji",code:B.invalid_string,message:n.message}),a.dirty());else if(n.kind==="uuid")ez.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"uuid",code:B.invalid_string,message:n.message}),a.dirty());else if(n.kind==="nanoid")tz.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"nanoid",code:B.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid")Y4.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"cuid",code:B.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid2")J4.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"cuid2",code:B.invalid_string,message:n.message}),a.dirty());else if(n.kind==="ulid")X4.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"ulid",code:B.invalid_string,message:n.message}),a.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),X(s,{validation:"url",code:B.invalid_string,message:n.message}),a.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"regex",code:B.invalid_string,message:n.message}),a.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),a.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:{startsWith:n.value},message:n.message}),a.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:{endsWith:n.value},message:n.message}),a.dirty()):n.kind==="datetime"?zL(n).test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:"datetime",message:n.message}),a.dirty()):n.kind==="date"?dz.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:"date",message:n.message}),a.dirty()):n.kind==="time"?lz(n).test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:"time",message:n.message}),a.dirty()):n.kind==="duration"?az.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"duration",code:B.invalid_string,message:n.message}),a.dirty()):n.kind==="ip"?uz(e.data,n.version)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"ip",code:B.invalid_string,message:n.message}),a.dirty()):n.kind==="base64"?oz.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"base64",code:B.invalid_string,message:n.message}),a.dirty()):Mt.assertNever(n);return{status:a.value,value:e.data}}_regex(e,a,s){return this.refinement(n=>e.test(n),{validation:a,code:B.invalid_string,...we.errToObj(s)})}_addCheck(e){return new fc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...we.errToObj(e)})}url(e){return this._addCheck({kind:"url",...we.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...we.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...we.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...we.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...we.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...we.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...we.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...we.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...we.errToObj(e)})}datetime(e){var a,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(a=e==null?void 0:e.offset)!==null&&a!==void 0?a:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...we.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...we.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...we.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,...we.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,...we.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,...we.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,...we.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,...we.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,...we.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,...we.errToObj(a)})}nonempty(e){return this.min(1,we.errToObj(e))}trim(){return new fc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new fc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new fc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};Hl.create=t=>{var e;return new Hl({checks:[],typeName:Pe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...st(t)})};function cz(t,e){let a=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=a>s?a:s,i=parseInt(t.toFixed(n).replace(".","")),r=parseInt(e.toFixed(n).replace(".",""));return i%r/Math.pow(10,n)}var mm=class J0 extends ct{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==de.number){let n=this._getOrReturnCtx(e);return X(n,{code:B.invalid_type,expected:de.number,received:n.parsedType}),He}let a,s=new _s;for(let n of this._def.checks)n.kind==="int"?Mt.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),X(a,{code:B.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),X(a,{code:B.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),X(a,{code:B.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="multipleOf"?cz(e.data,n.value)!==0&&(a=this._getOrReturnCtx(e,a),X(a,{code:B.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),X(a,{code:B.not_finite,message:n.message}),s.dirty()):Mt.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,we.toString(a))}gt(e,a){return this.setLimit("min",e,!1,we.toString(a))}lte(e,a){return this.setLimit("max",e,!0,we.toString(a))}lt(e,a){return this.setLimit("max",e,!1,we.toString(a))}setLimit(e,a,s,n){return new J0({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:we.toString(n)}]})}_addCheck(e){return new J0({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:we.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:we.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:we.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:we.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:we.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:we.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:we.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:we.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:we.toString(e)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Mt.isInteger(e.value))}get isFinite(){let e=null,a=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(a===null||s.value>a)&&(a=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(a)&&Number.isFinite(e)}};mm.create=t=>new mm({checks:[],typeName:Pe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});var fm=class X0 extends ct{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==de.bigint){let n=this._getOrReturnCtx(e);return X(n,{code:B.invalid_type,expected:de.bigint,received:n.parsedType}),He}let a,s=new _s;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),X(a,{code:B.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),X(a,{code:B.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),X(a,{code:B.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):Mt.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,we.toString(a))}gt(e,a){return this.setLimit("min",e,!1,we.toString(a))}lte(e,a){return this.setLimit("max",e,!0,we.toString(a))}lt(e,a){return this.setLimit("max",e,!1,we.toString(a))}setLimit(e,a,s,n){return new X0({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:we.toString(n)}]})}_addCheck(e){return new X0({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:we.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:we.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:we.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:we.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:we.toString(a)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};fm.create=t=>{var e;return new fm({checks:[],typeName:Pe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...st(t)})};var hm=class extends ct{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==de.boolean){let a=this._getOrReturnCtx(e);return X(a,{code:B.invalid_type,expected:de.boolean,received:a.parsedType}),He}return es(e.data)}};hm.create=t=>new hm({typeName:Pe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});var gm=class HL extends ct{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==de.date){let n=this._getOrReturnCtx(e);return X(n,{code:B.invalid_type,expected:de.date,received:n.parsedType}),He}if(isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return X(n,{code:B.invalid_date}),He}let a=new _s,s;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:B.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),a.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:B.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),a.dirty()):Mt.assertNever(n);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new HL({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:we.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:we.toString(a)})}get minDate(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}};gm.create=t=>new gm({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Pe.ZodDate,...st(t)});var Gy=class extends ct{_parse(e){if(this._getType(e)!==de.symbol){let a=this._getOrReturnCtx(e);return X(a,{code:B.invalid_type,expected:de.symbol,received:a.parsedType}),He}return es(e.data)}};Gy.create=t=>new Gy({typeName:Pe.ZodSymbol,...st(t)});var ym=class extends ct{_parse(e){if(this._getType(e)!==de.undefined){let a=this._getOrReturnCtx(e);return X(a,{code:B.invalid_type,expected:de.undefined,received:a.parsedType}),He}return es(e.data)}};ym.create=t=>new ym({typeName:Pe.ZodUndefined,...st(t)});var vm=class extends ct{_parse(e){if(this._getType(e)!==de.null){let a=this._getOrReturnCtx(e);return X(a,{code:B.invalid_type,expected:de.null,received:a.parsedType}),He}return es(e.data)}};vm.create=t=>new vm({typeName:Pe.ZodNull,...st(t)});var Ul=class extends ct{constructor(){super(...arguments),this._any=!0}_parse(e){return es(e.data)}};Ul.create=t=>new Ul({typeName:Pe.ZodAny,...st(t)});var Jo=class extends ct{constructor(){super(...arguments),this._unknown=!0}_parse(e){return es(e.data)}};Jo.create=t=>new Jo({typeName:Pe.ZodUnknown,...st(t)});var or=class extends ct{_parse(e){let a=this._getOrReturnCtx(e);return X(a,{code:B.invalid_type,expected:de.never,received:a.parsedType}),He}};or.create=t=>new or({typeName:Pe.ZodNever,...st(t)});var Qy=class extends ct{_parse(e){if(this._getType(e)!==de.undefined){let a=this._getOrReturnCtx(e);return X(a,{code:B.invalid_type,expected:de.void,received:a.parsedType}),He}return es(e.data)}};Qy.create=t=>new Qy({typeName:Pe.ZodVoid,...st(t)});var vd=class Og extends ct{_parse(e){let{ctx:a,status:s}=this._processInputParams(e),n=this._def;if(a.parsedType!==de.array)return X(a,{code:B.invalid_type,expected:de.array,received:a.parsedType}),He;if(n.exactLength!==null){let r=a.data.length>n.exactLength.value,o=a.data.length<n.exactLength.value;(r||o)&&(X(a,{code:r?B.too_big:B.too_small,minimum:o?n.exactLength.value:void 0,maximum:r?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&a.data.length<n.minLength.value&&(X(a,{code:B.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&a.data.length>n.maxLength.value&&(X(a,{code:B.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),a.common.async)return Promise.all([...a.data].map((r,o)=>n.type._parseAsync(new Ai(a,r,a.path,o)))).then(r=>_s.mergeArray(s,r));let i=[...a.data].map((r,o)=>n.type._parseSync(new Ai(a,r,a.path,o)));return _s.mergeArray(s,i)}get element(){return this._def.type}min(e,a){return new Og({...this._def,minLength:{value:e,message:we.toString(a)}})}max(e,a){return new Og({...this._def,maxLength:{value:e,message:we.toString(a)}})}length(e,a){return new Og({...this._def,exactLength:{value:e,message:we.toString(a)}})}nonempty(e){return this.min(1,e)}};vd.create=(t,e)=>new vd({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Pe.ZodArray,...st(e)});function el(t){if(t instanceof nn){let e={};for(let a in t.shape){let s=t.shape[a];e[a]=bi.create(el(s))}return new nn({...t._def,shape:()=>e})}else return t instanceof vd?new vd({...t._def,type:el(t.element)}):t instanceof bi?bi.create(el(t.unwrap())):t instanceof fo?fo.create(el(t.unwrap())):t instanceof mo?mo.create(t.items.map(e=>el(e))):t}var nn=class gn extends ct{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),a=Mt.objectKeys(e);return this._cached={shape:e,keys:a}}_parse(e){if(this._getType(e)!==de.object){let l=this._getOrReturnCtx(e);return X(l,{code:B.invalid_type,expected:de.object,received:l.parsedType}),He}let{status:a,ctx:s}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof or&&this._def.unknownKeys==="strip"))for(let l in s.data)i.includes(l)||r.push(l);let o=[];for(let l of i){let c=n[l],m=s.data[l];o.push({key:{status:"valid",value:l},value:c._parse(new Ai(s,m,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof or){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of r)o.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(l==="strict")r.length>0&&(X(s,{code:B.unrecognized_keys,keys:r}),a.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of r){let m=s.data[c];o.push({key:{status:"valid",value:c},value:l._parse(new Ai(s,m,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of o){let m=await c.key,f=await c.value;l.push({key:m,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>_s.mergeObjectSync(a,l)):_s.mergeObjectSync(a,o)}get shape(){return this._def.shape()}strict(e){return we.errToObj,new gn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,s)=>{var n,i,r,o;let l=(r=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,a,s).message)!==null&&r!==void 0?r:s.defaultError;return a.code==="unrecognized_keys"?{message:(o=we.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new gn({...this._def,unknownKeys:"strip"})}passthrough(){return new gn({...this._def,unknownKeys:"passthrough"})}extend(e){return new gn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new gn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Pe.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new gn({...this._def,catchall:e})}pick(e){let a={};return Mt.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(a[s]=this.shape[s])}),new gn({...this._def,shape:()=>a})}omit(e){let a={};return Mt.objectKeys(this.shape).forEach(s=>{e[s]||(a[s]=this.shape[s])}),new gn({...this._def,shape:()=>a})}deepPartial(){return el(this)}partial(e){let a={};return Mt.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?a[s]=n:a[s]=n.optional()}),new gn({...this._def,shape:()=>a})}required(e){let a={};return Mt.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])a[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof bi;)n=n._def.innerType;a[s]=n}}),new gn({...this._def,shape:()=>a})}keyof(){return YL(Mt.objectKeys(this.shape))}};nn.create=(t,e)=>new nn({shape:()=>t,unknownKeys:"strip",catchall:or.create(),typeName:Pe.ZodObject,...st(e)});nn.strictCreate=(t,e)=>new nn({shape:()=>t,unknownKeys:"strict",catchall:or.create(),typeName:Pe.ZodObject,...st(e)});nn.lazycreate=(t,e)=>new nn({shape:t,unknownKeys:"strip",catchall:or.create(),typeName:Pe.ZodObject,...st(e)});var bm=class extends ct{_parse(e){let{ctx:a}=this._processInputParams(e),s=this._def.options;function n(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return a.common.issues.push(...o.ctx.common.issues),o.result;let r=i.map(o=>new Mn(o.ctx.common.issues));return X(a,{code:B.invalid_union,unionErrors:r}),He}if(a.common.async)return Promise.all(s.map(async i=>{let r={...a,common:{...a.common,issues:[]},parent:null};return{result:await i._parseAsync({data:a.data,path:a.path,parent:r}),ctx:r}})).then(n);{let i,r=[];for(let l of s){let c={...a,common:{...a.common,issues:[]},parent:null},m=l._parseSync({data:a.data,path:a.path,parent:c});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:c}),c.common.issues.length&&r.push(c.common.issues)}if(i)return a.common.issues.push(...i.ctx.common.issues),i.result;let o=r.map(l=>new Mn(l));return X(a,{code:B.invalid_union,unionErrors:o}),He}}get options(){return this._def.options}};bm.create=(t,e)=>new bm({options:t,typeName:Pe.ZodUnion,...st(e)});var Ar=t=>t instanceof _m?Ar(t.schema):t instanceof Wn?Ar(t.innerType()):t instanceof km?[t.value]:t instanceof uh?t.options:t instanceof xm?Mt.objectValues(t.enum):t instanceof Cm?Ar(t._def.innerType):t instanceof ym?[void 0]:t instanceof vm?[null]:t instanceof bi?[void 0,...Ar(t.unwrap())]:t instanceof fo?[null,...Ar(t.unwrap())]:t instanceof nx||t instanceof Sm?Ar(t.unwrap()):t instanceof Tm?Ar(t._def.innerType):[],UL=class VL extends ct{_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==de.object)return X(a,{code:B.invalid_type,expected:de.object,received:a.parsedType}),He;let s=this.discriminator,n=a.data[s],i=this.optionsMap.get(n);return i?a.common.async?i._parseAsync({data:a.data,path:a.path,parent:a}):i._parseSync({data:a.data,path:a.path,parent:a}):(X(a,{code:B.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),He)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,s){let n=new Map;for(let i of a){let r=Ar(i.shape[e]);if(!r.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of r){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new VL({typeName:Pe.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:n,...st(s)})}};function e_(t,e){let a=Dr(t),s=Dr(e);if(t===e)return{valid:!0,data:t};if(a===de.object&&s===de.object){let n=Mt.objectKeys(e),i=Mt.objectKeys(t).filter(o=>n.indexOf(o)!==-1),r={...t,...e};for(let o of i){let l=e_(t[o],e[o]);if(!l.valid)return{valid:!1};r[o]=l.data}return{valid:!0,data:r}}else if(a===de.array&&s===de.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let r=t[i],o=e[i],l=e_(r,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return a===de.date&&s===de.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var wm=class extends ct{_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=(i,r)=>{if(Q0(i)||Q0(r))return He;let o=e_(i.value,r.value);return o.valid?((Y0(i)||Y0(r))&&a.dirty(),{status:a.value,value:o.data}):(X(s,{code:B.invalid_intersection_types}),He)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,r])=>n(i,r)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};wm.create=(t,e,a)=>new wm({left:t,right:e,typeName:Pe.ZodIntersection,...st(a)});var mo=class KL extends ct{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==de.array)return X(s,{code:B.invalid_type,expected:de.array,received:s.parsedType}),He;if(s.data.length<this._def.items.length)return X(s,{code:B.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),He;!this._def.rest&&s.data.length>this._def.items.length&&(X(s,{code:B.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());let n=[...s.data].map((i,r)=>{let o=this._def.items[r]||this._def.rest;return o?o._parse(new Ai(s,i,s.path,r)):null}).filter(i=>!!i);return s.common.async?Promise.all(n).then(i=>_s.mergeArray(a,i)):_s.mergeArray(a,n)}get items(){return this._def.items}rest(e){return new KL({...this._def,rest:e})}};mo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mo({items:t,typeName:Pe.ZodTuple,rest:null,...st(e)})};var GL=class t_ extends ct{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==de.object)return X(s,{code:B.invalid_type,expected:de.object,received:s.parsedType}),He;let n=[],i=this._def.keyType,r=this._def.valueType;for(let o in s.data)n.push({key:i._parse(new Ai(s,o,s.path,o)),value:r._parse(new Ai(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?_s.mergeObjectAsync(a,n):_s.mergeObjectSync(a,n)}get element(){return this._def.valueType}static create(e,a,s){return a instanceof ct?new t_({keyType:e,valueType:a,typeName:Pe.ZodRecord,...st(s)}):new t_({keyType:Hl.create(),valueType:e,typeName:Pe.ZodRecord,...st(a)})}},Yy=class extends ct{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==de.map)return X(s,{code:B.invalid_type,expected:de.map,received:s.parsedType}),He;let n=this._def.keyType,i=this._def.valueType,r=[...s.data.entries()].map(([o,l],c)=>({key:n._parse(new Ai(s,o,s.path,[c,"key"])),value:i._parse(new Ai(s,l,s.path,[c,"value"]))}));if(s.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of r){let c=await l.key,m=await l.value;if(c.status==="aborted"||m.status==="aborted")return He;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}})}else{let o=new Map;for(let l of r){let c=l.key,m=l.value;if(c.status==="aborted"||m.status==="aborted")return He;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}}}};Yy.create=(t,e,a)=>new Yy({valueType:e,keyType:t,typeName:Pe.ZodMap,...st(a)});var Jy=class a_ extends ct{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==de.set)return X(s,{code:B.invalid_type,expected:de.set,received:s.parsedType}),He;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(X(s,{code:B.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),a.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(X(s,{code:B.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),a.dirty());let i=this._def.valueType;function r(l){let c=new Set;for(let m of l){if(m.status==="aborted")return He;m.status==="dirty"&&a.dirty(),c.add(m.value)}return{status:a.value,value:c}}let o=[...s.data.values()].map((l,c)=>i._parse(new Ai(s,l,s.path,c)));return s.common.async?Promise.all(o).then(l=>r(l)):r(o)}min(e,a){return new a_({...this._def,minSize:{value:e,message:we.toString(a)}})}max(e,a){return new a_({...this._def,maxSize:{value:e,message:we.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}};Jy.create=(t,e)=>new Jy({valueType:t,minSize:null,maxSize:null,typeName:Pe.ZodSet,...st(e)});var QL=class Ig extends ct{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==de.function)return X(a,{code:B.invalid_type,expected:de.function,received:a.parsedType}),He;function s(o,l){return Uy({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Hy(),zl].filter(c=>!!c),issueData:{code:B.invalid_arguments,argumentsError:l}})}function n(o,l){return Uy({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Hy(),zl].filter(c=>!!c),issueData:{code:B.invalid_return_type,returnTypeError:l}})}let i={errorMap:a.common.contextualErrorMap},r=a.data;if(this._def.returns instanceof Vl){let o=this;return es(async function(...l){let c=new Mn([]),m=await o._def.args.parseAsync(l,i).catch(h=>{throw c.addIssue(s(l,h)),c}),f=await Reflect.apply(r,this,m);return await o._def.returns._def.type.parseAsync(f,i).catch(h=>{throw c.addIssue(n(f,h)),c})})}else{let o=this;return es(function(...l){let c=o._def.args.safeParse(l,i);if(!c.success)throw new Mn([s(l,c.error)]);let m=Reflect.apply(r,this,c.data),f=o._def.returns.safeParse(m,i);if(!f.success)throw new Mn([n(m,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ig({...this._def,args:mo.create(e).rest(Jo.create())})}returns(e){return new Ig({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,s){return new Ig({args:e||mo.create([]).rest(Jo.create()),returns:a||Jo.create(),typeName:Pe.ZodFunction,...st(s)})}},_m=class extends ct{get schema(){return this._def.getter()}_parse(e){let{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}};_m.create=(t,e)=>new _m({getter:t,typeName:Pe.ZodLazy,...st(e)});var km=class extends ct{_parse(e){if(e.data!==this._def.value){let a=this._getOrReturnCtx(e);return X(a,{received:a.data,code:B.invalid_literal,expected:this._def.value}),He}return{status:"valid",value:e.data}}get value(){return this._def.value}};km.create=(t,e)=>new km({value:t,typeName:Pe.ZodLiteral,...st(e)});function YL(t,e){return new uh({values:t,typeName:Pe.ZodEnum,...st(e)})}var uh=class s_ extends ct{constructor(){super(...arguments),pc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let a=this._getOrReturnCtx(e),s=this._def.values;return X(a,{expected:Mt.joinValues(s),received:a.parsedType,code:B.invalid_type}),He}if(Ky(this,pc)||qL(this,pc,new Set(this._def.values)),!Ky(this,pc).has(e.data)){let a=this._getOrReturnCtx(e),s=this._def.values;return X(a,{received:a.data,code:B.invalid_enum_value,options:s}),He}return es(e.data)}get options(){return this._def.values}get enum(){let e={};for(let a of this._def.values)e[a]=a;return e}get Values(){let e={};for(let a of this._def.values)e[a]=a;return e}get Enum(){let e={};for(let a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return s_.create(e,{...this._def,...a})}exclude(e,a=this._def){return s_.create(this.options.filter(s=>!e.includes(s)),{...this._def,...a})}};pc=new WeakMap;uh.create=YL;var xm=class extends ct{constructor(){super(...arguments),mc.set(this,void 0)}_parse(e){let a=Mt.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==de.string&&s.parsedType!==de.number){let n=Mt.objectValues(a);return X(s,{expected:Mt.joinValues(n),received:s.parsedType,code:B.invalid_type}),He}if(Ky(this,mc)||qL(this,mc,new Set(Mt.getValidEnumValues(this._def.values))),!Ky(this,mc).has(e.data)){let n=Mt.objectValues(a);return X(s,{received:s.data,code:B.invalid_enum_value,options:n}),He}return es(e.data)}get enum(){return this._def.values}};mc=new WeakMap;xm.create=(t,e)=>new xm({values:t,typeName:Pe.ZodNativeEnum,...st(e)});var Vl=class extends ct{unwrap(){return this._def.type}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==de.promise&&a.common.async===!1)return X(a,{code:B.invalid_type,expected:de.promise,received:a.parsedType}),He;let s=a.parsedType===de.promise?a.data:Promise.resolve(a.data);return es(s.then(n=>this._def.type.parseAsync(n,{path:a.path,errorMap:a.common.contextualErrorMap})))}};Vl.create=(t,e)=>new Vl({type:t,typeName:Pe.ZodPromise,...st(e)});var Wn=class extends ct{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:r=>{X(s,r),r.fatal?a.abort():a.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let r=n.transform(s.data,i);if(s.common.async)return Promise.resolve(r).then(async o=>{if(a.value==="aborted")return He;let l=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return l.status==="aborted"?He:l.status==="dirty"||a.value==="dirty"?Vy(l.value):l});{if(a.value==="aborted")return He;let o=this._def.schema._parseSync({data:r,path:s.path,parent:s});return o.status==="aborted"?He:o.status==="dirty"||a.value==="dirty"?Vy(o.value):o}}if(n.type==="refinement"){let r=o=>{let l=n.refinement(o,i);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?He:(o.status==="dirty"&&a.dirty(),r(o.value),{status:a.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?He:(o.status==="dirty"&&a.dirty(),r(o.value).then(()=>({status:a.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){let r=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!cm(r))return r;let o=n.transform(r.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(r=>cm(r)?Promise.resolve(n.transform(r.value,i)).then(o=>({status:a.value,value:o})):r);Mt.assertNever(n)}};Wn.create=(t,e,a)=>new Wn({schema:t,typeName:Pe.ZodEffects,effect:e,...st(a)});Wn.createWithPreprocess=(t,e,a)=>new Wn({schema:e,effect:{type:"preprocess",transform:t},typeName:Pe.ZodEffects,...st(a)});var bi=class extends ct{_parse(e){return this._getType(e)===de.undefined?es(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};bi.create=(t,e)=>new bi({innerType:t,typeName:Pe.ZodOptional,...st(e)});var fo=class extends ct{_parse(e){return this._getType(e)===de.null?es(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};fo.create=(t,e)=>new fo({innerType:t,typeName:Pe.ZodNullable,...st(e)});var Cm=class extends ct{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return a.parsedType===de.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:a.path,parent:a})}removeDefault(){return this._def.innerType}};Cm.create=(t,e)=>new Cm({innerType:t,typeName:Pe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...st(e)});var Tm=class extends ct{_parse(e){let{ctx:a}=this._processInputParams(e),s={...a,common:{...a.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return pm(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Mn(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Mn(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Tm.create=(t,e)=>new Tm({innerType:t,typeName:Pe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...st(e)});var Xy=class extends ct{_parse(e){if(this._getType(e)!==de.nan){let a=this._getOrReturnCtx(e);return X(a,{code:B.invalid_type,expected:de.nan,received:a.parsedType}),He}return{status:"valid",value:e.data}}};Xy.create=t=>new Xy({typeName:Pe.ZodNaN,...st(t)});var pz=Symbol("zod_brand"),nx=class extends ct{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return this._def.type._parse({data:s,path:a.path,parent:a})}unwrap(){return this._def.type}},ix=class JL extends ct{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?He:n.status==="dirty"?(a.dirty(),Vy(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?He:n.status==="dirty"?(a.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,a){return new JL({in:e,out:a,typeName:Pe.ZodPipeline})}},Sm=class extends ct{_parse(e){let a=this._def.innerType._parse(e),s=n=>(cm(n)&&(n.value=Object.freeze(n.value)),n);return pm(a)?a.then(n=>s(n)):s(a)}unwrap(){return this._def.innerType}};Sm.create=(t,e)=>new Sm({innerType:t,typeName:Pe.ZodReadonly,...st(e)});function XL(t,e={},a){return t?Ul.create().superRefine((s,n)=>{var i,r;if(!t(s)){let o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,l=(r=(i=o.fatal)!==null&&i!==void 0?i:a)!==null&&r!==void 0?r:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:l})}}):Ul.create()}var mz={object:nn.lazycreate},Pe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Pe||(Pe={}));var fz=(t,e={message:`Input not instance of ${t.name}`})=>XL(a=>a instanceof t,e),eM=Hl.create,tM=mm.create,hz=Xy.create,gz=fm.create,aM=hm.create,yz=gm.create,vz=Gy.create,bz=ym.create,wz=vm.create,_z=Ul.create,kz=Jo.create,xz=or.create,Cz=Qy.create,Tz=vd.create,Sz=nn.create,$z=nn.strictCreate,Az=bm.create,Lz=UL.create,Mz=wm.create,Ez=mo.create,Oz=GL.create,Iz=Yy.create,Pz=Jy.create,Zz=QL.create,Nz=_m.create,Rz=km.create,jz=uh.create,Dz=xm.create,Bz=Vl.create,MT=Wn.create,qz=bi.create,Wz=fo.create,Fz=Wn.createWithPreprocess,zz=ix.create,Hz=()=>eM().optional(),Uz=()=>tM().optional(),Vz=()=>aM().optional(),Kz={string:t=>Hl.create({...t,coerce:!0}),number:t=>mm.create({...t,coerce:!0}),boolean:t=>hm.create({...t,coerce:!0}),bigint:t=>fm.create({...t,coerce:!0}),date:t=>gm.create({...t,coerce:!0})},Gz=He,dr=Object.freeze({__proto__:null,defaultErrorMap:zl,setErrorMap:G4,getErrorMap:Hy,makeIssue:Uy,EMPTY_PATH:Q4,addIssueToContext:X,ParseStatus:_s,INVALID:He,DIRTY:Vy,OK:es,isAborted:Q0,isDirty:Y0,isValid:cm,isAsync:pm,get util(){return Mt},get objectUtil(){return G0},ZodParsedType:de,getParsedType:Dr,ZodType:ct,datetimeRegex:zL,ZodString:Hl,ZodNumber:mm,ZodBigInt:fm,ZodBoolean:hm,ZodDate:gm,ZodSymbol:Gy,ZodUndefined:ym,ZodNull:vm,ZodAny:Ul,ZodUnknown:Jo,ZodNever:or,ZodVoid:Qy,ZodArray:vd,ZodObject:nn,ZodUnion:bm,ZodDiscriminatedUnion:UL,ZodIntersection:wm,ZodTuple:mo,ZodRecord:GL,ZodMap:Yy,ZodSet:Jy,ZodFunction:QL,ZodLazy:_m,ZodLiteral:km,ZodEnum:uh,ZodNativeEnum:xm,ZodPromise:Vl,ZodEffects:Wn,ZodTransformer:Wn,ZodOptional:bi,ZodNullable:fo,ZodDefault:Cm,ZodCatch:Tm,ZodNaN:Xy,BRAND:pz,ZodBranded:nx,ZodPipeline:ix,ZodReadonly:Sm,custom:XL,Schema:ct,ZodSchema:ct,late:mz,get ZodFirstPartyTypeKind(){return Pe},coerce:Kz,any:_z,array:Tz,bigint:gz,boolean:aM,date:yz,discriminatedUnion:Lz,effect:MT,enum:jz,function:Zz,instanceof:fz,intersection:Mz,lazy:Nz,literal:Rz,map:Iz,nan:hz,nativeEnum:Dz,never:xz,null:wz,nullable:Wz,number:tM,object:Sz,oboolean:Vz,onumber:Uz,optional:qz,ostring:Hz,pipeline:zz,preprocess:Fz,promise:Bz,record:Oz,set:Pz,strictObject:$z,string:eM,symbol:vz,transformer:MT,tuple:Ez,undefined:bz,union:Az,unknown:kz,void:Cz,NEVER:Gz,ZodIssueCode:B,quotelessJson:K4,ZodError:Mn});dr.string().regex(/^\d+$/,'Needs to be a number or a number represented as a string e.g. "10".').or(dr.number().transform(String));var sM=()=>dr.string().regex(/^[a-zA-Z0-9_]+$/),nM=sM();sM().max(50);var Qz=dr.string().max(50).regex(/^[a-zA-Z0-9_+]+$/,"Can only contain letters [a-zA-Z0-9_+]");dr.string().nullable().optional().transform(t=>t??void 0);dr.number().nonnegative().max(100);dr.number().nonnegative().max(420);var Yz=dr.enum(["repeat","random","shuffle"]),Jz=dr.enum(["word","time","section"]);class Bs{constructor(e){this.key=e.key,this.schema=e.schema,this.fallback=e.fallback,this.migrate=e.migrate}get(){const e=window.localStorage.getItem(this.key);if(e===null)return this.fallback;let a;try{a=JSON.parse(e)}catch(i){return console.log(`Value from localStorage ${this.key} was not a valid JSON, using fallback`,i),window.localStorage.removeItem(this.key),this.fallback}const s=this.schema.safeParse(a);if(s.success)return s.data;console.log(`Value from localStorage ${this.key} failed schema validation, migrating`,s.error.issues);let n=this.fallback;if(this.migrate){const i=this.migrate(a,s.error.issues,Rn(this.fallback)),r=this.schema.safeParse(i);r.success?n=i:console.error(`Value from localStorage ${this.key} failed schema validation after migration! This is very bad!`,r.error.issues)}return window.localStorage.setItem(this.key,JSON.stringify(n)),n}set(e){try{const a=this.schema.parse(e);return window.localStorage.setItem(this.key,JSON.stringify(a)),!0}catch(a){return console.error(`Failed to set ${this.key} in localStorage`,e,a.issues),!1}}}const rx=new Bs({key:"config",schema:yL,fallback:Ba,migrate:(t,e)=>d$(t)?Lp(t):Ba});let iM;const u={...Ba};let Pg={};const Xz=ns(1e3,()=>{Object.keys(Pg).length>0&&(Ys(!0),z1(Pg).then(()=>{Ys(!1)})),Pg={}});function H(t,e=!1,a=!1){if(e)return;rx.set(u),a||(Pg[t]=u[t],Xz());const s=JSON.stringify(u);z("saveToLocalStorage",s)}function xu(t=!1){console.log("saving full config to localStorage"),rx.set(u),t||(Ys(!0),z1(u),Ys(!1));const e=JSON.stringify(u);z("saveToLocalStorage",e)}function rn(t,e){return!aa("numbers",t)||!Id("numbers",t,u.funbox)?!1:(u.mode==="quote"&&(t=!1),u.numbers=t,H("numbers",e),z("numbers",u.numbers),!0)}function Fn(t,e){return!aa("punctuation",t)||!Id("punctuation",t,u.funbox)?!1:(u.mode==="quote"&&(t=!1),u.punctuation=t,H("punctuation",e),z("punctuation",u.punctuation),!0)}function $a(t,e){if(!fe("mode",t,V4)||!Id("mode",t,u.funbox))return!1;const a=u.mode;return u.mode=t,u.mode==="custom"||u.mode==="quote"?(Fn(!1,!0),rn(!1,!0)):u.mode==="zen"&&u.paceCaret!=="off"&&y("Pace caret will not work with zen mode.",0),H("mode",e),z("mode",u.mode,e,a),!0}function rM(t,e){return fe("play sound on error",t,qA)?(u.playSoundOnError=t,H("playSoundOnError",e),z("playSoundOnError",u.playSoundOnError),!0):!1}function oM(t,e){return fe("play sound on click",t,WA)?(u.playSoundOnClick=t,H("playSoundOnClick",e),z("playSoundOnClick",u.playSoundOnClick),!0):!1}function dM(t,e){return(t<0||t>1)&&(y("Sound volume must be between 0 and 1",0),t=.5),fe("sound volume",t,FA)?(u.soundVolume=t,H("soundVolume",e),z("soundVolume",u.soundVolume),!0):!1}function si(t,e){return fe("difficulty",t,sL)?(u.difficulty=t,H("difficulty",e),z("difficulty",u.difficulty,e),!0):!1}function n_(t,e){return fe("favorite themes",t,nL)?(u.favThemes=t,H("favThemes",e),z("favThemes",u.favThemes),!0):!1}function zi(t,e){if(!fe("funbox",t,tx))return!1;for(const s of u.funbox.split("#"))if(!sA(s,u))return!1;const a=t||"none";return u.funbox=a,H("funbox",e),z("funbox",u.funbox),!0}function ox(t,e){if(!fe("funbox",t,tx))return!1;let a;const s=u.funbox.split("#");if(s[0]==="none"&&s.splice(0,1),s.includes(t))a=s.indexOf(t),s.splice(a,1),s.length===0?u.funbox="none":u.funbox=s.join("#"),a=-a-1;else{if(!sA(t,u))return!1;s.push(t),u.funbox=s.sort().join("#"),a=s.indexOf(t)}return H("funbox",e),z("funbox",u.funbox),a}function lM(t,e){return aa("blind mode",t)?(u.blindMode=t,H("blindMode",e),z("blindMode",u.blindMode,e),!0):!1}function ch(t,e){return t.length!==4&&(t=["on","on","on","on"]),fe("account chart",t,HA)?(t[0]==="off"&&t[1]==="off"&&(t[0]="on"),u.accountChart=t,H("accountChart",e),z("accountChart",u.accountChart),!0):!1}function dx(t,e){return fe("stop on error",t,PA)?(u.stopOnError=t,u.stopOnError!=="off"&&(u.confidenceMode="off",H("confidenceMode",e)),H("stopOnError",e),z("stopOnError",u.stopOnError,e),!0):!1}function uM(t,e){return aa("always show decimal places",t)?(u.alwaysShowDecimalPlaces=t,H("alwaysShowDecimalPlaces",e),z("alwaysShowDecimalPlaces",u.alwaysShowDecimalPlaces),!0):!1}function cM(t,e){return fe("typing speed unit",t,GA)?(u.typingSpeedUnit=t,H("typingSpeedUnit",e),z("typingSpeedUnit",u.typingSpeedUnit,e),!0):!1}function pM(t,e){return aa("show out of focus warning",t)?(u.showOutOfFocusWarning=t,u.showOutOfFocusWarning||ih(),H("showOutOfFocusWarning",e),z("showOutOfFocusWarning",u.showOutOfFocusWarning),!0):!1}function mM(t,e){return fe("pace caret",t,zA)?document.readyState==="complete"&&(t==="pb"||t==="tagPb")&&!Se()?(y('Pace caret "pb" and "tag pb" are unavailable without an account',0),!1):(u.paceCaret=t,H("paceCaret",e),z("paceCaret",u.paceCaret,e),!0):!1}function lx(t,e){return fe("pace caret custom speed",t,iL)?(u.paceCaretCustomSpeed=t,H("paceCaretCustomSpeed",e),z("paceCaretCustomSpeed",u.paceCaretCustomSpeed),!0):!1}function fM(t,e){return aa("repeated pace",t)?(u.repeatedPace=t,H("repeatedPace",e),z("repeatedPace",u.repeatedPace),!0):!1}function hM(t,e){return fe("min speed",t,UA)?(u.minWpm=t,H("minWpm",e),z("minWpm",u.minWpm,e),!0):!1}function ux(t,e){return fe("min speed custom",t,rL)?(u.minWpmCustomSpeed=t,H("minWpmCustomSpeed",e),z("minWpmCustomSpeed",u.minWpmCustomSpeed),!0):!1}function gM(t,e){return fe("min acc",t,YA)?(u.minAcc=t,H("minAcc",e),z("minAcc",u.minAcc,e),!0):!1}function cx(t,e){return t>100&&(t=100),fe("min acc custom",t,oL)?(u.minAccCustom=t,H("minAccCustom",e),z("minAccCustom",u.minAccCustom),!0):!1}function yM(t,e){return fe("min burst",t,tL)?(u.minBurst=t,H("minBurst",e),z("minBurst",u.minBurst,e),!0):!1}function px(t,e){return fe("min burst custom speed",t,dL)?(u.minBurstCustomSpeed=t,H("minBurstCustomSpeed",e),z("minBurstCustomSpeed",u.minBurstCustomSpeed),!0):!1}function vM(t,e){return aa("always show words history",t)?(u.alwaysShowWordsHistory=t,H("alwaysShowWordsHistory",e),z("alwaysShowWordsHistory",u.alwaysShowWordsHistory),!0):!1}function bM(t,e){return fe("single list command line",t,BA)?(u.singleListCommandLine=t,H("singleListCommandLine",e),z("singleListCommandLine",u.singleListCommandLine),!0):!1}function wM(t,e){return aa("caps lock warning",t)?(u.capsLockWarning=t,H("capsLockWarning",e),z("capsLockWarning",u.capsLockWarning),!0):!1}function $m(t,e){return aa("show all lines",t)?t&&u.tapeMode!=="off"?(y("Show all lines doesn't support tape mode",0),!1):(u.showAllLines=t,H("showAllLines",e),z("showAllLines",u.showAllLines,e),!0):!1}function _M(t,e){return aa("quick end",t)?(u.quickEnd=t,H("quickEnd",e),z("quickEnd",u.quickEnd),!0):!1}function kM(t,e){return fe("ads",t,QA)?(u.ads=t,H("ads",e),!e&&!mZ()&&(vr(3),y("Ad settings changed. Refreshing...",0)),z("ads",u.ads),!0):!1}function xM(t,e){return fe("repeat quotes",t,JA)?(u.repeatQuotes=t,H("repeatQuotes",e),z("repeatQuotes",u.repeatQuotes),!0):!1}function CM(t,e){return aa("flip test colors",t)?(u.flipTestColors=t,H("flipTestColors",e),z("flipTestColors",u.flipTestColors),!0):!1}function TM(t,e){return aa("colorful mode",t)?(u.colorfulMode=t,H("colorfulMode",e),z("colorfulMode",u.colorfulMode),!0):!1}function SM(t,e){return aa("strict space",t)?(u.strictSpace=t,H("strictSpace",e),z("strictSpace",u.strictSpace),!0):!1}function $M(t,e){return fe("opposite shift mode",t,XA)?(u.oppositeShiftMode=t,H("oppositeShiftMode",e),z("oppositeShiftMode",u.oppositeShiftMode),!0):!1}function AM(t,e){return fe("caret style",t,Zy)?(u.caretStyle=t,d("#caret").removeClass("off"),d("#caret").removeClass("default"),d("#caret").removeClass("underline"),d("#caret").removeClass("outline"),d("#caret").removeClass("block"),d("#caret").removeClass("carrot"),d("#caret").removeClass("banana"),t==="off"?d("#caret").addClass("off"):t==="default"?d("#caret").addClass("default"):t==="block"?d("#caret").addClass("block"):t==="outline"?d("#caret").addClass("outline"):t==="underline"?d("#caret").addClass("underline"):t==="carrot"?d("#caret").addClass("carrot"):t==="banana"&&d("#caret").addClass("banana"),H("caretStyle",e),z("caretStyle",u.caretStyle),!0):!1}function LM(t,e){return fe("pace caret style",t,Zy)?(u.paceCaretStyle=t,d("#paceCaret").removeClass("off"),d("#paceCaret").removeClass("default"),d("#paceCaret").removeClass("underline"),d("#paceCaret").removeClass("outline"),d("#paceCaret").removeClass("block"),d("#paceCaret").removeClass("carrot"),d("#paceCaret").removeClass("banana"),t==="default"?d("#paceCaret").addClass("default"):t==="block"?d("#paceCaret").addClass("block"):t==="outline"?d("#paceCaret").addClass("outline"):t==="underline"?d("#paceCaret").addClass("underline"):t==="carrot"?d("#paceCaret").addClass("carrot"):t==="banana"&&d("#paceCaret").addClass("banana"),H("paceCaretStyle",e),z("paceCaretStyle",u.paceCaretStyle),!0):!1}function MM(t,e){return fe("show average",t,aL)?(u.showAverage=t,H("showAverage",e),z("showAverage",u.showAverage,e),!0):!1}function Eo(t,e){return!fe("highlight mode",t,VA)||!Id("highlightMode",t,u.funbox)?!1:(u.highlightMode=t,H("highlightMode",e),z("highlightMode",u.highlightMode),!0)}function mx(t,e){return fe("tape mode",t,KA)?(t!=="off"&&u.showAllLines&&$m(!1,!0),u.tapeMode=t,H("tapeMode",e),z("tapeMode",u.tapeMode),!0):!1}function EM(t,e){return aa("hide extra letters",t)?(u.hideExtraLetters=t,H("hideExtraLetters",e),z("hideExtraLetters",u.hideExtraLetters),!0):!1}function OM(t,e){return fe("timer style",t,MA)?(u.timerStyle=t,H("timerStyle",e),z("timerStyle",u.timerStyle),!0):!1}function IM(t,e){return fe("live speed style",t,gl)?(u.liveSpeedStyle=t,H("liveSpeedStyle",e),z("liveSpeedStyle",u.timerStyle),!0):!1}function PM(t,e){return fe("live acc style",t,gl)?(u.liveAccStyle=t,H("liveAccStyle",e),z("liveAccStyle",u.timerStyle),!0):!1}function ZM(t,e){return fe("live burst style",t,gl)?(u.liveBurstStyle=t,H("liveBurstStyle",e),z("liveBurstStyle",u.timerStyle),!0):!1}function NM(t,e){return fe("timer color",t,OA)?(u.timerColor=t,H("timerColor",e),z("timerColor",u.timerColor),!0):!1}function RM(t,e){return fe("timer opacity",t,IA)?(u.timerOpacity=t,H("timerOpacity",e),z("timerOpacity",u.timerOpacity),!0):!1}function jM(t,e){return aa("key tips",t)?(u.showKeyTips=t,u.showKeyTips?d("footer .keyTips").removeClass("hidden"):d("footer .keyTips").addClass("hidden"),H("showKeyTips",e),z("showKeyTips",u.showKeyTips),!0):!1}function oi(t,e){return t=isNaN(t)||t<0?Ba.time:t,!fe("time",t,lL)||!Id("words",t,u.funbox)?!1:(u.time=t,H("time",e),z("time",u.time),!0)}function Vi(t,e,a){if(Array.isArray(t)){if(!fe("quote length",t,$A))return!1;t.length===1&&t[0]===-1&&(t=[1]),u.quoteLength=t}else{if(!fe("quote length",t,SA))return!1;Array.isArray(u.quoteLength)||(u.quoteLength=[]),(t===null||isNaN(t)||t<-3||t>3)&&(t=1),t=parseInt(t.toString()),t===-1?u.quoteLength=[0,1,2,3]:a&&t>=0?u.quoteLength.includes(t)?u.quoteLength.length>1&&(u.quoteLength=u.quoteLength.filter(s=>s!==t)):u.quoteLength.push(t):u.quoteLength=[t]}return H("quoteLength",e),z("quoteLength",u.quoteLength),!0}function ho(t,e){return t=t<0||t>1e5?Ba.words:t,!fe("words",t,uL)||!Id("words",t,u.funbox)?!1:(u.words=t,H("words",e),z("words",u.words),!0)}function DM(t,e){return fe("smooth caret",t,CA)?(u.smoothCaret=t,t==="off"?d("#caret").css("animation-name","caretFlashHard"):d("#caret").css("animation-name","caretFlashSmooth"),H("smoothCaret",e),z("smoothCaret",u.smoothCaret),!0):!1}function BM(t,e){return aa("start graphs at zero",t)?(u.startGraphsAtZero=t,H("startGraphsAtZero",e),z("startGraphsAtZero",u.startGraphsAtZero),!0):!1}function qM(t,e){return aa("smooth line scroll",t)?(u.smoothLineScroll=t,H("smoothLineScroll",e),z("smoothLineScroll",u.smoothLineScroll),!0):!1}function WM(t,e){return fe("quick restart mode",t,TA)?(u.quickRestart=t,H("quickRestart",e),z("quickRestart",u.quickRestart),!0):!1}function FM(t,e){return fe("font family",t,cL)?(t===""&&(t="roboto_mono",y("Empty input received, reverted to the default font.",0,{customTitle:"Custom font"})),!t||!/^[0-9a-zA-Z_.\-#+()]+$/.test(t)?(y(`Invalid font name value: "${t}".`,-1,{customTitle:"Custom font",duration:3}),!1):(u.fontFamily=t,document.documentElement.style.setProperty("--font",`"${t.replace(/_/g," ")}", "Roboto Mono", "Vazirmatn", monospace`),H("fontFamily",e),z("fontFamily",u.fontFamily),!0)):!1}function zM(t,e){return aa("freedom mode",t)?(t==null&&(t=!1),u.freedomMode=t,u.freedomMode&&u.confidenceMode!=="off"&&(u.confidenceMode="off"),H("freedomMode",e),z("freedomMode",u.freedomMode),!0):!1}function HM(t,e){return fe("confidence mode",t,AA)?(u.confidenceMode=t,u.confidenceMode!=="off"&&(u.freedomMode=!1,u.stopOnError="off",H("freedomMode",e),H("stopOnError",e)),H("confidenceMode",e),z("confidenceMode",u.confidenceMode,e),!0):!1}function UM(t,e){return fe("indicate typos",t,LA)?(u.indicateTypos=t,H("indicateTypos",e),z("indicateTypos",u.indicateTypos),!0):!1}function VM(t,e){return aa("auto switch theme",t)?(t=t??Ba.autoSwitchTheme,u.autoSwitchTheme=t,H("autoSwitchTheme",e),z("autoSwitchTheme",u.autoSwitchTheme),!0):!1}function Ki(t,e){return aa("custom theme",t)?(u.customTheme=t,H("customTheme",e),z("customTheme",u.customTheme),!0):!1}function KM(t,e){return fe("theme",t,Qo)?(u.theme=t,u.customTheme&&Ki(!1),H("theme",e),z("theme",u.theme),!0):!1}function GM(t,e){return fe("theme light",t,Qo)?(u.themeLight=t,H("themeLight",e),z("themeLight",u.themeLight,e),!0):!1}function QM(t,e){return fe("theme dark",t,Qo)?(u.themeDark=t,H("themeDark",e),z("themeDark",u.themeDark,e),!0):!1}function e3(t,e,a,s,n){return fe("themes",t,Qo)?(a.length===9&&(e&&y("Missing sub alt color. Please edit it in the custom theme settings and save your changes.",0,{duration:7}),a.splice(4,0,"#000000")),u.customThemeColors=a,u.theme=t,u.customTheme=e,u.autoSwitchTheme=s,H("theme",n),z("setThemes",e),!0):!1}function YM(t,e){var a,s;if(!fe("random theme",t,EA))return!1;if(t==="custom"){if(!Se())return u.randomTheme=t,!1;if(!A())return!0;if(((s=(a=A())==null?void 0:a.customThemes)==null?void 0:s.length)===0)return y("You need to create a custom theme first",0),u.randomTheme="off",!1}return u.randomTheme=t,H("randomTheme",e),z("randomTheme",u.randomTheme),!0}function JM(t,e){return aa("british english",t)?(t||(t=!1),u.britishEnglish=t,H("britishEnglish",e),z("britishEnglish",u.britishEnglish),!0):!1}function Am(t,e){return aa("lazy mode",t)?(t||(t=!1),u.lazyMode=t,H("lazyMode",e),z("lazyMode",u.lazyMode,e),!0):!1}function Lm(t,e){return t.length===9&&(y("Missing sub alt color. Please edit it in the custom theme settings and save your changes.",0,{duration:7}),t.splice(4,0,"#000000")),fe("custom theme colors",t,ex)?(t!==void 0&&(u.customThemeColors=t),H("customThemeColors",e),z("customThemeColors",u.customThemeColors,e),!0):!1}function Kl(t,e){return fe("language",t,Qz)?(u.language=t,nr("changedLanguage",{language:t}),H("language",e),z("language",u.language),!0):!1}function t3(t,e){return aa("monkey",t)?(u.monkey=t,H("monkey",e),z("monkey",u.monkey),!0):!1}function En(t,e){return fe("keymap mode",t,ZA)?(d(".activeKey").removeClass("activeKey"),d(".keymapKey").attr("style",""),u.keymapMode=t,H("keymapMode",e),z("keymapMode",u.keymapMode,e),!0):!1}function XM(t,e){return fe("keymap legend style",t,RA)?(["lowercase","uppercase","blank","dynamic"].forEach(s=>{d(".keymapLegendStyle").removeClass(s)}),t=t||"lowercase",d(".keymapKey > .letter").css("display",""),d(".keymapKey > .letter").css("text-transform",""),t==="uppercase"&&d(".keymapKey > .letter").css("text-transform","capitalize"),t==="blank"&&d(".keymapKey > .letter").css("display","none"),d(".keymapLegendStyle").addClass(t),u.keymapLegendStyle=t,H("keymapLegendStyle",e),z("keymapLegendStyle",u.keymapLegendStyle),!0):!1}function eE(t,e){return fe("keymap style",t,NA)?(t=t||"staggered",u.keymapStyle=t,H("keymapStyle",e),z("keymapStyle",u.keymapStyle),!0):!1}function Xo(t,e){return fe("keymap layout",t,pL)?(u.keymapLayout=t,H("keymapLayout",e),z("keymapLayout",u.keymapLayout),!0):!1}function tE(t,e){return fe("keymapShowTopRow",t,jA)?(u.keymapShowTopRow=t,H("keymapShowTopRow",e),z("keymapShowTopRow",u.keymapShowTopRow),!0):!1}function ph(t,e){return t<.5&&(t=.5),t>3.5&&(t=3.5),t=vg(t),fe("keymap size",t,DA)?(u.keymapSize=t,d("#keymap").css("zoom",t),H("keymapSize",e),z("keymapSize",u.keymapSize,e),d(window).trigger("resize"),!0):!1}function ed(t,e){return fe("layout",t,mL)?(u.layout=t,H("layout",e),z("layout",u.layout,e),!0):!1}function bb(t,e){return t<0&&(t=1),typeof t=="string"&&["1","125","15","2","3","4"].includes(t)&&(t==="125"?t=1.25:t==="15"?t=1.5:t=parseInt(t)),fe("font size",t,fL)?(t===15&&(t=1.5),u.fontSize=t,d("#caret, #paceCaret, #liveStatsMini, #typingTest, #wordsInput").css("fontSize",t+"rem"),H("fontSize",e),z("fontSize",u.fontSize,e),e||d(window).trigger("resize"),!0):!1}function mh(t,e){return t<20&&t!==0&&(t=20),t>1e3&&(t=1e3),fe("max line width",t,hL)?(u.maxLineWidth=t,H("maxLineWidth",e),z("maxLineWidth",u.maxLineWidth,e),d(window).trigger("resize"),!0):!1}function fh(t,e){return t=t.trim(),fe("custom background",t,gL)?(u.customBackground=t,H("customBackground",e),z("customBackground",u.customBackground),!0):!1}async function fx(t,e){const a=t.trim();if(!await _F("layoutfluid",a,["layoutfluid"]))return!1;const s=a.replace(/ /g,"#");return u.customLayoutfluid=s,H("customLayoutfluid",e),z("customLayoutFluid",u.customLayoutfluid),!0}function hx(t,e){return fe("custom background size",t,Jk)?(u.customBackgroundSize=t,H("customBackgroundSize",e),z("customBackgroundSize",u.customBackgroundSize),!0):!1}function gx(t,e){return t.length===5&&(t=[t[0],t[1],t[2],t[3]]),fe("custom background filter",t,Xk)?(u.customBackgroundFilter=t,H("customBackgroundFilter",e),z("customBackgroundFilter",u.customBackgroundFilter),!0):!1}function a3(t,e){return fe("monkey power level",t,eL)?(u.monkeyPowerLevel=t,H("monkeyPowerLevel",e),z("monkeyPowerLevel",u.monkeyPowerLevel),!0):!1}function aE(t,e){return aa("burst heatmap",t)?(t||(t=!1),u.burstHeatmap=t,H("burstHeatmap",e),z("burstHeatmap",u.burstHeatmap),!0):!1}async function Gl(t){if(t===void 0)return;z("fullConfigChange");const e=t;Object.keys(Ba).forEach(a=>{if(e[a]===void 0){const s=Ba[a];e[a]=s}}),e!=null&&(kM(e.ads,!0),GM(e.themeLight,!0),QM(e.themeDark,!0),e3(e.theme,e.customTheme,e.customThemeColors,e.autoSwitchTheme,!0),await fx(e.customLayoutfluid,!0),fh(e.customBackground,!0),hx(e.customBackgroundSize,!0),gx(e.customBackgroundFilter,!0),WM(e.quickRestart,!0),jM(e.showKeyTips,!0),oi(e.time,!0),Vi(e.quoteLength,!0),ho(e.words,!0),Kl(e.language,!0),ed(e.layout,!0),bb(e.fontSize,!0),mh(e.maxLineWidth,!0),zM(e.freedomMode,!0),AM(e.caretStyle,!0),LM(e.paceCaretStyle,!0),si(e.difficulty,!0),lM(e.blindMode,!0),_M(e.quickEnd,!0),CM(e.flipTestColors,!0),TM(e.colorfulMode,!0),HM(e.confidenceMode,!0),UM(e.indicateTypos,!0),OM(e.timerStyle,!0),IM(e.liveSpeedStyle,!0),PM(e.liveAccStyle,!0),ZM(e.liveBurstStyle,!0),NM(e.timerColor,!0),RM(e.timerOpacity,!0),En(e.keymapMode,!0),eE(e.keymapStyle,!0),XM(e.keymapLegendStyle,!0),Xo(e.keymapLayout,!0),tE(e.keymapShowTopRow,!0),ph(e.keymapSize,!0),FM(e.fontFamily,!0),DM(e.smoothCaret,!0),qM(e.smoothLineScroll,!0),uM(e.alwaysShowDecimalPlaces,!0),vM(e.alwaysShowWordsHistory,!0),bM(e.singleListCommandLine,!0),wM(e.capsLockWarning,!0),rM(e.playSoundOnError,!0),oM(e.playSoundOnClick,!0),dM(e.soundVolume,!0),dx(e.stopOnError,!0),n_(e.favThemes,!0),zi(e.funbox,!0),YM(e.randomTheme,!0),$m(e.showAllLines,!0),pM(e.showOutOfFocusWarning,!0),mM(e.paceCaret,!0),lx(e.paceCaretCustomSpeed,!0),fM(e.repeatedPace,!0),ch(e.accountChart,!0),yM(e.minBurst,!0),px(e.minBurstCustomSpeed,!0),hM(e.minWpm,!0),ux(e.minWpmCustomSpeed,!0),gM(e.minAcc,!0),cx(e.minAccCustom,!0),Eo(e.highlightMode,!0),cM(e.typingSpeedUnit,!0),EM(e.hideExtraLetters,!0),BM(e.startGraphsAtZero,!0),SM(e.strictSpace,!0),$M(e.oppositeShiftMode,!0),$a(e.mode,!0),rn(e.numbers,!0),Fn(e.punctuation,!0),t3(e.monkey,!0),xM(e.repeatQuotes,!0),a3(e.monkeyPowerLevel,!0),aE(e.burstHeatmap,!0),JM(e.britishEnglish,!0),Am(e.lazyMode,!0),MM(e.showAverage,!0),mx(e.tapeMode,!0),z("configApplied",void 0,void 0,void 0,u)),z("fullConfigChangeFinished")}async function yx(){await Gl(Ba),await gF(),xu(!0)}async function s3(){console.log("loading localStorage config");const t=rx.get();t===void 0?await yx():(await Gl(t),xu(!0)),iM()}function i_(){const t={};return tr(u).filter(e=>u[e]!==Ba[e]).forEach(e=>{t[e]=u[e]}),t}const sE=new Promise(t=>{iM=t});class n3{constructor(){this.list=[],this.sectionIndexList=[],this.length=0,this.currentIndex=0}get(e,a=!1){var s,n;return e===void 0?this.list:a?(n=(s=this.list[e])==null?void 0:s.replace(/[.?!":\-,]/g,""))==null?void 0:n.toLowerCase():this.list[e]}getCurrent(){return this.list[this.currentIndex]??""}getLast(){return this.list[this.list.length-1]}push(e,a){this.list.push(e),this.sectionIndexList.push(a),this.length=this.list.length}reset(){this.list=[],this.sectionIndexList=[],this.currentIndex=0,this.length=this.list.length}resetCurrentIndex(){this.currentIndex=0}decreaseCurrentIndex(){this.currentIndex--}increaseCurrentIndex(){this.currentIndex++}clean(){for(const e of this.list)if(/ +/.test(e)){const a=this.list.indexOf(e),s=e.split(" ");this.list.splice(a,1);for(let n=0;n<s.length;n++)this.list.splice(a+n,0,s[n])}}}const Z=new n3;let Mm=!1,ev=!1,vx=!1,_t=null;function r_(t){_t=t}function i3(t){Mm=t}function r3(t){ev=t}function o3(t){vx=t}$s("commandLine");async function Cu(){try{Ct();const t=await $k(()=>import("./commandline.BFniHDVA.js"),__vite__mapDeps([0,1,2,3,4]));return Qe(),t}catch(t){if(Qe(),t instanceof Error&&t.message.includes("Failed to fetch dynamically imported module"))y("Failed to load commandline module: could not fetch",-1);else{const e=Ge(t,"Failed to load commandline module");y(e,-1)}throw t}}$s("devOptionsModal");document.addEventListener("keydown",async t=>{Gc()||t.key!==void 0&&(t.key==="Escape"&&u.quickRestart!=="esc"||t.key==="Tab"&&u.quickRestart==="esc"&&!Mm&&!t.shiftKey||t.key==="Tab"&&u.quickRestart==="esc"&&Mm&&t.shiftKey||t.key.toLowerCase()==="p"&&(t.metaKey||t.ctrlKey)&&t.shiftKey)&&(t.preventDefault(),ob()||(await Cu()).show())});window.onerror=function(t,e,a,s,n){nr("error",{error:(n==null?void 0:n.stack)??""})};window.onunhandledrejection=function(t){nr("error",{error:t.reason.stack??""})};const Gh=125,Qh=.75;class Pt{constructor(e){var n,i;this.open=!1,this.setupRan=!1,e.dialogId.startsWith("#")&&(e.dialogId=e.dialogId.slice(1)),this.skeletonAppendParent=e.appendTo??"popups",jW(e.dialogId)&&js(e.dialogId,this.skeletonAppendParent);const a=document.getElementById(e.dialogId),s=document.querySelector(`#${e.dialogId} > .modal`);if(a===null)throw new Error(`Dialog element with id ${e.dialogId} not found`);if(!(a instanceof HTMLDialogElement))throw new Error("Animated dialog must be an HTMLDialogElement");if(a===null)throw new Error(`Dialog element with id ${e.dialogId} not found`);if(s===null)throw new Error(`Div element inside #${e.dialogId} with class 'modal' not found`);this.dialogId=e.dialogId,this.wrapperEl=a,this.modalEl=s,this.customShowAnimations=(n=e.customAnimations)==null?void 0:n.show,this.customHideAnimations=(i=e.customAnimations)==null?void 0:i.hide,this.previousModalInChain=void 0,this.showOptionsWhenInChain=e.showOptionsWhenInChain,this.customEscapeHandler=e==null?void 0:e.customEscapeHandler,this.customWrapperClickHandler=e==null?void 0:e.customWrapperClickHandler,this.setup=e==null?void 0:e.setup,$s(this.dialogId)}getPreviousModalInChain(){return this.previousModalInChain}async runSetup(){this.wrapperEl.addEventListener("keydown",e=>{e.key==="Escape"&&Ka(this.dialogId)&&(e.preventDefault(),e.stopPropagation(),this.customEscapeHandler!==void 0?this.customEscapeHandler(e):this.hide())}),this.wrapperEl.addEventListener("mousedown",e=>{e.target===this.wrapperEl&&(this.customWrapperClickHandler!==void 0?this.customWrapperClickHandler(e):this.hide())}),this.setup!==void 0&&await this.setup(this.modalEl)}getDialogId(){return this.dialogId}getWrapper(){return this.wrapperEl}getModal(){return this.modalEl}isOpen(){return this.open}focusFirstInput(e){const s=[...this.modalEl.querySelectorAll("input")].filter(n=>!n.classList.contains("hidden"))[0];s!=null?e===!0?s.focus():e==="focusAndSelect"?(s.focus(),s.select()):this.wrapperEl.focus():this.wrapperEl.focus()}async show(e){return new Promise(async a=>{var l,c,m,f,h,v,w,_,S,M,I,me,P;if(this.open){a();return}if(js(this.dialogId,this.skeletonAppendParent),this.setupRan||(await this.runSetup(),this.setupRan=!0),Ka(this.dialogId)){a();return}const s=Jt((((c=(l=e==null?void 0:e.customAnimation)==null?void 0:l.modal)==null?void 0:c.durationMs)??(e==null?void 0:e.animationDurationMs)??((f=(m=this.customShowAnimations)==null?void 0:m.modal)==null?void 0:f.durationMs)??Gh)*((e==null?void 0:e.modalChain)!==void 0?Qh:1));(e==null?void 0:e.modalChain)!==void 0&&(this.previousModalInChain=e.modalChain,await this.previousModalInChain.hide({animationMode:"modalOnly",animationDurationMs:s,dontShowPreviousModalInchain:e.modalChain.previousModalInChain!==void 0})),this.open=!0,(e==null?void 0:e.mode)==="dialog"?this.wrapperEl.show():((e==null?void 0:e.mode)==="modal"||(e==null?void 0:e.mode)===void 0)&&this.wrapperEl.showModal(),await((h=e==null?void 0:e.beforeAnimation)==null?void 0:h.call(e,this.modalEl,e==null?void 0:e.modalChainData)),setTimeout(async()=>{this.focusFirstInput(e==null?void 0:e.focusFirstInput)},1);const n=((v=e==null?void 0:e.customAnimation)==null?void 0:v.modal)??((w=this.customShowAnimations)==null?void 0:w.modal),i=((_=e==null?void 0:e.customAnimation)==null?void 0:_.wrapper)??((S=this.customShowAnimations)==null?void 0:S.wrapper)??{from:{opacity:"0"},to:{opacity:"1"},easing:"swing"},r=Jt(((I=(M=e==null?void 0:e.customAnimation)==null?void 0:M.wrapper)==null?void 0:I.durationMs)??((P=(me=this.customShowAnimations)==null?void 0:me.wrapper)==null?void 0:P.durationMs)??Gh),o=this.previousModalInChain!==void 0?"modalOnly":(e==null?void 0:e.animationMode)??"both";d(this.modalEl).stop(!0,!1),d(this.wrapperEl).stop(!0,!1),o==="both"||o==="none"?(n!=null&&n.from?(d(this.modalEl).css(n.from),d(this.modalEl).animate(n.to,o==="none"?0:s,n.easing??"swing")):d(this.modalEl).css("opacity","1"),d(this.wrapperEl).css(i.from),d(this.wrapperEl).removeClass("hidden").css("opacity","0").animate(i.to??{opacity:1},o==="none"?0:r,i.easing??"swing",async()=>{var $;this.focusFirstInput(e==null?void 0:e.focusFirstInput),await(($=e==null?void 0:e.afterAnimation)==null?void 0:$.call(e,this.modalEl,e==null?void 0:e.modalChainData)),a()})):o==="modalOnly"&&(d(this.wrapperEl).removeClass("hidden").css("opacity","1"),n!=null&&n.from?d(this.modalEl).css(n.from):d(this.modalEl).css("opacity","0"),d(this.modalEl).animate((n==null?void 0:n.to)??{opacity:1},s,(n==null?void 0:n.easing)??"swing",async()=>{var $;this.focusFirstInput(e==null?void 0:e.focusFirstInput),await(($=e==null?void 0:e.afterAnimation)==null?void 0:$.call(e,this.modalEl,e==null?void 0:e.modalChainData)),a()}))})}async hide(e){return new Promise(async a=>{var l,c,m,f,h,v,w,_,S,M,I,me,P;if(!Ka(this.dialogId)){a();return}e!=null&&e.clearModalChain&&(this.previousModalInChain=void 0),await((l=e==null?void 0:e.beforeAnimation)==null?void 0:l.call(e,this.modalEl));const s=((c=e==null?void 0:e.customAnimation)==null?void 0:c.modal)??((m=this.customHideAnimations)==null?void 0:m.modal),n=Jt((((h=(f=e==null?void 0:e.customAnimation)==null?void 0:f.modal)==null?void 0:h.durationMs)??(e==null?void 0:e.animationDurationMs)??((w=(v=this.customHideAnimations)==null?void 0:v.modal)==null?void 0:w.durationMs)??Gh)*(this.previousModalInChain!==void 0?Qh:1)),i=((_=e==null?void 0:e.customAnimation)==null?void 0:_.wrapper)??((S=this.customHideAnimations)==null?void 0:S.wrapper)??{from:{opacity:"1"},to:{opacity:"0"},easing:"swing"},r=Jt(((I=(M=e==null?void 0:e.customAnimation)==null?void 0:M.wrapper)==null?void 0:I.durationMs)??((P=(me=this.customHideAnimations)==null?void 0:me.wrapper)==null?void 0:P.durationMs)??Gh),o=this.previousModalInChain!==void 0?"modalOnly":(e==null?void 0:e.animationMode)??"both";d(this.modalEl).stop(!0,!1),d(this.wrapperEl).stop(!0,!1),o==="both"||o==="none"?(s!=null&&s.from?(d(this.modalEl).css(s.from),d(this.modalEl).animate(s.to,o==="none"?0:n,s.easing??"swing")):d(this.modalEl).css("opacity","1"),d(this.wrapperEl).css(i.from),d(this.wrapperEl).css("opacity","1").animate((i==null?void 0:i.to)??{opacity:0},o==="none"?0:r,(i==null?void 0:i.easing)??"swing",async()=>{var $;this.wrapperEl.close(),this.wrapperEl.classList.add("hidden"),Ga(this.dialogId),this.open=!1,await(($=e==null?void 0:e.afterAnimation)==null?void 0:$.call(e,this.modalEl)),this.previousModalInChain!==void 0&&!(e!=null&&e.dontShowPreviousModalInchain)&&(await this.previousModalInChain.show({animationMode:"modalOnly",modalChainData:e==null?void 0:e.modalChainData,animationDurationMs:n*Qh,...this.previousModalInChain.showOptionsWhenInChain}),this.previousModalInChain=void 0),a()})):o==="modalOnly"&&(d(this.wrapperEl).removeClass("hidden").css("opacity","1"),s!=null&&s.from?d(this.modalEl).css(s.from):d(this.modalEl).css("opacity","1"),d(this.modalEl).animate((s==null?void 0:s.to)??{opacity:0},n,(s==null?void 0:s.easing)??"swing",async()=>{var $;this.wrapperEl.close(),d(this.wrapperEl).addClass("hidden").css("opacity","0"),Ga(this.dialogId),this.open=!1,await(($=e==null?void 0:e.afterAnimation)==null?void 0:$.call(e,this.modalEl)),this.previousModalInChain!==void 0&&!(e!=null&&e.dontShowPreviousModalInchain)&&(await this.previousModalInChain.show({animationMode:"modalOnly",modalChainData:e==null?void 0:e.modalChainData,animationDurationMs:n*Qh,...this.previousModalInChain.showOptionsWhenInChain}),this.previousModalInChain=void 0),a()}))})}destroy(){this.wrapperEl.close(),this.wrapperEl.classList.add("hidden"),Ga(this.dialogId),this.open=!1}}function nE(){iE.show()}const iE=new Pt({dialogId:"supportModal",setup:async t=>{var e;(e=t.querySelector("button.ads"))==null||e.addEventListener("click",async()=>{(await Cu()).show({subgroupOverride:"enableAds"},{modalChain:iE})})}});function rE(){d3.show()}const d3=new Pt({dialogId:"contactModal"});function l3(){u3.show({beforeAnimation:async()=>{d("#versionHistoryModal .modal").html(`
    <div class="preloader">
      <i class="fas fa-fw fa-spin fa-circle-notch"></i>
    </div
  `),nF().then(t=>{d("#versionHistoryModal .modal").html('<div class="releases"></div'),t.forEach(e=>{if(!e.draft&&!e.prerelease){let a=e.body;a=a.replace(/\r\n/g,"<br>"),a=a.replace(/### (.*?)<br>/g,"<h3>$1</h3>"),a=a.replace(/<\/h3><br>/gi,"</h3>"),a=a.replace(/^- /gm,""),a=a.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>"),a=a.replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" target="_blank">$1</a>'),d("#versionHistoryModal .modal .releases").append(`
        <div class="release">
          <div class="title">${e.name}</div>
          <div class="date">${zt(new Date(e.published_at),"dd MMM yyyy")}</div>
          <div class="body">${a}</div>
        </div>
      `)}})}).catch(t=>{const e=Ge(t,"Failed to fetch version history");d("#versionHistoryModal .modal").html(`<div class="releases">Failed to fetch version history:<br>${e}</div`)}),d("#newVersionIndicator").addClass("hidden")}})}const u3=new Pt({dialogId:"versionHistoryModal"});var US;(US=document.querySelector("footer #commandLineMobileButton"))==null||US.addEventListener("click",async()=>{(await Cu()).show({singleListOverride:!1})});var VS;(VS=document.querySelector("footer #newVersionIndicator"))==null||VS.addEventListener("click",t=>{var e;t.stopPropagation(),(e=document.querySelector("#newVersionIndicator"))==null||e.classList.add("hidden")});var KS;(KS=document.querySelector("footer .currentVersion"))==null||KS.addEventListener("click",t=>{t.shiftKey?alert(Yf.clientVersion):l3()});var GS;(GS=document.querySelector("footer .right .current-theme"))==null||GS.addEventListener("click",async t=>{var a,s;if(t.shiftKey){if(u.customTheme){Ki(!1);return}if(Se()&&(((s=(a=A())==null?void 0:a.customThemes)==null?void 0:s.length)??0)<1){y("No custom themes!",0),Ki(!1);return}Ki(!0)}else{const n=u.customTheme?"customThemesList":"themes";(await Cu()).show({subgroupOverride:n})}});var QS;(QS=document.querySelector("footer #supportMeButton"))==null||QS.addEventListener("click",()=>{nE()});var YS;(YS=document.querySelector("footer #contactPopupButton"))==null||YS.addEventListener("click",()=>{rE()});d("#keymap").on("click",".r5 .keySpace",async()=>{(await Cu()).show({subgroupOverride:"keymapLayouts"})});let bx=!1;function jt(){bx=!0}function Em(){bx=!1}function c3(){return bx}const oE=["NumpadMultiply","NumpadSubtract","NumpadAdd","NumpadDecimal","NumpadEqual","NumpadDivide","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space","Enter","Tab","NoCode"];class p3{constructor(){this.current="",this.history=[],this.historyLength=0,this.length=0,this.koreanStatus=!1}reset(){this.current="",this.history=[],this.length=0}resetHistory(){this.history=[],this.length=0}setCurrent(e){this.current=e,this.length=this.current.length}setKoreanStatus(e){this.koreanStatus=e}appendCurrent(e){this.current+=e,this.length=this.current.length}resetCurrent(){this.current=""}getCurrent(){return this.current}getKoreanStatus(){return this.koreanStatus}pushHistory(){this.history.push(this.current),this.historyLength=this.history.length,this.resetCurrent()}popHistory(){const e=this.history.pop()??"";return this.historyLength=this.history.length,e}getHistory(e){return e===void 0?this.history:this.history[e]}getHistoryLast(){return to(this.history)}}class m3{constructor(){this.current="",this.history=[]}setCurrent(e){this.current=e}appendCurrent(e){this.current+=e}resetCurrent(){this.current=""}resetHistory(){this.history=[]}reset(){this.resetCurrent(),this.resetHistory()}getHistory(e){return this.history[e]}popHistory(){return this.history.pop()??""}pushHistory(){this.history.push(this.current),this.current=""}}let Gi={};const E=new p3,wa=new m3;let bd=[],tv=0,wb=0,Qi={},Qs={correct:0,incorrect:0},Ft={spacing:{first:-1,last:-1,array:[]},duration:{array:[]}},Bi={total:0,lastStartTime:-1},Yi=[],_b=[],On=[],hh=[],Om={count:0,words:[]},gh=[],av=!0;function o_(){tv++}function dE(){av=!1}function lE(){Om.count++}function d_(t){Om.words.push(t)}function f3(t){wb=t}function kb(){bd.push(tv),tv=0}function xb(){gh.push(av),av=!0}function Cb(){hh.push(Om),Om={count:0,words:[]}}function uE(t){t?Qs.correct++:Qs.incorrect++}function h3(t){var i,r;const e=Be(bg(Ft.duration.array)),a=Object.entries(Gi);a.sort((o,l)=>o[1].timestamp-l[1].timestamp);for(const o of a)cE(t,o[0]);const s=(i=to(a))==null?void 0:i[0],n=(r=Gi[s])==null?void 0:r.index;s!==void 0&&n!==void 0&&(Ft.duration.array[n]=e)}let Im=0;function cE(t,e){if(!oE.includes(e))return;e==="NoCode"&&(Im--,e="NoCode"+Im);const a=Gi[e];if(a===void 0)return;const s=Math.abs(a.timestamp-t);Ft.duration.array[a.index]=s,console.debug("Keyup recorded",e,s),delete Gi[e],pE(t)}function g3(t,e){var a;if(!oE.includes(e)){console.debug("Key not tracked",e);return}if(e==="NoCode"&&(e="NoCode"+Im,Im++),Gi[e]!==void 0){console.debug("Key already down",e);return}if(Gi[e]={timestamp:t,index:Ft.duration.array.length},Ft.duration.array.push(0),pE((a=Gi[e])==null?void 0:a.timestamp),Ft.spacing.last!==-1){const s=Math.abs(t-Ft.spacing.last);Ft.spacing.array.push(Be(s)),console.debug("Keydown recorded",e,s)}Ft.spacing.last=t,Ft.spacing.first===-1&&(Ft.spacing.first=t,console.debug("First keydown recorded",e,t))}function pE(t){Object.keys(Gi).length>1?Bi.lastStartTime===-1&&(Bi.lastStartTime=t):Bi.lastStartTime!==-1&&(Bi.total+=t-Bi.lastStartTime,Bi.lastStartTime=-1)}function y3(){Ft={spacing:{first:-1,last:-1,array:[]},duration:{array:[]}},Bi={total:0,lastStartTime:-1},Gi={},Im=0,console.debug("Keypress timings reset")}function mE(t){Object.keys(Qi).includes(t)?Qi[t]++:Qi[t]=1}function fE(t){Yi.push(t)}function hE(t){_b.push(t)}function gE(t){On[Z.currentIndex]===void 0?On.push(t):On[Z.currentIndex]=t}function v3(){Yi=[],_b=[],On=[],bd=[],tv=0,gh=[],av=!0,hh=[],Om={count:0,words:[]},wb=0,Qi={},Qs={correct:0,incorrect:0},Ft={spacing:{first:-1,last:-1,array:[]},duration:{array:[]}}}const b3=qt.record(qt.string(),qt.string()),w3=qt.record(qt.string(),qt.object({text:qt.string(),progress:qt.number()})),yE=new Bs({key:"customText",schema:b3,fallback:{}}),vE=new Bs({key:"customTextLong",schema:w3,fallback:{}}),_3=qt.object({text:qt.array(qt.string()),mode:Yz,limit:qt.object({value:qt.number(),mode:Jz}),pipeDelimiter:qt.boolean()}),k3={text:["The","quick","brown","fox","jumps","over","the","lazy","dog"],mode:"repeat",limit:{value:9,mode:"word"},pipeDelimiter:!1},qa=new Bs({key:"customTextSettings",schema:_3,fallback:k3,migrate:(t,e,a)=>{if(typeof t!="object"||t===null)return a;const s=a;return"text"in t&&qt.array(qt.string()).safeParse(s.text).success&&(s.text=t.text),s}});function yh(){return qa.get().text}function lr(t){const e=qa.get();qa.set({...e,text:t,limit:{value:t.length,mode:e.limit.mode}})}function Rc(){return qa.get().mode}function Pm(t){const e=qa.get();qa.set({...e,mode:t,limit:{value:e.text.length,mode:e.limit.mode}})}function x3(){return qa.get().limit}function Yt(){return qa.get().limit.value}function ua(){return qa.get().limit.mode}function td(t){const e=qa.get();qa.set({...e,limit:{value:t,mode:e.limit.mode}})}function Jr(t){const e=qa.get();qa.set({...e,limit:{value:e.limit.value,mode:t}})}function Tu(){return qa.get().pipeDelimiter}function Ql(t){const e=qa.get();qa.set({...e,pipeDelimiter:t})}function Pd(){return{text:yh(),mode:Rc(),limit:x3(),pipeDelimiter:Tu()}}function sv(t,e=!1){if(e){const s=Su()[t];if(s===void 0)throw new Error(`Custom text ${t} not found`);return s.text.split(/ +/)}else{const a=Tb()[t];if(a===void 0)throw new Error(`Custom text ${t} not found`);return a.split(/ +/)}}function C3(t,e,a=!1){if(a){const s=Su();s[t]={text:"",progress:0};const n=s[t];if(n===void 0)throw new Error("Custom text not found");typeof e=="string"?n.text=e:n.text=e.join(" "),_x(s)}else{const s=Tb();typeof e=="string"?s[t]=e:s[t]=e.join(" "),wE(s)}}function bE(t,e){const a=e?Su():Tb();delete a[t],e?_x(a):wE(a)}function wx(t){const e=Su()[t];if(e===void 0)throw new Error("Custom text not found");return e.progress??0}function l_(t,e){const a=Su(),s=a[t];if(s===void 0)throw new Error("Custom text not found");s.progress=e,_x(a)}function Tb(){return yE.get()}function Su(){return vE.get()}function wE(t){yE.set(t)}function _x(t){vE.set(t)}function u_(t=!1){return Object.keys(t?Su():Tb())}let nv=!0;const Ji=document.querySelector("#caret");function _E(){nv&&(Ji.style.animationName="none",Ji.style.opacity="1",nv=!1)}function kE(){nv||(u.smoothCaret!=="off"&&!ya()?Ji.style.animationName="caretFlashSmooth":Ji.style.animationName="caretFlashHard",nv=!0)}function vh(){Ji.classList.add("hidden")}function T3(t){var a,s;if(t||(t=(s=(a=document.getElementById("words"))==null?void 0:a.querySelectorAll(".word"))==null?void 0:s[0]),!t)return 0;const e=window.getComputedStyle(t);return parseInt(e.marginRight)+parseInt(e.marginLeft)}function S3(t,e,a,s,n,i,r,o){const l=u.blindMode||u.hideExtraLetters;let c=0;if(u.tapeMode==="off"){let m=0;const f=n[o],h=n[r-1],v=n[o-1];e?o<r&&f?m=(f==null?void 0:f.offsetLeft)+(t?0:i):l?m=((h==null?void 0:h.offsetLeft)??0)-(t?i:0):m=((v==null?void 0:v.offsetLeft)??0)-(t?i:0):o<r&&f?m=f==null?void 0:f.offsetLeft:l?m=((h==null?void 0:h.offsetLeft)??0)+((h==null?void 0:h.offsetWidth)??0):m=((v==null?void 0:v.offsetLeft)??0)+((v==null?void 0:v.offsetWidth)??0),c=a.offsetLeft+m,s&&e&&(c+=a.offsetWidth)}else if(c=(d(document.querySelector("#wordsWrapper")).width()??0)/2-(t&&e?i:0),u.tapeMode==="word"&&o>0){let f=0;for(let h=0;h<o&&!(l&&h>=r);h++)f+=d(n[h]).outerWidth(!0)??0;e&&(f*=-1),c+=f}return c}async function ur(t=!1){var V,na;const e=Math.round(((V=document.querySelector("#caret"))==null?void 0:V.getBoundingClientRect().width)??0),a=["block","outline","underline"].includes(u.caretStyle);let s=Ui(Z.getCurrent()).length;const n=Ui(E.current).length;u.mode==="zen"&&(s=n);const i=document==null?void 0:document.querySelector("#words .active"),r=(i==null?void 0:i.children.length)===0;r&&i.insertAdjacentHTML("beforeend",'<letter style="opacity: 0;">_</letter>');const o=i==null?void 0:i.querySelectorAll("letter");if(!(o!=null&&o.length))return;const l=o[n],c=o[s-1],f=(await Lo(u.language)).rightToLeft,h=(l==null?void 0:l.offsetHeight)||(c==null?void 0:c.offsetHeight)||u.fontSize*ao(1),v=(l==null?void 0:l.offsetTop)??(c==null?void 0:c.offsetTop)??0,w=h-Ji.offsetHeight;let _=i.offsetTop+v+w/2;u.caretStyle==="underline"&&(_=i.offsetTop+v-Ji.offsetHeight/2);let S=l==null?void 0:l.offsetWidth;if(S===void 0||r)S=T3(i);else if(S===0){S=0;for(let fa=n;fa>=0&&(S=(na=o[fa])==null?void 0:na.offsetWidth,!S);fa--);}const M=a?(S??0)+"px":"",me=S3(a,f,i,r,o,S,s,n)-(a?0:e/2);let P=d("#words .smoothScroller").height();P===void 0&&(P=0);const $=d(Ji);$.css("display","block");const T={top:_-P,left:me};M!==""?T.width=M:$.css("width","");const L=u.smoothCaret=="off"?0:u.smoothCaret=="slow"?150:u.smoothCaret=="medium"?100:u.smoothCaret=="fast"?85:0;if($.stop(!0,!1).animate(T,ya()||t?0:L),u.showAllLines){const fa=window.innerHeight,Ca=fa/2-$.outerHeight()/2,Wa=document.body.scrollHeight;if(_>=Ca&&Wa>fa&&pa){const Vn=_-Ca/2;window.scrollTo({left:0,top:Vn,behavior:l$()?"instant":"smooth"})}}r&&(i==null||i.replaceChildren())}function xE(t=!1){Ji.classList.remove("hidden"),ur(t),kE()}const yl=document.querySelector("#capsWarning"),$3=navigator.platform.startsWith("Mac");let Yl=!1,iv=!1;function A3(){iv||(yl==null||yl.classList.remove("hidden"),iv=!0)}function L3(){iv&&(yl==null||yl.classList.add("hidden"),iv=!1)}function CE(t){var a,s;const e=(s=(a=t==null?void 0:t.originalEvent)==null?void 0:a.getModifierState)==null?void 0:s.call(a,"CapsLock");e!==void 0&&(Yl=e);try{u.capsLockWarning&&Yl?A3():L3()}catch{}}d(document).on("keyup",CE);d(document).on("keydown",t=>{$3&&CE(t)});const ET=[["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal"],["KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash"],["KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote"],["KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash"],["Space"]],M3=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyA","KeyS","KeyD","KeyF","KeyG","ShiftLeft","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","Space"],E3=["Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight","ArrowUp","ArrowLeft","ArrowDown","ArrowRight","NumpadMultiply","NumpadSubtract","NumpadAdd","NumpadDecimal","NumpadEqual","NumpadDivide","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadEnter","Space"];function TE(t,e){var o,l;const a=Object.values(e.keys),s=a.findIndex(c=>c.find(m=>m.includes(t))),n=a[s];if(n===void 0)return;const i=n.findIndex(c=>c.includes(t));if(i===-1)return;let r=(o=ET[s])==null?void 0:o[i];return e.type==="iso"&&(s===2&&i===11?r="Backslash":s===3&&i===0?r="IntlBackslash":s===3&&(r=(l=ET[3])==null?void 0:l[i-1])),r}function kx(t){const e=M3.includes(t),a=E3.includes(t);return{leftSide:e,rightSide:a}}let go=!1,yo=!1;const O3=/^[^\p{L}\p{N}]{1}$/u,I3=/Mac|iPod|iPhone|iPad/.test(navigator.platform);let OT=[!1,!1];function P3(){const t=go||yo,e=I3?t||Yl:t!==Yl,[a,s]=OT;if(!(a===e&&s===t))return OT=[e,t]}async function SE(){const t=P3();if(t===void 0)return;const e=[...document.getElementsByClassName("keymapKey")].filter(l=>{const c=l.classList.contains("keymapKey"),m=!l.classList.contains("keySpace")&&!l.classList.contains("keySplitSpace");return c&&m}),a=e.map(l=>l.dataset.key);if(a.includes(void 0))return;const s=e.map(l=>l.childNodes[1]),[n,i]=t,r=u.keymapLayout==="overrideSync"?u.layout==="default"?"qwerty":u.layout:u.keymapLayout,o=await sh(r).catch(()=>{});if(o===void 0){y("Failed to load keymap layout",-1);return}for(let l=0;l<a.length;l++){const c=a[l],m=s[l],f=c[0],h=c[1];if(m===void 0||c===void 0||f===void 0||h===void 0)continue;const v=[f,h].some(P=>O3.test(P??"")),w=TE(f,o);if(w===void 0)return;const M=c_(w)&&(v?i:n),I=Number(M),me=c[I];m.textContent=me??""}}d(document).on("keydown",t=>{t.code==="ShiftLeft"?(go=!0,yo=!1):t.code==="ShiftRight"&&(go=!1,yo=!0),u.keymapLegendStyle==="dynamic"&&SE()});d(document).on("keyup",t=>{(t.code==="ShiftLeft"||t.code==="ShiftRight")&&(go=!1,yo=!1),u.keymapLegendStyle==="dynamic"&&SE()});function Z3(){go=!1,yo=!1}function c_(t){if(!go&&!yo||u.oppositeShiftMode==="off")return!0;const{leftSide:e,rightSide:a}=kx(t);return!!(!e&&!a||go&&a||yo&&e)}async function $E(){return await $k(()=>import("./howler.CZUQdRba.js").then(t=>t.h),__vite__mapDeps([5,1]))}let Us=null,wd=null;async function AE(){const t=(await $E()).Howl;Us===null&&(Us={1:[{sounds:[new t({src:"../sound/error1/error1_1.wav"}),new t({src:"../sound/error1/error1_1.wav"})],counter:0}],2:[{sounds:[new t({src:"../sound/error2/error2_1.wav"}),new t({src:"../sound/error2/error2_1.wav"})],counter:0}],3:[{sounds:[new t({src:"../sound/error3/error3_1.wav"}),new t({src:"../sound/error3/error3_1.wav"})],counter:0}],4:[{sounds:[new t({src:"../sound/error4/error4_1.wav"}),new t({src:"../sound/error4/error4_1.wav"})],counter:0},{sounds:[new t({src:"../sound/error4/error4_2.wav"}),new t({src:"../sound/error4/error4_2.wav"})],counter:0}]},Howler.volume(u.soundVolume))}async function Sb(){const t=(await $E()).Howl;wd===null&&(wd={1:[{sounds:[new t({src:"../sound/click1/click1_1.wav"}),new t({src:"../sound/click1/click1_1.wav"})],counter:0},{sounds:[new t({src:"../sound/click1/click1_2.wav"}),new t({src:"../sound/click1/click1_2.wav"})],counter:0},{sounds:[new t({src:"../sound/click1/click1_3.wav"}),new t({src:"../sound/click1/click1_3.wav"})],counter:0}],2:[{sounds:[new t({src:"../sound/click2/click2_1.wav"}),new t({src:"../sound/click2/click2_1.wav"})],counter:0},{sounds:[new t({src:"../sound/click2/click2_2.wav"}),new t({src:"../sound/click2/click2_2.wav"})],counter:0},{sounds:[new t({src:"../sound/click2/click2_3.wav"}),new t({src:"../sound/click2/click2_3.wav"})],counter:0}],3:[{sounds:[new t({src:"../sound/click3/click3_1.wav"}),new t({src:"../sound/click3/click3_1.wav"})],counter:0},{sounds:[new t({src:"../sound/click3/click3_2.wav"}),new t({src:"../sound/click3/click3_2.wav"})],counter:0},{sounds:[new t({src:"../sound/click3/click3_3.wav"}),new t({src:"../sound/click3/click3_3.wav"})],counter:0}],4:[{sounds:[new t({src:"../sound/click4/click4_1.wav"}),new t({src:"../sound/click4/click4_11.wav"})],counter:0},{sounds:[new t({src:"../sound/click4/click4_2.wav"}),new t({src:"../sound/click4/click4_22.wav"})],counter:0},{sounds:[new t({src:"../sound/click4/click4_3.wav"}),new t({src:"../sound/click4/click4_33.wav"})],counter:0},{sounds:[new t({src:"../sound/click4/click4_4.wav"}),new t({src:"../sound/click4/click4_44.wav"})],counter:0},{sounds:[new t({src:"../sound/click4/click4_5.wav"}),new t({src:"../sound/click4/click4_55.wav"})],counter:0},{sounds:[new t({src:"../sound/click4/click4_6.wav"}),new t({src:"../sound/click4/click4_66.wav"})],counter:0}],5:[{sounds:[new t({src:"../sound/click5/click5_1.wav"}),new t({src:"../sound/click5/click5_11.wav"})],counter:0},{sounds:[new t({src:"../sound/click5/click5_2.wav"}),new t({src:"../sound/click5/click5_22.wav"})],counter:0},{sounds:[new t({src:"../sound/click5/click5_3.wav"}),new t({src:"../sound/click5/click5_33.wav"})],counter:0},{sounds:[new t({src:"../sound/click5/click5_4.wav"}),new t({src:"../sound/click5/click5_44.wav"})],counter:0},{sounds:[new t({src:"../sound/click5/click5_5.wav"}),new t({src:"../sound/click5/click5_55.wav"})],counter:0},{sounds:[new t({src:"../sound/click5/click5_6.wav"}),new t({src:"../sound/click5/click5_66.wav"})],counter:0}],6:[{sounds:[new t({src:"../sound/click6/click6_1.wav"}),new t({src:"../sound/click6/click6_11.wav"})],counter:0},{sounds:[new t({src:"../sound/click6/click6_2.wav"}),new t({src:"../sound/click6/click6_22.wav"})],counter:0},{sounds:[new t({src:"../sound/click6/click6_3.wav"}),new t({src:"../sound/click6/click6_33.wav"})],counter:0}],7:[{sounds:[new t({src:"../sound/click7/click7_1.wav"}),new t({src:"../sound/click7/click7_11.wav"})],counter:0},{sounds:[new t({src:"../sound/click7/click7_2.wav"}),new t({src:"../sound/click7/click7_22.wav"})],counter:0},{sounds:[new t({src:"../sound/click7/click7_3.wav"}),new t({src:"../sound/click7/click7_33.wav"})],counter:0}],14:[{sounds:[new t({src:"../sound/click14/click14_1.wav"}),new t({src:"../sound/click14/click14_1.wav"})],counter:0},{sounds:[new t({src:"../sound/click14/click14_2.wav"}),new t({src:"../sound/click14/click14_2.wav"})],counter:0},{sounds:[new t({src:"../sound/click14/click14_3.wav"}),new t({src:"../sound/click14/click14_3.wav"})],counter:0},{sounds:[new t({src:"../sound/click14/click14_4.wav"}),new t({src:"../sound/click14/click14_4.wav"})],counter:0},{sounds:[new t({src:"../sound/click14/click14_5.wav"}),new t({src:"../sound/click14/click14_5.wav"})],counter:0},{sounds:[new t({src:"../sound/click14/click14_6.wav"}),new t({src:"../sound/click14/click14_6.wav"})],counter:0},{sounds:[new t({src:"../sound/click14/click14_7.wav"}),new t({src:"../sound/click14/click14_7.wav"})],counter:0},{sounds:[new t({src:"../sound/click14/click14_8.wav"}),new t({src:"../sound/click14/click14_8.wav"})],counter:0}],15:[{sounds:[new t({src:"../sound/click15/click15_1.wav"}),new t({src:"../sound/click15/click15_1.wav"})],counter:0},{sounds:[new t({src:"../sound/click15/click15_2.wav"}),new t({src:"../sound/click15/click15_2.wav"})],counter:0},{sounds:[new t({src:"../sound/click15/click15_3.wav"}),new t({src:"../sound/click15/click15_3.wav"})],counter:0},{sounds:[new t({src:"../sound/click15/click15_4.wav"}),new t({src:"../sound/click15/click15_4.wav"})],counter:0},{sounds:[new t({src:"../sound/click15/click15_5.wav"}),new t({src:"../sound/click15/click15_5.wav"})],counter:0}]},Howler.volume(u.soundVolume))}async function Vie(t){wd===null&&await Sb();const e=wd;Object.keys(e).includes(t)&&(e[t][0].sounds[0].seek(0),e[t][0].sounds[0].play())}async function Kie(t){var s,n,i,r,o,l;Us===null&&await AE(),Object.keys(Us).includes(t)&&((i=(n=(s=Us==null?void 0:Us[t])==null?void 0:s[0])==null?void 0:n.sounds[0])==null||i.seek(0),(l=(o=(r=Us==null?void 0:Us[t])==null?void 0:r[0])==null?void 0:o.sounds[0])==null||l.play())}let hc="KeyA";d(document).on("keydown",t=>{hc=t.code||"KeyA"});const ht={C:[16.35,32.7,65.41,130.81,261.63,523.25,1046.5,2093,4186.01],Db:[17.32,34.65,69.3,138.59,277.18,554.37,1108.73,2217.46,4434.92],D:[18.35,36.71,73.42,146.83,293.66,587.33,1174.66,2349.32,4698.64],Eb:[19.45,38.89,77.78,155.56,311.13,622.25,1244.51,2489.02,4978.03],E:[20.6,41.2,82.41,164.81,329.63,659.26,1318.51,2637.02],F:[21.83,43.65,87.31,174.61,349.23,698.46,1396.91,2793.83],Gb:[23.12,46.25,92.5,185,369.99,739.99,1479.98,2959.96],G:[24.5,49,98,196,392,783.99,1567.98,3135.96],Ab:[25.96,51.91,103.83,207.65,415.3,830.61,1661.22,3322.44],A:[27.5,55,110,220,440,880,1760,3520],Bb:[29.14,58.27,116.54,233.08,466.16,932.33,1864.66,3729.31],B:[30.87,61.74,123.47,246.94,493.88,987.77,1975.53,3951.07]};function yt(t,e=0){return a=>t[a+e]??0}const Yh={KeyZ:yt(ht.C),KeyS:yt(ht.Db),KeyX:yt(ht.D),KeyD:yt(ht.Eb),KeyC:yt(ht.E),KeyV:yt(ht.F),KeyG:yt(ht.Gb),KeyB:yt(ht.G),KeyH:yt(ht.Ab),KeyN:yt(ht.A),KeyJ:yt(ht.Bb),KeyM:yt(ht.B),Comma:yt(ht.C,1),KeyL:yt(ht.Db,1),Period:yt(ht.D,1),Semicolon:yt(ht.Eb,1),Slash:yt(ht.E,1),KeyQ:yt(ht.C,1),Digit2:yt(ht.Db,1),KeyW:yt(ht.D,1),Digit3:yt(ht.Eb,1),KeyE:yt(ht.E,1),KeyR:yt(ht.F,1),Digit5:yt(ht.Gb,1),KeyT:yt(ht.G,1),Digit6:yt(ht.Ab,1),KeyY:yt(ht.A,1),Digit7:yt(ht.Bb,1),KeyU:yt(ht.B,1),KeyI:yt(ht.C,2),Digit9:yt(ht.Db,2),KeyO:yt(ht.D,2),Digit0:yt(ht.Eb,2),KeyP:yt(ht.E,2),BracketLeft:yt(ht.F,2),Equal:yt(ht.Gb,2),BracketRight:yt(ht.G,2)},LE={8:"sine",9:"sawtooth",10:"square",11:"triangle"};let _a;function ME(){if(_a!==null)try{_a=new AudioContext}catch(t){_a=null,console.error(t),y(Ge(t,"Error initializing audio context")+". Notes will not play.",-1)}}const IT={pentatonic:["C","D","E","G","A"],wholetone:["C","D","E","Gb","Ab","Bb"]};function PT(t){const e={position:0,octave:4,direction:1};return async()=>{wd===null&&await Sb(),EE(t,e)}}const ZT={position:0,octave:4,direction:1},NT={12:{name:"pentatonic",preview:PT("pentatonic"),meta:ZT},13:{name:"wholetone",preview:PT("wholetone"),meta:ZT}};function EE(t,e){if(_a===void 0&&ME(),!_a)return;const a=ja(0,IT[t].length-1);Math.random()<.5&&(e.octave+=e.direction),e.octave>=6&&(e.direction=-1),e.octave<=4&&(e.direction=1);const s=IT[t][a],n=ht[s][e.octave],i=_a.createOscillator(),r=_a.createGain();i.type="sine",r.gain.value=u.soundVolume/10,i.connect(r),r.connect(_a.destination),i.frequency.value=n,i.start(_a.currentTime),r.gain.setTargetAtTime(0,_a.currentTime,.3),i.stop(_a.currentTime+2)}function N3(t,e){var o;if(_a===void 0&&ME(),!_a||(hc=t??hc,!(hc in Yh)))return;const s=3+(go||yo||Yl?1:0),n=(o=Yh[hc])==null?void 0:o.call(Yh,s),i=_a.createOscillator(),r=_a.createGain();i.type=e??LE[u.playSoundOnClick],r.gain.value=u.soundVolume/10,i.connect(r),r.connect(_a.destination),i.frequency.value=n,i.start(_a.currentTime),r.gain.setTargetAtTime(0,_a.currentTime,.15),i.stop(_a.currentTime+.5)}async function cr(t){if(u.playSoundOnClick==="off")return;if(u.playSoundOnClick in NT){const{name:n,meta:i}=NT[u.playSoundOnClick];EE(n,i);return}if(u.playSoundOnClick in LE){N3(t??void 0);return}wd===null&&await Sb();const e=wd[u.playSoundOnClick];if(e===void 0)throw new Error("Invalid click sound ID");const a=mi(e),s=a.sounds[a.counter];a.counter++,a.counter===2&&(a.counter=0),s.seek(0),s.play()}async function $b(){if(u.playSoundOnError==="off")return;Us===null&&await AE();const t=Us[u.playSoundOnError];if(t===void 0)throw new Error("Invalid error sound ID");const e=mi(t),a=e.sounds[e.counter];e.counter++,e.counter===2&&(e.counter=0),a.seek(0),a.play()}function R3(t){try{Howler.volume(t)}catch{}}Gt((t,e)=>{t==="playSoundOnClick"&&e!=="off"&&Sb(),t==="soundVolume"&&R3(parseFloat(e))});let xx=[],di=[],OE=0,Cx=!0,ri=0,Ia=0,_d=0,bh=0,rv=[],p_=[];var JS;const Aa=(JS=document.getElementById("playpauseReplayButton"))==null?void 0:JS.children[0];function IE(t){xx=t}function Tx(){const t=document.getElementById("replayWords");if(t===null)return;t.innerHTML="";let e=0;di.forEach(a=>{a.action==="backWord"?e--:(a.action==="submitCorrectWord"||a.action==="submitErrorWord")&&e++}),xx.forEach((a,s)=>{if(s>e)return;const n=document.createElement("div");n.className="word";for(const i of a){const r=document.createElement("letter");r.innerHTML=i,n.appendChild(r)}t.appendChild(n)})}function wh(){var t;rv.forEach(e=>{clearTimeout(e)}),rv=[],p_.forEach(e=>{clearTimeout(e)}),p_=[],bh=Ia,_d=ri,Aa!==void 0&&(Aa.className="fas fa-play",(t=Aa.parentNode)==null||t.setAttribute("aria-label","Resume replay"))}function Bd(t=!1){t&&u.playSoundOnError!=="off"?$b():cr()}function PE(t,e=!1){var s,n,i,r;let a=(s=document.getElementById("replayWords"))==null?void 0:s.children[ri];if(a!==void 0){if(t.action==="correctLetter")e||Bd(),(n=a.children[Ia])==null||n.classList.add("correct"),Ia++;else if(t.action==="incorrectLetter"){e||Bd(!0);let o;Ia>=a.children.length&&(o=document.createElement("letter"),o==null||o.classList.add("extra"),o.innerHTML=((i=t.value)==null?void 0:i.toString())??"",a.appendChild(o)),o=a.children[Ia],o==null||o.classList.add("incorrect"),Ia++}else if(t.action==="setLetterIndex"&&typeof t.value=="number"){e||Bd(),Ia=t.value;for(const o of[...a.children].slice(Ia))o!=null&&o.classList.contains("extra")?o.remove():o.className=""}else if(t.action==="submitCorrectWord")e||Bd(),ri++,Ia=0;else if(t.action==="submitErrorWord")e||Bd(!0),a==null||a.classList.add("error"),ri++,Ia=0;else if(t.action==="backWord"){e||Bd(),ri--;const o=document.getElementById("replayWords");for(o!==null&&(a=o.children[ri]),Ia=a.children.length;((r=a.children[Ia-1])==null?void 0:r.className)==="";)Ia--;a==null||a.classList.remove("error")}}}function Sx(){var s;let t=0;Ia=0,ri=0,di.forEach((n,i)=>{(ri<_d||ri===_d&&Ia<bh)&&(PE(n,!0),t=i+1)});const e=(s=di[t])==null?void 0:s.time;if(e===void 0)throw new Error("Failed to load old replay: datatime is undefined");const a=Math.floor(e/1e3);return NE(a),t}function ZE(){var t;d("#resultReplay").stop(!0,!0).hasClass("hidden")?(Tx(),Sx(),d("#watchReplayButton").hasClass("loaded")?d("#resultReplay").removeClass("hidden").css("display","none").slideDown(250):(d("#words").html('<div class="preloader"><i class="fas fa-fw fa-spin fa-circle-notch"></i></div>'),d("#resultReplay").removeClass("hidden").css("display","none").slideDown(250))):(((t=Aa==null?void 0:Aa.parentNode)==null?void 0:t.getAttribute("aria-label"))!="Start replay"&&wh(),d("#resultReplay").slideUp(250,()=>{d("#resultReplay").addClass("hidden")}))}function j3(){d("#resultReplay").stop(!0,!0).hasClass("hidden")||ZE(),d("#replayStats").text(""),di=[],OE=performance.now(),Cx=!0,bh=0,_d=0}function $x(){Cx=!1}function ad(t,e){if(!Cx)return;const a=performance.now()-OE;di.push({action:t,value:e,time:a})}function NE(t){const a=`${Yi[t-1]??0}wpm	${t}s`;d("#replayStats").text(a)}function D3(){var n,i;if(Ia=0,ri=0,Aa===void 0)return;Aa.className="fas fa-pause",(n=Aa.parentNode)==null||n.setAttribute("aria-label","Pause replay"),Tx();const t=Sx(),e=(i=di[t])==null?void 0:i.time;if(e===void 0)throw new Error("Failed to play replay: lastTime is undefined");let a=Math.round(e/1e3);const s=Math.round(to(di).time/1e3);for(;a<=s;){const r=a;p_.push(setTimeout(()=>{NE(r)},r*1e3-e)),a++}di.forEach((r,o)=>{o<t||rv.push(setTimeout(()=>{PE(r)},r.time-e))}),rv.push(setTimeout(()=>{bh=0,_d=0,Aa.className="fas fa-play",Aa.parentNode.setAttribute("aria-label","Start replay")},to(di).time-e))}function B3(){return JSON.stringify({replayData:di,wordsList:xx})}d(".pageTest #playpauseReplayButton").on("click",()=>{(Aa==null?void 0:Aa.className)==="fas fa-play"?D3():(Aa==null?void 0:Aa.className)==="fas fa-pause"&&wh()});d("#replayWords").on("click","letter",t=>{wh();const e=document.querySelector("#replayWords"),a=[...(e==null?void 0:e.children)??[]];_d=a.indexOf(t.target.parentNode),bh=[...a[_d].children].indexOf(t.target),Tx(),Sx()});d(".pageTest").on("click","#watchReplayButton",()=>{ZE()});class qu{constructor(e,a,s,n,i){this.unit=e,this.convertFactor=a,this.fullUnitString=s,this.histogramDataBucketSize=n,this.historyStepSize=i}fromWpm(e){return e*this.convertFactor}toWpm(e){return e/this.convertFactor}}const q3={wpm:new qu("wpm",1,"Words per Minute",10,10),cpm:new qu("cpm",5,"Characters per Minute",50,100),wps:new qu("wps",1/60,"Words per Second",.5,2),cps:new qu("cps",5/60,"Characters per Second",5,5),wph:new qu("wph",60,"Words per Hour",250,1e3)};function Da(t){return q3[t]}const Ab={composing:!1,startPos:-1};function sd(){return Ab.composing}function W3(){return Ab.startPos}function RE(t){Ab.composing=t}function F3(t){Ab.startPos=t}const Ha=16,jE=12,m_=Ha/2,z3=jE/2,RT=250;let cs=[],Ta,Jl={},ov=[],Lb=[],jc=[],Ax=[],ll=[],Jh,qd,DE=new Date,Zm=!1,BE=!1,f_=!0,dv=!0,h_=!1,Xh=!1;async function H3(t,e){if(!BE||ll!==void 0&&t===ll[0]&&e===ll[1]||!Zm&&!await V3()||t===void 0||e===void 0||t<0||e<0||e<t)return!1;e=Math.min(e,Ta.length-1);const a=K3(t,e,h_);for(let s=0;s<cs.length;s++){const n=Lb[s],i=n.children[0];n.classList.remove("highlight-hidden"),!f_&&!dv?(n.classList.add("withAnimation"),i.classList.add("withAnimation")):(n.classList.remove("withAnimation"),i.classList.remove("withAnimation"));const r=a[s];r&&(n.style.right=r.highlightRight+"px",i.style.left=r.inputContainerLeft+"px",n.style.left=r.highlightLeft+"px")}return f_=!1,dv=!1,ll=[t,e],!0}function U3(){for(const t of Lb)t.classList.add("highlight-hidden");dv=!0,ll=[]}function Lx(){if(Zm){for(const t of ov)t.remove();Lb=[],ov=[],Jl={},cs=[],jc=[],Ax=[],Zm=!1,f_=!0,dv=!0,ll=[]}}function qE(t){BE=t}async function V3(){if(Zm||Xh)return!1;Xh=!0;const t=new Date().getTime()-DE.getTime();if(t<RT&&await new Promise(c=>setTimeout(c,RT-t)),h_=(await Lo(u.language)).rightToLeft,Jh=d("#resultWordsHistory")[0],qd=Jh.getBoundingClientRect(),Ta=d(Jh).find(".words .word[input]"),Ta.length===0)return Xh=!1,!1;let a=-1,s,n=0;Jl[0]=0;for(let c=1;c<Ta.length;c++){const m=Ta[c],f=Ta[c-1];m.offsetTop!=f.offsetTop&&(n++,s=Ic([Ta[a+1],f]),cs.push({firstWordIndex:a+1,lastWordIndex:c-1,rect:s}),a=c-1),Jl[c]=n}s=Ic([Ta[a+1],Ta[Ta.length-1]]),cs.push({firstWordIndex:a+1,lastWordIndex:Ta.length-1,rect:s});const i=qd.width,r=qd.height,o=qd.top,l=qd.left;return cs.forEach(c=>{const m=document.createElement("div");m.classList.add("highlightContainer"),ov.push(m);const f=c.rect.top-z3,h=c.rect.left-m_,v=f-o,w=h-l,_=c.rect.width+Ha,S=c.rect.height+jE,M=c.rect.width,I=c.rect.height,me=v/r*100+"%",P=w/i*100+"%",$=_/i*100+"%",T=S/r*100+"%";m.style.width=$,m.style.top=me,m.style.left=P,m.style.height=T;const L=document.createElement("div"),V=document.createElement("div");V.style.top=c.rect.top-f+"px",V.style.left=c.rect.left-h+"px",V.style.width=M+"px",V.style.height=I+"px",L.className="highlight highlight-hidden",V.className="inputWordsContainer";for(let na=c.firstWordIndex;na<=c.lastWordIndex;na+=1){const fa=Ta[na],Ca=fa.getAttribute("input")??"";if(!Ca)continue;const Wa=document.createElement("div");let Vn;h_?Vn=c.rect.left-qd.left+Ha:Vn=0,Wa.style.left=fa.offsetLeft+m_-Vn+"px",Wa.innerHTML=Ca.replace(/\t/g,"_").replace(/\n/g,"_").replace(/</g,"&lt").replace(/>/g,"&gt").slice(0,fa.childElementCount),Wa.className="inputWord",V.append(Wa),Ax.push(Wa)}jc.push(V),Lb.push(L),L.append(V),m.append(L),Jh.append(m)}),Zm=!0,Xh=!1,!0}function K3(t,e,a=!1){const s=Jl[t],n=new Array(cs.length).fill(null).map(()=>({highlightLeft:0,highlightRight:0,inputContainerLeft:0,inputContainerRight:0})),i=G3(t,e),r=Ta[t],o=cs[s],l=n[s],c=ov[s],m=jc[s];if(r===void 0||o===void 0||l===void 0||c===void 0||m===void 0)return n;if(!a)l.highlightLeft=r.offsetLeft,l.highlightRight=o.rect.width-(l.highlightLeft+i)+Ha;else{const f=c.offsetLeft;l.highlightRight=o.rect.width-(r.offsetLeft+r.offsetWidth)+f+m_,l.highlightLeft=o.rect.width-(l.highlightRight+i)+Ha}a?l.inputContainerLeft=-1*(m.getBoundingClientRect().width-i-l.highlightRight):l.inputContainerLeft=-1*l.highlightLeft;for(let f=s-1;f>=0;f--){const h=n[f],v=n[f+1],w=cs[f],_=jc[f];h===void 0||w===void 0||v===void 0||_===void 0||(a?(h.highlightRight=v.highlightRight+w.rect.width+Ha,h.highlightLeft=w.rect.width-(h.highlightRight+i)+Ha,h.inputContainerLeft=-1*(_.getBoundingClientRect().width-i-h.highlightRight)):(h.highlightLeft=v.highlightLeft+w.rect.width+Ha,h.highlightRight=w.rect.width-(h.highlightLeft+i)+Ha,h.inputContainerLeft=-1*h.highlightLeft))}for(let f=s+1;f<cs.length;f++){const h=n[f],v=cs[f-1],w=cs[f],_=n[f-1],S=jc[f];h===void 0||v===void 0||w===void 0||_===void 0||S===void 0||(a?(h.highlightRight=-1*(v.rect.width-_.highlightRight+Ha),h.highlightLeft=w.rect.width-(h.highlightRight+i)+Ha,h.inputContainerLeft=-1*(S.getBoundingClientRect().width-i-h.highlightRight)):(h.highlightLeft=-1*(v.rect.width-_.highlightLeft+Ha),h.highlightRight=w.rect.width-(h.highlightLeft+i)+Ha,h.inputContainerLeft=-1*h.highlightLeft))}return n}function G3(t,e){var w,_;const a=Jl[t],s=Jl[e];if(a===void 0||s===void 0)return 0;const n=Ta[t],i=Ta[e],r=Ax[e],o=Ta[((w=cs[a])==null?void 0:w.lastWordIndex)??-1],l=Ta[((_=cs[s])==null?void 0:_.firstWordIndex)??-1];if(n===void 0||i===void 0||r===void 0||o===void 0||l===void 0)return 0;if(a==s){const S=Ic([n,i]),M=i.getBoundingClientRect(),I=r.getBoundingClientRect();let me=S.width+Ha;return me-=M.width-I.width,me}const c=Ic([n,o]),m=Ic([l,i]);let f=c.width+m.width;for(let S=a+1;S<s;S++)f+=cs[S].rect.width;f+=2*Ha*(s-a);const h=i.getBoundingClientRect(),v=r.getBoundingClientRect();return f-=h.width-v.width,f}function Q3(){DE=new Date}let WE="loading";function xt(){return WE}function Y3(t){WE=t}const _w={suffix:"",fallback:"-",showDecimalPlaces:void 0,rounding:Math.round};class J3{constructor(e){this.config=e}typingSpeed(e,a={}){const s={..._w,...a};if(e==null)return s.fallback??"";const n=Da(this.config.typingSpeedUnit).fromWpm(e);return this.number(n,s)}percentage(e,a={}){const s={..._w,...a};return s.suffix="%"+(s.suffix??""),this.number(e,s)}accuracy(e,a={}){return this.percentage(e,{rounding:Math.floor,...a})}decimals(e,a={}){const s={..._w,...a};return this.number(e,s)}number(e,a){if(e==null)return a.fallback??"";const s=a.suffix??"";return(a.showDecimalPlaces!==void 0?a.showDecimalPlaces:this.config.alwaysShowDecimalPlaces)?Be(e).toFixed(2)+s:(a.rounding??Math.round)(e).toString()+s}rank(e,a={}){const s={fallback:"-",...a};if(e==null)return s.fallback??"";let n="th";const i=e%10,r=e%100;return i===1&&r!==11&&(n="st"),i===2&&r!==12&&(n="nd"),i===3&&r!==13&&(n="rd"),e+n}}const Te=new J3(u);async function X3(){return(await $k(()=>import("./html2canvas.esm.CBrSDip1.js"),[])).default}function e9(t,e,a){const s=Ui(a);let n="";for(const i of t)for(const r of i){const o=e[r].offsetLeft,l=e[r].offsetWidth,c=`[${r}]`,m=s[r];n+=`<hint data-length=1 data-chars-index=${c} style="left: ${o+l/2}px;">${m}</hint>`}return n=`<div class="hints">${n}</div>`,n}async function t9(t,e,a){const n=(await Lo(u.language)).rightToLeft;let i=0;for(const r of t){for(let o=0;o<r.length-1;o++){const l=a[i],c=a[i+1],m=n?c:l,f=n?l:c;if(m.offsetLeft+m.offsetWidth/2>f.offsetLeft-f.offsetWidth/2){l.dataset.length=(parseInt(l.dataset.length??"1")+parseInt(c.dataset.length??"1")).toString();const h=l.dataset.charsIndex??"[]",v=c.dataset.charsIndex??"[]";l.dataset.charsIndex=h.slice(0,-1)+","+v.slice(1);const w=r[o]??0,_=e[w].offsetLeft+(n?e[w].offsetWidth:0)+(c.offsetLeft-l.offsetLeft);l.style.left=_.toString()+"px",l.insertAdjacentHTML("beforeend",c.innerHTML),c.remove(),r.splice(o+1,1),i-=o===0?1:2,o-=o===0?1:2}i++}i++}}const a9=ns(250,async()=>{const t=await QW(u.language);t==="no"&&y(`${Zl(oo(u.language))} does not support Zipf funbox, because the list is not ordered by frequency. Please try another word list.`,0,{duration:7}),t==="unknown"&&y(`${Zl(oo(u.language))} may not support Zipf funbox, because we don't know if it's ordered by frequency or not. If you would like to add this label, please contact us.`,0,{duration:7})});Gt((t,e,a)=>{(t==="language"||t==="funbox")&&u.funbox.split("#").includes("zipf")&&a9(),t==="fontSize"&&!a&&(ih(),Ox(!0),Ex(!0)),["fontSize","fontFamily","blindMode","hideExtraLetters"].includes(t)&&HE().catch(s=>{console.error(s)}),t==="theme"&&vl(),e!==void 0&&(t==="highlightMode"&&xt()==="test"&&Eb(),["highlightMode","blindMode","indicateTypos","tapeMode","hideExtraLetters"].includes(t)&&VE(),t==="tapeMode"&&!a&&(e==="off"?d("#words").css("margin-left","unset"):_h()),typeof e=="boolean"&&(t==="flipTestColors"&&o9(e),t==="colorfulMode"&&d9(e),t==="burstHeatmap"&&vl()))});let ta=0,la=!1,ks=!1,g_=!1,Zg=0,kd=!1;function FE(t){la=t}function Mx(t){ta=t}let eg;function y_(t){ks=t,t?new Promise(e=>{eg=e}):(eg&&eg(),eg=null)}function zE(t){kd=t}function s9(){Zg=0,ta=0}function Mb(){d("#wordsInput").trigger("focus")}function Eb(t,e=!1){const a=document.querySelector("#words .active");t||a==null||a.classList.add("typed"),u.mode==="zen"&&t?a==null||a.remove():a!==null&&!e&&a.classList.remove("active");const s=document.querySelectorAll("#words .word")[ta];if(s==null)throw new Error("activeWord is undefined - can't update active element");s.classList.add("active"),s.classList.remove("error"),s.classList.remove("typed"),s.offsetTop,!e&&r9()&&Ex(),u.tapeMode!=="off"&&_h()}async function HE(){var i,r,o,l;if(xt()!=="test"||la||u.indicateTypos!=="below")return;const e=(await Lo(u.language)).rightToLeft;let a,s;const n=(i=document.getElementById("words"))==null?void 0:i.querySelectorAll("div.word > div.hints > hint");for(let c=0;c<((n==null?void 0:n.length)??0);c++){const m=n==null?void 0:n[c];(!a||((r=m.parentElement)==null?void 0:r.parentElement)!==a)&&(a=(o=m.parentElement)==null?void 0:o.parentElement,s=a==null?void 0:a.querySelectorAll("letter"));const f=(l=m.dataset.charsIndex)==null?void 0:l.slice(1,-1).split(",").map(_=>parseInt(_)),h=e?parseInt(m.dataset.length??"1")-1:0;let v=(s==null?void 0:s[(f==null?void 0:f[h])??0]).offsetLeft;const w=(f==null?void 0:f.reduce((_,S)=>_+(s==null?void 0:s[S]).offsetWidth,0))??0;v+=w/2,m.style.left=v.toString()+"px"}}function UE(t){var i;let e=!1,a="<div class='word'>";const s=Ye(u.funbox).find(r=>{var o;return(o=r.functions)==null?void 0:o.getWordHtml}),n=Ui(t);for(const r of n)(i=s==null?void 0:s.functions)!=null&&i.getWordHtml?a+=s.functions.getWordHtml(r,!0):r==="	"?a+=`<letter class='tabChar'><i class="fas fa-long-arrow-alt-right fa-fw"></i></letter>`:r===`
`?(e=!0,a+=`<letter class='nlChar'><i class="fas fa-level-down-alt fa-rotate-90 fa-fw"></i></letter>`):a+="<letter>"+r+"</letter>";return a+="</div>",e&&(a+="<div class='newline'></div>"),a}function VE(){var e,a,s;u.tapeMode!=="off"?(d("#words").addClass("tape"),d("#wordsWrapper").addClass("tape")):(d("#words").removeClass("tape"),d("#wordsWrapper").removeClass("tape")),u.blindMode?(d("#words").addClass("blind"),d("#wordsWrapper").addClass("blind")):(d("#words").removeClass("blind"),d("#wordsWrapper").removeClass("blind")),u.indicateTypos==="below"?(d("#words").addClass("indicateTyposBelow"),d("#wordsWrapper").addClass("indicateTyposBelow")):(d("#words").removeClass("indicateTyposBelow"),d("#wordsWrapper").removeClass("indicateTyposBelow")),u.hideExtraLetters?(d("#words").addClass("hideExtraLetters"),d("#wordsWrapper").addClass("hideExtraLetters")):(d("#words").removeClass("hideExtraLetters"),d("#wordsWrapper").removeClass("hideExtraLetters"));const t=((s=(a=(e=d("#words"))==null?void 0:e.attr("class"))==null?void 0:a.split(/\s+/))==null?void 0:s.filter(n=>!n.startsWith("highlight-")))??[];u.highlightMode!=null&&t.push("highlight-"+u.highlightMode.replaceAll("_","-")),d("#words").attr("class",t.join(" ")),GE(),Ox(!0),setTimeout(()=>{Ex(!0)},250)}function n9(){d("#words").empty();let t="";if(u.mode!=="zen")for(let e=0;e<Z.length;e++)t+=UE(Z.get(e));else t='<div class="word">word height</div><div class="word active"></div>';d("#words").html(t),Eb(void 0,!0),setTimeout(()=>{ur()},125),VE(),u.mode==="zen"&&d(document.querySelector(".word")).remove()}const i9=["japanese","chinese","korean"];function r9(){return i9.some(e=>u.language.startsWith(e))||u.mode!=="time"&&u.showAllLines}async function Ex(t=!1){if(xt()!=="test"||u.tapeMode!=="off"&&!t)return;const a=(await Lo(u.language)).rightToLeft,s=document.querySelector("#wordsInput"),n=document.querySelectorAll("#words .word")[ta];if(!n){s.style.top="0px",s.style.left="0px";return}const i=window.getComputedStyle(n),r=parseInt(i.marginTop)+parseInt(i.marginBottom),o=ao(u.fontSize),l=n.offsetTop+o/2-s.offsetHeight/2+1;if(n.offsetWidth<o?s.style.width=o+"px":s.style.width=n.offsetWidth+"px",u.tapeMode!=="off"){s.style.top=l+"px",s.style.left=n.offsetLeft+"px";return}t?s.style.top=l+o+r+4+"px":s.style.top=l+"px",n.offsetWidth<o&&a?s.style.left=n.offsetLeft-o+"px":s.style.left=n.offsetLeft+"px"}function Ox(t=!1){if(xt()!=="test"||la||!t&&u.mode!=="custom")return;d("#wordsWrapper").removeClass("hidden");const e=d(document.querySelector(".word")).outerHeight(!0);if(d(document.querySelector("#words")).outerHeight(!0),u.showAllLines&&u.mode!=="time"&&ua()!=="time"&&Yt()!==0)d("#words").css("height","auto").css("overflow","visible clip").css("width","100%").css("margin-left","unset"),d("#wordsWrapper").css("height","auto").css("overflow","visible clip"),d(".outOfFocusWarning").css("margin-top",e+ao(1)/2+"px");else{let a,s;if(u.tapeMode!=="off")a=e*2,s=e;else{let n=0,i=0,r=0;const o=document.querySelectorAll("#words .word");let l=0;const c=window.getComputedStyle(o[0]),m=parseInt(c.marginTop),f=parseInt(c.marginBottom);for(;n<3;){const v=o[r];if(!v)break;const w=v.offsetTop;w>i&&(n++,l+=v.offsetHeight+m+f,i=w),r++}n<3&&(l=l*(3/n)),a=l/3*4,s=l}u.tapeMode!=="off"?(d("#words").css({overflow:"hidden",width:"200vw"}),d("#wordsWrapper").css({overflow:"hidden"}),_h()):(d("#words").css({overflow:"visible clip",marginLeft:"unset",width:""}),d("#wordsWrapper").css({overflow:"visible clip"})),setTimeout(()=>{d("#words").css("height",a+"px"),d("#wordsWrapper").css("height",s+"px"),d(".outOfFocusWarning").css("margin-top",s/2-ao(1)/2+"px")},0)}}function jT(t){d("#words").append(UE(t))}function o9(t){t?d("#words").addClass("flipped"):d("#words").removeClass("flipped")}function d9(t){t?d("#words").addClass("colorfulMode"):d("#words").removeClass("colorfulMode")}let DT=!1;async function l9(){var f,h;Ct();let t=!1,e=!1;(fZ("#cookiesModal")||document.contains(document.querySelector("#cookiesModal")))&&(e=!0);function a(){Qe(),d("#ad-result-wrapper").removeClass("hidden"),d("#ad-result-small-wrapper").removeClass("hidden"),d("#testConfig").removeClass("hidden"),d(".pageTest .screenshotSpacer").remove(),d("#notificationCenter").removeClass("hidden"),d("#commandLineMobileButton").removeClass("hidden"),d(".pageTest .ssWatermark").addClass("hidden"),d(".pageTest .ssWatermark").text("monkeytype.com"),d(".pageTest .buttons").removeClass("hidden"),d("noscript").removeClass("hidden"),d("#nocss").removeClass("hidden"),d("header, footer").removeClass("invisible"),d("#result").removeClass("noBalloons"),d(".wordInputHighlight").removeClass("hidden"),d(".highlightContainer").removeClass("hidden"),e&&d("#cookiesModal").removeClass("hidden"),t&&d("#resultReplay").removeClass("hidden"),Se()||d(".pageTest .loginTip").removeClass("hidden"),document.querySelector("html").style.scrollBehavior="smooth",Ye(u.funbox).forEach(v=>{var w,_;return(_=(w=v.functions)==null?void 0:w.applyGlobalCSS)==null?void 0:_.call(w)})}d("#resultReplay").hasClass("hidden")||(t=!0,wh());const s=new Date(Date.now());d("#resultReplay").addClass("hidden"),d(".pageTest .ssWatermark").removeClass("hidden");const n=A(),i=[zt(s,"dd MMM yyyy HH:mm"),"monkeytype.com"];if((n==null?void 0:n.name)!==void 0){const v=`${n==null?void 0:n.name}${yb(n,{iconsOnly:!0})}`;i.unshift(v)}d(".pageTest .ssWatermark").html(i.map(v=>`<span>${v}</span>`).join("<span class='pipe'>|</span>")),d(".pageTest .buttons").addClass("hidden"),d("#notificationCenter").addClass("hidden"),d("#commandLineMobileButton").addClass("hidden"),d(".pageTest .loginTip").addClass("hidden"),d("noscript").addClass("hidden"),d("#nocss").addClass("hidden"),d("#ad-result-wrapper").addClass("hidden"),d("#ad-result-small-wrapper").addClass("hidden"),d("#testConfig").addClass("hidden"),d(".page.pageTest").prepend("<div class='screenshotSpacer'></div>"),d("header, footer").addClass("invisible"),d("#result").addClass("noBalloons"),d(".wordInputHighlight").addClass("hidden"),d(".highlightContainer").addClass("hidden"),e&&d("#cookiesModal").addClass("hidden"),Ye(u.funbox).forEach(v=>{var w,_;return(_=(w=v.functions)==null?void 0:w.clearGlobal)==null?void 0:_.call(w)}),document.querySelector("html").style.scrollBehavior="auto",window.scrollTo({top:0});const r=d("#result .wrapper"),o=((f=r.offset())==null?void 0:f.left)??0,l=((h=r.offset())==null?void 0:h.top)??0,c=r.outerWidth(!0),m=r.outerHeight(!0);try{const v=ao(2),w=ao(2);(await(await X3())(document.body,{backgroundColor:await Ps("bg"),width:c+v*2,height:m+w*2,x:o-v,y:l-w})).toBlob(async S=>{try{if(S===null)throw new Error("Could not create image, blob is null");const M=new ClipboardItem(Object.defineProperty({},S.type,{value:S,enumerable:!0}));await navigator.clipboard.write([M]),y("Copied to clipboard",1,{duration:2})}catch(M){console.error("Error while saving image to clipboard",M),S?(navigator.userAgent.toLowerCase().includes("firefox")&&!DT&&(DT=!0,y("On Firefox you can enable the asyncClipboard.clipboardItem permission in about:config to enable copying straight to the clipboard",0,{duration:10})),y("Could not save image to clipboard. Opening in new tab instead (make sure popups are allowed)",0,{duration:5}),open(URL.createObjectURL(S))):y(Ge(M,"Error saving image to clipboard"),-1)}a()})}catch(v){y(Ge(v,"Error creating image"),-1),a()}setTimeout(()=>{a()},3e3)}async function li(t){var o,l,c;const e=t??E.current,a=Z.getCurrent();if(!a&&u.mode!=="zen")return;let s="";const n=[];let i=!1;if(u.mode==="zen")for(const m of E.current)m==="	"?s+=`<letter class='tabChar correct' style="opacity: 0"><i class="fas fa-long-arrow-alt-right fa-fw"></i></letter>`:m===`
`?(i=!0,s+=`<letter class='nlChar correct' style="opacity: 0"><i class="fas fa-level-down-alt fa-rotate-90 fa-fw"></i></letter>`):s+=`<letter class="correct">${m}</letter>`;else{let m=!1;const f=E.getKoreanStatus();if(f){const _=xa.disassemble(a).join(""),S=xa.disassemble(e).join(""),M=Ir.test(e)?e.search(Ir):S.length;e.search(Ir)<xa.d(_).length&&_.slice(0,M)===S.slice(0,M)&&(m=!0)}else{const _=Ir.test(e)?e.search(Ir):e.length;e.search(Ir)<a.length&&a.slice(0,_)===e.slice(0,_)&&(m=!0)}const h=Ye(u.funbox).find(_=>{var S;return(S=_.functions)==null?void 0:S.getWordHtml}),v=Ui(e),w=Ui(a);for(let _=0;_<v.length;_++){const S=w[_]===v[_];let M=w[_],I="",me="";if((o=h==null?void 0:h.functions)!=null&&o.getWordHtml){const P=h.functions.getWordHtml(M);P!==""&&(M=P)}else M==="	"?(I="tabChar",M='<i class="fas fa-long-arrow-alt-right fa-fw"></i>'):M===`
`&&(me="nlChar",M='<i class="fas fa-level-down-alt fa-rotate-90 fa-fw"></i>');if(S)s+=`<letter class="correct ${I}${me}">${M}</letter>`;else if(M!==void 0&&sd()&&_>=W3()&&!(f&&!m))s+=`<letter class="dead">${u.indicateTypos==="replace"?v[_]===" "?"_":v[_]:M}</letter>`;else if(M===void 0){let P=v[_];(P===" "||P==="	"||P===`
`)&&(P="_"),s+=`<letter class="incorrect extra ${I}${me}">${P}</letter>`}else if(s+=`<letter class="incorrect ${I}${me}">`+(u.indicateTypos==="replace"?v[_]===" "?"_":v[_]:M)+"</letter>",u.indicateTypos==="below")if(!(n!=null&&n.length))n.push([_]);else{const P=n[n.length-1];(P==null?void 0:P[P.length-1])===_-1?P.push(_):n.push([_])}}for(let _=v.length;_<w.length;_++){const S=w[_];(l=h==null?void 0:h.functions)!=null&&l.getWordHtml?s+=h.functions.getWordHtml(S,!0):S==="	"?s+=`<letter class='tabChar'><i class="fas fa-long-arrow-alt-right fa-fw"></i></letter>`:S===`
`?s+=`<letter class='nlChar'><i class="fas fa-level-down-alt fa-rotate-90 fa-fw"></i></letter>`:s+="<letter>"+S+"</letter>"}}const r=(c=document.querySelectorAll("#words .word"))==null?void 0:c[ta];if(r.innerHTML=s,n!=null&&n.length){const m=r.querySelectorAll("letter"),f=e9(n,m,e);r.insertAdjacentHTML("beforeend",f);const h=r.getElementsByTagName("hint");await t9(n,m,h)}i&&d("#words").append("<div class='newline'></div>"),u.tapeMode!=="off"&&_h()}function _h(){var r;if(xt()!=="test"||la)return;const t=document.querySelector("#wordsWrapper").offsetWidth;let e=0;const a=[];let s=0;if(ta>0){for(let o=0;o<ta;o++){const l=document.querySelectorAll("#words .word")[o];e+=d(l).outerWidth(!0)??0;const c=Math.floor(l.offsetLeft),m=Math.floor(l.offsetWidth);if(c<0-m){const f=d(d("#words .word")[o]);a.push(f),s+=f.outerWidth(!0)??0}}if(a.length>0){ta-=a.length,a.forEach(l=>l.remove()),e-=s;const o=parseInt(d("#words").css("margin-left"),10);d("#words").css("margin-left",`${o+s}px`)}}let n=0;if(u.tapeMode==="letter"&&E.current.length>0){const l=(r=document.querySelectorAll("#words .word")[ta])==null?void 0:r.querySelectorAll("letter");if(!l)return;for(let c=0;c<E.current.length;c++){const m=l[c];(u.blindMode||u.hideExtraLetters)&&m.classList.contains("extra")||(n+=d(m).outerWidth(!0)??0)}}const i=t/2-(e+n);u.smoothLineScroll?d("#words").stop(!0,!1).animate({marginLeft:i},ya()?0:125):d("#words").css("margin-left",`${i}px`)}function u9(){const t=db(u,_t);let e="";u.funbox!=="none"&&(e=" "+u.funbox.split("#").join(" ")),d(".pageTest #premidTestMode").text(`${u.mode} ${t} ${oo(u.language)}${e}`),d(".pageTest #premidSecondsLeft").text(u.time)}let kw=0;function Ix(t){var e;if(u.tapeMode==="off"&&Zg>0||u.tapeMode!=="off"&&Zg>=0){const a=t,s=[],n=d("#words .word");for(let r=0;r<ta;r++){const o=d(n[r]);if(o.hasClass("hidden"))continue;Math.floor(o[0].offsetTop)<(u.tapeMode==="off"?a-10:a+10)&&s.push(d(d("#words .word")[r]))}const i=d(document.querySelector(".word")).outerHeight(!0);if(u.smoothLineScroll&&s.length>0){g_=!0;const r=d("#words .smoothScroller");r.length===0?d("#words").prepend(`<div class="smoothScroller" style="position: fixed;height:${i}px;width:100%"></div>`):r.css("height",`${(r.outerHeight(!0)??0)+i}px`),d("#words .smoothScroller").stop(!0,!1).animate({height:0},ya()?0:125,()=>{d("#words .smoothScroller").remove()}),d("#paceCaret").stop(!0,!1).animate({top:((e=document.querySelector("#paceCaret"))==null?void 0:e.offsetTop)-i},ya()?0:125);const o={marginTop:`-${i*(kw+1)}px`};if(u.tapeMode!=="off"){const c=document.querySelector("#wordsWrapper").offsetWidth/2;o.marginLeft=`${c}px`}kw++,d("#words").stop(!0,!1).animate(o,ya()?0:125,()=>{var l,c;kw=0,(c=(l=document.querySelectorAll("#words .word"))==null?void 0:l[ta])==null||c.offsetTop,ta-=s.length,g_=!1,s.forEach(m=>m.remove()),d("#words").css("marginTop","0")})}else s.forEach(r=>r.remove()),ta-=s.length,d("#paceCaret").css({top:document.querySelector("#paceCaret").offsetTop-i})}Zg++,Ox()}function c9(t){t?(d("#words").addClass("rightToLeftTest"),d("#resultWordsHistory .words").addClass("rightToLeftTest"),d("#resultReplay .words").addClass("rightToLeftTest")):(d("#words").removeClass("rightToLeftTest"),d("#resultWordsHistory .words").removeClass("rightToLeftTest"),d("#resultReplay .words").removeClass("rightToLeftTest"))}function p9(t){t?(d("#words").addClass("withLigatures"),d("#resultWordsHistory .words").addClass("withLigatures"),d("#resultReplay .words").addClass("withLigatures")):(d("#words").removeClass("withLigatures"),d("#resultWordsHistory .words").removeClass("withLigatures"),d("#resultReplay .words").removeClass("withLigatures"))}async function m9(){d("#resultWordsHistory .words").empty();let t="";for(let e=0;e<E.history.length+2;e++){const a=E.getHistory(e),s=wa.getHistory(e),n=Z.get(e),i=(a==null?void 0:a.match(/[\uac00-\ud7af]|[\u1100-\u11ff]|[\u3130-\u318f]|[\ua960-\ua97f]|[\ud7b0-\ud7ff]/g))!==null||(n==null?void 0:n.match(/[\uac00-\ud7af]|[\u1100-\u11ff]|[\u3130-\u318f]|[\ua960-\ua97f]|[\ud7b0-\ud7ff]/g))!==null;let r="";try{if(a===void 0||a==="")throw new Error("empty input word");const o=a!==n?"error":"";if(s!==void 0&&s!==""){const h=i?xa.assemble(s.split("")):s;r=`<div class='word nocursor ${o}' burst="${On[e]}" input="${h.replace(/"/g,"&quot;").replace(/ /g,"_")}">`}else r=`<div class='word nocursor ${o}' burst="${On[e]}" input="${a.replace(/"/g,"&quot;").replace(/ /g,"_")}">`;const l=Ui(a),c=Ui(n),m=Ui(s??"");let f;if(u.mode==="zen"||a.length>n.length?f=l.length:f=c.length,s===void 0)throw new Error("empty corrected word");for(let h=0;h<f;h++){let v;try{v=i?xa.assemble(s.split(""))[h]:m[h]}catch{v=void 0}let w="";const _=i?xa.assemble(s.split("")):s;h+1===f&&_!==void 0&&_.length>a.length&&(w="extraCorrected"),u.mode==="zen"||c[h]!==void 0?u.mode==="zen"||l[h]===c[h]?v===l[h]||v===void 0?r+=`<letter class="correct ${w}">${l[h]}</letter>`:r+=`<letter class="corrected ${w}">`+l[h]+"</letter>":l[h]===E.current?r+=`<letter class='correct ${w}'>`+c[h]+"</letter>":l[h]===void 0?r+="<letter>"+c[h]+"</letter>":r+=`<letter class="incorrect ${w}">`+c[h]+"</letter>":r+='<letter class="incorrect extra">'+l[h]+"</letter>"}r+="</div>"}catch{try{r="<div class='word'>";for(const l of n)r+="<letter>"+l+"</letter>";r+="</div>"}catch{}}t+=r}return d("#resultWordsHistory .words").html(t),d("#showWordHistoryButton").addClass("loaded"),!0}function KE(t=!1){la&&(Q3(),d("#resultWordsHistory").stop(!0,!0).hasClass("hidden")?d("#resultWordsHistory .words .word").length===0?(d("#words").html('<div class="preloader"><i class="fas fa-fw fa-spin fa-circle-notch"></i></div>'),m9().then(()=>{u.burstHeatmap&&vl(),d("#resultWordsHistory").removeClass("hidden").css("display","none").slideDown(t?0:250,()=>{u.burstHeatmap&&vl()})})):(u.burstHeatmap&&vl(),d("#resultWordsHistory").removeClass("hidden").css("display","none").slideDown(t?0:250)):d("#resultWordsHistory").slideUp(250,()=>{d("#resultWordsHistory").addClass("hidden")}))}async function vl(){if(u.burstHeatmap){d("#resultWordsHistory .heatmapLegend").removeClass("hidden");let t=[...On];t=t.filter(l=>l!==1/0),t=t.filter(l=>l<350);const e=Da(u.typingSpeedUnit);t.forEach((l,c)=>{t[c]=Math.round(e.fromWpm(l))});const a=await Mo();let s=[a.colorfulError,_n(a.colorfulError,a.text,.5),a.text,_n(a.main,a.text,.5),a.main],n=a.sub;a.main===a.text&&(s=[a.colorfulError,_n(a.colorfulError,a.text,.5),a.sub,_n(a.sub,a.text,.5),a.main],n=a.subAlt);const i=t.sort((l,c)=>l-c),r=t.length,o=[{val:0,colorId:0},{val:i[r*.15|0],colorId:1},{val:i[r*.35|0],colorId:2},{val:i[r*.65|0],colorId:3},{val:i[r*.85|0],colorId:4}];o.forEach((l,c)=>{const m=o[c+1];let f="";c===0&&m?f=`<${Math.round(m.val)}`:c===4?f=`${Math.round(l.val)}+`:m&&(l.val!=m.val?f=`${Math.round(l.val)}-${Math.round(m.val)-1}`:f=`${Math.round(l.val)}-${Math.round(l.val)}`),d("#resultWordsHistory .heatmapLegend .box"+c).html(`<div>${f}</div>`)}),d("#resultWordsHistory .words .word").each((l,c)=>{const m=d(c).attr("burst");if(m===void 0)d(c).css("color",n);else{let f=parseInt(m);f=Math.round(Da(u.typingSpeedUnit).fromWpm(f)),o.forEach(h=>{f>=h.val&&(d(c).addClass("heatmapInherit"),d(c).css("color",s[h.colorId]))})}}),d("#resultWordsHistory .heatmapLegend .boxes .box").each((l,c)=>{d(c).css("background",s[l])})}else d("#resultWordsHistory .heatmapLegend").addClass("hidden"),d("#resultWordsHistory .words .word").removeClass("heatmapInherit"),d("#resultWordsHistory .words .word").css("color",""),d("#resultWordsHistory .heatmapLegend .boxes .box").css("color","")}function f9(t){d(d("#words .word")[t]).addClass("error")}function h9(t){d(d("#words .word")[t]).find("letter").addClass("correct")}function GE(){let t={};u.tapeMode==="off"?u.maxLineWidth===0?t={"max-width":"100%"}:t={"max-width":u.maxLineWidth+"ch"}:u.maxLineWidth===0?t={"max-width":"100%"}:t={"max-width":"100%"};const e=d("#typingTest");e.css(t),u.maxLineWidth===0?e.removeClass("full-width-padding").addClass("content"):e.removeClass("content").addClass("full-width-padding")}function g9(t){d("#barTimerProgress").css("opacity",parseFloat(t)),d("#liveStatsTextTop").css("opacity",parseFloat(t)),d("#liveStatsTextBottom").css("opacity",parseFloat(t)),d("#liveStatsMini").css("opacity",parseFloat(t))}function y9(t){d("#barTimerProgress").removeClass("timerSub"),d("#barTimerProgress").removeClass("timerText"),d("#barTimerProgress").removeClass("timerMain"),d("#liveStatsTextTop").removeClass("timerSub"),d("#liveStatsTextTop").removeClass("timerText"),d("#liveStatsTextTop").removeClass("timerMain"),d("#liveStatsTextBottom").removeClass("timerSub"),d("#liveStatsTextBottom").removeClass("timerText"),d("#liveStatsTextBottom").removeClass("timerMain"),d("#liveStatsMini").removeClass("timerSub"),d("#liveStatsMini").removeClass("timerText"),d("#liveStatsMini").removeClass("timerMain"),t==="main"?(d("#barTimerProgress").addClass("timerMain"),d("#liveStatsTextTop").addClass("timerMain"),d("#liveStatsTextBottom").addClass("timerMain"),d("#liveStatsMini").addClass("timerMain")):t==="sub"?(d("#barTimerProgress").addClass("timerSub"),d("#liveStatsTextTop").addClass("timerSub"),d("#liveStatsTextBottom").addClass("timerSub"),d("#liveStatsMini").addClass("timerSub")):t==="text"&&(d("#barTimerProgress").addClass("timerText"),d("#liveStatsTextTop").addClass("timerText"),d("#liveStatsTextBottom").addClass("timerText"),d("#liveStatsMini").addClass("timerText"))}d(".pageTest").on("click","#saveScreenshotButton",()=>{l9()});d(".pageTest #copyWordsListButton").on("click",async()=>{let t;u.mode==="zen"?t=E.history.join(" "):t=Z.get().slice(0,E.history.length).join(" "),await QE(t)});d(".pageTest #copyMissedWordsListButton").on("click",async()=>{let t;u.mode==="zen"?t=E.history.join(" "):t=Object.keys(Qi??{}).join(" "),await QE(t)});async function QE(t){try{await navigator.clipboard.writeText(t),y("Copied to clipboard",0,{duration:2})}catch(e){y("Could not copy to clipboard: "+e,-1)}}d(".pageTest #toggleBurstHeatmap").on("click",async()=>{aE(!u.burstHeatmap),Lx()});d(".pageTest #resultWordsHistory").on("mouseleave",".words .word",()=>{d(".wordInputHighlight").remove()});d(".pageTest #result #wpmChart").on("mouseleave",()=>{qE(!1),U3()});d(".pageTest #result #wpmChart").on("mouseenter",()=>{qE(!0)});d(".pageTest #resultWordsHistory").on("mouseenter",".words .word",t=>{if(la){const e=d(t.currentTarget).attr("input"),a=parseInt(d(t.currentTarget).attr("burst"));e!==void 0&&d(t.currentTarget).append(`<div class="wordInputHighlight withSpeed">
          <div class="text">
          ${e.replace(/\t/g,"_").replace(/\n/g,"_").replace(/</g,"&lt").replace(/>/g,"&gt")}
          </div>
          <div class="speed">
          ${Te.typingSpeed(a,{showDecimalPlaces:!1})}
          ${u.typingSpeedUnit}
          </div>
          </div>`)}});addEventListener("resize",()=>{Lx()});d("#wordsInput").on("focus",t=>{t.target===document.activeElement&&(!la&&u.showOutOfFocusWarning&&ih(),xE(!0))});d("#wordsInput").on("focusout",()=>{!la&&u.showOutOfFocusWarning&&wF(),vh()});d(".pageTest").on("click","#showWordHistoryButton",()=>{KE()});d("#wordsWrapper").on("click",()=>{Mb()});Gt((t,e)=>{t==="quickRestart"&&(e==="off"?d(".pageTest #restartTestButton").removeClass("hidden"):d(".pageTest #restartTestButton").addClass("hidden")),t==="maxLineWidth"&&GE(),t==="timerOpacity"&&g9(e),t==="timerColor"&&y9(e)});let YE="",JE=!1;function Px(){return YE}function pr(){return JE}function vo(t,e){YE=t,JE=e}let Zx=!1,xd,$u,v_,b_,lv,uv,Cd=!1,XE;function v9(t){XE=t}function b9(){const t={lastResult:XE,start:xd,end:$u,afkHistory:gh,errorHistory:hh,wpmHistory:Yi,rawHistory:_b,burstHistory:On,keypressCountHistory:bd,currentBurstStart:wb,lastSecondNotRound:Cd,missedWords:Qi,accuracy:Qs,keypressTimings:Ft,keyOverlap:Bi,wordsHistory:Z.list.slice(0,E.history.length),inputHistory:E.history};try{t.keypressTimings.spacing.average=Ft.spacing.array.reduce((e,a)=>a+=e)/Ft.spacing.array.length,t.keypressTimings.spacing.sd=Pc(Ft.spacing.array)}catch{}try{t.keypressTimings.duration.average=Ft.duration.array.reduce((e,a)=>a+=e)/Ft.duration.array.length,t.keypressTimings.duration.sd=Pc(Ft.duration.array)}catch{}return t}function w9(){xd=0,$u=0,Zx=!1,Cd=!1}let Nx=0,cv=0,Rx=[];function eO(){Nx++}function jx(t){cv+=t}function Dx(t,e){Rx.push({acc:t,seconds:e})}function tO(){Nx=0,cv=0,Rx=[]}function tg(){Zx=!0}function kh(t){return t===void 0?($u-xd)/1e3:(t-xd)/1e3}function Bx(t){const e=kh(pa?performance.now():$u),a=sO(),s=Be((a.correctWordChars+a.correctSpaces)*(60/e)/5),n=Be((a.allCorrectChars+a.spaces+a.incorrectChars+a.extraChars)*(60/e)/5);return{wpm:t?s:Math.round(s),raw:t?n:Math.round(n)}}function BT(t){$u=t,b_=Date.now(),uv=new Date().getTime()}function _9(t){xd=t,v_=Date.now(),lv=new Date().getTime()}function qx(t){let e=0;return t!==void 0&&(u.mode==="time"?e=Math.round(t)-bd.length:e=Math.ceil(t)-bd.length,e<0&&(e=0)),gh.filter(s=>s).length+e}function k9(){Cd=!0}function aO(){var n,i;const t=E.getKoreanStatus(),e=(performance.now()-wb)/1e3;let a;if(a=t?ey.disassemble(E.current).length:E.current.length,a===0&&(a=t?((i=ey.disassemble(E.getHistoryLast()))==null?void 0:i.length)??0:((n=E.getHistoryLast())==null?void 0:n.length)??0),a===0)return 0;const s=Be(a*(60/e)/5);return Math.round(s)}function xh(){const t=Qs.correct/(Qs.correct+Qs.incorrect)*100;return isNaN(t)?100:t}function x9(){const t=kh();bd.splice(t),Yi.splice(t),On.splice(t),_b.splice(t)}function C9(){const t=E.getKoreanStatus();let e=[...E.history];return pa&&e.push(E.current),t&&(e=e.map(a=>ey.disassemble(a).join(""))),e}function T9(){const t=E.getKoreanStatus();let e=[...u.mode==="zen"?E.history:Z.list];return pa&&e.push(u.mode==="zen"?E.current:Z.getCurrent()),t&&(e=e.map(a=>ey.disassemble(a).join(""))),e}function sO(){let t=0,e=0,a=0,s=0,n=0,i=0,r=0;const o=C9(),l=T9();for(let c=0;c<o.length;c++){const m=o[c],f=l[c];if(m===f)t+=f.length,e+=f.length,c<o.length-1&&eA(m)!==`
`&&r++;else if(m.length>=f.length)for(let h=0;h<m.length;h++)h<f.length?m[h]===f[h]?e++:a++:s++;else{const h={correct:0,incorrect:0,missed:0};for(let v=0;v<f.length;v++)v<m.length?m[v]===f[v]?h.correct++:h.incorrect++:h.missed++;e+=h.correct,a+=h.incorrect,c===o.length-1&&u.mode==="time"?h.incorrect===0&&(t+=h.correct):n+=h.missed}c<o.length-1&&i++}return Ye(u.funbox).find(c=>{var m;return(m=c.properties)==null?void 0:m.includes("nospace")})&&(i=0,r=0),{spaces:i,correctWordChars:t,allCorrectChars:e,incorrectChars:u.mode==="zen"?Qs.incorrect:a,extraChars:s,missedChars:n,correctSpaces:r}}function S9(){console.debug("Calculating result stats");let t=kh();console.debug("Test seconds",t," (date based) ",(b_-v_)/1e3," (performance.now based)",(uv-lv)/1e3," (new Date based)"),console.debug("Test seconds",vg(t)," (date based) ",vg((b_-v_)/1e3)," (performance.now based)",vg((uv-lv)/1e3)," (new Date based)"),u.mode!=="custom"&&(t=Be(t),console.debug("Mode is not custom - rounding to 2. New time: ",t));const e=sO(),{wpm:a,raw:s}=Bx(!0),n=Be(xh()),i={wpm:isNaN(a)?0:a,wpmRaw:isNaN(s)?0:s,acc:n,correctChars:e.correctWordChars,incorrectChars:e.incorrectChars,missedChars:e.missedChars,extraChars:e.extraChars,allChars:e.allCorrectChars+e.spaces+e.incorrectChars+e.extraChars,time:Be(t),spaces:e.spaces,correctSpaces:e.correctSpaces};return console.debug("Result stats",i),i}const Vt={mode:null,punctuation:null,numbers:null,customText:null};function $9(t,e){if(u.mode==="zen")return!1;let a;t==="words"&&!e||t==="off"&&e?a=20:a=10;let s=[];t==="words"&&(Object.keys(Qi).forEach(f=>{const h=Qi[f];h!==void 0&&s.push([f,h])}),s.sort((f,h)=>h[1]-f[1]),s=s.slice(0,a));let n=[];if(t==="biwords"){for(let f=0;f<Z.length;f++){const h=Z.get(f),v=Qi[h];v!==void 0&&(f===0?n.push([h,"",v]):n.push([h,Z.get(f-1),v]))}n.sort((f,h)=>h[2]-f[2]),n=n.slice(0,a)}if((t==="words"&&s.length===0||t==="biwords"&&n.length===0)&&!e)return y("You haven't missed any words",0),!1;let i=[];if(e&&(i=Z.get().map((f,h)=>[f,On[h]??0]),i.sort((f,h)=>f[1]-h[1]),i=i.slice(0,Math.min(a,Math.round(Z.length*.2))),i.length===0&&y("Test too short to classify slow words.",0)),s.length===0&&n.length===0&&i.length===0)return y("Could not start a new custom test",0),!1;const r=[];s.forEach(f=>{for(let h=0;h<f[1];h++)r.push(f[0])}),n.forEach(f=>{for(let h=0;h<f[2];h++)f[1]!==""?r.push(f[1]+" "+f[0]):r.push(f[0])}),i.forEach((f,h)=>{for(let v=0;v<i.length-h;v++)r.push(f[0])});const o=Vt.mode===null?u.mode:Vt.mode,l=Vt.punctuation===null?u.punctuation:Vt.punctuation,c=Vt.numbers===null?u.numbers:Vt.numbers;let m=null;return u.mode==="custom"&&(m=Pd()),$a("custom",!0),Ql(!0),lr(r),Jr("section"),Pm("shuffle"),td((i.length+s.length+n.length)*5),vo("practise",void 0),Vt.mode=o,Vt.punctuation=l,Vt.numbers=c,Vt.customText=m,!0}function nO(){Vt.mode=null,Vt.punctuation=null,Vt.numbers=null,Vt.customText=null}Gt(t=>{t==="mode"&&nO()});const Nm=document.querySelector("#liveStatsTextBottom .liveSpeed"),Rm=document.querySelector("#liveStatsMini .speed");function A9(){Nm.innerHTML="0",Rm.innerHTML="0"}function L9(t,e){let a=t;u.blindMode&&(a=e);const s=Te.typingSpeed(a,{showDecimalPlaces:!1});Nm.innerHTML=s,Rm.innerHTML=s}let pv=!1;function Wx(){u.liveSpeedStyle!=="off"&&pa&&(pv||(u.liveSpeedStyle==="mini"?d(Rm).stop(!0,!1).removeClass("hidden").css("opacity",0).animate({opacity:1},125):d(Nm).stop(!0,!1).removeClass("hidden").css("opacity",0).animate({opacity:1},125),pv=!0))}function Ob(){pv&&(d(Nm).stop(!0,!1).animate({opacity:0},125,()=>{Nm.classList.add("hidden")}),d(Rm).stop(!0,!1).animate({opacity:0},125,()=>{Rm.classList.add("hidden")}),pv=!1)}Gt((t,e)=>{t==="liveSpeedStyle"&&(e==="off"?Ob():Wx())});const jm=document.querySelector("#liveStatsTextBottom .liveBurst"),Dm=document.querySelector("#liveStatsMini .burst");function M9(){jm.innerHTML="0",Dm.innerHTML="0"}async function E9(t){const e=Te.typingSpeed(t,{showDecimalPlaces:!1});Dm.innerHTML=e,jm.innerHTML=e}let mv=!1;function Fx(){u.liveBurstStyle!=="off"&&pa&&(mv||(u.liveBurstStyle==="mini"?d(Dm).stop(!0,!1).removeClass("hidden").css("opacity",0).animate({opacity:1},125):d(jm).stop(!0,!1).removeClass("hidden").css("opacity",0).animate({opacity:1},125),mv=!0))}function Ib(){mv&&(d(jm).stop(!0,!1).animate({opacity:0},125,()=>{d(jm).addClass("hidden")}),d(Dm).stop(!0,!1).animate({opacity:0},125,()=>{d(Dm).addClass("hidden")}),mv=!1)}Gt((t,e)=>{t==="liveBurstStyle"&&(e==="off"?Ib():Fx())});const Bm=document.querySelector("#liveStatsTextBottom .liveAcc"),qm=document.querySelector("#liveStatsMini .acc");function O9(t){let e=Math.floor(t);u.blindMode&&(e=100),qm.innerHTML=e+"%",Bm.innerHTML=e+"%"}function I9(){qm.innerHTML="100%",Bm.innerHTML="100%"}let fv=!1;function zx(){u.liveAccStyle!=="off"&&pa&&(fv||(u.liveAccStyle==="mini"?d(qm).stop(!0,!1).removeClass("hidden").css("opacity",0).animate({opacity:1},125):d(Bm).stop(!0,!1).removeClass("hidden").css("opacity",0).animate({opacity:1},125),fv=!0))}function Pb(){fv&&(d(Bm).stop(!0,!1).animate({opacity:0},125,()=>{d(Bm).addClass("hidden")}),d(qm).stop(!0,!1).animate({opacity:0},125,()=>{d(qm).addClass("hidden")}),fv=!1)}Gt((t,e)=>{t==="liveAccStyle"&&(e==="off"?Pb():zx())});function hs(t,e=!1,a=!1,s=":",n=!0,i=!1){t=Math.abs(t);let r=0,o;i?(r=Math.floor(t/86400),o=Math.floor(t%86400/3600)):o=Math.floor(t/3600);const l=Math.floor(t%3600/60),c=Be(t%3600%60);let m,f,h,v;i&&(r<10&&s!=="text"?m="0"+r:m=r),o<10&&s!=="text"?f="0"+o:f=o,l<10&&s!=="text"?h="0"+l:h=l,c<10&&(l>0||o>0||e)&&s!=="text"?v="0"+c:v=c;let w="";return r>0&&i&&(w+=m,s==="text"?r===1?w+=" day ":w+=" days ":w+=s),(o>0||a)&&(w+=f,s==="text"?o===1?w+=" hour ":w+=" hours ":w+=s),(l>0||o>0||e)&&(w+=h,s==="text"?l===1?w+=" minute ":w+=" minutes ":n&&(w+=s)),n&&(w+=v,s==="text"&&(c===1?w+=" second":w+=" seconds")),o===0&&l===0&&!n&&s==="text"&&(w="less than 1 minute"),w.trim()}let Hx=0;function Wm(){return Hx}function P9(t){Hx=t}function Z9(){Hx++}const w_=d("#barTimerProgress .bar"),iO=d("#barTimerProgress .opacityWrapper"),Zb=d("#liveStatsTextTop .timerProgress"),Fm=d("#liveStatsMini .time");function Ux(){u.mode!=="zen"&&u.timerStyle==="bar"?iO.stop(!0,!0).removeClass("hidden").css("opacity",0).animate({opacity:1},125):u.timerStyle==="text"?Zb.stop(!0,!0).removeClass("hidden").css("opacity",0).animate({opacity:1},125):(u.mode==="zen"||u.timerStyle==="mini")&&Fm.stop(!0,!0).removeClass("hidden").css("opacity",0).animate({opacity:1},125)}function N9(){let t="0vw";(u.mode==="time"||u.mode==="custom"&&ua()==="time")&&(t="100vw"),w_.stop(!0,!0).animate({width:t},0),Fm.text("0"),Zb.text("0")}function Nb(){iO.stop(!0,!0).animate({opacity:0},125),Fm.stop(!0,!0).animate({opacity:0},125,()=>{Fm.addClass("hidden")}),Zb.stop(!0,!0).animate({opacity:0},125)}const kr=Zb[0],xr=Fm[0];function qT(){return u.mode==="custom"&&ua()==="section"?Z.sectionIndexList[Z.currentIndex]-1:E.history.length}function Ch(){const t=Wm();if(u.mode==="time"||u.mode==="custom"&&ua()==="time"){let e=u.time;if(u.mode==="custom"&&ua()==="time"&&(e=Yt()),u.timerStyle==="bar"){const a=100-(t+1)/e*100;w_.stop(!0,!0).animate({width:a+"vw"},ya()?0:1e3,"linear")}else if(u.timerStyle==="text"){let a=hs(e-t);e===0&&(a=hs(t)),kr!==null&&(kr.innerHTML="<div>"+a+"</div>")}else if(u.timerStyle==="mini"){let a=hs(e-t);e===0&&(a=hs(t)),xr!==null&&(xr.innerHTML=a)}}else if(u.mode==="words"||u.mode==="custom"||u.mode==="quote"){let e=Z.length;if(u.mode==="words"&&(e=u.words),u.mode==="custom"&&(e=Yt()),u.mode==="quote"&&(e=(_t==null?void 0:_t.textSplit.length)??1),u.timerStyle==="bar"){const a=Math.floor((Z.currentIndex+1)/e*100);w_.stop(!0,!0).animate({width:a+"vw"},ya()?0:250)}else u.timerStyle==="text"?e===0?kr!==null&&(kr.innerHTML=`<div>${E.history.length}</div>`):kr!==null&&(kr.innerHTML=`<div>${qT()}/${e}</div>`):u.timerStyle==="mini"&&(e===0?xr!==null&&(xr.innerHTML=`${E.history.length}`):xr!==null&&(xr.innerHTML=`${qT()}/${e}`))}else u.mode==="zen"&&(u.timerStyle==="text"?kr!==null&&(kr.innerHTML=`<div>${E.history.length}</div>`):xr!==null&&(xr.innerHTML=`${E.history.length}`))}function R9(){pa&&(Nb(),Ch(),u.timerStyle!=="off"&&setTimeout(()=>{Ux()},125))}Gt((t,e)=>{t==="timerStyle"&&R9()});const WT=3;let ul=!1;function Oo(t,e=!1){t&&!ul?(ul=!0,_E(),d("header").addClass("focus"),d("footer").addClass("focus"),e||d("body").css("cursor","none"),d("main").addClass("focus"),d("#bannerCenter").addClass("focus"),d("#notificationCenter").addClass("focus"),d("#capsWarning").addClass("focus"),d("#ad-vertical-right-wrapper").addClass("focus"),d("#ad-vertical-left-wrapper").addClass("focus"),d("#ad-footer-wrapper").addClass("focus"),d("#ad-footer-small-wrapper").addClass("focus"),Wx(),Fx(),zx(),Ux()):!t&&ul&&(ul=!1,kE(),d("header").removeClass("focus"),d("footer").removeClass("focus"),d("body").css("cursor","default"),d("main").removeClass("focus"),d("#bannerCenter").removeClass("focus"),d("#notificationCenter").removeClass("focus"),d("#capsWarning").removeClass("focus"),d("#app").removeClass("focus"),d("#ad-vertical-right-wrapper").removeClass("focus"),d("#ad-vertical-left-wrapper").removeClass("focus"),d("#ad-footer-wrapper").removeClass("focus"),d("#ad-footer-small-wrapper").removeClass("focus"),Ob(),Ib(),Pb(),Nb())}d(document).on("mousemove",function(t){ul&&xt()!=="loading"&&(xt()==="account"&&ul||t.originalEvent&&(t.originalEvent.movementX>WT||t.originalEvent.movementY>WT)&&Oo(!1))});function j9(){return Math.floor(Math.random()*256).toString(2).padStart(8,"0")}function D9(){const t=ja(1,4);return Array.from({length:t},()=>Math.floor(Math.random()*256).toString(16).padStart(2,"0")).join("")}function B9(t){const e={a:".-",b:"-...",c:"-.-.",d:"-..",e:".",f:"..-.",g:"--.",h:"....",i:"..",j:".---",k:"-.-",l:".-..",m:"--",n:"-.",o:"---",p:".--.",q:"--.-",r:".-.",s:"...",t:"-",u:"..-",v:"...-",w:".--",x:"-..-",y:"-.--",z:"--..",0:"-----",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----.",".":".-.-.-",",":"--..--","?":"..--..","'":".----.","/":"-..-.","(":"-.--.",")":"-.--.-","&":".-...",":":"---...",";":"-.-.-.","=":"-...-","+":".-.-.","-":"-....-",_:"..--.-",'"':".-..-.",$:"...-..-","!":"-.-.--","@":".--.-."};let a="";const s=NF(t);for(let n=0;n<s.length;n++){const i=e[s.toLowerCase()[n]];a+=i!==void 0?i+"/":""}return a}function q9(){const t=ja(1,7);let e="";for(let a=0;a<t;a++)e+=String.fromCharCode(97+ja(0,25));return e}function W9(){const t=ja(1,10);let e="";for(let a=0;a<t;a++){const s=33+ja(0,93);e+=String.fromCharCode(s)}return e}function F9(){const t=ja(1,7);let e="";const a=["`","~","!","@","#","$","%","^","&","*","(",")","-","_","=","+","{","}","[","]","'",'"',"/","\\","|","?",";",":",">","<"];for(let s=0;s<t;s++)e+=mi(a);return e}function rO(t){const e=ja(1,t);let a="";for(let s=0;s<e;s++){let n;s===0?n=ja(1,9):n=ja(0,9),a+=n.toString()}return a}let Lr=null,Ng=null;function z9(){d("#typingTest #memoryTimer").stop(!0,!0).animate({opacity:1},125)}function oO(){d("#typingTest #memoryTimer").stop(!0,!0).animate({opacity:0},125)}function Xl(){Ng!==null&&(clearInterval(Ng),Ng=null),Lr=null,oO()}function H9(){Xl(),Lr=Math.round(Math.pow(Z.length,1.2)),FT(Lr),z9(),Ng=setInterval(()=>{Lr!==null&&(Lr-=1,Lr===0?oO():FT(Lr),Lr<=0&&(Xl(),d("#wordsWrapper").addClass("hidden")))},1e3)}function FT(t){d("#typingTest #memoryTimer").text(`Timer left to memorise all words: ${t}s`)}let bl={};function Ma(t,e,a){bl[t]??(bl[t]={value:e,setFunction:a})}function dO(){Object.keys(bl).forEach(t=>{const e=bl[t];e.setFunction(e.value,!0)}),bl={}}const lO=[];function U9(t){lO.push(t)}async function V9(t){lO.forEach(e=>{try{e(t)}catch(a){console.error("TTS event subscriber threw an error"),console.error(a)}})}const Vx=[];function K9(t){Vx.push(t)}async function uO(t,e){Vx.forEach(a=>{try{a("flash",t,e)}catch(s){console.error("Keymap flash event subscriber threw an error"),console.error(s)}})}async function zr(t){Vx.forEach(e=>{try{e("highlight",t)}catch(a){console.error("Keymap highlight event subscriber threw an error"),console.error(a)}})}const G9=50,Q9=20,Y9=5e3,Dc={};class J9{constructor(){this.average=0,this.count=0}update(e){this.count<G9&&this.count++;const a=1/this.count;this.average=e*a+this.average*(1-a)}}function X9(t,e){var n;const a=Ft.spacing.array;if(a.length===0||typeof a=="string")return;let s=a[a.length-1];e||(s+=Y9),t in Dc||(Dc[t]=new J9),(n=Dc[t])==null||n.update(s)}function eH(t){let e=0,a=0;for(const s of t)s in Dc&&(e+=Dc[s].average,a++);return a===0?0:e/a}function tH(t){let e,a="";for(let s=0;s<Q9;s++){const n=t.randomWord("normal"),i=eH(n);(s===0||e===void 0||i>e)&&(a=n,e=i)}return a}const aH=["","_"," "],sH=100,nH="https://poetrydb.org/random";class iH extends B1{constructor(e,a,s){super(e,a,s),this.title=e,this.author=a,this.words=s,this.cleanUpText()}cleanUpText(){let e=0;const a=[];for(const s of this.words){let n="";for(const i of s)aH.includes(i)||(n+=i);if(n!==""&&(a.push(n),e++,e===sH))break}this.words=a}}async function rH(){console.log("Getting poem");try{const a=(await(await fetch(nH)).json())[0];if(!a)return!1;const s=[];return a.lines.forEach(n=>{n.split(/ +/).forEach(i=>{s.push(i)})}),new iH(a.title,a.author,s)}catch(t){return console.log(t),!1}}async function oH(t){switch(t.name){case"english":return"en";case"spanish":return"es";case"french":return"fr";case"german":return"de";case"portuguese":return"pt";case"arabic":return"ar";case"italian":return"it";case"latin":return"la";case"afrikaans":return"af";case"korean":return"ko";case"russian":return"ru";case"polish":return"pl";case"czech":return"cs";case"slovak":return"sk";case"ukrainian":return"uk";case"lithuanian":return"lt";case"indonesian":return"id";case"greek":return"el";case"turkish":return"tr";case"thai":return"th";case"tamil":return"ta";case"slovenian":return"sl";case"croatian":return"hr";case"dutch":return"nl";case"danish":return"da";case"hungarian":return"hu";case"norwegian_bokmal":return"no";case"norwegian_nynorsk":return"nn";case"hebrew":return"he";case"malay":return"ms";case"romanian":return"ro";case"finnish":return"fi";case"estonian":return"et";case"welsh":return"cy";case"persian":return"fa";case"kazakh":return"kk";case"vietnamese":return"vi";case"swedish":return"sv";case"serbian":return"sr";case"georgian":return"ka";case"catalan":return"ca";case"bulgarian":return"bg";case"esperanto":return"eo";case"bangla":return"bn";case"urdu":return"ur";case"armenian":return"hy";case"myanmar":return"my";case"hindi":return"hi";case"macedonian":return"mk";case"uzbek":return"uz";case"belarusian":return"be";case"azerbaijani":return"az";case"latvian":return"lv";case"euskera":return"eu";default:return"en"}}async function dH(t){Ct();let e="en",a;try{a=await YW(t)}catch(o){console.error(Ge(o,"Failed to find current language group"))}a!==void 0&&(e=await oH(a));const s=`https://${e}.wikipedia.org/api/rest_v1/page/random/summary`,n={title:"",author:""},i=await fetch(s);let r=0;if(i.status===200){const o=await i.json();n.title=o.title,n.author=o.author,r=o.pageid}return new Promise((o,l)=>{i.status!==200&&(Qe(),l(i.status));const c=`https://${e}.wikipedia.org/w/api.php?action=query&format=json&pageids=${r}&prop=extracts&exintro=true&origin=*`,m=new XMLHttpRequest;m.onload=()=>{if(m.readyState===4)if(m.status===200){let f=JSON.parse(m.responseText).query.pages[r.toString()].extract;f=f.replace(/<\/p><p>+/g," "),f=hZ(f),f=f.replace(/\[\d+\]/gi,""),f=f.replace(/[\u200B-\u200D\uFEFF]/g,""),f=tA(f),e==="en"&&(f=f.replace(/[^\x20-\x7E]+/g,"")),f=f.replace(/\s+/g," "),f=f.trim();const h=f.split(" "),v=new B1(n.title,n.author,h);Qe(),o(v)}else Qe(),l(m.status)},m.open("GET",c),m.send()})}function cO(t,e,a,s,n){const i=[],r=Math.round(t/e);for(let o=0;o<e;o++){let c=ja(0,2**r-1).toString(a);if(s){const m=Math.ceil(r/Math.ceil(Math.log2(a)));c="0".repeat(Math.max(0,m-c.length))+c}i.push(c)}return i.join(n)}function zT(t,e,a,s,n,i){const r=n.split(s).map(c=>parseInt(c,a)),o=Math.round(t/e);let l=i;for(let c=0;c<e;c++)l-=o,l<0&&(-l<=o?r[c]&=2**o-1^2**-l-1:r[c]=0);return r.map(c=>c.toString(a)).join(s)+"/"+i.toString()}function lH(){return cO(32,4,10,!1,".")}function uH(){return cO(128,8,16,!0,":")}function pO(t){return t.includes(":")?zT(128,8,16,":",t,ja(16,32)*4):zT(32,4,10,".",t,ja(8,32))}function cH(t){const e=t.split("/");let a=e[0].split(":"),s="";a=a.map(m=>m.replace(/^0+/gm,""));let n=0,i=-1,r=-1,o=0,l=-1,c=-1;for(let m=0;m<a.length;m++)a[m]===""?(l===-1&&(l=m),o++):(c=m-1,n<o&&(n=o,i=l,r=c),o=0,l=-1,c=-1);return n<o&&(n=o,i=l,r=a.length-1),a=a.map((m,f)=>m===""?f>=i&&f<=r&&i!==r?":":"0":m),s=a.join(":"),s=s.replace(/:{3,}/gm,"::"),e.length>1&&(s+="/"+e[1]),s}let Wu=null;class Kx{constructor(e){this.words=e,this.length=this.words.length,this.shuffledIndexes=[],this.orderedIndex=0}resetIndexes(){this.orderedIndex=0,this.shuffledIndexes=[]}randomWord(e){return e==="zipf"?this.words[gZ(this.words.length)]:mi(this.words)}shuffledWord(){return this.shuffledIndexes.length===0&&this.generateShuffledIndexes(),this.words[this.shuffledIndexes.pop()]}generateShuffledIndexes(){this.shuffledIndexes=[];for(let e=0;e<this.length;e++)this.shuffledIndexes.push(e);Vc(this.shuffledIndexes)}nextWord(){return this.orderedIndex>=this.length&&(this.orderedIndex=0),this.words[this.orderedIndex++]}}async function pH(t){return(Wu===null||t!==Wu.words)&&(Wu=new Kx(t)),Wu.resetIndexes(),Wu}function mO(){d("#typingTest #layoutfluidTimer").stop(!0,!0).animate({opacity:1},125)}function Bc(){d("#typingTest #layoutfluidTimer").stop(!0,!0).animate({opacity:0},125)}function xw(t,e){d("#typingTest #layoutfluidTimer").text(`${Zl(e)} in: ${t}s`)}function mH(t,e){const a=Zl(e.replace(/_/g," "));let s=`${a} in: ${t} words`;t===1&&(s=`${a} starting next word`),d("#typingTest #layoutfluidTimer").text(s)}let Fu=!1,ag=0,Cw=0,HT=0,UT=3,Wd=0,Fd=0;function fH(t){Cw--;let e=Math.round(Math.random()),a=Math.round(Math.random()*5-.5);return t?(Fu=!!Math.round(Math.random()),Fu?a=3:a=0):(Fu?(HT===e?Wd++:Wd=0,(Wd>1||Fd>0&&Wd>0)&&(e=1-e,Wd=0),HT=e,a=e*(ag+1)):(UT===e?Fd++:Fd=0,(Fd>1||Fd>0&&Wd>0)&&(e=1-e,Fd=0),UT=e,a=3-e*(ag+1)),Fu=!Fu,Cw<0&&e===0&&(ag=1-ag,Cw=Math.floor(Math.random()*3)+3)),a}function hH(t){const e=["","","",""];let a="";for(let s=0;s<4;s++)a+=e[fH(s===0&&t)];return a}const VT=2;class gH{constructor(){this.chars={},this.count=0}addChar(e){this.count++,e in this.chars?this.chars[e]++:this.chars[e]=1}randomChar(){const e=ja(0,this.count-1);let a=0;for(const[s,n]of Object.entries(this.chars))if(a+=n,a>e)return s;return Object.keys(this.chars)[0]}}class yH extends Kx{constructor(e){super(e),this.ngrams={},this.length=1/0;for(let a of e){a+=" ";let s="";for(const n of a)s in this.ngrams||(this.ngrams[s]=new gH),this.ngrams[s].addChar(n),s=(s+n).slice(-VT)}}randomWord(){let e="";for(;;){const a=e.slice(-VT),s=this.ngrams[a];if(!s){e="";continue}const n=s.randomChar();if(n===" ")break;e+=n}return e}}Wt("simon_says",{applyConfig(){En("next",!0)},rememberSettings(){Ma("keymapMode",u.keymapMode,En)}});Wt("tts",{applyConfig(){En("off",!0)},rememberSettings(){Ma("keymapMode",u.keymapMode,En)},toggleScript(t){if(window.speechSynthesis===void 0){y("Failed to load text-to-speech script",-1);return}t[0]!==void 0&&V9(t[0])}});Wt("arrows",{getWord(t,e){return hH(e===0)},rememberSettings(){Ma("highlightMode",u.highlightMode,Eo)},handleChar(t){return t==="a"||t==="ArrowLeft"||t==="j"?"":t==="s"||t==="ArrowDown"||t==="k"?"":t==="w"||t==="ArrowUp"||t==="i"?"":t==="d"||t==="ArrowRight"||t==="l"?"":t},isCharCorrect(t,e){return(t==="a"||t==="ArrowLeft"||t==="j")&&e===""||(t==="s"||t==="ArrowDown"||t==="k")&&e===""||(t==="w"||t==="ArrowUp"||t==="i")&&e===""||(t==="d"||t==="ArrowRight"||t==="l")&&e===""},async preventDefaultEvent(t){return["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(t.key)},getWordHtml(t,e){let a="";return t===""&&(e&&(a+="<letter>"),a+='<i class="fas fa-arrow-up"></i>',e&&(a+="</letter>")),t===""&&(e&&(a+="<letter>"),a+='<i class="fas fa-arrow-down"></i>',e&&(a+="</letter>")),t===""&&(e&&(a+="<letter>"),a+='<i class="fas fa-arrow-left"></i>',e&&(a+="</letter>")),t===""&&(e&&(a+="<letter>"),a+='<i class="fas fa-arrow-right"></i>',e&&(a+="</letter>")),a}});Wt("rAnDoMcAsE",{alterText(t){let e=t[0];for(let a=1;a<t.length;a++)e[a-1]===e[a-1].toUpperCase()?e+=t[a].toLowerCase():e+=t[a].toUpperCase();return e}});Wt("backwards",{alterText(t){return t.split("").reverse().join("")}});Wt("capitals",{alterText(t){return oh(t)}});Wt("layoutfluid",{applyConfig(){const t=u.customLayoutfluid.split("#")[0]??"qwerty";ed(t,!0),Xo(t,!0)},rememberSettings(){Ma("keymapMode",u.keymapMode,En),Ma("layout",u.layout,ed),Ma("keymapLayout",u.keymapLayout,Xo)},handleSpace(){if(u.mode!=="time"){const t=u.customLayoutfluid?u.customLayoutfluid.split("#"):["qwerty","dvorak","colemak"],e=Z.length,a=Math.floor(e/t.length),s=Math.floor((E.history.length+1)/a),n=a-(Z.currentIndex+1)%a;t[s]?(n<=3&&t[s+1]?(mO(),mH(n,t[s+1])):Bc(),n===a&&(ed(t[s]),Xo(t[s]),n>3&&Bc())):Bc(),setTimeout(()=>{zr(Z.getCurrent().charAt(E.current.length).toString())},1)}},getResultContent(){return u.customLayoutfluid.replace(/#/g," ")},restart(){this.applyConfig&&this.applyConfig(),setTimeout(()=>{zr(Z.getCurrent().substring(E.current.length,E.current.length+1).toString())},1)}});Wt("gibberish",{getWord(){return q9()}});Wt("58008",{getWord(){let t=rO(7);return u.language.startsWith("kurdish")?t=u$(t):u.language.startsWith("nepali")&&(t=c$(t)),t},punctuateWord(t){if(t.length>3&&(Math.random()<.5&&(t=CT(t,ja(1,t.length-2),".")),Math.random()<.75)){const e=ja(1,t.length-2);if(t[e-1]!=="."&&t[e+1]!=="."&&t[e+1]!=="0"){const a=mi(["/","*","-","+"]);t=CT(t,e,a)}}return t},rememberSettings(){Ma("numbers",u.numbers,rn)},handleChar(t){return t===`
`?" ":t}});Wt("ascii",{getWord(){return W9()},punctuateWord(t){return t}});Wt("specials",{getWord(){return F9()}});Wt("read_ahead_easy",{rememberSettings(){Ma("highlightMode",u.highlightMode,Eo)}});Wt("read_ahead",{rememberSettings(){Ma("highlightMode",u.highlightMode,Eo)}});Wt("read_ahead_hard",{rememberSettings(){Ma("highlightMode",u.highlightMode,Eo)}});Wt("memory",{applyConfig(){d("#wordsWrapper").addClass("hidden"),$m(!0,!0),u.keymapMode==="next"&&En("react",!0)},rememberSettings(){Ma("mode",u.mode,$a),Ma("showAllLines",u.showAllLines,$m),u.keymapMode==="next"&&Ma("keymapMode",u.keymapMode,En)},start(){Xl(),d("#words").addClass("hidden")},restart(){H9(),d("#words").removeClass("hidden"),u.keymapMode==="next"&&En("react")}});Wt("nospace",{rememberSettings(){Ma("highlightMode",u.highlightMode,Eo)}});Wt("poetry",{async pullSection(){return rH()}});Wt("wikipedia",{async pullSection(t){return dH((t??"")||"english")}});Wt("weakspot",{getWord(t){return t!==void 0?tH(t):""}});Wt("pseudolang",{async withWords(t){return t!==void 0?new yH(t):new Kx([])}});Wt("IPv4",{getWord(){return lH()},punctuateWord(t){let e=t;return Math.random()<.25&&(e=pO(t)),e},rememberSettings(){Ma("numbers",u.numbers,rn)}});Wt("IPv6",{getWord(){return uH()},punctuateWord(t){let e=t;return Math.random()<.25&&(e=pO(t)),e.includes(":")&&(e=cH(e)),e},rememberSettings(){Ma("numbers",u.numbers,rn)}});Wt("binary",{getWord(){return j9()}});Wt("hexadecimal",{getWord(){return D9()},punctuateWord(t){return`0x${t}`},rememberSettings(){Ma("punctuation",u.punctuation,Fn)}});Wt("zipf",{getWordsFrequencyMode(){return"zipf"}});Wt("ddoouubblleedd",{alterText(t){return t.replace(/./gu,"$&$&")}});Wt("instant_messaging",{alterText(t){return t.toLowerCase().replace(/[.!?]$/g,`
`).replace(/[().'"]/g,"").replace(/\n+/g,`
`)}});function hv(...t){Ye(u.funbox).forEach(e=>{var a;(a=e.functions)!=null&&a.toggleScript&&e.functions.toggleScript(t)})}function vH(t){return Ye(u.funbox).forEach(e=>{var a,s;return(s=(a=e.functions)==null?void 0:a.clearGlobal)==null?void 0:s.call(a)}),dO(),zi(t,!1),!0}function fO(t){if(t==="none"&&vH("none"),!Gk(u.funbox,t)&&!u.funbox.split("#").includes(t))return y(`${Zl(t.replace(/_/g," "))} funbox is not compatible with the current funbox selection`,0),!0;dO();const e=ox(t,!1);return u.funbox.includes(t)?Ye(t).forEach(a=>{var s,n;return(n=(s=a.functions)==null?void 0:s.applyGlobalCSS)==null?void 0:n.call(s)}):Ye(t).forEach(a=>{var s,n;return(n=(s=a.functions)==null?void 0:s.clearGlobal)==null?void 0:n.call(s)}),!(e===!1||e===!0)}async function cl(){var t,e,a,s;return d("body").attr("class",((s=(a=(e=(t=d("body"))==null?void 0:t.attr("class"))==null?void 0:e.split(/\s+/))==null?void 0:a.filter(n=>!n.startsWith("fb-")))==null?void 0:s.join(" "))??""),d("#funBoxTheme").removeAttr("href"),d("#wordsWrapper").removeClass("hidden"),Xl(),jt(),!0}async function Gx(t){if(t==null?t=u.funbox:u.funbox!==t&&(u.funbox=t),!Gk(u.funbox))return y(Ge(void 0,`Failed to activate funbox: funboxes ${u.funbox.replace(/_/g," ")} are not compatible`),-1),zi("none",!0),await cl(),!1;Xl(),await wH(),await _H(),d("#wordsWrapper").removeClass("hidden");let e;try{e=await Lo(u.language)}catch(s){return y(Ge(s,"Failed to activate funbox"),-1),zi("none",!0),await cl(),!1}if(e.ligatures&&Ye(u.funbox).find(s=>{var n;return(n=s.properties)==null?void 0:n.includes("noLigatures")})){y("Current language does not support this funbox mode",0),zi("none",!0),await cl();return}let a=!0;for(const[s,n]of Object.entries(u)){const i=A0(s,n,u.funbox);if(!i.result&&!i.result)if(i.forcedConfigs&&i.forcedConfigs.length>0)s==="mode"&&$a(i.forcedConfigs[0]),s==="words"&&ho(i.forcedConfigs[0]),s==="time"&&oi(i.forcedConfigs[0]),s==="punctuation"&&Fn(i.forcedConfigs[0]),s==="numbers"&&rn(i.forcedConfigs[0]),s==="highlightMode"&&Eo(i.forcedConfigs[0]);else{a=!1;break}}if(!a){u.funbox.includes("#")?y(`Failed to activate funboxes ${u.funbox}: no intersecting forced configs. Disabling funbox`,-1):y(`Failed to activate funbox ${u.funbox}: no forced configs. Disabling funbox`,-1),zi("none",!0),await cl();return}return jt(),Ye(u.funbox).forEach(async s=>{var n,i;(i=(n=s.functions)==null?void 0:n.applyConfig)==null||i.call(n)}),!0}async function bH(){Ye(u.funbox).forEach(async t=>{var e;(e=t.functions)!=null&&e.rememberSettings&&t.functions.rememberSettings()})}Wt("morse",{alterText(t){return B9(t)}});Wt("crt",{applyGlobalCSS(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const e=navigator.userAgent.match(/.*Version\/([0-9]*)\.([0-9]*).*/),a=e!==null?parseInt(e[1]??"0"):0,s=e!==null?parseInt(e[2]??"0"):0;if(a<=16&&s<=5){y("CRT is not available on Safari 16.5 or earlier.",0,{duration:5}),fO("crt");return}}d("body").append('<div id="scanline" />'),d("body").addClass("crtmode"),d("#globalFunBoxTheme").attr("href","funbox/crt.css")},clearGlobal(){d("#scanline").remove(),d("body").removeClass("crtmode"),d("#globalFunBoxTheme").attr("href","")}});async function wH(){var s,n;const t=d("body"),e=Ye(u.funbox).map(i=>"fb-"+i.name.replaceAll("_","-")),a=((n=(s=t==null?void 0:t.attr("class"))==null?void 0:s.split(/\s+/))==null?void 0:n.filter(i=>!i.startsWith("fb-")))??[];return t.attr("class",[...a,...e].join(" ")),!0}async function _H(){const t=d("#funBoxTheme"),e=Ye(u.funbox).find(n=>n.hasCSS==!0),a=e!=null?"funbox/"+e.name+".css":"",s=(t.attr("href")??"")||null;return a!=s&&t.attr("href",a),!0}const kH={keymapShowTopRow:!0,type:"matrix",keys:{row1:[],row2:["sS","tT","pP","hH","**","fF","pP","lL","tT","dD"],row3:["sS","kK","wW","rR","**","rR","bB","gG","sS","zZ"],row4:["aA","oO","eE","uU"],row5:[]}};function xH(t){if(u.mode!=="zen"){t===""&&(t=" ");try{d(".activeKey").removeClass("activeKey");let e;u.language.startsWith("korean")&&(t=xa.disassemble(t)[0]??t),t===" "?e="#keymap .keySpace, #keymap .keySplitSpace":t==='"'?e=`#keymap .keymapKey[data-key*='${t}']`:e=`#keymap .keymapKey[data-key*="${t}"]`,d(e).addClass("activeKey")}catch(e){e instanceof Error&&console.log("could not update highlighted keymap key: "+e.message)}}}async function CH(t,e){if(t===void 0)return;t===" "?t="#keymap .keySpace, #keymap .keySplitSpace":t==='"'?t=`#keymap .keymapKey[data-key*='${t}']`:t=`#keymap .keymapKey[data-key*="${t}"]`;const a=await Mo();try{let s={color:a.bg,backgroundColor:a.sub,borderColor:a.sub};e||u.blindMode?s={color:a.bg,backgroundColor:a.main,borderColor:a.main}:s={color:a.bg,backgroundColor:a.error,borderColor:a.error},d(t).stop(!0,!0).css(s).animate({color:a.sub,backgroundColor:a.subAlt,borderColor:a.sub},ya()?0:500,"easeOutExpo")}catch{}}function TH(){d("#keymap").addClass("hidden")}function SH(){d("#keymap").removeClass("hidden")}async function gv(t=u.layout){if(u.keymapMode!=="off"&&xt()==="test"&&t)try{let e;try{e=await ah()}catch(m){y(Ge(m,"Failed to refresh keymap"),-1);return}let a=e[t],s=t;u.keymapLayout==="overrideSync"?u.layout==="default"?(a=e.qwerty,s="default"):(a=e[u.layout],s=u.layout):(a=e[u.keymapLayout],s=u.keymapLayout);const n=vx&&u.keymapMode==="next"||u.keymapShowTopRow==="always"||a.keymapShowTopRow&&u.keymapShowTopRow!=="never",i=u.keymapStyle==="matrix"||u.keymapStyle==="split_matrix",r=u.keymapStyle==="steno"||u.keymapStyle==="steno_matrix";if(r&&(a=kH),a===void 0)throw new Error("Failed to refresh keymap: layout not found");const o=a.type==="iso";let l="";const c=Object.keys(a.keys);for(let m=0;m<c.length;m++){const f=c[m];let h=a.keys[f];f==="row1"&&(i||u.keymapStyle==="staggered")&&(h=h.slice(1));let v="";if(!(f==="row1"&&(!n||r))){if((f==="row2"||f==="row3"||f==="row4")&&!i&&!r&&(v+="<div></div>"),f==="row4"&&!o&&!i&&!r&&(v+="<div></div>"),i&&(f!=="row5"&&a.matrixShowRightColumn?v+='<div class="keymapKey"></div>':v+="<div></div>"),f==="row5"){if(r)continue;const w=s.replace(/_/g," ");let _="";u.keymapLegendStyle==="blank"&&(_='style="display: none;"'),v+="<div></div>",v+=`<div class="keymapKey keySpace">
          <div class="letter" ${_}>${w}</div>
        </div>`,v+='<div class="keymapSplitSpacer"></div>',v+=`<div class="keymapKey keySplitSpace">
          <div class="letter"></div>
        </div>`}else for(let w=0;w<h.length;w++){if(f==="row2"&&w===12||f==="row4"&&i&&o&&w===0)continue;let _=10;if(a.matrixShowRightColumn&&(_=11),f==="row4"&&i&&o&&(_+=1),(u.keymapStyle==="matrix"||u.keymapStyle==="split_matrix")&&w>=_)continue;const S=h[w],M=f==="row3"&&(w===3||w===6);let I=S[0],me="";u.keymapLegendStyle==="blank"?me='style="display: none;"':u.keymapLegendStyle==="uppercase"&&(I=I.toUpperCase());let P="";f==="row1"&&w===0&&!i&&u.keymapStyle!=="staggered"&&(P=" invisible");const $=`<div class="keymapKey${P}" data-key="${S.replace('"',"&quot;")}">
              <span class="letter" ${me}>${I}</span>
              ${M?"<div class='bump'></div>":""}
          </div>`;let T="";(u.keymapStyle==="split"||u.keymapStyle==="split_matrix"||u.keymapStyle==="alice"||r)&&(f==="row4"&&r&&(w===0||w===2||w===4)?T+='<div class="keymapSplitSpacer"></div>':f==="row4"&&(u.keymapStyle==="split"||u.keymapStyle==="alice")&&o?w===6&&(T+='<div class="keymapSplitSpacer"></div>'):f==="row1"&&(u.keymapStyle==="split"||u.keymapStyle==="alice")?w===7&&(T+='<div class="keymapSplitSpacer"></div>'):f==="row4"&&i&&o?w===6&&(T+='<div class="keymapSplitSpacer"></div>'):w===5&&(T+='<div class="keymapSplitSpacer"></div>')),u.keymapStyle==="alice"&&f==="row4"&&(o&&w===6||!o&&w===5)&&(T+='<div class="extraKey"><span class="letter"></span></div>'),v+=T+$}l+=`<div class="row r${m+1}">${v}</div>`}}d("#keymap").html(l),d("#keymap").removeClass("staggered"),d("#keymap").removeClass("matrix"),d("#keymap").removeClass("split"),d("#keymap").removeClass("split_matrix"),d("#keymap").removeClass("alice"),d("#keymap").removeClass("steno"),d("#keymap").removeClass("steno_matrix"),d("#keymap").addClass(u.keymapStyle)}catch(e){e instanceof Error&&console.log("something went wrong when changing layout, resettings: "+e.message)}}Gt((t,e)=>{t==="layout"&&u.keymapLayout==="overrideSync"&&gv(u.keymapLayout),(t==="keymapLayout"||t==="keymapStyle"||t==="keymapShowTopRow"||t==="keymapMode")&&gv(),t==="keymapMode"&&(e==="off"?TH():SH())});K9((t,e,a)=>{t==="highlight"&&xH(e),t==="flash"&&CH(e,a)});Xs.register(WZ,FZ,zZ,HZ,UZ,VZ,KZ,GZ,QZ,YZ,JZ,XZ,eN,tN);Xs.defaults.animation.duration=0;Xs.defaults.elements.line.tension=.3;Xs.defaults.elements.line.fill="origin";class Au extends Xs{constructor(e,a){super(e,a)}async updateColors(){await AH(this)}getDataset(e){var a;return(a=this.data.datasets)==null?void 0:a.find(s=>s.yAxisID===e)}getScale(e){return this.options.scales[e]}}let KT;const ea=new Au(document.querySelector("#wpmChart"),{type:"line",data:{labels:[],datasets:[{clip:!1,label:"wpm",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:3,yAxisID:"wpm",order:2,pointRadius:1},{clip:!1,label:"raw",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:3,yAxisID:"raw",order:3,pointRadius:1},{clip:!1,label:"errors",data:[],borderColor:"rgba(255, 125, 125, 1)",pointBackgroundColor:"rgba(255, 125, 125, 1)",borderWidth:2,order:1,yAxisID:"error",type:"scatter",pointStyle:"crossRot",pointRadius:function(t){const e=t.dataIndex;return(t.dataset.data[e]??0)<=0?0:3},pointHoverRadius:function(t){const e=t.dataIndex;return(t.dataset.data[e]??0)<=0?0:5}}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},display:!0,title:{display:!1,text:"Seconds"}},wpm:{axis:"y",display:!0,title:{display:!0,text:"Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!0}},raw:{axis:"y",display:!1,title:{display:!0,text:"Raw Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!1}},error:{axis:"y",display:!0,position:"right",title:{display:!0,text:"Errors"},beginAtZero:!0,ticks:{precision:0,autoSkip:!0,autoSkipPadding:20},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},mode:"index",intersect:!1,callbacks:{afterLabel:function(t){var e;if(KT===t)return"";KT=t;try{const a=Math.round(parseFloat(t.label))-1,s=(e=hh[a])==null?void 0:e.words,n=[...new Set(s)],i=n[0],r=to(n);if(i===void 0||r===void 0)return"";H3(i,r)}catch{}return""}}}}}});let hO;const Ce=new Au(document.querySelector(".pageAccount #accountHistoryChart"),{type:"line",data:{datasets:[{yAxisID:"wpm",data:[],fill:!1,borderWidth:0,order:3},{yAxisID:"pb",data:[],fill:!1,stepped:!0,pointRadius:0,pointHoverRadius:0,order:4},{yAxisID:"acc",fill:!1,data:[],pointStyle:"triangle",borderWidth:0,pointRadius:3.5,order:3},{yAxisID:"wpmAvgTen",data:[],fill:!1,pointRadius:0,pointHoverRadius:0,order:2},{yAxisID:"accAvgTen",data:[],fill:!1,pointRadius:0,pointHoverRadius:0,order:2},{yAxisID:"wpmAvgHundred",data:[],fill:!1,pointRadius:0,pointHoverRadius:0,order:1},{yAxisID:"accAvgHundred",label:"accAvgHundred",data:[],fill:!1,pointRadius:0,pointHoverRadius:0,order:1}]},options:{maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",type:"linear",reverse:!0,min:0,ticks:{stepSize:10},display:!1,grid:{display:!1}},wpm:{axis:"y",type:"linear",beginAtZero:!0,min:0,ticks:{stepSize:10},display:!0,title:{display:!0,text:"Words per Minute"},position:"right"},pb:{axis:"y",beginAtZero:!0,min:0,ticks:{stepSize:10},display:!1},acc:{axis:"y",beginAtZero:!0,min:0,max:100,reverse:!0,ticks:{stepSize:10},display:!0,title:{display:!0,text:"Accuracy"},grid:{display:!1},position:"left"},wpmAvgTen:{axis:"y",beginAtZero:!0,min:0,ticks:{stepSize:10},display:!1,grid:{display:!1}},accAvgTen:{axis:"y",beginAtZero:!0,min:0,max:100,reverse:!0,ticks:{stepSize:10},display:!1,grid:{display:!1}},wpmAvgHundred:{axis:"y",beginAtZero:!0,min:0,ticks:{stepSize:10},display:!1,grid:{display:!1}},accAvgHundred:{axis:"y",beginAtZero:!0,min:0,max:100,reverse:!0,ticks:{stepSize:10},display:!1,grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},enabled:!0,intersect:!1,external:function(t){t!==void 0&&(t.tooltip.options.displayColors=!1)},filter:function(t){return t.datasetIndex!==1&&t.datasetIndex!==3&&t.datasetIndex!==4&&t.datasetIndex!==5&&t.datasetIndex!==6},callbacks:{title:function(){return""},beforeLabel:function(t){if(t.datasetIndex!==0){const n=t.dataset.data[t.dataIndex];return`error rate: ${Be(n.errorRate)}%
acc: ${Be(100-n.errorRate)}%`}const e=t.dataset.data[t.dataIndex];let a=`${u.typingSpeedUnit}: ${e.wpm}
raw: ${e.raw}
acc: ${e.acc}

mode: ${e.mode} `;(e.mode==="time"||e.mode==="words")&&(a+=e.mode2);let s=e.difficulty;return s===void 0&&(s="normal"),a+=`
difficulty: ${s}`,a+=`
punctuation: ${e.punctuation}
language: ${e.language}${e.isPb?`

new personal best`:""}

date: ${zt(new Date(e.timestamp),"dd MMM yyyy HH:mm")}`,a},label:function(){return""},afterLabel:function(t){return hO=t.dataIndex,""}}}}}}),Hr=new Au(document.querySelector(".pageAccount #accountActivityChart"),{type:"bar",data:{labels:[],datasets:[{yAxisID:"count",label:"Seconds",data:[],trendlineLinear:{style:"rgba(255,105,180, .8)",lineStyle:"dotted",width:2},order:3},{yAxisID:"avgWpm",label:"Average Wpm",data:[],type:"line",order:2,tension:0,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},type:"time",time:{unit:"day",displayFormats:{day:"d MMM"}},bounds:"ticks",display:!0,title:{display:!1,text:"Date"},offset:!0},count:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:1},display:!0,title:{display:!0,text:"Time typing (minutes)"}},avgWpm:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,position:"right",title:{display:!0,text:"Average Wpm"},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},intersect:!1,mode:"index",callbacks:{title:function(t){const e=t[0],a=e.dataset.data[e.dataIndex];return zt(new Date(a.x),"dd MMM yyyy")},beforeLabel:function(t){const e=t.dataset.data[t.dataIndex];switch(t.datasetIndex){case 0:return`Time Typing: ${hs(Math.round(e.y*60),!0,!0)}
Tests Completed: ${e.amount}`;case 1:return`Average ${u.typingSpeedUnit}: ${Be(e.y)}`;default:return""}},label:function(){return""}}}}}}),wl=new Au(document.querySelector(".pageAccount #accountHistogramChart"),{type:"bar",data:{labels:[],datasets:[{yAxisID:"count",label:"Tests",data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",bounds:"ticks",display:!0,title:{display:!1,text:"Bucket"},offset:!0},count:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,title:{display:!0,text:"Tests"}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},intersect:!1,mode:"index"}}}}),_l=new Au(document.querySelector(".pageAbout #publicStatsHistogramChart"),{type:"bar",data:{labels:[],datasets:[{yAxisID:"count",label:"Users",data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",bounds:"ticks",display:!0,title:{display:!1,text:"Bucket"},offset:!0},count:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,title:{display:!0,text:"Users"}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},intersect:!1,mode:"index"}}}}),Hs=new Au(document.querySelector("#miniResultChartModal canvas"),{type:"line",data:{labels:[],datasets:[{label:"wpm",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"wpm",order:2,pointRadius:2},{label:"raw",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"raw",order:3,pointRadius:2},{label:"errors",data:[],borderColor:"rgba(255, 125, 125, 1)",pointBackgroundColor:"rgba(255, 125, 125, 1)",borderWidth:2,order:1,yAxisID:"error",type:"scatter",pointStyle:"crossRot",pointRadius:function(t){const e=t.dataIndex;return(t.dataset.data[e]??0)<=0?0:3},pointHoverRadius:function(t){const e=t.dataIndex;return(t.dataset.data[e]??0)<=0?0:5}}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},display:!0,title:{display:!1,text:"Seconds"}},wpm:{axis:"y",display:!0,title:{display:!0,text:"Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!0}},raw:{axis:"y",display:!1,title:{display:!0,text:"Raw Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!1}},error:{display:!0,position:"right",title:{display:!0,text:"Errors"},beginAtZero:!0,ticks:{precision:0,autoSkip:!0,autoSkipPadding:20},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},mode:"index",intersect:!1}}}});function $H(){gO(!1),yO(!1),vO(!1),bO(!1)}function Rb(t,e){t?d(`.pageAccount ${e}`).addClass("active"):d(`.pageAccount ${e}`).removeClass("active")}function gO(t=!0){const e=u.accountChart[0]==="on";Rb(e,".toggleResultsOnChart"),Ce.getDataset("wpm").hidden=!e,Ce.getDataset("pb").hidden=!e,Ce.getDataset("wpmAvgTen").hidden=!e,Ce.getDataset("wpmAvgHundred").hidden=!e,Ce.getScale("wpm").display=e,t&&Ce.updateColors()}function yO(t=!0){const e=u.accountChart[0]==="on",a=u.accountChart[1]==="on";if(Rb(a,".toggleAccuracyOnChart"),Ce.getDataset("acc").hidden=!a,Ce.getDataset("accAvgTen").hidden=!a,Ce.getDataset("accAvgHundred").hidden=!a,Ce.getScale("acc").display=a,e)Ce.getScale("acc").min=0,Ce.getScale("accAvgTen").min=0,Ce.getScale("accAvgHundred").min=0;else{const s=Math.floor(Math.min(...Ce.getDataset("acc").data.map(n=>n.y))/10)*10;Ce.getScale("acc").min=s,Ce.getScale("accAvgTen").min=s,Ce.getScale("accAvgHundred").min=s}t&&Ce.updateColors()}function vO(t=!0){const e=u.accountChart[0]==="on",a=u.accountChart[1]==="on",s=u.accountChart[2]==="on";Rb(s,".toggleAverage10OnChart"),a&&(Ce.getDataset("accAvgTen").hidden=!s),e&&(Ce.getDataset("wpmAvgTen").hidden=!s),t&&Ce.updateColors()}function bO(t=!0){const e=u.accountChart[0]==="on",a=u.accountChart[1]==="on",s=u.accountChart[3]==="on";Rb(s,".toggleAverage100OnChart"),a&&(Ce.getDataset("accAvgHundred").hidden=!s),e&&(Ce.getDataset("wpmAvgHundred").hidden=!s),t&&Ce.updateColors()}async function AH(t){var h,v;const e=await Ps("bg"),a=await Ps("sub"),s=await Ps("subAlt"),n=await Ps("main"),i=await Ps("error"),r=await Ps("text"),o=_n(e,s,.75);t.data.datasets[0].borderColor=w=>{var M;return((M=w.raw)==null?void 0:M.isPb)?r:n},t.data.datasets[1]&&(t.data.datasets[1].borderColor=a),t.data.datasets[2]&&(t.data.datasets[2].borderColor=i);const l=t.data.datasets[0];((v=(h=t==null?void 0:t.data)==null?void 0:h.datasets[0])==null?void 0:v.type)===void 0?t.config.type==="line"?l.pointBackgroundColor=w=>{var M;return((M=w.raw)==null?void 0:M.isPb)?r:n}:t.config.type==="bar"&&(l.backgroundColor=n):t.data.datasets[0].type==="bar"?t.data.datasets[0].backgroundColor=n:t.data.datasets[0].type==="line"&&(l.pointBackgroundColor=n);const c=t.data.datasets[1];c!==void 0&&(c.type===void 0?t.config.type==="line"?c.pointBackgroundColor=a:t.config.type==="bar"&&(c.backgroundColor=a):(c==null?void 0:c.type)==="bar"?c.backgroundColor=a:c.type==="line"&&(c.pointBackgroundColor=a)),t.data.datasets.length===2&&(c.borderColor=()=>a);const m=t.data.datasets[2];if(t.data.datasets.length===7){m.borderColor=()=>a;const w=u.accountChart[2]==="on",_=u.accountChart[3]==="on",S=_n(e,r,.2),M=_n(e,n,.2),I=_n(e,n,.4),me=_n(e,a,.2),P=_n(e,a,.4),[$,T,L,V,na,fa,Ca]=t.data.datasets;if($===void 0||T===void 0||L===void 0||V===void 0||na===void 0||fa===void 0||Ca===void 0)return;w&&_?($.pointBackgroundColor=M,T.borderColor=S,L.pointBackgroundColor=me,V.borderColor=I,na.borderColor=P,fa.borderColor=n,Ca.borderColor=a):w&&!_||!w&&_?(T.borderColor=S,$.pointBackgroundColor=I,L.pointBackgroundColor=P,V.borderColor=n,fa.borderColor=n,na.borderColor=a,Ca.borderColor=a):(T.borderColor=S,$.pointBackgroundColor=n,L.pointBackgroundColor=a)}const f=t.options;Object.keys(f.scales).forEach(w=>{const _=f.scales[w];_.ticks.color=a,_.title.color=a,_.grid.color=o,_.grid.tickColor=o,_.grid.borderColor=o});try{l.trendlineLinear.style=a}catch{}t.options.plugins.annotation.annotations.forEach(w=>{w.id!=="funbox-label"&&(w.borderColor=a),w.label.backgroundColor=a,w.label.color=e}),t.update("none")}function LH(t){Xs.defaults.font.family=t.replace(/_/g," ")}function wO(){rh(),Ce.updateColors(),wl.updateColors(),_l.updateColors(),ea.updateColors(),Hr.updateColors(),Hs.updateColors()}Gt((t,e)=>{t==="accountChart"&&xt()==="account"&&(gO(),yO(),vO(),bO()),t==="fontFamily"&&LH(e)});const Kt={blur:{value:0,default:0},brightness:{value:1,default:1},saturate:{value:1,default:1},opacity:{value:1,default:1}};function MH(){let t="";return Object.keys(Kt).forEach(e=>{const a=e;Kt[a].value!==Kt[a].default&&(t+=`${e}(${Kt[a].value}${e==="blur"?"rem":""}) `)}),t}function Lu(){const e={filter:MH(),width:`calc(100% + ${Kt.blur.value*4}rem)`,height:`calc(100% + ${Kt.blur.value*4}rem)`,left:`-${Kt.blur.value*2}rem`,top:`-${Kt.blur.value*2}rem`,position:"absolute"};d(".customBackground img").css(e)}function EH(){d(".section[data-config-name='customBackgroundFilter'] .blur input").val(Kt.blur.value),d(".section[data-config-name='customBackgroundFilter'] .brightness input").val(Kt.brightness.value),d(".section[data-config-name='customBackgroundFilter'] .saturate input").val(Kt.saturate.value),d(".section[data-config-name='customBackgroundFilter'] .opacity input").val(Kt.opacity.value)}function Th(){d(".section[data-config-name='customBackgroundFilter'] .blur .value").html(Kt.blur.value.toFixed(1)),d(".section[data-config-name='customBackgroundFilter'] .brightness .value").html(Kt.brightness.value.toFixed(1)),d(".section[data-config-name='customBackgroundFilter'] .saturate .value").html(Kt.saturate.value.toFixed(1)),d(".section[data-config-name='customBackgroundFilter'] .opacity .value").html(Kt.opacity.value.toFixed(1))}function _O(){EH(),Th()}function OH(t){Kt.blur.value=t[0],Kt.brightness.value=t[1],Kt.saturate.value=t[2],Kt.opacity.value=t[3],_O()}d(".section[data-config-name='customBackgroundFilter'] .blur input").on("input",()=>{Kt.blur.value=parseFloat(d(".section[data-config-name='customBackgroundFilter'] .blur input").val()),Th(),Lu()});d(".section[data-config-name='customBackgroundFilter'] .brightness input").on("input",()=>{Kt.brightness.value=parseFloat(d(".section[data-config-name='customBackgroundFilter'] .brightness input").val()),Th(),Lu()});d(".section[data-config-name='customBackgroundFilter'] .saturate input").on("input",()=>{Kt.saturate.value=parseFloat(d(".section[data-config-name='customBackgroundFilter'] .saturate input").val()),Th(),Lu()});d(".section[data-config-name='customBackgroundFilter'] .opacity input").on("input",()=>{Kt.opacity.value=parseFloat(d(".section[data-config-name='customBackgroundFilter'] .opacity input").val()),Th(),Lu()});d(".section[data-config-name='customBackgroundFilter'] input").on("input",()=>{IH()});const IH=ns(2e3,async()=>{const t=Object.keys(Kt).map(e=>Kt[e].value);gx(t,!1)});Gt((t,e)=>{t==="customBackgroundFilter"&&e&&(OH(e),Lu())});let Na=null,__=!1,tl=0;const mr=["--bg-color","--main-color","--caret-color","--sub-color","--sub-alt-color","--text-color","--error-color","--error-extra-color","--colorful-error-color","--colorful-error-extra-color"];async function PH(){setTimeout(async()=>{let t,e;e=await Ps("bg"),t=await Ps("main"),e===t&&(e="#111",t="#eee");const a=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
  <style>
    #bg{fill:${e};}
    path{fill:${t};}
  </style>
  <g>
    <path id="bg" d="M0 16Q0 0 16 0h32q16 0 16 16v32q0 16-16 16H16Q0 64 0 48"/>
    <path d="M9.09 24.1v21.2h5.12V33.1q.256-4.61 4.48-4.61 3.46.384 3.46 3.84v12.9h5.12v-11.5q-.128-5.25 4.48-5.25 3.46.384 3.46 3.84v12.9h5.12v-12.2q0-9.47-7.04-9.47-4.22 0-7.04 3.46-2.18-3.46-6.02-3.46-3.46 0-6.02 2.43v-2.05M47 18.9v5.12h-4.61v5.12H47v16.1h5.12v-16.1h4.61v-5.12h-4.61V18.9"/>
  </g>
</svg>`;d("#favicon").attr("href","data:image/svg+xml;base64,"+btoa(a))},125)}function ZH(){console.debug("Theme controller clearing custom theme");for(const t of mr)document.documentElement.style.setProperty(t,"")}let zu=[];async function kO(t){return new Promise(e=>{function a(){console.debug("Theme controller swapping elements");const i=d("#currentTheme"),r=d("#nextTheme");if(r.length===0){console.debug("Theme controller failed to swap elements, next is missing");return}i.remove(),r.attr("id","currentTheme")}console.debug("Theme controller loading style",t),zu.push(setTimeout(()=>{Ct()},100)),d("#nextTheme").remove();const s=document.querySelector("#currentTheme"),n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.id="nextTheme",n.onload=()=>{console.debug("Theme controller loaded style",t),Qe(),a(),zu.map(i=>clearTimeout(i)),zu=[],d("#keymap .keymapKey").stop(!0,!0).removeAttr("style"),e()},n.onerror=i=>{console.debug("Theme controller failed to load style",t,i),console.error(`Failed to load theme ${t}`,i),Qe(),y("Failed to load theme",0),a(),zu.map(r=>clearTimeout(r)),zu=[],d("#keymap .keymapKey").stop(!0,!0).removeAttr("style"),e()},t==="custom"?n.href="/themes/serika_dark.css":n.href=`/themes/${t}.css`,s===null?(console.debug("Theme controller appending link to the head",n),document.head.appendChild(n)):(console.debug("Theme controller inserting link after current theme",n),s.after(n))})}async function Xr(t,e,a=!1){console.debug("Theme controller applying theme",t,e,a),ZH();const s=e?"custom":t;if(AF(),d(".keymapKey").attr("style",""),await kO(s),rh(),u.customTheme&&!a||e){const i=e??u.customThemeColors;for(let r=0;r<mr.length;r++){const o=mr[r];document.documentElement.style.setProperty(o,i[r])}}nr("changedTheme",{theme:s});const n=await Mo();d(".keymapKey").attr("style",""),wO(),PH(),d("#metaThemeColor").attr("content",n.bg),NH(a?t:void 0),D1(await Ps("bg"))?d("body").addClass("darkMode"):d("body").removeClass("darkMode")}function NH(t){let e=u.theme;Na!==null&&(e=Na),u.customTheme&&(e="custom"),t!==void 0&&t!==""&&(e=t),e=e.replace(/_/g," "),d(".current-theme .text").text(e)}function RH(t,e){jH(t,e)}const jH=ns(250,(t,e)=>{__=!0,Xr(t,e,!0)});async function Fa(t,e=!1){console.debug("Theme controller setting theme",t,e),await Xr(t,void 0,e),!e&&u.autoSwitchTheme&&(VM(!1),y("Auto switch theme disabled",0))}async function GT(t=!0){__&&(__=!1,t&&(Na!==null?await Xr(Na):u.customTheme?await Xr("custom"):await Xr(u.theme)))}let Vs=[];async function xO(){var e,a;let t;try{t=await Fk()}catch(s){console.error(Ge(s,"Failed to update random theme list"));return}u.randomTheme==="fav"&&u.favThemes.length>0?Vs=u.favThemes:u.randomTheme==="light"?Vs=t.filter(s=>HW(s.bgColor)).map(s=>s.name):u.randomTheme==="dark"?Vs=t.filter(s=>D1(s.bgColor)).map(s=>s.name):u.randomTheme==="on"?Vs=t.map(s=>s.name):u.randomTheme==="custom"&&A()&&(Vs=((a=(e=A())==null?void 0:e.customThemes)==null?void 0:a.map(s=>s._id))??[]),Vc(Vs),tl=0}async function DH(){var e,a,s,n,i;if(Vs.length===0&&(await xO(),Vs.length===0))return;Na=Vs[tl],tl++,tl>=Vs.length&&(Vc(Vs),tl=0);let t;if(u.randomTheme==="custom"){const r=(a=(e=A())==null?void 0:e.customThemes)==null?void 0:a.find(o=>o._id===Na);t=r==null?void 0:r.colors,Na="custom"}if(Ki(!1,!0),await Xr(Na,t),tl>=Vs.length){let r=Na.replace(/_/g," ");u.randomTheme==="custom"&&(r=(((i=(n=(s=A())==null?void 0:s.customThemes)==null?void 0:n.find(o=>o._id===Na))==null?void 0:i.name)??"custom").replace(/_/g," ")),y(r,0)}}async function Tw(){Na!==null&&(Na=null,u.customTheme?await Xr("custom"):await Xr(u.theme))}function CO(){u.customBackgroundSize==="max"?d(".customBackground img").css({objectFit:""}):d(".customBackground img").css({objectFit:u.customBackgroundSize})}function BH(){u.customBackground===""?(d("#words").removeClass("noErrorBorder"),d("#resultWordsHistory").removeClass("noErrorBorder"),d(".customBackground img").remove()):(d("#words").addClass("noErrorBorder"),d("#resultWordsHistory").addClass("noErrorBorder"),d(".customBackground").html(`<img src="${u.customBackground}" alt="" onerror="javascript:window.dispatchEvent(new Event('customBackgroundFailed'))" />`),Lu(),CO())}var XS,yg,e$;(e$=(yg=(XS=window.matchMedia)==null?void 0:XS.call(window,"(prefers-color-scheme: dark)"))==null?void 0:yg.addEventListener)==null||e$.call(yg,"change",t=>{!u.autoSwitchTheme||u.customTheme||(t.matches?Fa(u.themeDark,!0):Fa(u.themeLight,!0))});Gt(async(t,e,a)=>{var s,n,i;t==="randomTheme"&&xO(),t==="customTheme"&&(e?await Fa("custom"):await Fa(u.theme)),t==="customThemeColors"&&(a?RH("custom"):await Fa("custom")),t==="theme"&&(await Tw(),await GT(!1),await Fa(e)),t==="setThemes"&&(await Tw(),await GT(!1),u.autoSwitchTheme?(s=window.matchMedia)!=null&&s.call(window,"(prefers-color-scheme: dark)").matches?await Fa(u.themeDark,!0):await Fa(u.themeLight,!0):e?await Fa("custom"):await Fa(u.theme)),t==="randomTheme"&&e==="off"&&await Tw(),t==="customBackground"&&BH(),t==="customBackgroundSize"&&CO(),t==="autoSwitchTheme"&&(e?(n=window.matchMedia)!=null&&n.call(window,"(prefers-color-scheme: dark)").matches?await Fa(u.themeDark,!0):await Fa(u.themeLight,!0):await Fa(u.theme)),t==="themeLight"&&u.autoSwitchTheme&&!((i=window.matchMedia)!=null&&i.call(window,"(prefers-color-scheme: dark)").matches)&&!a&&await Fa(u.themeLight,!0),t==="themeDark"&&u.autoSwitchTheme&&window.matchMedia!==void 0&&window.matchMedia("(prefers-color-scheme: dark)").matches&&!a&&await Fa(u.themeDark,!0)});window.addEventListener("customBackgroundFailed",()=>{y("Custom background link is either temporairly unavailable or expired. Please make sure the URL is correct or change it",0,{duration:5})});let $e=null,k_=0;function qH(t){(!hd||hd&&t>k_)&&(k_=t)}async function WH(){var i;if(u.paceCaret==="off"&&!hd||(d("#paceCaret").hasClass("hidden")||d("#paceCaret").addClass("hidden"),u.mode==="zen"))return;const t=d("#paceCaret"),e=(i=document==null?void 0:document.querySelector("#words .word"))==null?void 0:i.querySelector("letter"),a=d(e).height();if(e===void 0||a===void 0)return;const n=(await Lo(u.language)).rightToLeft;t.stop(!0,!0).animate({top:e.offsetTop-a/4,left:e.offsetLeft+(n?e.offsetWidth:0)},0,"linear")}async function TO(){var i;d("#paceCaret").addClass("hidden");const t=db(u,_t);let e=0;if(u.paceCaret==="pb"?e=((i=await Mp(u.mode,t,u.punctuation,u.numbers,u.language,u.difficulty,u.lazyMode,u.funbox))==null?void 0:i.wpm)??0:u.paceCaret==="tagPb"?e=await mF(u.mode,t,u.punctuation,u.numbers,u.language,u.difficulty,u.lazyMode):u.paceCaret==="average"?([e]=await W1(u.mode,t,u.punctuation,u.numbers,u.language,u.difficulty,u.lazyMode),e=Math.round(e)):u.paceCaret==="daily"?(e=await pF(u.mode,t,u.punctuation,u.numbers,u.language,u.difficulty,u.lazyMode),e=Math.round(e)):u.paceCaret==="custom"?e=u.paceCaretCustomSpeed:(u.paceCaret==="last"||hd)&&(e=k_),e===void 0||e<1||Number.isNaN(e)){$e=null;return}const a=e*5,s=a/60,n=60/a;$e={wpm:e,cps:s,spc:n,correction:0,currentWordIndex:0,currentLetterIndex:-1,wordsStatus:{},timeout:null},await WH()}async function SO(t){if(!($e===null||!pa||la)){try{if($e.currentLetterIndex++,$e.currentLetterIndex>=Z.get($e.currentWordIndex).length&&($e.currentLetterIndex=-1,$e.currentWordIndex++),!u.blindMode){if($e.correction<0)for(;$e.correction<0;)$e.currentLetterIndex--,$e.currentLetterIndex<=-2&&($e.currentLetterIndex=Z.get($e.currentWordIndex-1).length-1,$e.currentWordIndex--),$e.correction++;else if($e.correction>0)for(;$e.correction>0;)$e.currentLetterIndex++,$e.currentLetterIndex>=Z.get($e.currentWordIndex).length&&($e.currentLetterIndex=-1,$e.currentWordIndex++),$e.correction--}}catch{$e=null,d("#paceCaret").addClass("hidden");return}try{const e=d("#paceCaret");let a,s,n;try{const r=$e.currentWordIndex-(Z.currentIndex-ta),o=document.querySelectorAll("#words .word")[r];$e.currentLetterIndex===-1?a=o.querySelectorAll("letter")[0]:a=o.querySelectorAll("letter")[$e.currentLetterIndex];const l=d(a).height(),c=d(a).width(),m=e.width();if(l===void 0||c===void 0||m===void 0)throw new Error("Undefined current letter height, width or caret width.");const h=(await Lo(u.language)).rightToLeft;s=o.offsetTop+a.offsetTop-u.fontSize*ao(1)*.1,$e.currentLetterIndex===-1?n=o.offsetLeft+a.offsetLeft-m/2+(h?c:0):n=o.offsetLeft+a.offsetLeft-m/2+(h?0:c),e.removeClass("hidden")}catch{e.addClass("hidden")}const i=t-performance.now();if(s!==void 0){let r=d("#words .smoothScroller").height();r===void 0&&(r=0),d("#paceCaret").css({top:s-r}),u.smoothCaret!=="off"?e.stop(!0,!0).animate({left:n},ya()?0:i,"linear"):e.stop(!0,!0).animate({left:n},0,"linear")}$e.timeout=setTimeout(()=>{SO(t+(($e==null?void 0:$e.spc)??0)*1e3).catch(()=>{$e=null})},i)}catch(e){console.error(e),d("#paceCaret").addClass("hidden")}}}function FH(){($e==null?void 0:$e.timeout)!=null&&clearTimeout($e.timeout),$e=null}function QT(t,e){t?$e!==null&&$e.wordsStatus[Z.currentIndex]===!0&&!u.blindMode&&($e.wordsStatus[Z.currentIndex]=void 0,$e.correction-=e.length+1):$e!==null&&$e.wordsStatus[Z.currentIndex]===void 0&&!u.blindMode&&($e.wordsStatus[Z.currentIndex]=!0,$e.correction+=e.length+1)}function zH(){SO(performance.now()+(($e==null?void 0:$e.spc)??0)*1e3)}Gt(t=>{t==="paceCaret"&&TO()});Gt(t=>{t==="monkey"&&pa&&(u.monkey?d("#monkey").removeClass("hidden"):d("#monkey").addClass("hidden"))});let Ks=!1,Gs=!1;const Sa={left:!1,right:!1,last:"right"},Sw={"00":document.querySelector("#monkey .up"),"01":document.querySelector("#monkey .right"),10:document.querySelector("#monkey .left"),11:document.querySelector("#monkey .both")},$w={"00":document.querySelector("#monkey .fast .up"),"01":document.querySelector("#monkey .fast .right"),10:document.querySelector("#monkey .fast .left"),11:document.querySelector("#monkey .fast .both")};function YT(t){return t?"1":"0"}function $O(){var t,e,a;if(u.monkey&&!((t=document.querySelector("#monkey"))!=null&&t.classList.contains("hidden"))){Object.keys(Sw).forEach(n=>{var i;(i=Sw[n])==null||i.classList.add("hidden")}),Object.keys($w).forEach(n=>{var i;(i=$w[n])==null||i.classList.add("hidden")});const s=`${YT(Ks)}${YT(Gs)}`;(e=Sw[s])==null||e.classList.remove("hidden"),(a=$w[s])==null||a.classList.remove("hidden")}}function HH(t){if(!u.monkey)return;const e=Xg(t,130,180,0,1);d("#monkey .fast").animate({opacity:e},1e3);let a=Xg(t,130,180,.25,.01);a===.25&&(a=0),d("#monkey").css({animationDuration:a+"s"})}function UH(t){if(!u.monkey)return;const{leftSide:e,rightSide:a}=kx(t.code);e&&a?Sa.last==="left"?Gs?Ks||(Ks=!0,Sa.last="left",Sa.left=!0):(Gs=!0,Sa.last="right",Sa.right=!0):Ks?Gs||(Gs=!0,Sa.last="right",Sa.right=!0):(Ks=!0,Sa.last="left",Sa.left=!0):(Ks=Ks||e,Gs=Gs||a),$O()}function VH(t){if(!u.monkey)return;const{leftSide:e,rightSide:a}=kx(t.code);e&&a?Sa.left&&Sa.last==="left"?(Ks=!1,Sa.left=!1):Sa.right&&Sa.last==="right"?(Gs=!1,Sa.right=!1):(Ks=Ks&&!Sa.left,Gs=Gs&&!Sa.right):(Ks=Ks&&!e,Gs=Gs&&!a),$O()}function KH(){u.monkey&&d("#monkey").css("opacity",0).removeClass("hidden").animate({opacity:1},125)}function AO(){d("#monkey").css("opacity",1).animate({opacity:1},125,()=>{d("#monkey").addClass("hidden"),d("#monkey .fast").stop(!0,!0).css("opacity",0),d("#monkey").stop(!0,!0).css({animationDuration:"0s"})})}const LO=[];function GH(t){LO.push(t)}function zm(t,e,a){LO.forEach(s=>{try{s(t,e,a)}catch(n){console.error("Timer event subscriber threw an error"),console.error(n)}})}let zo=0,Tn=null;const sg=1e3;let ng=0,oa=!1;function QH(){oa=!0}function Qx(){P9(0),Tn!==null&&clearTimeout(Tn)}function YH(){oa&&console.time("premid");const t=document.querySelector("#premidSecondsLeft");t!==null&&(t.innerHTML=(u.time-Wm()).toString()),oa&&console.timeEnd("premid")}function JH(){oa&&console.time("timer progress update"),(u.mode==="time"||u.mode==="custom"&&ua()==="time")&&Ch(),oa&&console.timeEnd("timer progress update")}function XH(){oa&&console.time("calculate wpm and raw");const t=Bx();return oa&&console.timeEnd("calculate wpm and raw"),oa&&console.time("update live wpm"),L9(t.wpm,t.raw),oa&&console.timeEnd("update live wpm"),oa&&console.time("push to history"),fE(t.wpm),hE(t.raw),oa&&console.timeEnd("push to history"),t}function eU(t){oa&&console.time("update monkey");const e=u.blindMode?t.raw:t.wpm;HH(e),oa&&console.timeEnd("update monkey")}function tU(){oa&&console.time("calculate acc");const t=Be(xh());return oa&&console.timeEnd("calculate acc"),t}function aU(){if(oa&&console.time("layoutfluid"),u.funbox.split("#").includes("layoutfluid")&&u.mode==="time"){const t=u.customLayoutfluid?u.customLayoutfluid.split("#"):["qwerty","dvorak","colemak"],e=u.time/t.length,a=Wm(),s=Math.floor(a/e),n=t[s],i=[];for(let r=1;r<t.length;r++)i.push(Math.floor(e*r));i.includes(a+3)?(mO(),xw(3,t[s+1])):i.includes(a+2)?xw(2,t[s+1]):i.includes(a+1)&&xw(1,t[s+1]),u.layout!==n&&n!==void 0&&(Bc(),ed(n,!0),Xo(n,!0))}oa&&console.timeEnd("layoutfluid")}function sU(t,e){if(oa&&console.time("fail conditions"),kb(),Cb(),xb(),u.minWpm==="custom"&&t.wpm<u.minWpmCustomSpeed&&Z.currentIndex>3){Tn!==null&&clearTimeout(Tn),Op(),zo=0,zm("fail","min speed");return}if(u.minAcc==="custom"&&e<u.minAccCustom){Tn!==null&&clearTimeout(Tn),Op(),zo=0,zm("fail","min accuracy");return}oa&&console.timeEnd("fail conditions")}function nU(){if(oa&&console.time("times up check"),(u.mode==="time"||u.mode==="custom"&&ua()==="time")&&(Wm()>=u.time&&u.time!==0&&u.mode==="time"||Wm()>=Yt()&&Yt()!==0&&u.mode==="custom")){Tn!==null&&clearTimeout(Tn),vh(),E.pushHistory(),wa.pushHistory(),Op(),zo=0,zm("finish");return}oa&&console.timeEnd("times up check")}let x_=[];function iU(){return x_}async function rU(){oa&&console.time("timer step -----------------------------"),Z9(),YH(),JH();const t=XH(),e=tU();eU(t),aU(),sU(t,e),nU(),oa&&console.timeEnd("timer step -----------------------------")}async function oU(){Op(),zo=0,x_=[],ng=xd+sg,function t(){const e=ng-performance.now();x_.push({dateNow:Date.now(),now:performance.now(),expected:ng,nextDelay:e}),(u.mode==="time"&&u.time<130&&u.time>0||u.mode==="words"&&u.words<250&&u.words>0)&&(e<sg/2&&LF(),e<sg/10&&(zo++,zo>5&&(y('This could be caused by "efficiency mode" on Microsoft Edge.'),y("Stopping the test due to bad performance. This would cause test calculations to be incorrect. If this happens a lot, please report this.",-1),zm("fail","slow timer")))),Tn=setTimeout(function(){if(!pa){Tn!==null&&clearTimeout(Tn),Op(),zo=0;return}rU(),ng+=sg,t()},e)}()}let Hm=0,Yx=!1,MO;function dU(t){if(Yx&&new Date().getDate()>MO){Hm=t;return}Hm+=t}function lU(){return hs(Math.round(Hm),!0,!0)+(Yx?" today":" session")}function uU(){const t=new Date;t.setSeconds(0),t.setMinutes(0),t.setHours(0),t.setMilliseconds(0),MO=t.getDate();const e=t.getTime();Hm=0;const a=A();if(!a)return;const s=a.results;s==null||s.forEach(n=>{const i=new Date(n.timestamp);i.setSeconds(0),i.setMinutes(0),i.setHours(0),i.setMilliseconds(0),i.getTime()>=e&&(Hm+=n.testDuration+n.incompleteTestSeconds-n.afkDuration)}),Yx=!0}let C_=!1;function EO(){ds&&!C_&&!ks&&(y("Challenge cleared",0),R1(null))}function cU(t){var e,a,s;try{if(ds){const n=t.afkDuration/t.testDuration*100;if(n>10)return y("Challenge failed: AFK time is greater than 10%",0),null;if(ds.requirements===void 0)return y(`${ds.display} challenge passed!`,1),ds.name;{let i=!0;const r=[];for(const o in ds.requirements){if(!i)return null;const l=ds.requirements[o];if(l===void 0)throw new Error("Requirement value is undefined");if(o==="wpm"){const c=Object.keys(l)[0];c==="exact"?Math.round(t.wpm)!==l.exact&&(i=!1,r.push(`WPM not ${l.exact}`)):c==="min"&&t.wpm<Number(l.min)&&(i=!1,r.push(`WPM below ${l.min}`))}else if(o==="acc"){const c=Object.keys(l)[0];c==="exact"?t.acc!==l.exact&&(i=!1,r.push(`Accuracy not ${l.exact}`)):c==="min"&&t.acc<Number(l.min)&&(i=!1,r.push(`Accuracy below ${l.min}`))}else if(o==="afk")Object.keys(l)[0]==="max"&&Math.round(n)>Number(l.max)&&(i=!1,r.push(`AFK percentage above ${l.max}`));else if(o==="time")Object.keys(l)[0]==="min"&&Math.round(t.testDuration)<Number(l.min)&&(i=!1,r.push(`Test time below ${l.min}`));else if(o==="funbox"){const c=(e=l.exact)==null?void 0:e.toString().split("#").sort().join("#");if(c===void 0)throw new Error("Funbox mode is undefined");if(c!==t.funbox){i=!1;for(const f of c.split("#"))((a=t.funbox)==null?void 0:a.split("#").find(h=>h===f))===void 0&&r.push(`${f} funbox not active`);const m=(s=t.funbox)==null?void 0:s.split("#");if(m!==void 0&&m.length>0)for(const f of m)c.split("#").find(h=>h===f)===void 0&&r.push(`${f} funbox active`)}}else if(o==="raw")Object.keys(l)[0]==="exact"&&Math.round(t.rawWpm)!==l.exact&&(i=!1,r.push(`Raw WPM not ${l.exact}`));else if(o==="con")Object.keys(l)[0]==="exact"&&Math.round(t.consistency)!==l.exact&&(i=!1,r.push(`Consistency not ${l.exact}`));else if(o==="config")for(const c in l){const m=l[c];u[c]!==m&&(i=!1,r.push(`${c} not set to ${m}`))}}return i?(ds.autoRole&&y("You will receive a role shortly. Please don't post a screenshot in challenge submissions.",1,{duration:5}),y(`${ds.display} challenge passed!`,1),ds.name):(y(`${ds.display} challenge failed: ${r.join(", ")}`,0),null)}}else return null}catch(n){return console.error(n),y(`Something went wrong when verifying challenge: ${n.message}`,0),null}}async function pU(t){C_=!0,zi("none");let e;try{e=await eF()}catch(n){const i=Ge(n,"Failed to setup challenge");return y(i,-1),jt(),setTimeout(()=>{d("header .config").removeClass("hidden"),d(".page.pageTest").removeClass("hidden")},250),!1}const a=e.filter(n=>n.name.toLowerCase()===t.toLowerCase())[0];let s;try{if(a===void 0)return y("Challenge not found",0),jt(),setTimeout(()=>{d("header .config").removeClass("hidden"),d(".page.pageTest").removeClass("hidden")},250),!1;if(a.type==="customTime")oi(a.parameters[0],!0),$a("time",!0),si("normal",!0),a.name==="englishMaster"&&(Kl("english_10k",!0),rn(!0,!0),Fn(!0,!0));else if(a.type==="customWords")ho(a.parameters[0],!0),$a("words",!0),si("normal",!0);else if(a.type==="customText")lr(a.parameters[0].split(" ")),Pm(a.parameters[1]),td(a.parameters[2]),Jr(a.parameters[3]),Ql(a.parameters[4]),$a("custom",!0),si("normal",!0);else if(a.type==="script"){Ct();const n=await fetch("/challenges/"+a.parameters[0]);if(Qe(),n.status!==200)throw new Error(`${n.status} ${n.statusText}`);let r=(await n.text()).trim();r=r.replace(/[\n\r\t ]/gm," "),r=r.replace(/ +/gm," "),lr(r.split(" ")),Pm("repeat"),Jr("word"),Ql(!1),$a("custom",!0),si("normal",!0),a.parameters[1]!==null&&KM(a.parameters[1]),a.parameters[2]!==null&&Gx(a.parameters[2])}else a.type==="accuracy"?(oi(0,!0),$a("time",!0),si("master",!0)):a.type==="funbox"?(zi(a.parameters[0],!0),si("normal",!0),a.parameters[1]==="words"?ho(a.parameters[2],!0):a.parameters[1]==="time"&&oi(a.parameters[2],!0),$a(a.parameters[1],!0),a.parameters[3]!==void 0&&si(a.parameters[3],!0)):a.type==="special"&&a.name==="semimak"&&($a("time",!0),oi(120,!0),Kl("english_10k",!0),Fn(!0,!0),dx("word",!0),ed("semimak",!0),Xo("overrideSync",!0),En("static",!0));return jt(),s=a.message,d("header .config").removeClass("hidden"),d(".page.pageTest").removeClass("hidden"),s===void 0?y(`Challenge '${a.display}' loaded.`,0):y("Challenge loaded. "+s,0),R1(a),C_=!1,!0}catch(n){return y(Ge(n,"Failed to load challenge"),-1),!1}}Gt(t=>{["difficulty","numbers","punctuation","mode","funbox","paceCaret","showAllLines","showLiveWpm","highlightMode","time","words","keymapMode","keymapLayout","layout"].includes(t)&&EO()});let wn=0,Tt=null,Ht=null;function mU(){Tt=null}function fU(){d("#quoteRateModal .quote .text").text("-"),d("#quoteRateModal .quote .source .val").text("-"),d("#quoteRateModal .quote .id .val").text("-"),d("#quoteRateModal .quote .length .val").text("-"),d("#quoteRateModal .ratingCount .val").text("-"),d("#quoteRateModal .ratingAverage .val").text("-")}function OO(t){return!t.totalRating||!t.ratings?0:Math.round(t.totalRating/t.ratings*10)/10}async function IO(t){if(!t)return;Ht=t;const e=await K.quotes.getRating({query:{quoteId:Ht.id,language:Ht.language}});if(Qe(),e.status!==200){y("Failed to get quote ratings: "+e.body.message,-1);return}return e.body.data===null?{}:(Tt=e.body.data,Tt!==void 0&&!Tt.average&&(Tt.average=OO(Tt)),Tt)}function Rg(t){const e=t||wn;d("#quoteRateModal .star").removeClass("active");for(let a=1;a<=e;a++)d(`#quoteRateModal .star[data-rating=${a}]`).addClass("active")}async function hU(){var t;Tt||await IO(),d("#quoteRateModal .ratingCount .val").text((Tt==null?void 0:Tt.ratings)??"0"),d("#quoteRateModal .ratingAverage .val").text(((t=Tt==null?void 0:Tt.average)==null?void 0:t.toFixed(1))??"-")}function gU(){if(!Ht)return;let t;Ht.group===0?t="short":Ht.group===1?t="medium":Ht.group===2?t="long":Ht.group===3&&(t="thicc"),d("#quoteRateModal .quote .text").text(Ht.text),d("#quoteRateModal .quote .source .val").text(Ht.source),d("#quoteRateModal .quote .id .val").text(Ht.id),d("#quoteRateModal .quote .length .val").text(t),hU()}function yU(t,e){PO.show({...e,beforeAnimation:async()=>{var n,i;fU(),Ht=t,wn=0;const a=A(),s=(i=(n=a==null?void 0:a.quoteRatings)==null?void 0:n[Ht.language])==null?void 0:i[Ht.id];s&&(wn=s),Rg(),gU()}})}function vU(t=!1){PO.hide({clearModalChain:t})}async function bU(){var n,i;if(wn===0){y("Please select a rating");return}if(!Ht)return;vU(!0);const t=await K.quotes.addRating({body:{quoteId:Ht.id,language:Ht.language,rating:wn}});if(Qe(),t.status!==200){y("Failed to submit quote rating: "+t.body.message,-1);return}const e=A();if(!e)return;const a=e.quoteRatings??{},s=(a==null?void 0:a[Ht.language])??{};if(s!=null&&s[Ht.id]){const r=(n=a[Ht.language])==null?void 0:n[Ht.id],o=wn-r;s[Ht.id]=wn,Tt={ratings:Tt==null?void 0:Tt.ratings,totalRating:isNaN(Tt==null?void 0:Tt.totalRating)?0:(Tt==null?void 0:Tt.totalRating)+o,quoteId:Ht.id,language:Ht.language},y("Rating updated",1)}else s[Ht.id]=wn,Tt!=null&&Tt.ratings&&Tt.totalRating?(Tt.ratings++,Tt.totalRating+=wn):Tt={ratings:1,totalRating:wn,quoteId:Ht.id,language:Ht.language},y("Rating submitted",1);e.quoteRatings=a,Ea(e),Tt.average=OO(Tt),d(".pageTest #result #rateQuoteButton .rating").text((i=Tt.average)==null?void 0:i.toFixed(1)),d(".pageTest #result #rateQuoteButton .icon").removeClass("far"),d(".pageTest #result #rateQuoteButton .icon").addClass("fas")}async function wU(t){var a;(a=t.querySelector(".submitButton"))==null||a.addEventListener("click",()=>{bU()});const e=t.querySelectorAll(".stars button.star");for(const s of e)s.addEventListener("click",n=>{wn=parseInt(n.currentTarget.getAttribute("data-rating")),Rg()}),s.addEventListener("mouseenter",n=>{const i=parseInt(n.currentTarget.getAttribute("data-rating"));Rg(i)}),s.addEventListener("mouseleave",()=>{Rg()})}const PO=new Pt({dialogId:"quoteRateModal",setup:wU}),_U=[{type:"leaderboard_atf",selectorId:"ad-result-wrapper"},{type:"med_rect_btf",selectorId:"ad-result-small-wrapper"}],kU=[{type:"leaderboard_atf",selectorId:"ad-result-wrapper"},{type:"med_rect_btf",selectorId:"ad-result-small-wrapper"},{type:"sky_btf",selectorId:"ad-vertical-right-wrapper"},{type:"sky_btf",selectorId:"ad-vertical-left-wrapper"}],xU=[{type:"leaderboard_atf",selectorId:"ad-result-wrapper"},{type:"med_rect_btf",selectorId:"ad-result-small-wrapper"},{type:"sky_btf",selectorId:"ad-vertical-right-wrapper"},{type:"sky_btf",selectorId:"ad-vertical-left-wrapper"},{type:"leaderboard_btf",selectorId:"ad-footer-wrapper"},{type:"med_rect_btf",selectorId:"ad-footer-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-about-1-wrapper"},{type:"med_rect_btf",selectorId:"ad-about-1-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-about-2-wrapper"},{type:"med_rect_btf",selectorId:"ad-about-2-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-settings-1-wrapper"},{type:"med_rect_btf",selectorId:"ad-settings-1-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-settings-2-wrapper"},{type:"med_rect_btf",selectorId:"ad-settings-2-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-settings-3-wrapper"},{type:"med_rect_btf",selectorId:"ad-settings-3-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-account-1-wrapper"},{type:"med_rect_btf",selectorId:"ad-account-1-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-account-2-wrapper"},{type:"med_rect_btf",selectorId:"ad-account-2-small-wrapper"}];let jb=!1;function CU(){const t="1024888",e="74058";window.ramp={que:[],passiveMode:!0,forcePath:"320x50-test",onReady:()=>{jb=!0,Db()}};const a=document.getElementsByTagName("head")[0],s=document.createElement("script");s.setAttribute("async",!0),s.src=`//cdn.intergient.com/${t}/${e}/ramp.js`,a.appendChild(s),window._pwGA4PageviewId="".concat(Date.now()),window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config","G-KETCPNHRJF",{send_page_view:!1}),gtag("event","ramp_js",{send_to:"G-KETCPNHRJF",pageview_id:window._pwGA4PageviewId})}function ZO(){let t;u.ads==="result"?t=_U:u.ads==="on"?t=kU:u.ads==="sellout"&&(t=xU);const e=[];for(const a of t){const s=document.querySelector(`#${a.selectorId}`);s&&window.getComputedStyle(s).display!=="none"&&s.offsetParent!==null&&e.push(a)}return e}async function Db(){if(jb){if(xt()==="test"&&!la){ramp.destroyUnits("all");return}await ramp.destroyUnits("all"),await ramp.addUnits(ZO()),await ramp.displayUnits()}}async function TU(){}function SU(){jb&&ramp.destroyUnits("all")}async function $U(){if(!jb)return;const t=ZO();await ramp.addUnits(t),await ramp.displayUnits()}const AU=900;let ig=!0;const LU=1330;let rg=!0,Sh=!1,Bb,Um;function NO(){CU(),setInterval(()=>{pa||TU()},6e4),Sh=!0}function MU(){T_(),RO(),EU()}function T_(){d("#ad-footer-wrapper").remove(),d("#ad-footer-small-wrapper").remove(),d("#ad-about-1-wrapper").remove(),d("#ad-about-1-small-wrapper").remove(),d("#ad-about-2-wrapper").remove(),d("#ad-about-2-small-wrapper").remove(),d("#ad-settings-1-wrapper").remove(),d("#ad-settings-1-small-wrapper").remove(),d("#ad-settings-2-wrapper").remove(),d("#ad-settings-2-small-wrapper").remove(),d("#ad-settings-3-wrapper").remove(),d("#ad-settings-3-small-wrapper").remove(),d("#ad-account-1-wrapper").remove(),d("#ad-account-1-small-wrapper").remove(),d("#ad-account-2-wrapper").remove(),d("#ad-account-2-small-wrapper").remove()}function RO(){d("#ad-vertical-right-wrapper").remove(),d("#ad-vertical-left-wrapper").remove()}function EU(){d("#ad-result-wrapper").remove(),d("#ad-result-small-wrapper").remove()}function OU(){}function jO(t=!1){const e=ig;window.innerWidth>AU?ig=!0:ig=!1,!t&&(u.ads==="off"||!Sh||e!==ig&&Db())}function DO(t=!1){const e=rg;window.innerWidth>LU?rg=!0:rg=!1,!t&&(u.ads==="off"||!Sh||e!==rg&&Db())}async function Jx(){return new Promise(t=>{window.ramp===void 0&&(Bb=!0),t()})}async function Xx(){return new Promise(t=>{if(Um===void 0){Um=!1,t();return}t()})}async function IU(){return u.ads==="off"?!1:Sh?(await Jx(),await Xx(),Bb||Um?!1:Db()):(NO(),!0)}async function PU(){if(u.ads!=="off"){if(Sh||NO(),await Jx(),await Xx(),Bb){d("#ad-result-wrapper .iconAndText .text").html(`
    Using an ad blocker? No worries
    <div class="smalltext">
      We understand ads can be annoying
      <br />
      You can
      <i>disable all ads</i>
      in the settings
    </div>
    `);return}if(Um){d("#ad-result-wrapper .iconAndText .text").html(`
    Ads not working? Ooops
    <div class="smalltext">
      You may have a cookie popup blocker enabled - ads will not show without your consent
      <br />
      You can also 
      <i>disable all ads</i>
      in the settings if you wish
    </div>
    `);return}$U()}}function yv(t){t?(d("#ad-vertical-left-wrapper").removeClass("testPage"),d("#ad-vertical-right-wrapper").removeClass("testPage"),d("#ad-footer-wrapper").removeClass("testPage"),d("#ad-footer-small-wrapper").removeClass("testPage")):(d("#ad-vertical-left-wrapper").addClass("testPage"),d("#ad-vertical-right-wrapper").addClass("testPage"),d("#ad-footer-wrapper").addClass("testPage"),d("#ad-footer-small-wrapper").addClass("testPage"))}function ZU(){ramp.showCmpModal()}function NU(){SU()}const RU=ns(500,OU),jU=ns(500,jO),DU=ns(500,DO);d(window).on("resize",()=>{RU(),jU(),DU()});Gt((t,e)=>{t==="ads"&&(e==="off"?MU():e==="result"?(T_(),RO()):e==="on"&&T_())});vN(()=>{});d(document).ready(()=>{jO(!0),DO()});window.onerror=function(t){};const Aw={quotes:[],length:0,language:null,groups:[]};class BU{constructor(){this.quoteCollection=Aw,this.quoteQueue=[],this.queueIndex=0}async getQuotes(e,a){var n;const s=ii(e);if(this.quoteCollection.language!==s){let i;try{i=await As(`quotes/${s}.json`)}catch(r){if(r instanceof Error&&((n=r==null?void 0:r.message)!=null&&n.includes("404")))return Aw;throw r}if(i.quotes===void 0||i.quotes.length===0)return Aw;this.quoteCollection={quotes:[],length:i.quotes.length,groups:[],language:i.language},i.quotes.forEach(r=>{const o={text:r.text,britishText:r.britishText,source:r.source,length:r.length,id:r.id,language:i.language,group:0};this.quoteCollection.quotes.push(o)}),i.groups.forEach((r,o)=>{const l=r[0],c=r[1];this.quoteCollection.groups[o]=this.quoteCollection.quotes.filter(m=>m.length>=l&&m.length<=c?(m.group=o,!0):!1)}),a!==void 0&&this.updateQuoteQueue(a)}return this.quoteCollection}getQuoteById(e){return this.quoteCollection.quotes.find(s=>s.id===e)}updateQuoteQueue(e){this.quoteQueue=[],e.forEach(a=>{var s;a<0||(s=this.quoteCollection.groups[a])==null||s.forEach(n=>{this.quoteQueue.push(n)})}),Vc(this.quoteQueue),this.queueIndex=0}getRandomQuote(){if(this.quoteQueue.length===0)return null;this.queueIndex>=this.quoteQueue.length&&(this.queueIndex=0,Vc(this.quoteQueue));const e=this.quoteQueue[this.queueIndex];return this.queueIndex+=1,e}getRandomFavoriteQuote(e){const a=A();if(!a)return null;const s=ii(e),n=[],{favoriteQuotes:i}=a;if(i===void 0||(Object.keys(i).forEach(l=>{ii(l)===s&&n.push(...i[l]??[])}),n.length===0))return null;const r=mi(n);return this.getQuoteById(parseInt(r,10))??null}isQuoteFavorite({language:e,id:a}){const s=A();if(!s)return!1;const{favoriteQuotes:n}=s;if(n===void 0)return!1;const i=ii(e);return Object.keys(n).find(o=>i!==ii(o)?!1:(n[o]??[]).includes(a.toString()))!==void 0}async setQuoteFavorite(e,a){var n,i,r,o,l;const s=A();if(!s)throw new Error("Snapshot is not available");if(a){const c=await K.users.addQuoteToFavorites({body:{language:e.language,quoteId:`${e.id}`}});if(c.status===200)s.favoriteQuotes===void 0&&(s.favoriteQuotes={}),s.favoriteQuotes[e.language]||(s.favoriteQuotes[e.language]=[]),(l=s.favoriteQuotes[e.language])==null||l.push(`${e.id}`);else throw new Error(c.body.message)}else{const c=await K.users.removeQuoteFromFavorites({body:{language:e.language,quoteId:`${e.id}`}});if(c.status===200){const m=(i=(n=s.favoriteQuotes)==null?void 0:n[e.language])==null?void 0:i.indexOf(`${e.id}`);(o=(r=s.favoriteQuotes)==null?void 0:r[e.language])==null||o.splice(m,1)}else throw new Error(c.body.message)}}}const Ns=new BU;Gt((t,e)=>{t==="quoteLength"&&Ns.updateQuoteQueue(e)});let BO=!1;function JT(){return BO}function qU(){BO=!0,console.log("Glarses Mode On - test result will be hidden. You can check the stats in the console (here)"),console.log("To disable Glarses Mode refresh the page.")}function WU(){S_=!1,d("#result .stats .wpm .crown").css("opacity",0).addClass("hidden")}let S_=!1,qO="normal";function FU(){return qO}function WO(){if(S_)return;S_=!0,d("#result .stats .wpm .crown").removeClass("hidden").css("opacity","0").animate({opacity:1},Jt(250),"easeOutCubic")}function FO(t){qO=t;const e=d("#result .stats .wpm .crown");e.removeClass("ineligible"),e.removeClass("pending"),e.removeClass("error"),e.removeClass("warning"),e.addClass(t)}function zU(){d("#testConfig").removeClass("invisible"),d("#mobileTestConfigButton").removeClass("invisible")}function HU(){d("#testConfig").addClass("invisible"),d("#mobileTestConfigButton").addClass("invisible")}async function UU(){d("#testConfig .mode .textButton").removeClass("active"),d("#testConfig .mode .textButton[mode='"+u.mode+"']").addClass("active"),d("#testConfig .puncAndNum").addClass("hidden"),d("#testConfig .spacer").addClass("scrolled"),d("#testConfig .time").addClass("hidden"),d("#testConfig .wordCount").addClass("hidden"),d("#testConfig .customText").addClass("hidden"),d("#testConfig .quoteLength").addClass("hidden"),d("#testConfig .zen").addClass("hidden"),u.mode==="time"?(d("#testConfig .puncAndNum").removeClass("hidden"),d("#testConfig .leftSpacer").removeClass("scrolled"),d("#testConfig .rightSpacer").removeClass("scrolled"),d("#testConfig .time").removeClass("hidden"),Do("time",u.time)):u.mode==="words"?(d("#testConfig .puncAndNum").removeClass("hidden"),d("#testConfig .leftSpacer").removeClass("scrolled"),d("#testConfig .rightSpacer").removeClass("scrolled"),d("#testConfig .wordCount").removeClass("hidden"),Do("words",u.words)):u.mode==="quote"?(d("#testConfig .rightSpacer").removeClass("scrolled"),d("#testConfig .quoteLength").removeClass("hidden"),Do("quoteLength",u.quoteLength)):u.mode==="custom"&&(d("#testConfig .puncAndNum").removeClass("hidden"),d("#testConfig .leftSpacer").removeClass("scrolled"),d("#testConfig .rightSpacer").removeClass("scrolled"),d("#testConfig .customText").removeClass("hidden")),Do("numbers",u.numbers),Do("punctuation",u.punctuation)}async function VU(t,e){var v,w,_;if(t===e)return;d("#testConfig .mode .textButton").removeClass("active"),d("#testConfig .mode .textButton[mode='"+e+"']").addClass("active");const a={time:"time",words:"wordCount",custom:"customText",quote:"quoteLength",zen:"zen"},s=Jt(250),n={both:"easeInOutSine",in:"easeInSine",out:"easeOutSine"},i={time:!0,words:!0,custom:!0,quote:!1,zen:!1},r=d("#testConfig .puncAndNum");if(i[e]!==i[t]){i[e]?d("#testConfig .leftSpacer").removeClass("scrolled"):d("#testConfig .leftSpacer").addClass("scrolled"),r.css({width:"unset",opacity:1}).removeClass("hidden");const S=Math.round(((v=r[0])==null?void 0:v.getBoundingClientRect().width)??0);r.css({width:i[t]?S:0,opacity:i[t]?1:0}).animate({width:i[e]?S:0,opacity:i[e]?1:0},s,n.both,()=>{i[e]?r.css("width","unset"):r.addClass("hidden")})}e==="zen"?d("#testConfig .rightSpacer").addClass("scrolled"):d("#testConfig .rightSpacer").removeClass("scrolled");const o=d(`#testConfig .${a[e]}`),l=d(`#testConfig .${a[t]}`),c=Math.round(((w=l[0])==null?void 0:w.getBoundingClientRect().width)??0);l.addClass("hidden"),o.removeClass("hidden");const m=Math.round(((_=o[0])==null?void 0:_.getBoundingClientRect().width)??0);l.removeClass("hidden"),o.addClass("hidden");const h=(m-c)/2;l.css({opacity:1,width:c}).animate({width:c+h,opacity:0},s/2,n.in,()=>{l.css({opacity:1,width:"unset"}).addClass("hidden"),o.css({opacity:0,width:c+h}).removeClass("hidden").animate({opacity:1,width:m},s/2,n.out,()=>{o.css("width","unset")})})}function Do(t,e){if(t==="time"){d("#testConfig .time .textButton").removeClass("active");const a=[15,30,60,120].includes(e)?e:"custom";d("#testConfig .time .textButton[timeConfig='"+a+"']").addClass("active")}else if(t==="words"){d("#testConfig .wordCount .textButton").removeClass("active");const a=[10,25,50,100,200].includes(e)?e:"custom";d("#testConfig .wordCount .textButton[wordCount='"+a+"']").addClass("active")}else t==="quoteLength"?(d("#testConfig .quoteLength .textButton").removeClass("active"),e.forEach(a=>{d("#testConfig .quoteLength .textButton[quoteLength='"+a+"']").addClass("active")})):t==="numbers"?e===!1?d("#testConfig .numbersMode.textButton").removeClass("active"):d("#testConfig .numbersMode.textButton").addClass("active"):t==="punctuation"&&(e===!1?d("#testConfig .punctuationMode.textButton").removeClass("active"):d("#testConfig .punctuationMode.textButton").addClass("active"))}function KU(){d("#testConfig .quoteLength .favorite").removeClass("hidden")}function GU(){d("#testConfig .quoteLength .favorite").addClass("hidden")}Gt((t,e,a,s)=>{if(xt()==="test")if(t==="mode"){VU(s,e);let n;u.mode==="time"?n=u.time:u.mode==="words"?n=u.words:u.mode==="quote"&&(n=u.quoteLength),n!==void 0&&Do(u.mode,n)}else["time","quoteLength","words","numbers","punctuation"].includes(t)&&e!==void 0&&Do(t,e)});let U,Br,jg=!1,Di="",al="";function QU(){jg=!jg,y(jg?"on":"off",1)}let Td=[];async function zO(){var r;const t=Da(u.typingSpeedUnit),e=[];for(let o=1;o<=Yi.length;o++)Cd&&o===Yi.length?e.push(Be(U.testDuration).toString()):e.push(o.toString());ea.getScale("wpm").title.text=t.fullUnitString;const a=[...Yi.map(o=>Be(t.fromWpm(o)))];if(U.chartData==="toolong")return;const s=[...U.chartData.raw.map(o=>Be(t.fromWpm(o)))];u.mode!=="time"&&Cd&&U.testDuration%1<.5&&(e.pop(),a.pop(),s.pop());let n=s;if(jg||(n=p$(n,1),n=n.map(o=>Math.round(o))),ea.data.labels=e,ea.getDataset("wpm").data=a,ea.getDataset("wpm").label=u.typingSpeedUnit,ea.getDataset("raw").data=n,Br=Math.max(Math.max(...n),Math.max(...a)),u.startGraphsAtZero)ea.getScale("wpm").min=0,ea.getScale("raw").min=0;else{const o=Math.min(Math.min(...n),Math.min(...a));ea.getScale("wpm").min=o,ea.getScale("raw").min=o}ea.getDataset("error").data=U.chartData.err;const i=await Ps("sub");if(u.funbox!=="none"){let o="";for(const l of Ye(u.funbox))o+=l.name,(r=l.functions)!=null&&r.getResultContent&&(o+="("+l.functions.getResultContent()+")"),o+=" ";o=o.trimEnd(),Td.push({display:!0,id:"funbox-label",type:"line",scaleID:"wpm",value:ea.getScale("wpm").min,borderColor:"transparent",borderWidth:1,borderDash:[2,2],label:{backgroundColor:"transparent",font:{family:u.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:Xs.defaults.font.weight,lineHeight:Xs.defaults.font.lineHeight},color:i,padding:3,borderRadius:3,position:"start",display:!0,content:`${o}`}})}ea.getScale("wpm").max=Br,ea.getScale("raw").max=Br,ea.getScale("error").max=Math.max(...U.chartData.err)}async function HO(){const t=await Mo(),e=await Mp(U.mode,U.mode2,U.punctuation??!1,U.numbers??!1,U.language,U.difficulty,U.lazyMode??!1,U.funbox??"none"),a=(e==null?void 0:e.wpm)??0;if(a===0)return;const s=Da(u.typingSpeedUnit),n=Be(s.fromWpm(a)).toFixed(2);Td.push({display:!0,type:"line",id:"lpb",scaleID:"wpm",value:n,borderColor:t.sub,borderWidth:1,borderDash:[2,2],label:{backgroundColor:t.sub,font:{family:u.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:Xs.defaults.font.weight,lineHeight:Xs.defaults.font.lineHeight},color:t.bg,padding:3,borderRadius:3,position:"center",content:`PB: ${n}`,display:!0}});const i=s.fromWpm(20);Br>=parseFloat(n)-i&&Br<=parseFloat(n)+i&&(Br=Math.round(parseFloat(n)+i)),ea.getScale("wpm").max=Br,ea.getScale("raw").max=Br}function UO(){let t=!1;if(U.wpm>=1e3&&(t=!0),d("#result .stats .wpm .top .text").text(u.typingSpeedUnit),t?d("#result .stats .wpm .bottom").text("Infinite"):d("#result .stats .wpm .bottom").text(Te.typingSpeed(U.wpm)),d("#result .stats .raw .bottom").text(Te.typingSpeed(U.rawWpm)),d("#result .stats .acc .bottom").text(U.acc===100?"100%":Te.accuracy(U.acc)),u.alwaysShowDecimalPlaces){u.typingSpeedUnit!="wpm"?(d("#result .stats .wpm .bottom").attr("aria-label",U.wpm.toFixed(2)+" wpm"),d("#result .stats .raw .bottom").attr("aria-label",U.rawWpm.toFixed(2)+" wpm")):(d("#result .stats .wpm .bottom").removeAttr("aria-label"),d("#result .stats .raw .bottom").removeAttr("aria-label"));let e=Be(U.testDuration).toFixed(2)+"s";U.testDuration>61&&(e=hs(Be(U.testDuration))),d("#result .stats .time .bottom .text").text(e),d("#result .stats .acc .bottom").attr("aria-label",`${Qs.correct} correct / ${Qs.incorrect} incorrect`)}else{const e={showDecimalPlaces:!0,suffix:` ${u.typingSpeedUnit}`};let a=Te.typingSpeed(U.wpm,e),s=Te.typingSpeed(U.rawWpm,e);u.typingSpeedUnit!="wpm"&&(a+=" ("+U.wpm.toFixed(2)+" wpm)",s+=" ("+U.rawWpm.toFixed(2)+" wpm)"),d("#result .stats .wpm .bottom").attr("aria-label",a),d("#result .stats .raw .bottom").attr("aria-label",s),d("#result .stats .acc .bottom").attr("aria-label",`${U.acc===100?"100":Te.percentage(U.acc,{showDecimalPlaces:!0})} (${Qs.correct} correct / ${Qs.incorrect} incorrect)`)}}function YU(){d("#result .stats .consistency .bottom").text(Te.percentage(U.consistency)),u.alwaysShowDecimalPlaces?d("#result .stats .consistency .bottom").attr("aria-label",Te.percentage(U.keyConsistency,{showDecimalPlaces:!0,suffix:" key"})):d("#result .stats .consistency .bottom").attr("aria-label",`${U.consistency}% (${U.keyConsistency}% key)`)}function JU(){const t=Be(U.afkDuration/U.testDuration*100);if(d("#result .stats .time .bottom .afk").text(""),t>0&&d("#result .stats .time .bottom .afk").text(t+"% afk"),d("#result .stats .time .bottom").attr("aria-label",`${U.afkDuration}s afk ${t}%`),u.alwaysShowDecimalPlaces){let e=Be(U.testDuration).toFixed(2)+"s";U.testDuration>61&&(e=hs(Be(U.testDuration))),d("#result .stats .time .bottom .text").text(e)}else{let e=Math.round(U.testDuration)+"s";U.testDuration>61&&(e=hs(Math.round(U.testDuration))),d("#result .stats .time .bottom .text").text(e),d("#result .stats .time .bottom").attr("aria-label",`${Be(U.testDuration)}s (${U.afkDuration}s afk ${t}%)`)}}function XU(){d("#result .stats .time .bottom .timeToday").text(lU())}function eV(){d("#result .stats .key .bottom").text(U.charStats[0]+"/"+U.charStats[1]+"/"+U.charStats[2]+"/"+U.charStats[3])}function Dg(t){WO(),FO(t)}function qc(t,e=!1){d("#result .stats .wpm .crown").attr("aria-label",t),d("#result .stats .wpm .crown").attr("data-balloon-length",e?"medium":"")}async function tV(t){if(u.mode==="quote"||t){$_();return}let e=0;const a=await VO();if(a.value){const s=await Mp(u.mode,U.mode2,u.punctuation,u.numbers,u.language,u.difficulty,u.lazyMode,u.funbox),n=(s==null?void 0:s.wpm)??0;e=U.wpm-n,e<=0?$_():(Dg("pending"),qc("+"+Te.typingSpeed(e,{showDecimalPlaces:!0})))}else{const s=await Mp(u.mode,U.mode2,u.punctuation,u.numbers,u.language,u.difficulty,u.lazyMode,"none"),n=(s==null?void 0:s.wpm)??0;e=U.wpm-n,e<=0?(Dg("warning"),qc(`This result is not eligible for a new PB (${a.reason})`,!0)):(Dg("ineligible"),qc(`You could've gotten a new PB (+${Te.typingSpeed(e,{showDecimalPlaces:!0})}), but your config does not allow it (${a.reason})`,!0))}}function $_(){WU(),qc("")}function aV(){FU()==="pending"&&(WO(),FO("error"),qc("Local PB data is out of sync with the server - please refresh (pb mismatch)",!0))}async function VO(){var i;const t=((i=U.funbox)==null?void 0:i.split("#"))??[],a=(await Promise.all(t.map(async r=>JW(r)))).every(r=>r==null?void 0:r.canGetPb),s=U.funbox==="none"||t.length===0||a,n=u.stopOnError!=="letter";return s&&n?{value:!0}:s?n?{value:!1,reason:"unknown"}:{value:!1,reason:"stop on letter"}:{value:!1,reason:"funbox"}}function sV(){if(ya())return;const t=getComputedStyle(document.body),e=[t.getPropertyValue("--main-color"),t.getPropertyValue("--text-color"),t.getPropertyValue("--sub-color")],a=Date.now()+125;(function s(){UC({particleCount:5,angle:60,spread:75,origin:{x:0},colors:e}),UC({particleCount:5,angle:120,spread:75,origin:{x:1},colors:e}),Date.now()<a&&requestAnimationFrame(s)})()}async function nV(t){var i,r,o,l;const e=[],a=((r=(i=A())==null?void 0:i.tags)==null?void 0:r.length)??0;try{(l=(o=A())==null?void 0:o.tags)==null||l.forEach(c=>{c.active===!0&&e.push(c)})}catch{}a===0?d("#result .stats .tags").addClass("hidden"):d("#result .stats .tags").removeClass("hidden"),e.length===0?d("#result .stats .tags .bottom").html("<div class='noTags'>no tags</div>"):d("#result .stats .tags .bottom").text(""),d("#result .stats .tags .editTagsButton").attr("data-result-id",""),d("#result .stats .tags .editTagsButton").attr("data-active-tag-ids",e.map(c=>c._id).join(",")),d("#result .stats .tags .editTagsButton").addClass("invisible");let s="start",n=15;e.forEach(async c=>{const m=await F1(c._id,u.mode,U.mode2,u.punctuation,u.numbers,u.language,u.difficulty,u.lazyMode);d("#result .stats .tags .bottom").append(`
      <div tagid="${c._id}" aria-label="PB: ${m}" data-balloon-pos="up">${c.display}<i class="fas fa-crown hidden"></i></div>
    `);const f=Da(u.typingSpeedUnit);if(u.mode!=="quote"&&!t&&(await VO()).value)if(m<U.wpm)await hF(c._id,u.mode,U.mode2,u.punctuation,u.numbers,u.language,u.difficulty,u.lazyMode,U.wpm,U.acc,U.rawWpm,U.consistency),d(`#result .stats .tags .bottom div[tagid="${c._id}"] .fas`).removeClass("hidden"),d(`#result .stats .tags .bottom div[tagid="${c._id}"]`).attr("aria-label","+"+Be(U.wpm-m));else{const h=await Mo();Td.push({display:!0,type:"line",id:"tpb",scaleID:"wpm",value:f.fromWpm(m),borderColor:h.sub,borderWidth:1,borderDash:[2,2],label:{backgroundColor:h.sub,font:{family:u.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:Xs.defaults.font.weight,lineHeight:Xs.defaults.font.lineHeight},color:h.bg,padding:3,borderRadius:3,position:s,xAdjust:n,display:!0,content:`${c.display} PB: ${Be(f.fromWpm(m)).toFixed(2)}`}}),s==="start"?(s="end",n=-15):(s="start",n=15)}})}function iV(t){let e="";e+=u.mode,u.mode==="time"?e+=" "+u.time:u.mode==="words"?e+=" "+u.words:u.mode==="quote"&&(t==null?void 0:t.group)!==void 0&&(e+=" "+["short","medium","long","thicc"][t.group]);const a=Ye(u.funbox).find(s=>{var n;return(n=s.properties)==null?void 0:n.includes("ignoresLanguage")})!==void 0;u.mode!=="custom"&&!a&&(e+="<br>"+oo(U.language)),u.punctuation&&(e+="<br>punctuation"),u.numbers&&(e+="<br>numbers"),u.blindMode&&(e+="<br>blind"),u.lazyMode&&(e+="<br>lazy"),u.funbox!=="none"&&(e+="<br>"+u.funbox.replace(/_/g," ").replace(/#/g,", ")),u.difficulty==="expert"?e+="<br>expert":u.difficulty==="master"&&(e+="<br>master"),u.stopOnError!=="off"&&(e+=`<br>stop on ${u.stopOnError}`),d("#result .stats .testType .bottom").html(e)}function rV(t,e,a,s,n){let i="";if(t&&(i+=`<br>failed (${e})`),a&&(i+="<br>afk detected"),Zx){i+="<br>invalid";const r=[];(U.wpm<0||U.wpm>350&&U.mode!=="words"&&U.mode2!=="10"||U.wpm>420&&U.mode==="words"&&U.mode2==="10")&&r.push("wpm"),(U.rawWpm<0||U.rawWpm>350&&U.mode!=="words"&&U.mode2!=="10"||U.rawWpm>420&&U.mode==="words"&&U.mode2==="10")&&r.push("raw"),(U.acc<75||U.acc>100)&&r.push("accuracy"),r.length>0&&(i+=` (${r.join(",")})`)}s&&(i+="<br>repeated"),U.bailedOut&&(i+="<br>bailed out"),n&&(i+="<br>too short"),i===""?d("#result .stats .info").addClass("hidden"):(d("#result .stats .info").removeClass("hidden"),i=i.substring(4),d("#result .stats .info .bottom").html(i))}function oV(t){var e,a,s;if(u.mode==="quote"){if(t===null){console.error("Failed to update quote rating button: randomQuote is null");return}((s=(a=(e=A())==null?void 0:e.quoteRatings)==null?void 0:a[t.language])==null?void 0:s[t.id])&&d(".pageTest #result #rateQuoteButton .icon").removeClass("far").addClass("fas"),IO(t).then(i=>{var r;d(".pageTest #result #rateQuoteButton .rating").text(((r=i==null?void 0:i.average)==null?void 0:r.toFixed(1))??"")}).catch(i=>{d(".pageTest #result #rateQuoteButton .rating").text("?")}),d(".pageTest #result #rateQuoteButton").css({opacity:0}).removeClass("hidden").css({opacity:1})}}function dV(t){const e=d(".pageTest #result #favoriteQuoteButton .icon");if(u.mode!=="quote"||!Se()){e.parent().addClass("hidden");return}if(t===null){console.error("Failed to update quote favorite button: randomQuote is null");return}Di=u.mode==="quote"?t.language:"",al=u.mode==="quote"?t.id.toString():"";const a=Ns.isQuoteFavorite(t);e.removeClass(a?"far":"fas").addClass(a?"fas":"far"),e.parent().removeClass("hidden")}function lV(t){u.mode==="quote"?(d("#result .stats .source").removeClass("hidden"),d("#result .stats .source .bottom").html((t==null?void 0:t.source)??"Error: Source unknown")):d("#result .stats .source").addClass("hidden")}async function uV(t,e,a,s,n,i,r,o){Td=[],U=Rn(t),$_(),d("#resultWordsHistory .words").empty(),d("#result #resultWordsHistory").addClass("hidden"),d("#retrySavingResultButton").addClass("hidden"),d(".pageTest #result #rateQuoteButton .icon").removeClass("fas").addClass("far"),d(".pageTest #result #rateQuoteButton .rating").text(""),d(".pageTest #result #rateQuoteButton").addClass("hidden"),d("#words").removeClass("blurred"),d("#wordsInput").trigger("blur"),d("#result .stats .time .bottom .afk").text(""),Se()?d("#result .loginTip").addClass("hidden"):d("#result .loginTip").removeClass("hidden"),u.ads==="off"||u.ads==="result"?d("#result #watchVideoAdButton").addClass("hidden"):d("#result #watchVideoAdButton").removeClass("hidden"),UO(),YU(),JU(),eV(),iV(r),lV(r),dV(r),await tV(o),await zO(),await HO(),await nV(o),rV(e,a,s,n,i),ea.options.plugins.annotation.annotations=Td,ea.updateColors(),ea.resize(),d("#result .stats .tags").hasClass("hidden")&&d("#result .stats .info").hasClass("hidden")?d("#result .stats .infoAndTags").addClass("hidden"):d("#result .stats .infoAndTags").removeClass("hidden"),JT()?(d("main #result .noStressMessage").remove(),d("main #result").prepend(`

      <div class='noStressMessage' style="
        text-align: center;
        grid-column: 1/3;
        font-size: 2rem;
        padding-bottom: 2rem;
      ">
      <i class="fas fa-check"></i>
      </div>

    `),d("main #result .stats").addClass("hidden"),d("main #result .chart").addClass("hidden"),d("main #result #resultWordsHistory").addClass("hidden"),d("main #result #resultReplay").addClass("hidden"),d("main #result .loginTip").addClass("hidden"),d("main #result #showWordHistoryButton").addClass("hidden"),d("main #result #watchReplayButton").addClass("hidden"),d("main #result #saveScreenshotButton").addClass("hidden"),console.log(`Test Completed: ${U.wpm} wpm ${U.acc}% acc ${U.rawWpm} raw ${U.consistency}% consistency`)):(d("main #result .stats").removeClass("hidden"),d("main #result .chart").removeClass("hidden"),Se()||d("main #result .loginTip").removeClass("hidden"),d("main #result #showWordHistoryButton").removeClass("hidden"),d("main #result #watchReplayButton").removeClass("hidden"),d("main #result #saveScreenshotButton").removeClass("hidden")),window.scrollY>0&&d([document.documentElement,document.body]).stop().animate({scrollTop:0},250),HU(),xi(d("#typingTest"),d("#result"),250,async()=>{d("#result").trigger("focus"),PU(),zE(!1),d("#words").empty(),ea.resize(),window.scrollTo({top:0})},async()=>{Oo(!1),d("#resultExtraButtons").removeClass("hidden").css("opacity",0).animate({opacity:1},Jt(125));const l=lb(u.mode,u.words,u.time,Pd(),pr()??!1);u.alwaysShowWordsHistory&&l&&!JT()&&KE(!0),yv(!0),cl()})}function cV(t,e){var s,n;const a=[];if(t.length>0)for(const i of t)(n=(s=A())==null?void 0:s.tags)==null||n.forEach(r=>{i===r._id&&a.push(r.display)});if(t.length===0)d(".pageTest #result .tags .bottom").html("<div class='noTags'>no tags</div>");else{d(".pageTest #result .tags .bottom div.noTags").remove();const i=d(".pageTest #result .tags .bottom div[tagid]"),r=[];i.each((l,c)=>{const m=d(c).attr("tagid");t.includes(m)?r.push(m):d(c).remove()});let o="";t.forEach((l,c)=>{r.includes(l)||(e.includes(l)?o+=`<div tagid="${l}" data-balloon-pos="up">${a[c]}<i class="fas fa-crown"></i></div>`:o+=`<div tagid="${l}">${a[c]}</div>`)}),d(".pageTest #result .tags .bottom").append(o),d(".pageTest #result .tags .top .editTagsButton").attr("active-tag-ids",t.join(","))}}d(".pageTest #favoriteQuoteButton").on("click",async()=>{var a,s,n,i,r;if(Di===""||al===""){y("Could not get quote stats!",-1);return}const t=d(".pageTest #favoriteQuoteButton .icon"),e=A();if(e)if(t.hasClass("fas")){Ct();const o=await K.users.removeQuoteFromFavorites({body:{language:Di,quoteId:al}});if(Qe(),y(o.body.message,o.status===200?1:-1),o.status===200){t.removeClass("fas").addClass("far");const l=(s=(a=e.favoriteQuotes)==null?void 0:a[Di])==null?void 0:s.indexOf(al);(i=(n=e.favoriteQuotes)==null?void 0:n[Di])==null||i.splice(l,1)}}else{Ct();const o=await K.users.addQuoteToFavorites({body:{language:Di,quoteId:al}});Qe(),y(o.body.message,o.status===200?1:-1),o.status===200&&(t.removeClass("far").addClass("fas"),e.favoriteQuotes===void 0&&(e.favoriteQuotes={}),e.favoriteQuotes[Di]||(e.favoriteQuotes[Di]=[]),(r=e.favoriteQuotes[Di])==null||r.push(al))}});Gt(async t=>{["typingSpeedUnit","startGraphsAtZero"].includes(t)&&la&&(Td=[],UO(),await zO(),await HO(),vl(),ea.options.plugins.annotation.annotations=Td,ea.updateColors(),ea.resize())});const Ae={particles:[],rendering:!1},pV=1e3,mV=.05,fV=4,hV=.6,og=1500,zd=.3,XT=[6,3],dg=10;function gV(){const t=document.createElement("canvas");return t.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:999999",t.height=window.innerHeight,t.width=window.innerWidth,window.addEventListener("resize",()=>{t.height=window.innerHeight,t.width=window.innerWidth}),document.body.appendChild(t),t}function yV(t,e,a){return{x:t,y:e,color:a,alpha:1,prev:{x:t,y:e},vel:{x:og-Math.random()*og*2,y:og-Math.random()*og*2}}}function vV(t){!Ae.canvas||!Ae.deltaTime||(t.prev.x=t.x,t.prev.y=t.y,t.x+=t.vel.x*Ae.deltaTime,t.y+=t.vel.y*Ae.deltaTime,t.x>Ae.canvas.width?(t.vel.x*=-zd,t.x=Ae.canvas.width-(t.x-Ae.canvas.width)*zd):t.x<0&&(t.vel.x*=-zd,t.x*=-zd),t.y>Ae.canvas.height?(t.vel.y*=-zd,t.y=Ae.canvas.height-(t.y-Ae.canvas.height)*zd):t.y<0&&(t.vel.y*=-1,t.y*=-1),t.vel.y+=pV*Ae.deltaTime,t.vel.x*=1-mV*Ae.deltaTime,t.alpha*=1-hV*Ae.deltaTime)}function bV(){Ae.caret=d("#caret"),Ae.canvas=gV(),Ae.context2d=Ae.canvas.getContext("2d")}function KO(){if(!Ae.lastFrame||!Ae.context2d||!Ae.canvas)return;Ae.rendering=!0;const t=Date.now();Ae.deltaTime=(t-Ae.lastFrame)/1e3,Ae.lastFrame=t,Ae.context2d.clearRect(0,0,Ae.canvas.width,Ae.canvas.height);const e=[];for(const a of Ae.particles)a.alpha<.1||(vV(a),Ae.context2d.globalAlpha=a.alpha,Ae.context2d.strokeStyle=a.color,Ae.context2d.lineWidth=fV,Ae.context2d.beginPath(),Ae.context2d.moveTo(Math.round(a.prev.x),Math.round(a.prev.y)),Ae.context2d.lineTo(Math.round(a.x),Math.round(a.y)),Ae.context2d.stroke(),e.push(a));Ae.particles=e,Ae.particles.length&&!ya()?requestAnimationFrame(KO):(Ae.context2d.clearRect(0,0,Ae.canvas.width,Ae.canvas.height),Ae.rendering=!1)}function GO(t=!1){if(!Ae.resetTimeOut)return;delete Ae.resetTimeOut,clearTimeout(Ae.resetTimeOut);const e=d(document.body);e.css("transition","all .25s, transform 0.8s"),e.css("transform","translate(0,0)"),setTimeout(()=>{e.css("transition","all .25s, transform .05s"),d("html").css("overflow","inherit"),d("html").css("overflow-y","scroll")},t?0:1e3)}function wV(){Ae.rendering||(Ae.lastFrame=Date.now(),KO())}function _V(){const t=Math.floor(Math.random()*256).toString(16),e=Math.floor(Math.random()*256).toString(16),a=Math.floor(Math.random()*256).toString(16);return`#${t}${e}${a}`}async function QO(t=!0,e=!1){var n,i;if(u.monkeyPowerLevel==="off"||ya())return;if(u.blindMode&&(t=!0),["3","4"].includes(u.monkeyPowerLevel)){d("html").css("overflow","hidden");const r=[Math.round(dg-Math.random()*dg),Math.round(dg-Math.random()*dg)];d(document.body).css("transform",`translate(${r[0]}px, ${r[1]}px)`),Ae.resetTimeOut&&clearTimeout(Ae.resetTimeOut),Ae.resetTimeOut=setTimeout(GO,2e3)}const a=(n=Ae.caret)==null?void 0:n.offset(),s=[(a==null?void 0:a.left)??0,((a==null?void 0:a.top)??0)+(((i=Ae.caret)==null?void 0:i.height())??0)];for(let r=Math.round((XT[0]+Math.random()*XT[1])*(e?2:1));r>0;r--){const o=["2","4"].includes(u.monkeyPowerLevel)?_V():t?await Ps("caret"):await Ps("error");Ae.particles.push(yV(...s,o))}wV()}let Lw=[];async function kV(){return Lw.length===0&&(Lw=await As("languages/britishenglish.json")),Lw}async function YO(t,e){var s;const a=await kV();if(t.includes("-"))return(await Promise.all(t.split("-").map(async n=>YO(n,e)))).join("-");{const n=a.find(i=>t.match(RegExp(`^([\\W]*${i[0]}[\\W]*)$`,"gi")));return!n||u.mode==="quote"&&((s=n[2])!=null&&s.includes(e))?t:t.replace(RegExp(`^(?:([\\W]*)(${n[0]})([\\W]*))$`,"gi"),(i,r,o,l)=>r+(o.charAt(0)===o.charAt(0).toUpperCase()?o===o.toUpperCase()?n[1].toUpperCase():oh(n[1]):n[1])+l)}}const xV=[["","a"],["","e"],["","i"],["","o"],["","u"],["","n"],["","c"],["","r"],["","d"],["","t"],["","m"],["","ae"],["","oe"],["","w"],["g","g"],["","h"],["","j"],["","n"],["","s"],["","ss"],["","z"],["","y"],["","l"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["","th"]],CV=new Map(xV.flatMap(t=>[...t[0]].map(e=>[e,t[1]])));function TV(t,e){const a=t.toLowerCase(),s=e==null?void 0:e.find(n=>n[0].includes(a));return s!==void 0?s[1]:CV.get(a)}function SV(t,e){if(!t)return t;const a=t.toUpperCase(),s=[...t].map((i,r)=>i==a[r]),n=[];for(let i=0;i<t.length;i++){const r=t[i],o=s[i],l=TV(r,e);l!==void 0?o?(n.push(l.substring(0,1).toUpperCase()),n.push(l.substring(1))):n.push(l):n.push(o?r.toUpperCase():r)}return n.join("")}const JO=[["are",["aren't"]],["can",["can't"]],["could",["couldn't"]],["did",["didn't"]],["does",["doesn't"]],["do",["don't"]],["had",["hadn't"]],["has",["hasn't"]],["have",["haven't"]],["is",["isn't"]],["it",["it's","it'll"]],["i",["i'm","i'll","i've","i'd"]],["you",["you'll","you're","you've","you'd"]],["that",["that's","that'll","that'd"]],["must",["mustn't","must've"]],["there",["there's","there'll","there'd"]],["he",["he's","he'll","he'd"]],["she",["she's","she'll","she'd"]],["we",["we're","we'll","we'd"]],["they",["they're","they'll","they'd"]],["should",["shouldn't","should've"]],["was",["wasn't"]],["were",["weren't"]],["will",["won't"]],["would",["wouldn't","would've"]],["going",["goin'"]]];async function $V(t){return JO.find(e=>t.match(RegExp(`^([\\W]*${e[0]}[\\W]*)$`,"gi")))!==void 0}async function AV(t){const e=JO.find(s=>t.match(RegExp(`^([\\W]*${s[0]}[\\W]*)$`,"gi")));if(e===void 0)return t;const a=mi(e[1]);return t.replace(RegExp(`^(?:([\\W]*)(${e[0]})([\\W]*))$`,"gi"),(s,n,i,r)=>n+(i.charAt(0)===i.charAt(0).toUpperCase()?LV(i)?a.toUpperCase():oh(a):a)+r)}function LV(t){return t==="I"?!1:t===t.toUpperCase()}function MV(t){return/[?!.]/.test(t)}let Hd="";async function EV(t,e,a,s){var l;let n=e;const i=u.language.split("_")[0],r=eA(t),o=Ye(u.funbox).find(c=>{var m;return(m=c.functions)==null?void 0:m.punctuateWord});if((l=o==null?void 0:o.functions)!=null&&l.punctuateWord)return o.functions.punctuateWord(n);if(i!=="code"&&i!=="georgian"&&(a===0||MV(r))){if(n=oh(n),i==="turkish"&&(n=n.replace(/I/g,"")),i==="spanish"||i==="catalan"){const c=Math.random();c>.9?(n=""+n,Hd="?"):c>.8&&(n=""+n,Hd="!")}}else if(Math.random()<.1&&r!=="."&&r!==","&&a!==s-2||a===s-1)if(i==="spanish"||i==="catalan")(Hd==="?"||Hd==="!")&&(n+=Hd,Hd="");else{const c=Math.random();c<=.8?i==="kurdish"?n+=".":i==="nepali"||i==="bangla"||i==="hindi"?n+="":i==="japanese"||i==="chinese"?n+="":n+=".":c>.8&&c<.9?i==="french"?n="?":i==="arabic"||i==="persian"||i==="urdu"||i==="kurdish"?n+="":i==="greek"?n+=";":i==="japanese"||i==="chinese"?n+="":n+="?":i==="french"?n="!":i==="japanese"||i==="chinese"?n+="":n+="!"}else if(Math.random()<.01&&r!==","&&r!=="."&&i!=="russian")n=`"${n}"`;else if(Math.random()<.011&&r!==","&&r!=="."&&i!=="russian"&&i!=="ukrainian"&&i!=="slovak")n=`'${n}'`;else if(Math.random()<.012&&r!==","&&r!==".")if(i==="code"){const c=Math.random(),m=["()","{}","[]","<>"];u.language.startsWith("code_javascript")&&m.push("``");const f=Math.floor(c*m.length),h=m[f];n=`${h[0]}${n}${h[1]}`}else i==="japanese"||i==="chinese"?n=`${n}`:n=`(${n})`;else if(Math.random()<.013&&r!==","&&r!=="."&&r!==";"&&r!==""&&r!==":"&&r!==""&&r!=="")i==="french"?n=":":i==="greek"?n="":i==="chinese"?n+="":n+=":";else if(Math.random()<.014&&r!==","&&r!=="."&&t!=="-")n="-";else if(Math.random()<.015&&r!==","&&r!=="."&&r!==";"&&r!==""&&r!==""&&r!=="")i==="french"?n=";":i==="greek"?n="":i==="arabic"||i==="kurdish"?n+="":i==="chinese"?n+="":n+=";";else if(Math.random()<.2&&r!==",")i==="arabic"||i==="urdu"||i==="persian"||i==="kurdish"?n+="":i==="japanese"?n+="":i==="chinese"?n+="":n+=",";else if(Math.random()<.25&&i==="code"){const c=["{","}","[","]","(",")",";","=","+","%","/"],m=["{","}","[","]","(",")",";","=","+","%","/","/*","*/","//","!=","==","<=",">=","||","&&","<<",">>","%=","&=","*=","++","+=","--","-=","/=","^=","|="];u.language.startsWith("code_c")&&!u.language.startsWith("code_css")||u.language.startsWith("code_arduino")?n=mi(m):u.language.startsWith("code_javascript")?n=mi([...c,"`"]):n=mi(c)}else Math.random()<.5&&i==="english"&&await $V(n)&&(n=await OV(n));return n.includes("	")&&(n=n.replace(/\t/g,""),n+="	"),n.includes(`
`)&&(n=n.replace(/\n/g,""),n+=`
`),n}async function OV(t){return AV(t)}function IV(){var e;const t=Ye(u.funbox).find(a=>{var s;return(s=a.functions)==null?void 0:s.getWordsFrequencyMode});if((e=t==null?void 0:t.functions)!=null&&e.getWordsFrequencyMode)return t.functions.getWordsFrequencyMode()}async function PV(){var a;const t=[],e=Ye(u.funbox).find(s=>{var n;return(n=s.functions)==null?void 0:n.pullSection});if((a=e==null?void 0:e.functions)!=null&&a.pullSection){const s=await e.functions.pullSection(u.language);if(s===!1||s===void 0)throw ox(e.name),new Error("Failed to pull section");for(const n of s.words){if(t.length>=u.words&&u.mode==="words")break;t.push(n)}}return t}function ZV(t,e,a){var n;const s=Ye(u.funbox).find(i=>{var r;return(r=i.functions)==null?void 0:r.getWord});return(n=s==null?void 0:s.functions)!=null&&n.getWord&&(t=s.functions.getWord(a,e)),t}function NV(t){var e;for(const a of Ye(u.funbox))(e=a.functions)!=null&&e.alterText&&(t=a.functions.alterText(t));return t}async function RV(t,e){return!u.britishEnglish||!u.language.includes("english")||u.mode==="quote"&&(_t==null?void 0:_t.britishText)!==void 0&&(_t==null?void 0:_t.britishText)!==""?t:await YO(t,e)}function Mw(t,e){const a=!e.noLazyMode||u.mode==="custom";return u.lazyMode&&a&&(t=SV(t,e.additionalAccents)),t}function jV(){var e,a;const t=((a=(e=Ye(u.funbox).find(s=>{var n;return(n=s.properties)==null?void 0:n.find(i=>i.startsWith("wordOrder"))}))==null?void 0:e.properties)==null?void 0:a.find(s=>s.startsWith("wordOrder")))??"";return t?t.split(":")[1]:"normal"}function DV(){var s,n;if(u.mode==="zen")return 0;let t=100;const e=_t;if(u.mode==="quote"&&e===null)throw new Za("Random quote is null");const a=((n=(s=Ye(u.funbox).find(i=>{var r;return(r=i.properties)==null?void 0:r.find(o=>o.startsWith("toPush"))}))==null?void 0:s.properties)==null?void 0:n.find(i=>i.startsWith("toPush:")))??"";return u.showAllLines&&(u.mode==="custom"&&(t=Yt()),u.mode==="words"&&(t=u.words),u.mode==="quote"&&(t=e.textSplit.length)),u.mode==="words"&&u.words===0&&(t=100),u.mode==="custom"&&(Yt()===0||ua()==="time"?t=100:t=Yt()>100?100:Yt()),a&&(t=+a.split(":")[1]),u.mode==="words"&&u.words!==0&&u.words<t&&(t=u.words),u.mode==="quote"&&e.textSplit.length<t&&(t=e.textSplit.length),u.mode==="custom"&&ua()==="word"&&Yt()<t&&Yt()!==0&&(t=Yt()),t}class Za extends Error{constructor(e){super(e),this.name="WordGenError"}}async function BV(t,e){if(xn){if(ba===null)throw new Za("Current wordset is null");return r_(XO),e==="reverse"?ba.words.reverse():ba.words}const a=t.name.startsWith("swiss_german")?"german":t.name;if((await Ns.getQuotes(a,u.quoteLength)).length===0)throw $a("words"),new Za(`No ${u.language.replace(/_\d*k$/g,"").replace(/_/g," ")} quotes found`);let n;if(u.quoteLength.includes(-2)&&u.quoteLength.length===1){const i=Ns.getQuoteById(x0);if(i===void 0)throw Vi(-1),new Za(`Quote ${x0} does not exist`);n=i}else if(u.quoteLength.includes(-3)){const i=Ns.getRandomFavoriteQuote(u.language);if(i===null)throw Vi(-1),new Za("No favorite quotes found");n=i}else{const i=Ns.getRandomQuote();if(i===null)throw Vi(-1),new Za("No quotes found for selected quote length");n=i}if(n.language=ii(u.language),n.text=n.text.replace(/ +/gm," "),n.text=n.text.replace(/( *(\r\n|\r|\n) *)/g,`
 `),n.text=n.text.replace(//g,"..."),n.text=n.text.trim(),n.britishText!==void 0&&n.britishText!==""&&u.britishEnglish?n.textSplit=n.britishText.split(" "):n.textSplit=n.text.split(" "),r_(n),_t===null)throw new Za("Random quote is null");if(_t.textSplit===void 0)throw new Za("Random quote textSplit is undefined");return _t.textSplit}let ba=null,Ro=null,Bg=!1,XO=null;async function qV(t){var m,f;xn||(A_=[]),XO=_t,r_(null),Ho=[],kl=0,Wc=[],Ro=t;const e={words:[],sectionIndexes:[],hasTab:!1,hasNewline:!1},a=Ye(u.funbox).find(h=>{var v;return(v=h.functions)==null?void 0:v.pullSection});Bg=((m=a==null?void 0:a.functions)==null?void 0:m.pullSection)!==void 0;const s=jV();console.debug("Word order",s);let n=t.words;u.mode==="custom"?n=yh():u.mode==="quote"?n=await BV(t,s):u.mode==="zen"&&(n=[]);const i=DV();console.debug("Words limit",i),s==="reverse"&&(n=n.reverse());const r=Ye(u.funbox).find(h=>{var v;return(v=h.functions)==null?void 0:v.withWords});if((f=r==null?void 0:r.functions)!=null&&f.withWords?ba=await r.functions.withWords(n):ba=await pH(n),console.debug("Wordset",ba),i===0)return e;let o=!1,l=0;for(;!o;){const h=await eI(l,i,Tl(e.words,-1)??"",Tl(e.words,-2)??"");e.words.push(h.word),e.sectionIndexes.push(h.sectionIndex),u.mode==="custom"&&Tu()?Ho.length===0&&kl>=Yt()&&(o=!0):e.words.length>=i&&(o=!0),l++}const c=_t;if(u.mode==="quote"&&c===null)throw new Za("Random quote is null");return e.hasTab=e.words.some(h=>h.includes("	"))||ba.words.some(h=>h.includes("	"))||u.mode==="quote"&&c.textSplit.some(h=>h.includes("	")),e.hasNewline=e.words.some(h=>h.includes(`
`))||ba.words.some(h=>h.includes(`
`))||u.mode==="quote"&&c.textSplit.some(h=>h.includes(`
`)),Wc=[],e}let kl=0,Ho=[],Wc=[],A_=[];async function eI(t,e,a,s){if(console.debug("Getting next word",{isRepeated:xn,currentWordset:ba,wordIndex:t,language:Ro,wordsBound:e,previousWord:a,previousWord2:s}),ba===null)throw new Za("Current wordset is null");if(Ro===null)throw new Za("Current language is null");if(xn&&u.mode!=="quote"){const c=A_[t];if(c===void 0){let m=!1;if((u.mode==="time"||u.mode==="custom"&&ua()==="time"||u.mode==="custom"&&ua()==="word"&&t<Yt()||u.mode==="words"&&t<u.words)&&(m=!0),m)console.debug("Repeated word is undefined but random generation is allowed - getting random word");else throw new Za("Repeated word is undefined")}else return console.debug("Repeated word: ",c),kl++,c}const n=IV()??"normal";let i=ba.randomWord(n);const r=a.replace(/[.?!":\-,]/g,"").toLowerCase(),o=s==null?void 0:s.replace(/[.?!":\-,']/g,"").toLowerCase();if(Ho.length===0){const c=await PV();if(u.mode==="quote")i=ba.nextWord();else if(u.mode==="custom"&&Rc()==="repeat")i=ba.nextWord();else if(u.mode==="custom"&&Rc()==="random"&&(ba.length<4||Vt.mode!==null))i=ba.randomWord(n);else if(u.mode==="custom"&&Rc()==="shuffle")i=ba.shuffledWord();else if(u.mode==="custom"&&ua()==="section"){i=ba.randomWord(n);const m=Tl(Wc,-1),f=Tl(Wc,-2);let h=0;for(;h<100&&(m===i||f===i);)h++,i=ba.randomWord(n)}else if(Bg)i=c.join(" ");else{let m=0,f=i.split(" ")[0].toLowerCase(),h=Mw(f,Ro);for(;m<100&&(r===h||o===h||u.mode!=="custom"&&!u.punctuation&&i==="I"||u.mode!=="custom"&&!u.punctuation&&!u.language.startsWith("code")&&/[-=_+[\]{};'\\:"|,./<>?]/i.test(i)||u.mode!=="custom"&&!u.numbers&&/[0-9]/i.test(i));)m++,i=ba.randomWord(n),f=i.split(" ")[0],h=Mw(f,Ro)}i=i.replace(/ +/g," "),i=i.replace(/(^ )|( $)/g,""),i=ZV(i,t,ba),Ho=[...i.split(" ")],Wc.push(i),i=Ho.shift(),kl++}else i=Ho.shift();if(i===void 0)throw new Za("Random word is undefined");if(i==="")throw new Za("Random word is empty");if(/ /g.test(i))throw new Za("Random word contains spaces");u.mode!=="custom"&&u.mode!=="quote"&&/[A-Z]/.test(i)&&!u.punctuation&&!u.language.startsWith("german")&&!u.language.startsWith("swiss_german")&&!u.language.startsWith("code")&&!u.language.startsWith("klingon")&&!Bg&&(i=i.toLowerCase()),i=i.replace(/ +/gm," "),i=i.replace(/(^ )|( $)/gm,""),i=Mw(i,Ro),i=await RV(i,r),u.language.startsWith("swiss_german")&&(i=i.replace(//g,"ss")),u.punctuation&&!Ro.originalPunctuation&&!Bg&&(i=await EV(a,i,t,e)),u.numbers&&Math.random()<.1&&(i=rO(4),u.language.startsWith("kurdish")?i=u$(i):u.language.startsWith("nepali")?i=c$(i):u.language.startsWith("bangla")?i=yZ(i):u.language.startsWith("hindi")&&(i=vZ(i))),i=NV(i),console.debug("Word:",i);const l={word:i,sectionIndex:kl};return A_.push(l),l}let tI=0,aI=0;async function WV(){const t=db(u,_t),[e,a]=(await W1(u.mode,t,u.punctuation,u.numbers,u.language,u.difficulty,u.lazyMode)).map(Be);tI=u.alwaysShowDecimalPlaces?e:Math.round(e),aI=u.alwaysShowDecimalPlaces?a:Math.floor(a)}function FV(){return tI}function zV(){return aI}Gt(t=>{["difficulty","blindMode","stopOnError","paceCaret","minWpm","minAcc","minBurst","confidenceMode","layout","showAverage","typingSpeedUnit","quickRestart"].includes(t)&&bo()});async function bo(){var s,n;d(".pageTest #testModesNotice").empty(),xn&&u.mode!=="quote"&&d(".pageTest #testModesNotice").append('<div class="textButton noInteraction" style="color:var(--error-color);"><i class="fas fa-sync-alt"></i>repeated</div>'),th||d(".pageTest #testModesNotice").append('<div class="textButton" commands="resultSaving" style="color:var(--error-color);"><i class="fas fa-save"></i>saving disabled</div>'),Mm&&(u.quickRestart==="esc"&&(d(".pageTest #testModesNotice").append('<div class="textButton noInteraction"><i class="fas fa-long-arrow-alt-right"></i>shift + tab to open commandline</div>'),d(".pageTest #testModesNotice").append('<div class="textButton noInteraction"><i class="fas fa-level-down-alt fa-rotate-90"></i>shift + esc to restart</div>')),u.quickRestart==="tab"&&d(".pageTest #testModesNotice").append('<div class="textButton noInteraction"><i class="fas fa-level-down-alt fa-rotate-90"></i>shift + tab to restart</div>')),(ev||u.funbox.includes("58008"))&&u.quickRestart==="enter"&&d(".pageTest #testModesNotice").append('<div class="textButton noInteraction"><i class="fas fa-level-down-alt fa-rotate-90"></i>shift + enter to restart</div>');const t=Px(),e=pr();if(u.mode==="custom"&&t!==""&&e&&d(".pageTest #testModesNotice").append(`<div class="textButton noInteraction"><i class="fas fa-book"></i>${t} (shift + enter to save progress)</div>`),ds&&d(".pageTest #testModesNotice").append(`<div class="textButton noInteraction"><i class="fas fa-award"></i>${ds.display}</div>`),u.mode==="zen"&&d(".pageTest #testModesNotice").append('<div class="textButton noInteraction"><i class="fas fa-poll"></i>shift + enter to finish zen </div>'),u.mode!=="zen"&&d(".pageTest #testModesNotice").append(`<button class="textButton" commands="languages"><i class="fas fa-globe-americas"></i>${oo(u.language,u.mode==="quote")}</button>`),u.difficulty==="expert"?d(".pageTest #testModesNotice").append('<button class="textButton" commands="difficulty"><i class="fas fa-star-half-alt"></i>expert</button>'):u.difficulty==="master"&&d(".pageTest #testModesNotice").append('<button class="textButton" commands="difficulty"><i class="fas fa-star"></i>master</button>'),u.blindMode&&d(".pageTest #testModesNotice").append('<button class="textButton" commands="blindMode"><i class="fas fa-eye-slash"></i>blind</button>'),u.lazyMode&&d(".pageTest #testModesNotice").append('<button class="textButton" commands="lazyMode"><i class="fas fa-couch"></i>lazy</button>'),u.paceCaret!=="off"||u.repeatedPace&&hd){const i=Te.typingSpeed(($e==null?void 0:$e.wpm)??0,{showDecimalPlaces:!1,suffix:` ${u.typingSpeedUnit}`});d(".pageTest #testModesNotice").append(`<button class="textButton" commands="paceCaretMode"><i class="fas fa-tachometer-alt"></i>${u.paceCaret==="average"?"average":u.paceCaret==="pb"?"pb":u.paceCaret==="tagPb"?"tag pb":u.paceCaret==="last"?"last":u.paceCaret==="daily"?"daily":"custom"} pace ${i}</button>`)}if(u.showAverage!=="off"){const i=FV(),r=zV();if(Se()&&i>0){const o=["speed","both"].includes(u.showAverage)?Te.typingSpeed(i,{suffix:` ${u.typingSpeedUnit}`,showDecimalPlaces:!1}):"",l=["acc","both"].includes(u.showAverage)?Te.accuracy(r,{suffix:" acc",showDecimalPlaces:!1}):"",c=`${o} ${l}`.trim();d(".pageTest #testModesNotice").append(`<button class="textButton" commands="showAverage"><i class="fas fa-chart-bar"></i>avg: ${c}</button>`)}}u.minWpm!=="off"&&d(".pageTest #testModesNotice").append(`<button class="textButton" commands="minWpm"><i class="fas fa-bomb"></i>min ${Te.typingSpeed(u.minWpmCustomSpeed,{showDecimalPlaces:!1,suffix:` ${u.typingSpeedUnit}`})}</button>`),u.minAcc!=="off"&&d(".pageTest #testModesNotice").append(`<button class="textButton" commands="minAcc"><i class="fas fa-bomb"></i>min ${u.minAccCustom}% acc</button>`),u.minBurst!=="off"&&d(".pageTest #testModesNotice").append(`<button class="textButton" commands="minBurst"><i class="fas fa-bomb"></i>min ${Te.typingSpeed(u.minBurstCustomSpeed,{showDecimalPlaces:!1})} ${u.typingSpeedUnit} burst ${u.minBurst==="flex"?"(flex)":""}</button>`),u.funbox!=="none"&&d(".pageTest #testModesNotice").append(`<button class="textButton" commands="funbox"><i class="fas fa-gamepad"></i>${u.funbox.replace(/_/g," ").replace(/#/g,", ")}</button>`),u.confidenceMode==="on"&&d(".pageTest #testModesNotice").append('<button class="textButton" commands="confidenceMode"><i class="fas fa-backspace"></i>confidence</button>'),u.confidenceMode==="max"&&d(".pageTest #testModesNotice").append('<button class="textButton" commands="confidenceMode"><i class="fas fa-backspace"></i>max confidence</button>'),u.stopOnError!=="off"&&d(".pageTest #testModesNotice").append(`<button class="textButton" commands="stopOnError"><i class="fas fa-hand-paper"></i>stop on ${u.stopOnError}</button>`),u.layout!=="default"&&d(".pageTest #testModesNotice").append(`<button class="textButton" commands="layouts"><i class="fas fa-keyboard"></i>emulating ${u.layout.replace(/_/g," ")}</button>`),u.oppositeShiftMode!=="off"&&d(".pageTest #testModesNotice").append(`<button class="textButton" commands="oppositeShiftMode"><i class="fas fa-exchange-alt"></i>opposite shift${u.oppositeShiftMode==="keymap"?" (keymap)":""}</button>`);let a="";try{(n=(s=A())==null?void 0:s.tags)==null||n.forEach(i=>{i.active===!0&&(a+=i.display+", ")}),a!==""&&d(".pageTest #testModesNotice").append(`<button class="textButton" commands="tags"><i class="fas fa-tag"></i>${a.substring(0,a.length-2)}</button>`)}catch{}}const sI=new Bs({key:"prefersArabicLazyMode",schema:qt.boolean(),fallback:!0});function HV(){return sI.get()}function UV(t){sI.set(t)}let Vm="";const VV=document.getElementById("koInputVisual");let kn=null;function nI(){kn=null}function KV(t){kn!==null&&(kn.uid=t,delete kn.hash,kn.hash=m$(kn))}function GV(t){var e;if(Gc())return!1;Se()?nr("testStarted"):nr("testStartedNoLogin"),qk(!0),j3(),IE(Z.list),y3(),Ux(),Wx(),zx(),Fx(),Ch(),Qx(),KH();for(const a of Ye(u.funbox))(e=a.functions)!=null&&e.start&&a.functions.start();try{(u.paceCaret!=="off"||u.repeatedPace&&hd)&&zH()}catch{}return _9(t),oU(),!0}function bt(t={}){t={...{withSameWordset:!1,practiseMissed:!1,noAnim:!1,nosave:!1},...t};const a=t.noAnim?0:Jt(125);if(ks||kd){event==null||event.preventDefault();return}if(xt()==="test"&&!c3()&&(u.mode!=="zen"&&(event==null||event.preventDefault()),!lb(u.mode,u.words,u.time,Pd(),pr()??!1))){let n="Use your mouse to confirm.";u.quickRestart==="tab"?n="Press shift + tab or use your mouse to confirm.":u.quickRestart==="esc"?n="Press shift + escape or use your mouse to confirm.":u.quickRestart==="enter"&&(n="Press shift + enter or use your mouse to confirm."),y(`Quick restart disabled in long tests. ${n}`,0,{duration:4,important:!0});return}if(pa&&(xn&&(t.withSameWordset=!0),th)){kb(),Cb(),xb();const n=kh(performance.now()),i=qx(n);let r=Be(n-i);r<0&&(r=0),jx(r),eO();const o=Be(xh());Dx(o,r)}u.mode==="quote"&&_t!==null&&u.language.startsWith(_t.language)&&u.repeatQuotes==="typing"&&(pa||Vm!=="")&&(t.withSameWordset=!0),Vt.mode!==null&&!t.withSameWordset&&!t.practiseMissed&&(y("Reverting to previous settings.",0),Vt.punctuation!==null&&Fn(Vt.punctuation),Vt.numbers!==null&&rn(Vt.numbers),Vt.customText&&(lr(Vt.customText.text),Jr(Vt.customText.limit.mode),td(Vt.customText.limit.value),Ql(Vt.customText.pipeDelimiter)),$a(Vt.mode),nO()),Em(),Qx(),w9(),v3(),wa.reset(),Z3(),vh(),qk(!1),$x(),Ob(),Pb(),Ib(),Nb(),wh(),j1(!1),FH(),AO(),E.setKoreanStatus(!1),Bc(),Xl(),mU(),s9(),la&&(u.randomTheme!=="off"&&DH(),MF()),ma()||gb();let s=null;la?s=d("#result"):s=d("#typingTest"),FE(!1),pd(!0),y_(!0),s.stop(!0,!0).animate({opacity:0},a,async()=>{var r;d("#result").addClass("hidden"),d("#typingTest").css("opacity",0).removeClass("hidden"),d("#wordsInput").val(" "),u.language.startsWith("korean")?(VV.innerText=" ",u.mode!=="zen"?d("#koInputVisualContainer").show():d("#koInputVisualContainer").hide()):d("#koInputVisualContainer").hide(),Oo(!1),xt()==="test"&&yv(!1),zU(),NU(),await bH(),L_=0,Vm="";let n=!1;u.repeatedPace&&t.withSameWordset&&(n=!0),N1(t.withSameWordset??!1),WW(n),await M_(),await TO();for(const o of Ye(u.funbox))(r=o.functions)!=null&&r.restart&&o.functions.restart();u.showAverage!=="off"?WV().then(()=>{bo()}):bo(),d("#wordsInput").is(":focus")&&ih(),Mb(),d("#typingTest").css("opacity",0).removeClass("hidden").stop(!0,!0).animate({opacity:1},a,()=>{N9(),A9(),I9(),M9(),y_(!1),u9(),Em(),pd(!1)})}),Lx()}let qg,L_=0;async function M_(){if(console.debug("Initializing test"),L_++,L_>=4){y_(!1),y("Too many test reinitialization attempts. Something is going very wrong. Please contact support.",-1,{important:!0});return}GO(),$x(),Z.reset(),Mx(0),E.resetHistory(),E.resetCurrent();let t;try{t=await nh(u.language)}catch(l){y(Ge(l,"Failed to load language"),-1)}if(!t||t.name!==u.language){Kl("english"),await M_();return}xt()==="test"&&await Gx(),u.mode==="quote"&&u.quoteLength.includes(-3)&&!Se()&&Vi(-1),u.tapeMode!=="off"&&t.rightToLeft&&(y("This language does not support tape mode.",0,{important:!0}),mx("off"));const e=!t.noLazyMode||u.mode==="custom";u.lazyMode&&!e?(qg=!0,y("This language does not support lazy mode.",0,{important:!0}),Am(!1,!0)):qg&&!t.noLazyMode&&Am(!0,!0),!u.lazyMode&&!t.noLazyMode&&(qg=!1),u.mode==="custom"&&console.debug("Custom text",Pd());let a,s,n=!1,i=!1;try{const l=await qV(t);a=l.words,s=l.sectionIndexes,n=l.hasTab,i=l.hasNewline}catch(l){console.error(l),l instanceof Za?y(l.message,0,{important:!0}):y(Ge(l,"Failed to generate words"),-1,{important:!0}),await M_();return}const r=!!vx;let o=!1;for(const l of a)/\d/g.test(l)&&!o&&(o=!0);o3(o),i3(n),r3(i),r!==o&&gv();for(let l=0;l<a.length;l++)Z.push(a[l],s[l]);u.keymapMode==="next"&&u.mode!=="zen"&&zr(Tl([...Z.getCurrent()],0)),hv(Z.getCurrent()),c9(t.rightToLeft),p9(t.ligatures??!1),n9(),console.debug("Test initialized with words",a),console.debug("Test initialized with section indexes",s)}function eC(){var t;return u.mode==="words"&&Z.length>=u.words&&u.words>0||u.mode==="custom"&&ua()==="word"&&Z.length>=Yt()&&Yt()!==0||u.mode==="quote"&&Z.length>=(((t=_t==null?void 0:_t.textSplit)==null?void 0:t.length)??0)||u.mode==="custom"&&ua()==="section"&&kl>=Yt()&&Ho.length===0&&Yt()!==0}async function eS(){var n,i,r;let t=100;const e=(i=(n=Ye(u.funbox).find(o=>{var l;return(l=o.properties)==null?void 0:l.find(c=>c.startsWith("toPush"))}))==null?void 0:n.properties)==null?void 0:i.find(o=>o.startsWith("toPush:")),a=e==null?void 0:e.split(":")[1];if(a!==void 0&&(t=+a-1),Z.length-E.history.length>t||eC())return;const s=Ye(u.funbox).find(o=>{var l;return(l=o.functions)==null?void 0:l.pullSection});if((r=s==null?void 0:s.functions)!=null&&r.pullSection&&Z.length-Z.currentIndex<20){const o=await s.functions.pullSection(u.language);if(o===!1){y("Error while getting section. Please try again later",-1),ox(s.name),bt();return}if(o===void 0)return;let l=0;for(let c=0;c<o.words.length;c++){const m=o.words[c];if(l>=u.words&&u.mode==="words")break;l++,Z.push(m,c),jT(m)}}try{const o=await eI(Z.length,t,Z.get(Z.length-1),Z.get(Z.length-2));Z.push(o.word,o.sectionIndex),jT(o.word)}catch(o){zm("fail","word generation error"),y(Ge(o,"Error while getting next word. Please try again later"),-1)}}const Uo={completedEvent:null,canRetry:!1};async function QV(){const{completedEvent:t}=Uo;if(t===null){y("Could not retry saving the result as the result no longer exists.",0,{duration:5,important:!0});return}Uo.canRetry&&(Uo.canRetry=!1,d("#retrySavingResultButton").addClass("hidden"),Ys(!0),y("Retrying to save..."),await iI(t,!0))}function YV(t){var L;let e=Be(Ft.spacing.first-xd);(e<0||u.mode==="zen")&&(e=0);let a=Be($u-Ft.spacing.last);(a<0||u.mode==="zen")&&(a=0);const s=S9();if(s.time%1!==0&&u.mode!=="time"&&k9(),qH(s.wpm),Cd&&!t){const V=Bx();fE(V.wpm),hE(V.raw),kb(),Cb(),xb()}const n=bd.map(V=>Math.round(V/5*60));if(u.mode!=="time"&&Cd&&s.time%1>=.5){const V=1/(s.time%1);n[n.length-1]=Math.round(n[n.length-1]*V)}const i=Pc(n),r=bg(n);let o=Be(ow(i/r)),l=Ft.spacing.array.slice();l.length>0&&(l=l.slice(0,l.length-1));let c=Be(ow(Pc(l)/bg(l)));(!o||isNaN(o))&&(o=0),(!c||isNaN(c))&&(c=0);const m=[];for(const V of hh)m.push(V.count??0);const f={wpm:Yi,raw:n,err:m},h=Pc(f.wpm??[]),v=bg(f.wpm??[]),w=Be(ow(h/v)),_=isNaN(w)?0:w;let S;if(u.mode==="custom"){const V=Pd();S={textLen:V.text.length,mode:V.mode,pipeDelimiter:V.pipeDelimiter,limit:V.limit}}const M=[];for(const V of((L=A())==null?void 0:L.tags)??[])V.active===!0&&M.push(V._id);const I=parseFloat(s.time.toString()),me=qx(I);let P=u.language;u.mode==="quote"&&(P=ii(u.language));const $=(_t==null?void 0:_t.group)??-1,T={wpm:s.wpm,rawWpm:s.wpmRaw,charStats:[s.correctChars+s.correctSpaces,s.incorrectChars,s.extraChars,s.missedChars],charTotal:s.allChars,acc:s.acc,mode:u.mode,mode2:db(u,_t),quoteLength:$,punctuation:u.punctuation,numbers:u.numbers,lazyMode:u.lazyMode,timestamp:Date.now(),language:P,restartCount:Nx,incompleteTests:Rx,incompleteTestSeconds:cv<0?0:Be(cv),difficulty:u.difficulty,blindMode:u.blindMode,tags:M,keySpacing:Ft.spacing.array,keyDuration:Ft.duration.array,keyOverlap:Be(Bi.total),lastKeyToEnd:a,startToFirstKey:e,consistency:o,wpmConsistency:_,keyConsistency:c,funbox:u.funbox,bailedOut:jo,chartData:f,customText:S,testDuration:I,afkDuration:me,stopOnLetter:u.stopOnError==="letter"};return T.mode!=="custom"&&delete T.customText,T.mode!=="quote"&&delete T.quoteLength,T}async function eu(t=!1){var w,_,S,M,I,me;if(!pa)return;zE(!0);const e=performance.now();BT(e),xn&&u.mode==="quote"&&N1(!1),await Qt(1),E.current.length!==0&&(E.pushHistory(),wa.pushHistory(),IE(E.history)),h3(e);const a=(e-Ft.spacing.last)/1e3;if((u.mode==="zen"||jo)&&a<7&&BT(Ft.spacing.last),FE(!0),qk(!1),$x(),vh(),Ob(),Pb(),Ib(),Nb(),ih(),Qx(),AO(),bo(),On.length!==((w=E.getHistory())==null?void 0:w.length)){const P=aO();gE(P)}(u.mode==="zen"||jo)&&x9();const s=YV(t);console.debug("Completed event object",s);function n(P){return typeof P=="number"?isNaN(P)?1:0:typeof P>"u"?1:typeof P=="object"&&P!==null?Object.values(P).reduce(($,T)=>$+n(T),0):0}let i=!1;n(s)>0&&(console.log(s),y("Failed to build result object: One of the fields is undefined or NaN",-1),i=!0);const r=Rn(s);let l=gh.slice(-5).every(P=>P);jo&&(l=!1);const c=parseInt(r.mode2);let m=!1;const f=(uv-lv)/1e3;if(u.mode!=="zen"&&!jo&&(s.testDuration<f-.25||s.testDuration>f+.25)?(y("Test invalid - inconsistent test duration",0),console.error("Test duration inconsistent",s.testDuration,f),tg(),i=!0):t?(y(`Test failed - ${Vm}`,0,{duration:1}),i=!0):l?(y("Test invalid - AFK detected",0),i=!0):xn?(y("Test invalid - repeated",0),i=!0):r.testDuration<1||u.mode==="time"&&c<15&&c>0||u.mode==="time"&&c===0&&r.testDuration<15||u.mode==="words"&&c<10&&c>0||u.mode==="words"&&c===0&&r.testDuration<15||u.mode==="custom"&&(ua()==="word"||ua()==="section")&&Yt()<10||u.mode==="custom"&&ua()==="time"&&Yt()<15||u.mode==="zen"&&r.testDuration<15?(y("Test invalid - too short",0),m=!0,i=!0):r.wpm<0||r.wpm>350&&r.mode!=="words"&&r.mode2!=="10"||r.wpm>420&&r.mode==="words"&&r.mode2==="10"?(y("Test invalid - wpm",0),tg(),i=!0):r.rawWpm<0||r.rawWpm>350&&r.mode!=="words"&&r.mode2!=="10"||r.rawWpm>420&&r.mode==="words"&&r.mode2==="10"?(y("Test invalid - raw",0),tg(),i=!0):(!((_=A())!=null&&_.lbOptOut)&&(r.acc<75||r.acc>100)||((S=A())==null?void 0:S.lbOptOut)===!0&&(r.acc<50||r.acc>100))&&(y("Test invalid - accuracy",0),tg(),i=!0),xn){const P=r.testDuration,$=r.afkDuration;let T=Be(P-$);T<0&&(T=0);const L=r.acc;jx(T),Dx(L,T)}const h=Px(),v=pr();if(u.mode==="custom"&&h!==""&&v)if(jo||E.history.length<Z.length){const P=(M=E.getHistory())==null?void 0:M.length,$=wx(h)+P;l_(h,$),y("Long custom text progress saved",1,{duration:5,important:!0});let T=sv(h,!0);T=T.slice($),lr(T)}else{l_(h,0);const P=sv(h,!0);lr(P),y("Long custom text completed",1,{duration:5,important:!0})}if(dU(r.testDuration-r.afkDuration),XU(),Se()?d(".pageTest #result #reportQuoteButton").removeClass("hidden"):(d(".pageTest #result #rateQuoteButton").addClass("hidden"),d(".pageTest #result #reportQuoteButton").addClass("hidden"),nr("testCompletedNoLogin"),i||(kn=r),i=!0),d("#result .stats .dailyLeaderboard").addClass("hidden"),v9(Rn(r)),ma()||gb(),await uV(r,t,Vm,l,xn,m,_t,i),r.chartData!=="toolong"&&delete r.chartData.unsmoothedRaw,r.testDuration>122&&(r.chartData="toolong",r.keySpacing="toolong",r.keyDuration="toolong"),i){nr("testCompletedInvalid");return}if(tO(),r.uid=(me=(I=da)==null?void 0:I.currentUser)==null?void 0:me.uid,oV(_t),Ys(!0),!r.bailedOut){const P=cU(r);P!==null&&(r.challenge=P)}r.hash=m$(r),await iI(r,!1)}async function iI(t,e){var n;if(!th){y("Result not saved: disabled by user",-1,{duration:3,customTitle:"Notice",important:!0}),Ys(!1);return}if(!ma()){y("Result not saved: offline",-1,{duration:2,customTitle:"Notice",important:!0}),Ys(!1),Uo.canRetry=!0,d("#retrySavingResultButton").removeClass("hidden"),e||(Uo.completedEvent=t);return}const a=await K.results.add({body:{result:t}});if(Ys(!1),a.status!==200){[460,461,463,464,465,466].includes(a.status)||(Uo.canRetry=!0,d("#retrySavingResultButton").removeClass("hidden"),e||(Uo.completedEvent=t)),console.log("Error saving result",t),a.body.message==="Old key data format"&&(a.body.message="Old key data format. Please refresh the page to download the new update. If the problem persists, please contact support."),/"result\..+" is (not allowed|required)/gi.test(a.body.message)&&(a.body.message="Looks like your result data is using an incorrect schema. Please refresh the page to download the new update. If the problem persists, please contact support."),y("Failed to save result: "+a.body.message,-1);return}const s=a.body.data;if(d("#result .stats .tags .editTagsButton").attr("data-result-id",s.insertedId),d("#result .stats .tags .editTagsButton").removeClass("invisible"),s.xp!==void 0){const i=((n=A())==null?void 0:n.xp)??0;J1(i,s.xp,la?s.xpBreakdown:void 0),V1(s.xp)}if(s.streak!==void 0&&vF(s.streak),s.insertedId!==void 0){const i=Rn(t);i._id=s.insertedId,s.isPb!==void 0&&s.isPb&&(i.isPb=!0),H1(i),U1(t.incompleteTests.length+1,t.testDuration+t.incompleteTestSeconds-t.afkDuration)}nr("testCompleted"),s.isPb!==void 0&&s.isPb?(await Mp(t.mode,t.mode2,t.punctuation,t.numbers,t.language,t.difficulty,t.lazyMode,t.funbox)!==void 0&&sV(),Dg("normal"),await fF(t.mode,t.mode2,t.punctuation,t.numbers,t.language,t.difficulty,t.lazyMode,t.wpm,t.acc,t.rawWpm,t.consistency)):aV(),s.dailyLeaderboardRank===void 0?d("#result .stats .dailyLeaderboard").addClass("hidden"):(d("#result .stats .dailyLeaderboard").css({maxWidth:"13rem",opacity:0}).removeClass("hidden").animate({opacity:1},Jt(500)),d("#result .stats .dailyLeaderboard .bottom").html(Te.rank(s.dailyLeaderboardRank,{fallback:""}))),d("#retrySavingResultButton").addClass("hidden"),e&&y("Result saved",1,{important:!0})}function Fc(t){if(Vm=t,kb(),Cb(),xb(),eu(!0),!th)return;const e=kh(performance.now()),a=qx(e);let s=Be(e-a);s<0&&(s=0),jx(s),eO();const n=Be(xh());Dx(n,s)}d(".pageTest").on("click","#testModesNotice .textButton.restart",()=>{bt()});d(".pageTest").on("click","#restartTestButton",()=>{jt(),!kd&&(pa&&u.repeatQuotes==="typing"&&u.mode==="quote"?bt({withSameWordset:!0}):bt())});d(".pageTest").on("click","#retrySavingResultButton",QV);d(".pageTest").on("click","#nextTestButton",()=>{jt(),bt()});d(".pageTest").on("click","#restartTestButtonWithSameWordset",()=>{if(u.mode==="zen"){y("Repeat test disabled in zen mode");return}jt(),bt({withSameWordset:!0})});d(".pageTest").on("click","#testConfig .mode .textButton",t=>{if(ks||d(t.currentTarget).hasClass("active"))return;const e=d(t.currentTarget).attr("mode")??"time";e!==void 0&&($a(e),jt(),bt())});d(".pageTest").on("click","#testConfig .wordCount .textButton",t=>{if(ks)return;const e=d(t.currentTarget).attr("wordCount")??"15";e!=="custom"&&(ho(parseInt(e)),jt(),bt())});d(".pageTest").on("click","#testConfig .time .textButton",t=>{if(ks)return;const e=d(t.currentTarget).attr("timeConfig")??"10";e!=="custom"&&(oi(parseInt(e)),jt(),bt())});d(".pageTest").on("click","#testConfig .quoteLength .textButton",t=>{if(ks)return;let e=parseInt(d(t.currentTarget).attr("quoteLength")??"1");e!==-2&&(e===-1&&(e=[0,1,2,3]),Vi(e,!1,t.shiftKey),jt(),bt())});d(".pageTest").on("click","#testConfig .punctuationMode.textButton",()=>{ks||(Fn(!u.punctuation),jt(),bt())});d(".pageTest").on("click","#testConfig .numbersMode.textButton",()=>{ks||(rn(!u.numbers),jt(),bt())});d("header").on("click","nav #startTestButton, #logo",()=>{xt()==="test"&&bt()});Gt((t,e,a)=>{xt()==="test"&&(t==="language"&&(e!=null&&e.startsWith("arabic")&&HV()&&Am(!0,!0),bt()),t==="difficulty"&&!a&&bt(),t==="showAllLines"&&!a&&bt(),t==="customLayoutFluid"&&u.funbox.includes("layoutfluid")&&bt(),t==="keymapMode"&&e==="next"&&u.mode!=="zen"&&setTimeout(()=>{zr(Tl([...Z.getCurrent()],0))},0)),t==="lazyMode"&&!a&&(u.language.startsWith("arabic")&&UV(e),e===!1&&(qg=!1))});GH((t,e)=>{t==="fail"&&e!==void 0&&Fc(e),t==="finish"&&eu()});function rI(t){tC.show({...t,focusFirstInput:"focusAndSelect",beforeAnimation:async e=>{e.querySelector("input").value=`${u.words}`}})}function JV(t=!1){tC.hide({clearModalChain:t})}function XV(){var e;const t=parseInt((e=tC.getModal().querySelector("input"))==null?void 0:e.value,10);t!==null&&!isNaN(t)&&t>=0&&isFinite(t)?ho(t)&&(jt(),bt(),t>2e3?y("Stay safe and take breaks!",0):t===0&&y("Infinite words! Make sure to use Bail Out from the command line to save your result.",0,{duration:7})):y("Custom word amount must be at least 1",0),JV(!0)}const tC=new Pt({dialogId:"customWordAmountModal",setup:async t=>{t.addEventListener("submit",e=>{e.preventDefault(),XV()})}});var Et;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function a(n){throw new Error}t.assertNever=a,t.arrayToEnum=n=>{let i={};for(let r of n)i[r]=r;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),r={};for(let o of i)r[o]=n[o];return t.objectValues(r)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.push(r);return i},t.find=(n,i)=>{for(let r of n)if(i(r))return r},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(r=>typeof r=="string"?`'${r}'`:r).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Et||(Et={}));var E_;(function(t){t.mergeShapes=(e,a)=>({...e,...a})})(E_||(E_={}));var le=Et.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),qr=t=>{switch(typeof t){case"undefined":return le.undefined;case"string":return le.string;case"number":return isNaN(t)?le.nan:le.number;case"boolean":return le.boolean;case"function":return le.function;case"bigint":return le.bigint;case"symbol":return le.symbol;case"object":return Array.isArray(t)?le.array:t===null?le.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?le.promise:typeof Map<"u"&&t instanceof Map?le.map:typeof Set<"u"&&t instanceof Set?le.set:typeof Date<"u"&&t instanceof Date?le.date:le.object;default:return le.unknown}},q=Et.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),e6=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),In=class oI extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let a=e||function(i){return i.message},s={_errors:[]},n=i=>{for(let r of i.issues)if(r.code==="invalid_union")r.unionErrors.map(n);else if(r.code==="invalid_return_type")n(r.returnTypeError);else if(r.code==="invalid_arguments")n(r.argumentsError);else if(r.path.length===0)s._errors.push(a(r));else{let o=s,l=0;for(;l<r.path.length;){let c=r.path[l];l===r.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(a(r))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),s}static assert(e){if(!(e instanceof oI))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Et.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){let a={},s=[];for(let n of this.issues)n.path.length>0?(a[n.path[0]]=a[n.path[0]]||[],a[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:a}}get formErrors(){return this.flatten()}};In.create=t=>new In(t);var tu=(t,e)=>{let a;switch(t.code){case q.invalid_type:t.received===le.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case q.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,Et.jsonStringifyReplacer)}`;break;case q.unrecognized_keys:a=`Unrecognized key(s) in object: ${Et.joinValues(t.keys,", ")}`;break;case q.invalid_union:a="Invalid input";break;case q.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${Et.joinValues(t.options)}`;break;case q.invalid_enum_value:a=`Invalid enum value. Expected ${Et.joinValues(t.options)}, received '${t.received}'`;break;case q.invalid_arguments:a="Invalid function arguments";break;case q.invalid_return_type:a="Invalid function return type";break;case q.invalid_date:a="Invalid date";break;case q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:Et.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case q.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case q.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case q.custom:a="Invalid input";break;case q.invalid_intersection_types:a="Intersection results could not be merged";break;case q.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case q.not_finite:a="Number must be finite";break;default:a=e.defaultError,Et.assertNever(t)}return{message:a}},dI=tu;function t6(t){dI=t}function vv(){return dI}var bv=t=>{let{data:e,path:a,errorMaps:s,issueData:n}=t,i=[...a,...n.path||[]],r={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="",l=s.filter(c=>!!c).slice().reverse();for(let c of l)o=c(r,{data:e,defaultError:o}).message;return{...n,path:i,message:o}},a6=[];function ee(t,e){let a=vv(),s=bv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===tu?void 0:tu].filter(n=>!!n)});t.common.issues.push(s)}var xs=class lI{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){let s=[];for(let n of a){if(n.status==="aborted")return Ue;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,a){let s=[];for(let n of a){let i=await n.key,r=await n.value;s.push({key:i,value:r})}return lI.mergeObjectSync(e,s)}static mergeObjectSync(e,a){let s={};for(let n of a){let{key:i,value:r}=n;if(i.status==="aborted"||r.status==="aborted")return Ue;i.status==="dirty"&&e.dirty(),r.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof r.value<"u"||n.alwaysSet)&&(s[i.value]=r.value)}return{status:e.value,value:s}}},Ue=Object.freeze({status:"aborted"}),wv=t=>({status:"dirty",value:t}),ts=t=>({status:"valid",value:t}),O_=t=>t.status==="aborted",I_=t=>t.status==="dirty",Km=t=>t.status==="valid",Gm=t=>typeof Promise<"u"&&t instanceof Promise;function _v(t,e,a,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function uI(t,e,a,s,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,a),a}var _e;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_e||(_e={}));var gc,yc,Li=class{constructor(e,a,s,n){this._cachedPath=[],this.parent=e,this.data=a,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},tS=(t,e)=>{if(Km(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let a=new In(t.common.issues);return this._error=a,this._error}}};function nt(t){if(!t)return{};let{errorMap:e,invalid_type_error:a,required_error:s,description:n}=t;if(e&&(a||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,r)=>{var o,l;let{message:c}=t;return i.code==="invalid_enum_value"?{message:c??r.defaultError}:typeof r.data>"u"?{message:(o=c??s)!==null&&o!==void 0?o:r.defaultError}:i.code!=="invalid_type"?{message:r.defaultError}:{message:(l=c??a)!==null&&l!==void 0?l:r.defaultError}},description:n}}var pt=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return qr(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:qr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new xs,ctx:{common:e.parent.common,data:e.data,parsedType:qr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let a=this._parse(e);if(Gm(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){let a=this._parse(e);return Promise.resolve(a)}parse(e,a){let s=this.safeParse(e,a);if(s.success)return s.data;throw s.error}safeParse(e,a){var s;let n={common:{issues:[],async:(s=a==null?void 0:a.async)!==null&&s!==void 0?s:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return tS(n,i)}async parseAsync(e,a){let s=await this.safeParseAsync(e,a);if(s.success)return s.data;throw s.error}async safeParseAsync(e,a){let s={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qr(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(Gm(n)?n:Promise.resolve(n));return tS(s,i)}refine(e,a){let s=n=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(n):a;return this._refinement((n,i)=>{let r=e(n),o=()=>i.addIssue({code:q.custom,...s(n)});return typeof Promise<"u"&&r instanceof Promise?r.then(l=>l?!0:(o(),!1)):r?!0:(o(),!1)})}refinement(e,a){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof a=="function"?a(s,n):a),!1))}_refinement(e){return new zn({schema:this,typeName:Ze.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return wi.create(this,this._def)}nullable(){return _o.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Sd.create(this,this._def)}promise(){return nu.create(this,this._def)}or(e){return af.create([this,e],this._def)}and(e){return sf.create(this,e,this._def)}transform(e){return new zn({...nt(this._def),schema:this,typeName:Ze.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let a=typeof e=="function"?e:()=>e;return new df({...nt(this._def),innerType:this,defaultValue:a,typeName:Ze.ZodDefault})}brand(){return new aC({typeName:Ze.ZodBranded,type:this,...nt(this._def)})}catch(e){let a=typeof e=="function"?e:()=>e;return new lf({...nt(this._def),innerType:this,catchValue:a,typeName:Ze.ZodCatch})}describe(e){let a=this.constructor;return new a({...this._def,description:e})}pipe(e){return sC.create(this,e)}readonly(){return uf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},s6=/^c[^\s-]{8,}$/i,n6=/^[0-9a-z]+$/,i6=/^[0-9A-HJKMNP-TV-Z]{26}$/,r6=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,o6=/^[a-z0-9_-]{21}$/i,d6=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,l6=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,u6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ew,c6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,p6=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,m6=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cI="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",f6=new RegExp(`^${cI}$`);function pI(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function h6(t){return new RegExp(`^${pI(t)}$`)}function mI(t){let e=`${cI}T${pI(t)}`,a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function g6(t,e){return!!((e==="v4"||!e)&&c6.test(t)||(e==="v6"||!e)&&p6.test(t))}var au=class vc extends pt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==le.string){let n=this._getOrReturnCtx(e);return ee(n,{code:q.invalid_type,expected:le.string,received:n.parsedType}),Ue}let a=new xs,s;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:q.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="max")e.data.length>n.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:q.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="length"){let i=e.data.length>n.value,r=e.data.length<n.value;(i||r)&&(s=this._getOrReturnCtx(e,s),i?ee(s,{code:q.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):r&&ee(s,{code:q.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),a.dirty())}else if(n.kind==="email")l6.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"email",code:q.invalid_string,message:n.message}),a.dirty());else if(n.kind==="emoji")Ew||(Ew=new RegExp(u6,"u")),Ew.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"emoji",code:q.invalid_string,message:n.message}),a.dirty());else if(n.kind==="uuid")r6.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"uuid",code:q.invalid_string,message:n.message}),a.dirty());else if(n.kind==="nanoid")o6.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"nanoid",code:q.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid")s6.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cuid",code:q.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid2")n6.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cuid2",code:q.invalid_string,message:n.message}),a.dirty());else if(n.kind==="ulid")i6.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"ulid",code:q.invalid_string,message:n.message}),a.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ee(s,{validation:"url",code:q.invalid_string,message:n.message}),a.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"regex",code:q.invalid_string,message:n.message}),a.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),a.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:{startsWith:n.value},message:n.message}),a.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:{endsWith:n.value},message:n.message}),a.dirty()):n.kind==="datetime"?mI(n).test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:"datetime",message:n.message}),a.dirty()):n.kind==="date"?f6.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:"date",message:n.message}),a.dirty()):n.kind==="time"?h6(n).test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:q.invalid_string,validation:"time",message:n.message}),a.dirty()):n.kind==="duration"?d6.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"duration",code:q.invalid_string,message:n.message}),a.dirty()):n.kind==="ip"?g6(e.data,n.version)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"ip",code:q.invalid_string,message:n.message}),a.dirty()):n.kind==="base64"?m6.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"base64",code:q.invalid_string,message:n.message}),a.dirty()):Et.assertNever(n);return{status:a.value,value:e.data}}_regex(e,a,s){return this.refinement(n=>e.test(n),{validation:a,code:q.invalid_string,..._e.errToObj(s)})}_addCheck(e){return new vc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._e.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._e.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._e.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._e.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._e.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._e.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._e.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._e.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._e.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._e.errToObj(e)})}datetime(e){var a,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(a=e==null?void 0:e.offset)!==null&&a!==void 0?a:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,..._e.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._e.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._e.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,..._e.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,..._e.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,..._e.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,..._e.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,..._e.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,..._e.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,..._e.errToObj(a)})}nonempty(e){return this.min(1,_e.errToObj(e))}trim(){return new vc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};au.create=t=>{var e;return new au({checks:[],typeName:Ze.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...nt(t)})};function y6(t,e){let a=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=a>s?a:s,i=parseInt(t.toFixed(n).replace(".","")),r=parseInt(e.toFixed(n).replace(".",""));return i%r/Math.pow(10,n)}var Qm=class P_ extends pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==le.number){let n=this._getOrReturnCtx(e);return ee(n,{code:q.invalid_type,expected:le.number,received:n.parsedType}),Ue}let a,s=new xs;for(let n of this._def.checks)n.kind==="int"?Et.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),ee(a,{code:q.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),ee(a,{code:q.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),ee(a,{code:q.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="multipleOf"?y6(e.data,n.value)!==0&&(a=this._getOrReturnCtx(e,a),ee(a,{code:q.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),ee(a,{code:q.not_finite,message:n.message}),s.dirty()):Et.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,_e.toString(a))}gt(e,a){return this.setLimit("min",e,!1,_e.toString(a))}lte(e,a){return this.setLimit("max",e,!0,_e.toString(a))}lt(e,a){return this.setLimit("max",e,!1,_e.toString(a))}setLimit(e,a,s,n){return new P_({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:_e.toString(n)}]})}_addCheck(e){return new P_({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_e.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_e.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:_e.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:_e.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_e.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_e.toString(e)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Et.isInteger(e.value))}get isFinite(){let e=null,a=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(a===null||s.value>a)&&(a=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(a)&&Number.isFinite(e)}};Qm.create=t=>new Qm({checks:[],typeName:Ze.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...nt(t)});var Ym=class Z_ extends pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==le.bigint){let n=this._getOrReturnCtx(e);return ee(n,{code:q.invalid_type,expected:le.bigint,received:n.parsedType}),Ue}let a,s=new xs;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),ee(a,{code:q.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),ee(a,{code:q.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),ee(a,{code:q.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):Et.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,_e.toString(a))}gt(e,a){return this.setLimit("min",e,!1,_e.toString(a))}lte(e,a){return this.setLimit("max",e,!0,_e.toString(a))}lt(e,a){return this.setLimit("max",e,!1,_e.toString(a))}setLimit(e,a,s,n){return new Z_({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:_e.toString(n)}]})}_addCheck(e){return new Z_({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_e.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:_e.toString(a)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};Ym.create=t=>{var e;return new Ym({checks:[],typeName:Ze.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...nt(t)})};var Jm=class extends pt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==le.boolean){let a=this._getOrReturnCtx(e);return ee(a,{code:q.invalid_type,expected:le.boolean,received:a.parsedType}),Ue}return ts(e.data)}};Jm.create=t=>new Jm({typeName:Ze.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...nt(t)});var Xm=class fI extends pt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==le.date){let n=this._getOrReturnCtx(e);return ee(n,{code:q.invalid_type,expected:le.date,received:n.parsedType}),Ue}if(isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return ee(n,{code:q.invalid_date}),Ue}let a=new xs,s;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:q.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),a.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:q.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),a.dirty()):Et.assertNever(n);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new fI({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:_e.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:_e.toString(a)})}get minDate(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}};Xm.create=t=>new Xm({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ze.ZodDate,...nt(t)});var kv=class extends pt{_parse(e){if(this._getType(e)!==le.symbol){let a=this._getOrReturnCtx(e);return ee(a,{code:q.invalid_type,expected:le.symbol,received:a.parsedType}),Ue}return ts(e.data)}};kv.create=t=>new kv({typeName:Ze.ZodSymbol,...nt(t)});var ef=class extends pt{_parse(e){if(this._getType(e)!==le.undefined){let a=this._getOrReturnCtx(e);return ee(a,{code:q.invalid_type,expected:le.undefined,received:a.parsedType}),Ue}return ts(e.data)}};ef.create=t=>new ef({typeName:Ze.ZodUndefined,...nt(t)});var tf=class extends pt{_parse(e){if(this._getType(e)!==le.null){let a=this._getOrReturnCtx(e);return ee(a,{code:q.invalid_type,expected:le.null,received:a.parsedType}),Ue}return ts(e.data)}};tf.create=t=>new tf({typeName:Ze.ZodNull,...nt(t)});var su=class extends pt{constructor(){super(...arguments),this._any=!0}_parse(e){return ts(e.data)}};su.create=t=>new su({typeName:Ze.ZodAny,...nt(t)});var nd=class extends pt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ts(e.data)}};nd.create=t=>new nd({typeName:Ze.ZodUnknown,...nt(t)});var fr=class extends pt{_parse(e){let a=this._getOrReturnCtx(e);return ee(a,{code:q.invalid_type,expected:le.never,received:a.parsedType}),Ue}};fr.create=t=>new fr({typeName:Ze.ZodNever,...nt(t)});var xv=class extends pt{_parse(e){if(this._getType(e)!==le.undefined){let a=this._getOrReturnCtx(e);return ee(a,{code:q.invalid_type,expected:le.void,received:a.parsedType}),Ue}return ts(e.data)}};xv.create=t=>new xv({typeName:Ze.ZodVoid,...nt(t)});var Sd=class Wg extends pt{_parse(e){let{ctx:a,status:s}=this._processInputParams(e),n=this._def;if(a.parsedType!==le.array)return ee(a,{code:q.invalid_type,expected:le.array,received:a.parsedType}),Ue;if(n.exactLength!==null){let r=a.data.length>n.exactLength.value,o=a.data.length<n.exactLength.value;(r||o)&&(ee(a,{code:r?q.too_big:q.too_small,minimum:o?n.exactLength.value:void 0,maximum:r?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&a.data.length<n.minLength.value&&(ee(a,{code:q.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&a.data.length>n.maxLength.value&&(ee(a,{code:q.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),a.common.async)return Promise.all([...a.data].map((r,o)=>n.type._parseAsync(new Li(a,r,a.path,o)))).then(r=>xs.mergeArray(s,r));let i=[...a.data].map((r,o)=>n.type._parseSync(new Li(a,r,a.path,o)));return xs.mergeArray(s,i)}get element(){return this._def.type}min(e,a){return new Wg({...this._def,minLength:{value:e,message:_e.toString(a)}})}max(e,a){return new Wg({...this._def,maxLength:{value:e,message:_e.toString(a)}})}length(e,a){return new Wg({...this._def,exactLength:{value:e,message:_e.toString(a)}})}nonempty(e){return this.min(1,e)}};Sd.create=(t,e)=>new Sd({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ze.ZodArray,...nt(e)});function sl(t){if(t instanceof on){let e={};for(let a in t.shape){let s=t.shape[a];e[a]=wi.create(sl(s))}return new on({...t._def,shape:()=>e})}else return t instanceof Sd?new Sd({...t._def,type:sl(t.element)}):t instanceof wi?wi.create(sl(t.unwrap())):t instanceof _o?_o.create(sl(t.unwrap())):t instanceof wo?wo.create(t.items.map(e=>sl(e))):t}var on=class yn extends pt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),a=Et.objectKeys(e);return this._cached={shape:e,keys:a}}_parse(e){if(this._getType(e)!==le.object){let l=this._getOrReturnCtx(e);return ee(l,{code:q.invalid_type,expected:le.object,received:l.parsedType}),Ue}let{status:a,ctx:s}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof fr&&this._def.unknownKeys==="strip"))for(let l in s.data)i.includes(l)||r.push(l);let o=[];for(let l of i){let c=n[l],m=s.data[l];o.push({key:{status:"valid",value:l},value:c._parse(new Li(s,m,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof fr){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of r)o.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(l==="strict")r.length>0&&(ee(s,{code:q.unrecognized_keys,keys:r}),a.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of r){let m=s.data[c];o.push({key:{status:"valid",value:c},value:l._parse(new Li(s,m,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of o){let m=await c.key,f=await c.value;l.push({key:m,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>xs.mergeObjectSync(a,l)):xs.mergeObjectSync(a,o)}get shape(){return this._def.shape()}strict(e){return _e.errToObj,new yn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,s)=>{var n,i,r,o;let l=(r=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,a,s).message)!==null&&r!==void 0?r:s.defaultError;return a.code==="unrecognized_keys"?{message:(o=_e.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new yn({...this._def,unknownKeys:"strip"})}passthrough(){return new yn({...this._def,unknownKeys:"passthrough"})}extend(e){return new yn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new yn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ze.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new yn({...this._def,catchall:e})}pick(e){let a={};return Et.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(a[s]=this.shape[s])}),new yn({...this._def,shape:()=>a})}omit(e){let a={};return Et.objectKeys(this.shape).forEach(s=>{e[s]||(a[s]=this.shape[s])}),new yn({...this._def,shape:()=>a})}deepPartial(){return sl(this)}partial(e){let a={};return Et.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?a[s]=n:a[s]=n.optional()}),new yn({...this._def,shape:()=>a})}required(e){let a={};return Et.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])a[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof wi;)n=n._def.innerType;a[s]=n}}),new yn({...this._def,shape:()=>a})}keyof(){return wI(Et.objectKeys(this.shape))}};on.create=(t,e)=>new on({shape:()=>t,unknownKeys:"strip",catchall:fr.create(),typeName:Ze.ZodObject,...nt(e)});on.strictCreate=(t,e)=>new on({shape:()=>t,unknownKeys:"strict",catchall:fr.create(),typeName:Ze.ZodObject,...nt(e)});on.lazycreate=(t,e)=>new on({shape:t,unknownKeys:"strip",catchall:fr.create(),typeName:Ze.ZodObject,...nt(e)});var af=class extends pt{_parse(e){let{ctx:a}=this._processInputParams(e),s=this._def.options;function n(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return a.common.issues.push(...o.ctx.common.issues),o.result;let r=i.map(o=>new In(o.ctx.common.issues));return ee(a,{code:q.invalid_union,unionErrors:r}),Ue}if(a.common.async)return Promise.all(s.map(async i=>{let r={...a,common:{...a.common,issues:[]},parent:null};return{result:await i._parseAsync({data:a.data,path:a.path,parent:r}),ctx:r}})).then(n);{let i,r=[];for(let l of s){let c={...a,common:{...a.common,issues:[]},parent:null},m=l._parseSync({data:a.data,path:a.path,parent:c});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:c}),c.common.issues.length&&r.push(c.common.issues)}if(i)return a.common.issues.push(...i.ctx.common.issues),i.result;let o=r.map(l=>new In(l));return ee(a,{code:q.invalid_union,unionErrors:o}),Ue}}get options(){return this._def.options}};af.create=(t,e)=>new af({options:t,typeName:Ze.ZodUnion,...nt(e)});var Mr=t=>t instanceof nf?Mr(t.schema):t instanceof zn?Mr(t.innerType()):t instanceof rf?[t.value]:t instanceof $h?t.options:t instanceof of?Et.objectValues(t.enum):t instanceof df?Mr(t._def.innerType):t instanceof ef?[void 0]:t instanceof tf?[null]:t instanceof wi?[void 0,...Mr(t.unwrap())]:t instanceof _o?[null,...Mr(t.unwrap())]:t instanceof aC||t instanceof uf?Mr(t.unwrap()):t instanceof lf?Mr(t._def.innerType):[],hI=class gI extends pt{_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==le.object)return ee(a,{code:q.invalid_type,expected:le.object,received:a.parsedType}),Ue;let s=this.discriminator,n=a.data[s],i=this.optionsMap.get(n);return i?a.common.async?i._parseAsync({data:a.data,path:a.path,parent:a}):i._parseSync({data:a.data,path:a.path,parent:a}):(ee(a,{code:q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,s){let n=new Map;for(let i of a){let r=Mr(i.shape[e]);if(!r.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of r){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new gI({typeName:Ze.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:n,...nt(s)})}};function N_(t,e){let a=qr(t),s=qr(e);if(t===e)return{valid:!0,data:t};if(a===le.object&&s===le.object){let n=Et.objectKeys(e),i=Et.objectKeys(t).filter(o=>n.indexOf(o)!==-1),r={...t,...e};for(let o of i){let l=N_(t[o],e[o]);if(!l.valid)return{valid:!1};r[o]=l.data}return{valid:!0,data:r}}else if(a===le.array&&s===le.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let r=t[i],o=e[i],l=N_(r,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return a===le.date&&s===le.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var sf=class extends pt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=(i,r)=>{if(O_(i)||O_(r))return Ue;let o=N_(i.value,r.value);return o.valid?((I_(i)||I_(r))&&a.dirty(),{status:a.value,value:o.data}):(ee(s,{code:q.invalid_intersection_types}),Ue)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,r])=>n(i,r)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};sf.create=(t,e,a)=>new sf({left:t,right:e,typeName:Ze.ZodIntersection,...nt(a)});var wo=class yI extends pt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==le.array)return ee(s,{code:q.invalid_type,expected:le.array,received:s.parsedType}),Ue;if(s.data.length<this._def.items.length)return ee(s,{code:q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ue;!this._def.rest&&s.data.length>this._def.items.length&&(ee(s,{code:q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());let n=[...s.data].map((i,r)=>{let o=this._def.items[r]||this._def.rest;return o?o._parse(new Li(s,i,s.path,r)):null}).filter(i=>!!i);return s.common.async?Promise.all(n).then(i=>xs.mergeArray(a,i)):xs.mergeArray(a,n)}get items(){return this._def.items}rest(e){return new yI({...this._def,rest:e})}};wo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wo({items:t,typeName:Ze.ZodTuple,rest:null,...nt(e)})};var vI=class R_ extends pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==le.object)return ee(s,{code:q.invalid_type,expected:le.object,received:s.parsedType}),Ue;let n=[],i=this._def.keyType,r=this._def.valueType;for(let o in s.data)n.push({key:i._parse(new Li(s,o,s.path,o)),value:r._parse(new Li(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?xs.mergeObjectAsync(a,n):xs.mergeObjectSync(a,n)}get element(){return this._def.valueType}static create(e,a,s){return a instanceof pt?new R_({keyType:e,valueType:a,typeName:Ze.ZodRecord,...nt(s)}):new R_({keyType:au.create(),valueType:e,typeName:Ze.ZodRecord,...nt(a)})}},Cv=class extends pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==le.map)return ee(s,{code:q.invalid_type,expected:le.map,received:s.parsedType}),Ue;let n=this._def.keyType,i=this._def.valueType,r=[...s.data.entries()].map(([o,l],c)=>({key:n._parse(new Li(s,o,s.path,[c,"key"])),value:i._parse(new Li(s,l,s.path,[c,"value"]))}));if(s.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of r){let c=await l.key,m=await l.value;if(c.status==="aborted"||m.status==="aborted")return Ue;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}})}else{let o=new Map;for(let l of r){let c=l.key,m=l.value;if(c.status==="aborted"||m.status==="aborted")return Ue;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}}}};Cv.create=(t,e,a)=>new Cv({valueType:e,keyType:t,typeName:Ze.ZodMap,...nt(a)});var Tv=class j_ extends pt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==le.set)return ee(s,{code:q.invalid_type,expected:le.set,received:s.parsedType}),Ue;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(ee(s,{code:q.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),a.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(ee(s,{code:q.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),a.dirty());let i=this._def.valueType;function r(l){let c=new Set;for(let m of l){if(m.status==="aborted")return Ue;m.status==="dirty"&&a.dirty(),c.add(m.value)}return{status:a.value,value:c}}let o=[...s.data.values()].map((l,c)=>i._parse(new Li(s,l,s.path,c)));return s.common.async?Promise.all(o).then(l=>r(l)):r(o)}min(e,a){return new j_({...this._def,minSize:{value:e,message:_e.toString(a)}})}max(e,a){return new j_({...this._def,maxSize:{value:e,message:_e.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}};Tv.create=(t,e)=>new Tv({valueType:t,minSize:null,maxSize:null,typeName:Ze.ZodSet,...nt(e)});var bI=class Fg extends pt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==le.function)return ee(a,{code:q.invalid_type,expected:le.function,received:a.parsedType}),Ue;function s(o,l){return bv({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,vv(),tu].filter(c=>!!c),issueData:{code:q.invalid_arguments,argumentsError:l}})}function n(o,l){return bv({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,vv(),tu].filter(c=>!!c),issueData:{code:q.invalid_return_type,returnTypeError:l}})}let i={errorMap:a.common.contextualErrorMap},r=a.data;if(this._def.returns instanceof nu){let o=this;return ts(async function(...l){let c=new In([]),m=await o._def.args.parseAsync(l,i).catch(h=>{throw c.addIssue(s(l,h)),c}),f=await Reflect.apply(r,this,m);return await o._def.returns._def.type.parseAsync(f,i).catch(h=>{throw c.addIssue(n(f,h)),c})})}else{let o=this;return ts(function(...l){let c=o._def.args.safeParse(l,i);if(!c.success)throw new In([s(l,c.error)]);let m=Reflect.apply(r,this,c.data),f=o._def.returns.safeParse(m,i);if(!f.success)throw new In([n(m,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Fg({...this._def,args:wo.create(e).rest(nd.create())})}returns(e){return new Fg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,s){return new Fg({args:e||wo.create([]).rest(nd.create()),returns:a||nd.create(),typeName:Ze.ZodFunction,...nt(s)})}},nf=class extends pt{get schema(){return this._def.getter()}_parse(e){let{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}};nf.create=(t,e)=>new nf({getter:t,typeName:Ze.ZodLazy,...nt(e)});var rf=class extends pt{_parse(e){if(e.data!==this._def.value){let a=this._getOrReturnCtx(e);return ee(a,{received:a.data,code:q.invalid_literal,expected:this._def.value}),Ue}return{status:"valid",value:e.data}}get value(){return this._def.value}};rf.create=(t,e)=>new rf({value:t,typeName:Ze.ZodLiteral,...nt(e)});function wI(t,e){return new $h({values:t,typeName:Ze.ZodEnum,...nt(e)})}var $h=class D_ extends pt{constructor(){super(...arguments),gc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let a=this._getOrReturnCtx(e),s=this._def.values;return ee(a,{expected:Et.joinValues(s),received:a.parsedType,code:q.invalid_type}),Ue}if(_v(this,gc)||uI(this,gc,new Set(this._def.values)),!_v(this,gc).has(e.data)){let a=this._getOrReturnCtx(e),s=this._def.values;return ee(a,{received:a.data,code:q.invalid_enum_value,options:s}),Ue}return ts(e.data)}get options(){return this._def.values}get enum(){let e={};for(let a of this._def.values)e[a]=a;return e}get Values(){let e={};for(let a of this._def.values)e[a]=a;return e}get Enum(){let e={};for(let a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return D_.create(e,{...this._def,...a})}exclude(e,a=this._def){return D_.create(this.options.filter(s=>!e.includes(s)),{...this._def,...a})}};gc=new WeakMap;$h.create=wI;var of=class extends pt{constructor(){super(...arguments),yc.set(this,void 0)}_parse(e){let a=Et.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==le.string&&s.parsedType!==le.number){let n=Et.objectValues(a);return ee(s,{expected:Et.joinValues(n),received:s.parsedType,code:q.invalid_type}),Ue}if(_v(this,yc)||uI(this,yc,new Set(Et.getValidEnumValues(this._def.values))),!_v(this,yc).has(e.data)){let n=Et.objectValues(a);return ee(s,{received:s.data,code:q.invalid_enum_value,options:n}),Ue}return ts(e.data)}get enum(){return this._def.values}};yc=new WeakMap;of.create=(t,e)=>new of({values:t,typeName:Ze.ZodNativeEnum,...nt(e)});var nu=class extends pt{unwrap(){return this._def.type}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==le.promise&&a.common.async===!1)return ee(a,{code:q.invalid_type,expected:le.promise,received:a.parsedType}),Ue;let s=a.parsedType===le.promise?a.data:Promise.resolve(a.data);return ts(s.then(n=>this._def.type.parseAsync(n,{path:a.path,errorMap:a.common.contextualErrorMap})))}};nu.create=(t,e)=>new nu({type:t,typeName:Ze.ZodPromise,...nt(e)});var zn=class extends pt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:r=>{ee(s,r),r.fatal?a.abort():a.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let r=n.transform(s.data,i);if(s.common.async)return Promise.resolve(r).then(async o=>{if(a.value==="aborted")return Ue;let l=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return l.status==="aborted"?Ue:l.status==="dirty"||a.value==="dirty"?wv(l.value):l});{if(a.value==="aborted")return Ue;let o=this._def.schema._parseSync({data:r,path:s.path,parent:s});return o.status==="aborted"?Ue:o.status==="dirty"||a.value==="dirty"?wv(o.value):o}}if(n.type==="refinement"){let r=o=>{let l=n.refinement(o,i);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?Ue:(o.status==="dirty"&&a.dirty(),r(o.value),{status:a.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?Ue:(o.status==="dirty"&&a.dirty(),r(o.value).then(()=>({status:a.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){let r=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Km(r))return r;let o=n.transform(r.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(r=>Km(r)?Promise.resolve(n.transform(r.value,i)).then(o=>({status:a.value,value:o})):r);Et.assertNever(n)}};zn.create=(t,e,a)=>new zn({schema:t,typeName:Ze.ZodEffects,effect:e,...nt(a)});zn.createWithPreprocess=(t,e,a)=>new zn({schema:e,effect:{type:"preprocess",transform:t},typeName:Ze.ZodEffects,...nt(a)});var wi=class extends pt{_parse(e){return this._getType(e)===le.undefined?ts(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};wi.create=(t,e)=>new wi({innerType:t,typeName:Ze.ZodOptional,...nt(e)});var _o=class extends pt{_parse(e){return this._getType(e)===le.null?ts(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};_o.create=(t,e)=>new _o({innerType:t,typeName:Ze.ZodNullable,...nt(e)});var df=class extends pt{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return a.parsedType===le.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:a.path,parent:a})}removeDefault(){return this._def.innerType}};df.create=(t,e)=>new df({innerType:t,typeName:Ze.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...nt(e)});var lf=class extends pt{_parse(e){let{ctx:a}=this._processInputParams(e),s={...a,common:{...a.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Gm(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new In(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new In(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};lf.create=(t,e)=>new lf({innerType:t,typeName:Ze.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...nt(e)});var Sv=class extends pt{_parse(e){if(this._getType(e)!==le.nan){let a=this._getOrReturnCtx(e);return ee(a,{code:q.invalid_type,expected:le.nan,received:a.parsedType}),Ue}return{status:"valid",value:e.data}}};Sv.create=t=>new Sv({typeName:Ze.ZodNaN,...nt(t)});var v6=Symbol("zod_brand"),aC=class extends pt{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return this._def.type._parse({data:s,path:a.path,parent:a})}unwrap(){return this._def.type}},sC=class _I extends pt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Ue:n.status==="dirty"?(a.dirty(),wv(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Ue:n.status==="dirty"?(a.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,a){return new _I({in:e,out:a,typeName:Ze.ZodPipeline})}},uf=class extends pt{_parse(e){let a=this._def.innerType._parse(e),s=n=>(Km(n)&&(n.value=Object.freeze(n.value)),n);return Gm(a)?a.then(n=>s(n)):s(a)}unwrap(){return this._def.innerType}};uf.create=(t,e)=>new uf({innerType:t,typeName:Ze.ZodReadonly,...nt(e)});function kI(t,e={},a){return t?su.create().superRefine((s,n)=>{var i,r;if(!t(s)){let o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,l=(r=(i=o.fatal)!==null&&i!==void 0?i:a)!==null&&r!==void 0?r:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:l})}}):su.create()}var b6={object:on.lazycreate},Ze;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ze||(Ze={}));var w6=(t,e={message:`Input not instance of ${t.name}`})=>kI(a=>a instanceof t,e),xI=au.create,CI=Qm.create,_6=Sv.create,k6=Ym.create,TI=Jm.create,x6=Xm.create,C6=kv.create,T6=ef.create,S6=tf.create,$6=su.create,A6=nd.create,L6=fr.create,M6=xv.create,E6=Sd.create,O6=on.create,I6=on.strictCreate,P6=af.create,Z6=hI.create,N6=sf.create,R6=wo.create,j6=vI.create,D6=Cv.create,B6=Tv.create,q6=bI.create,W6=nf.create,B_=rf.create,F6=$h.create,z6=of.create,H6=nu.create,aS=zn.create,U6=wi.create,V6=_o.create,K6=zn.createWithPreprocess,G6=sC.create,Q6=()=>xI().optional(),Y6=()=>CI().optional(),J6=()=>TI().optional(),X6={string:t=>au.create({...t,coerce:!0}),number:t=>Qm.create({...t,coerce:!0}),boolean:t=>Jm.create({...t,coerce:!0}),bigint:t=>Ym.create({...t,coerce:!0}),date:t=>Xm.create({...t,coerce:!0})},eK=Ue,b=Object.freeze({__proto__:null,defaultErrorMap:tu,setErrorMap:t6,getErrorMap:vv,makeIssue:bv,EMPTY_PATH:a6,addIssueToContext:ee,ParseStatus:xs,INVALID:Ue,DIRTY:wv,OK:ts,isAborted:O_,isDirty:I_,isValid:Km,isAsync:Gm,get util(){return Et},get objectUtil(){return E_},ZodParsedType:le,getParsedType:qr,ZodType:pt,datetimeRegex:mI,ZodString:au,ZodNumber:Qm,ZodBigInt:Ym,ZodBoolean:Jm,ZodDate:Xm,ZodSymbol:kv,ZodUndefined:ef,ZodNull:tf,ZodAny:su,ZodUnknown:nd,ZodNever:fr,ZodVoid:xv,ZodArray:Sd,ZodObject:on,ZodUnion:af,ZodDiscriminatedUnion:hI,ZodIntersection:sf,ZodTuple:wo,ZodRecord:vI,ZodMap:Cv,ZodSet:Tv,ZodFunction:bI,ZodLazy:nf,ZodLiteral:rf,ZodEnum:$h,ZodNativeEnum:of,ZodPromise:nu,ZodEffects:zn,ZodTransformer:zn,ZodOptional:wi,ZodNullable:_o,ZodDefault:df,ZodCatch:lf,ZodNaN:Sv,BRAND:v6,ZodBranded:aC,ZodPipeline:sC,ZodReadonly:uf,custom:kI,Schema:pt,ZodSchema:pt,late:b6,get ZodFirstPartyTypeKind(){return Ze},coerce:X6,any:$6,array:E6,bigint:k6,boolean:TI,date:x6,discriminatedUnion:Z6,effect:aS,enum:F6,function:q6,instanceof:w6,intersection:N6,lazy:W6,literal:B_,map:D6,nan:_6,nativeEnum:z6,never:L6,null:S6,nullable:V6,number:CI,object:O6,oboolean:J6,onumber:Y6,optional:U6,ostring:Q6,pipeline:G6,preprocess:K6,promise:H6,record:j6,set:B6,strictObject:I6,string:xI,symbol:C6,transformer:aS,tuple:R6,undefined:T6,union:P6,unknown:A6,void:M6,NEVER:eK,ZodIssueCode:q,quotelessJson:e6,ZodError:In}),id=b.string().regex(/^\d+$/,'Needs to be a number or a number represented as a string e.g. "10".').or(b.number().transform(String)),qb=()=>b.string().regex(/^[a-zA-Z0-9_]+$/),Wb=qb();qb().max(50);var Zd=b.string().max(50).regex(/^[a-zA-Z0-9_+]+$/,"Can only contain letters [a-zA-Z0-9_+]");b.string().nullable().optional().transform(t=>t??void 0);b.number().nonnegative().max(100);b.number().nonnegative().max(420);b.enum(["repeat","random","shuffle"]);b.enum(["word","time","section"]);var nC=b.enum(["normal","expert","master"]),Hu=b.object({acc:b.number().nonnegative().max(100),consistency:b.number().nonnegative().max(100),difficulty:nC,lazyMode:b.boolean().optional(),language:b.string().max(100).regex(/[\w+]+/),punctuation:b.boolean().optional(),numbers:b.boolean().optional(),raw:b.number().nonnegative(),wpm:b.number().nonnegative(),timestamp:b.number().nonnegative()}),Fb=b.object({time:b.record(id.describe("Number of seconds as string"),b.array(Hu)),words:b.record(id.describe("Number of words as string"),b.array(Hu)),quote:b.record(id,b.array(Hu)),custom:b.record(b.literal("custom"),b.array(Hu)),zen:b.record(b.literal("zen"),b.array(Hu))}),tK=b.union([b.literal("10"),b.literal("25"),b.literal("50"),b.literal("100")]),aK=b.union([b.literal("15"),b.literal("30"),b.literal("60"),b.literal("120")]),sK=b.union([b.literal("short"),b.literal("medium"),b.literal("long"),b.literal("thicc")]),iC=Fb.keyof(),SI=b.union([id,B_("zen"),B_("custom")],{errorMap:()=>({message:'Needs to be either a number, "zen" or "custom".'})}),nK=b.enum(["off","slow","medium","fast"]),iK=b.enum(["off","esc","tab","enter"]),rK=b.union([b.literal(-3),b.literal(-2),b.literal(-1),b.literal(0),b.literal(1),b.literal(2),b.literal(3)]),oK=b.array(rK),sS=b.enum(["off","default","block","outline","underline","carrot","banana"]),dK=b.enum(["off","on","max"]),lK=b.enum(["off","below","replace"]),uK=b.enum(["off","bar","text","mini"]),Ow=b.enum(["off","text","mini"]),cK=b.enum(["off","on","fav","light","dark","custom"]),pK=b.enum(["black","sub","text","main"]),mK=b.enum(["0.25","0.5","0.75","1"]),fK=b.enum(["off","word","letter"]),hK=b.enum(["off","static","react","next"]),gK=b.enum(["staggered","alice","matrix","split","split_matrix","steno","steno_matrix"]),yK=b.enum(["lowercase","uppercase","blank","dynamic"]),vK=b.enum(["always","layout","never"]),bK=b.number().min(.5).max(3.5).step(.1),wK=b.enum(["manual","on"]),_K=b.enum(["off","1","2","3","4"]),kK=b.enum(["off","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"]),xK=b.number().min(0).max(1),CK=b.enum(["off","average","pb","tagPb","last","custom","daily"]),TK=b.tuple([b.enum(["on","off"]),b.enum(["on","off"]),b.enum(["on","off"]),b.enum(["on","off"])]),SK=b.enum(["off","custom"]),$K=b.enum(["off","letter","word","next_word","next_two_words","next_three_words"]),AK=b.enum(["off","letter","word"]),LK=b.enum(["wpm","cpm","wps","cps","wph"]),MK=b.enum(["off","result","on","sellout"]),EK=b.enum(["off","custom"]),OK=b.enum(["off","typing"]),IK=b.enum(["off","on","keymap"]),PK=b.enum(["cover","contain","max"]),ZK=b.tuple([b.number(),b.number(),b.number(),b.number()]),NK=b.string().regex(/^[0-9a-zA-Z_#]+$/),RK=b.enum(["off","1","2","3","4"]),jK=b.enum(["off","fixed","flex"]),DK=b.enum(["off","speed","acc","both"]),Yn=b.string().regex(/^#([\da-f]{3}){1,2}$/i),BK=nC,$I=b.tuple([Yn,Yn,Yn,Yn,Yn,Yn,Yn,Yn,Yn,Yn]),qK=b.array(qb().max(50)),WK=b.string().max(100).regex(/[\w#]+/),FK=b.number().nonnegative(),zK=b.number().nonnegative(),HK=b.number().nonnegative().max(100),UK=b.number().nonnegative(),VK=b.number().int().nonnegative(),KK=b.number().int().nonnegative(),GK=b.string().max(50).regex(/^[a-zA-Z0-9_\-+.]+$/),Iw=qb().max(50),QK=b.string().max(50).regex(/^[a-zA-Z0-9\-_]+$/gi),YK=b.string().max(50).regex(/^[a-zA-Z0-9\-_]+$/gi),JK=b.number().positive(),XK=b.number().min(20).max(1e3).or(b.literal(0)),eG=b.string().regex(/(https|http):\/\/(www\.|).+\..+\/.+(\.png|\.gif|\.jpeg|\.jpg)/gi).or(b.literal("")),tG=b.object({theme:Iw,themeLight:Iw,themeDark:Iw,autoSwitchTheme:b.boolean(),customTheme:b.boolean(),customThemeColors:$I,favThemes:qK,showKeyTips:b.boolean(),smoothCaret:nK,quickRestart:iK,punctuation:b.boolean(),numbers:b.boolean(),words:KK,time:VK,mode:iC,quoteLength:oK,language:Zd,fontSize:JK,freedomMode:b.boolean(),difficulty:BK,blindMode:b.boolean(),quickEnd:b.boolean(),caretStyle:sS,paceCaretStyle:sS,flipTestColors:b.boolean(),layout:YK,funbox:WK,confidenceMode:dK,indicateTypos:lK,timerStyle:uK,liveSpeedStyle:Ow,liveAccStyle:Ow,liveBurstStyle:Ow,colorfulMode:b.boolean(),randomTheme:cK,timerColor:pK,timerOpacity:mK,stopOnError:fK,showAllLines:b.boolean(),keymapMode:hK,keymapStyle:gK,keymapLegendStyle:yK,keymapLayout:QK,keymapShowTopRow:vK,keymapSize:bK,fontFamily:GK,smoothLineScroll:b.boolean(),alwaysShowDecimalPlaces:b.boolean(),alwaysShowWordsHistory:b.boolean(),singleListCommandLine:wK,capsLockWarning:b.boolean(),playSoundOnError:_K,playSoundOnClick:kK,soundVolume:xK,startGraphsAtZero:b.boolean(),showOutOfFocusWarning:b.boolean(),paceCaret:CK,paceCaretCustomSpeed:FK,repeatedPace:b.boolean(),accountChart:TK,minWpm:SK,minWpmCustomSpeed:zK,highlightMode:$K,tapeMode:AK,typingSpeedUnit:LK,ads:MK,hideExtraLetters:b.boolean(),strictSpace:b.boolean(),minAcc:EK,minAccCustom:HK,monkey:b.boolean(),repeatQuotes:OK,oppositeShiftMode:IK,customBackground:eG,customBackgroundSize:PK,customBackgroundFilter:ZK,customLayoutfluid:NK,monkeyPowerLevel:RK,minBurst:jK,minBurstCustomSpeed:UK,burstHeatmap:b.boolean(),britishEnglish:b.boolean(),lazyMode:b.boolean(),showAverage:DK,maxLineWidth:XK}).strict();tG.partial();var nS={a:["","","","",""],c:["","",""],d:["",""],e:["","","","","",""],g:[""],h:[""],i:["","","",""],j:["",""],k:[""],l:["",""],n:[""],o:["","","","","","","","","",""],p:[""],q:[""],s:[""],u:["","","","",""],v:["",""],x:["",""],y:["",""],z:["",""]};function aG(t){for(let e in nS)nS[e].forEach(a=>{t=t.replace(a,e)});return t}function sG(t,e){let a=t.toLowerCase().split(/[.,"/#!?$%^&*;:{}=\-_`~()\s\n]+/g).map(s=>aG(nG(s)??""));return rG.some(s=>a.some(n=>n.startsWith(s)))}function nG(t){return t===void 0||t===""?t:t.replace(/[\u0300-\u036F]/g,"").trim().replace(/\n{3,}/g,`

`).replace(/\s{3,}/g,"  ")}function iG(t,e){return e.refine(a=>!sG(a),a=>({message:`Profanity detected. Please remove it. If you believe this is a mistake, please contact us. (${a})`}))}var rG=["miodec","bitly","niqqa","niqqer","ni99a","ni99er","niggas","niga","niger","retard","ahole","anus","ash0le","asholes","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","biatch","bitch","bitches","blow job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","carpet muncher","cawk","cawks","clit","cnts","cntz","cock","cockhead","cock-head","cocks","cocksucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagit","fags","fagz","faigs","flipping the bird","fudge packer","fukah","fuken","fuker","fukin","fukk","fukkah","fukken","fukker","fukkin","g00k","gayboy","gaygirl","gayz","god-damned","h00r","h0ar","h0re","jackoff","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","lezzian","lipshits","lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","phuc","phuck","phuk","phuker","phukker","poonani","pr1c","pr1ck","pr1k","puss","pussee","pussy","puuke","puuker","qweers","qweerz","qweir","recktum","rectum","retard","sadist","scank","schlong","semen","sex","sexy","sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","shitty","shity","shitz","shyt","shyte","shytty","shyty","skanck","skank","skankee","skankey","skanks","skanky","slut","sluts","slutty","slutz","son-of-a-bitch","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","wh00r","wh0re","whore","xrated","b!+ch","bitch","blowjob","clit","arschloch","shit","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","masturbate","masterbat","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","dyke","fuck","shit","amcik","andskota","arse","assrammer","ayir","bi7ch","bitch","bollock","breasts","butt-pirate","cabron","cazzo","chraa","chuj","cunt","daygo","dego","dick","dike","dupa","dziwka","ejackulate","ekrem","enculer","fag","fanculo","fanny","feces","felcher","ficken","flikker","foreskin","fotze","futkretzn","gook","guiena","h4x0r","helvete","hoer","honkey","huevon","injun","jizz","kanker","klootzak","kraut","knulle","kuksuger","kurac","kurwa","kusi","kyrpa","lesbo","mamhoon","masturbat","merd","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger","orospu","paska","perse","picka","pierdol","pillu","pimmel","piss","pizda","poontsee","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef","rautenberg","schaffer","scheiss","schlampe","schmuck","sh!t","sharmuta","sharmute","skurwysyn","sphencter","spierdalaj","splooge","suka","b00b","testicle","titt","twat","vittu","wank","wetback","wichser","zabourah"],AI=b.object({_id:Wb,name:b.string().regex(/^[0-9a-zA-Z_.-]+$/).max(16),pb:b.object({no:b.boolean(),yes:b.boolean()}).strict(),difficulty:b.record(nC,b.boolean()),mode:b.record(iC,b.boolean()),words:b.record(tK.or(b.literal("custom")),b.boolean()),time:b.record(aK.or(b.literal("custom")),b.boolean()),quoteLength:b.record(sK,b.boolean()),punctuation:b.object({on:b.boolean(),off:b.boolean()}).strict(),numbers:b.object({on:b.boolean(),off:b.boolean()}).strict(),date:b.object({last_day:b.boolean(),last_week:b.boolean(),last_month:b.boolean(),last_3months:b.boolean(),all:b.boolean()}).strict(),tags:b.record(b.string(),b.boolean()),language:b.record(Zd,b.boolean()),funbox:b.record(b.string(),b.boolean())}),oG=b.number().int().min(-11).max(12),dG=b.object({lastResultTimestamp:b.number().int().nonnegative(),length:b.number().int().nonnegative(),maxLength:b.number().int().nonnegative(),hourOffset:oG.optional()}).strict(),lG=b.object({_id:Wb,name:b.string(),personalBests:Fb}).strict();function Uu(t){return iG("word",t).optional().transform(e=>e===null?void 0:e)}var LI=b.object({bio:Uu(b.string().max(250)).or(b.literal("")),keyboard:Uu(b.string().max(75)).or(b.literal("")),socialProfiles:b.object({twitter:Uu(b.string().max(20).regex(/^[0-9a-zA-Z_.-]+$/)).or(b.literal("")),github:Uu(b.string().max(39).regex(/^[0-9a-zA-Z_.-]+$/)).or(b.literal("")),website:Uu(b.string().url().max(200).startsWith("https://")).or(b.literal(""))}).strict().optional()}).strict(),uG=b.string().regex(/^[0-9a-zA-Z_-]+$/).max(16),cG=b.object({_id:Wb,name:uG,colors:$I}).strict(),pG=b.object({startTimestamp:b.number().int().nonnegative(),expirationTimestamp:b.number().int().nonnegative().or(b.literal(-1).describe("lifetime premium"))}),mG=b.record(Zd,b.record(id.describe("quoteId as string"),b.number().nonnegative())),fG=b.record(iC,b.record(SI,b.record(Zd,b.number().int().nonnegative()))),hG=b.object({rank:b.number().int().nonnegative().optional(),count:b.number().int().nonnegative()}),gG=b.object({time:b.record(SI,b.record(Zd,hG.optional()))}),MI=b.object({id:b.number().int().nonnegative(),selected:b.boolean().optional()}).strict(),yG=b.object({badges:b.array(MI)}).strict(),vG=b.boolean().describe("Admin for all languages if true").or(Zd.describe("Admin for the given language")),bG=b.object({testsByDays:b.array(b.number().int().nonnegative().or(b.null())).describe("Number of tests by day. Last element of the array is on the date `lastDay`. `null` means no tests on that day."),lastDay:b.number().int().nonnegative().describe("Timestamp of the last day included in the test activity")}).strict();b.record(id.describe("year"),b.array(b.number().int().nonnegative().nullable().describe("number of tests, position in the array is the day of the year")));var wG=b.record(Zd,b.array(id)),_G=b.object({name:b.string(),email:b.string().email(),uid:b.string(),addedAt:b.number().int().nonnegative(),personalBests:Fb,lastReultHashes:b.array(b.string()).optional(),completedTests:b.number().int().nonnegative().optional(),startedTests:b.number().int().nonnegative().optional(),timeTyping:b.number().nonnegative().optional().describe("time typing in seconds"),streak:dG.optional(),xp:b.number().int().nonnegative().optional(),discordId:b.string().optional(),discordAvatar:b.string().optional(),tags:b.array(lG).optional(),profileDetails:LI.optional(),customThemes:b.array(cG).optional(),premium:pG.optional(),isPremium:b.boolean().optional(),quoteRatings:mG.optional(),favoriteQuotes:wG.optional(),lbMemory:fG.optional(),allTimeLbs:gG,inventory:yG.optional(),banned:b.boolean().optional(),lbOptOut:b.boolean().optional(),verified:b.boolean().optional(),needsToChangeName:b.boolean().optional(),quoteMod:vG.optional(),resultFilterPresets:b.array(AI).optional(),testActivity:bG.optional()});b.string().regex(/^[0-9a-zA-Z_.-]+$/).max(16);var kG=b.object({completedTests:b.number().int().nonnegative().optional(),startedTests:b.number().int().nonnegative().optional(),timeTyping:b.number().int().nonnegative().optional()});_G.pick({uid:!0,name:!0,banned:!0,addedAt:!0,discordId:!0,discordAvatar:!0,xp:!0,lbOptOut:!0,isPremium:!0,inventory:!0,allTimeLbs:!0}).extend({typingStats:kG,personalBests:Fb.pick({time:!0,words:!0}),streak:b.number().int().nonnegative(),maxStreak:b.number().int().nonnegative(),details:LI}).partial({inventory:!0,details:!0,allTimeLbs:!0,uid:!0});var EI=b.enum(["xp","badge"]),xG=b.object({type:b.literal(EI.enum.xp),item:b.number().int()}),CG=b.object({type:b.literal(EI.enum.badge),item:MI}),TG=xG.or(CG);b.object({id:Wb,subject:b.string(),body:b.string(),timestamp:b.number().int().nonnegative(),read:b.boolean(),rewards:b.array(TG)});b.enum(["Inappropriate name","Inappropriate bio","Inappropriate social links","Suspected cheating"]);const SG={_id:"default",name:"defaults",pb:{no:!0,yes:!0},difficulty:{normal:!0,expert:!0,master:!0},mode:{words:!0,time:!0,quote:!0,zen:!0,custom:!0},words:{10:!0,25:!0,50:!0,100:!0,custom:!0},time:{15:!0,30:!0,60:!0,120:!0,custom:!0},quoteLength:{short:!0,medium:!0,long:!0,thicc:!0},punctuation:{on:!0,off:!0},numbers:{on:!0,off:!0},date:{last_day:!1,last_week:!1,last_month:!1,last_3months:!1,all:!0},tags:{none:!0},language:{},funbox:{none:!0}},Ua=Rn(SG);function $G(t){try{const e={};for(const a of tr(Ua))if(a==="_id"){let s=t[a]??Ua[a];(s==="default-result-filters-id"||s==="")&&(s="default"),e[a]=s}else a==="name"?e[a]=t[a]??Ua[a]:e[a]={...Ua[a],...t[a]};return e}catch{return Ua}}const OI=new Bs({key:"resultFilters",schema:AI,fallback:Ua,migrate:(t,e)=>d$(t)?$G(t):Ua}),AG=["language","funbox","tags"],zc={};let Je=Ua;function hr(){OI.set(Je)}async function LG(){try{Je=OI.get();const t={none:!1};Object.keys(Ua.tags).forEach(e=>{Je.tags[e]!==void 0?t[e]=Je.tags[e]:t[e]=!0}),Je.tags=t,hr()}catch{console.log("error in loading result filters"),Je=Ua,hr()}}async function rC(){var s;const t=document.querySelector(".pageAccount .presetFilterButtons"),e=document.querySelector(".pageAccount .presetFilterButtons .filterBtns");if(!t||!e)return;e.innerHTML="";const a=((s=A())==null?void 0:s.filterPresets.map(n=>(n.name=n.name.replace(/_/g," "),n)))??[];if(a.length>0){let n="";for(const i of a)n+=`<div class="filterPresets">
      <div class="select-filter-preset button" data-id="${i._id}">${i.name} </div>
      <div class="button delete-filter-preset" data-id="${i._id}">
        <i class="fas fa-fw fa-trash"></i>
      </div>
    </div>`;e.innerHTML=n,t.classList.remove("hidden")}else t.classList.add("hidden")}async function MG(t){var a;const e=(a=A())==null?void 0:a.filterPresets.find(s=>s._id===t);e&&(Je=BG(e),hr(),br()),d(".pageAccount .group.presetFilterButtons .filterBtns .filterPresets .select-filter-preset").removeClass("active"),d(`.pageAccount .group.presetFilterButtons .filterBtns .filterPresets .select-filter-preset[data-id=${t}]`).addClass("active")}function EG(t){const e=A();e&&Ea({...e,filterPresets:[...e.filterPresets,Rn(t)]})}async function OG(t){t=t.replace(/ /g,"_"),Ct();const e=await K.users.addResultFilterPreset({body:{...Je,name:t}});Qe(),e.status===200?(EG({...Je,name:t,_id:e.body.data}),rC(),y("Filter preset created",1)):(y("Error creating filter preset: "+e.body.message,-1),console.log("error creating filter preset: "+e.body.message))}function IG(t){const e=A();if(!e)return;const a=[...e.filterPresets],s=a.findIndex(n=>n._id===t);s>-1&&a.splice(s,1),Ea({...e,filterPresets:a})}async function PG(t){Ct();const e=await K.users.removeResultFilterPreset({params:{presetId:t}});Qe(),e.status===200?(IG(t),rC(),dC(),y("Filter preset deleted",1)):(y("Error deleting filter preset: "+e.body.message,-1),console.log("error deleting filter preset",e.body.message))}function oC(){d(".pageAccount .group.presetFilterButtons .filterBtns .filterPresets .select-filter-preset").removeClass("active")}function iu(){return Je}function q_(t){return Je[t]}function ha(t,e){return Je[t][e]}function ZG(t,e,a){Je[t][e]=a}function ui(t,e){Object.keys(q_(t)).forEach(a=>{Je[t][a]=e})}function NG(t){t.forEach(e=>{Ua.tags[e._id]=!0})}function dC(){Je=Ua,hr()}function br(){var s,n,i,r,o;const t={};for(const l of tr(iu()))if(!(l==="_id"||l==="name")){t[l]={all:!0,array:[]};for(const c of tr(q_(l))){const m=t[l];if(m===void 0)continue;const f=ha(l,c);if(f===!0?(s=m.array)==null||s.push(c):m.all!==void 0&&(m.all=!1),AG.includes(l)){const h=d(`.pageAccount .group.filterButtons .filterGroup[group="${l}"] option[value="${c}"]`);f===!0?h.prop("selected",!0):h.prop("selected",!1)}else{let h;l==="date"?h=d(`.pageAccount .group.topFilters .filterGroup[group="${l}"] button[filter="${c}"]`):h=d(`.pageAccount .group.filterButtons .filterGroup[group="${l}"] button[filter="${c}"]`),f===!0?h.addClass("active"):h.removeClass("active")}}}for(const[l,c]of Object.entries(zc)){const m=c,f=q_(l),h=Object.values(f).every(_=>_===!0),v=m.store.getData(),w=d(`.pageAccount .group.filterButtons .filterGroup[group="${l}"] option[value="all"]`);if(h){w.prop("selected",!0);for(const _ of v)"value"in _&&(_.value==="all"?_.selected=!0:_.selected=!1);m.store.setData(v),m.render.renderValues()}else w.prop("selected",!1);for(const _ of v)"value"in _&&(f[_.value]===!0?_.selected=!0:(!h||_.value!=="all")&&(_.selected=!1));setTimeout(()=>{m.store.setData(v),h||m.render.renderValues(),m.render.renderOptions(v)},0)}function e(l){var m,f,h,v,w;let c="";return c+="<div class='group'>",l==="difficulty"?c+='<span aria-label="Difficulty" data-balloon-pos="up"><i class="fas fa-fw fa-star"></i>':l==="mode"?c+='<span aria-label="Mode" data-balloon-pos="up"><i class="fas fa-fw fa-bars"></i>':l==="punctuation"?c+='<span aria-label="Punctuation" data-balloon-pos="up"><i class="fas fa-fw fa-at"></i>':l==="numbers"?c+='<span aria-label="Numbers" data-balloon-pos="up"><i class="fas fa-fw fa-hashtag"></i>':l==="words"?c+='<span aria-label="Words" data-balloon-pos="up"><i class="fas fa-fw fa-font"></i>':l==="time"?c+='<span aria-label="Time" data-balloon-pos="up"><i class="fas fa-fw fa-clock"></i>':l==="date"?c+='<span aria-label="Date" data-balloon-pos="up"><i class="fas fa-fw fa-calendar"></i>':l==="tags"?c+='<span aria-label="Tags" data-balloon-pos="up"><i class="fas fa-fw fa-tags"></i>':l==="language"?c+='<span aria-label="Language" data-balloon-pos="up"><i class="fas fa-fw fa-globe-americas"></i>':l==="funbox"&&(c+='<span aria-label="Funbox" data-balloon-pos="up"><i class="fas fa-fw fa-gamepad"></i>'),(m=t[l])!=null&&m.all?c+="all":l==="tags"?c+=(h=(f=t.tags)==null?void 0:f.array)==null?void 0:h.map(_=>{var I,me,P;if(_==="none")return _;const S=A();if(S===void 0)return _;const M=(I=S.tags)==null?void 0:I.filter($=>$._id===_)[0];return M!==void 0?(P=(me=S.tags)==null?void 0:me.filter($=>$._id===_)[0])==null?void 0:P.display:M}).join(", "):c+=(w=(v=t[l])==null?void 0:v.array)==null?void 0:w.join(", ").replace(/_/g," "),c+="</span></div>",c}let a="";a+=e("date"),a+='<div class="spacer"></div>',a+=e("mode"),a+='<div class="spacer"></div>',(i=(n=t.mode)==null?void 0:n.array)!=null&&i.includes("time")&&(a+=e("time"),a+='<div class="spacer"></div>'),(o=(r=t.mode)==null?void 0:r.array)!=null&&o.includes("words")&&(a+=e("words"),a+='<div class="spacer"></div>'),a+=e("difficulty"),a+='<div class="spacer"></div>',a+=e("punctuation"),a+='<div class="spacer"></div>',a+=e("numbers"),a+='<div class="spacer"></div>',a+=e("language"),a+='<div class="spacer"></div>',a+=e("funbox"),a+='<div class="spacer"></div>',a+=e("tags"),setTimeout(()=>{d(".pageAccount .group.chart .above").html(a)},0)}function RG(t,e){oC();try{t==="date"&&ui("date",!1);const s=!Je[t][e];Je[t][e]=s,hr()}catch(a){y("Something went wrong toggling filter. Reverting to defaults.",0),console.log("toggling filter error"),console.error(a),dC(),br()}}d(".pageAccount .filterButtons .buttonsAndTitle .buttons, .pageAccount .group.topFilters .buttonsAndTitle.testDate .buttons").on("click","button",t=>{const e=d(t.target).parents(".buttons").attr("group"),a=d(t.target).attr("filter");d(t.target).hasClass("allFilters")?(tr(iu()).forEach(s=>{s==="_id"||s==="name"||ui(s,!0)}),ui("date",!1),Je.date.all=!0):d(t.target).hasClass("noFilters")?tr(iu()).forEach(s=>{s==="_id"||s==="name"||s!=="date"&&ui(s,!1)}):d(t.target).is("button")&&(t.shiftKey?(ui(e,!1),Je[e][a]=!0):RG(e,a)),br(),hr()});d(".pageAccount .topFilters button.allFilters").on("click",()=>{oC(),console.log(iu()),tr(iu()).forEach(t=>{t==="_id"||t==="name"||ui(t,!0)}),ui("date",!1),Je.date.all=!0,br(),hr()});d(".pageAccount .topFilters button.currentConfigFilter").on("click",()=>{var t,e;if(oC(),tr(iu()).forEach(a=>{a==="_id"||a==="name"||ui(a,!1)}),Je.pb.no=!0,Je.pb.yes=!0,Je.difficulty[u.difficulty]=!0,Je.mode[u.mode]=!0,u.mode==="time")if([15,30,60,120].includes(u.time)){const a=`${u.time}`;Je.time[a]=!0}else Je.time.custom=!0;else if(u.mode==="words")if([10,25,50,100,200].includes(u.words)){const a=`${u.words}`;Je.words[a]=!0}else Je.words.custom=!0;else u.mode==="quote"&&["short","medium","long","thicc"].forEach((s,n)=>{u.quoteLength.includes(n)?Je.quoteLength[s]=!0:Je.quoteLength[s]=!1});if(u.punctuation?Je.punctuation.on=!0:Je.punctuation.off=!0,u.numbers?Je.numbers.on=!0:Je.numbers.off=!0,u.mode==="quote"&&/english.*/.test(u.language)?Je.language.english=!0:Je.language[u.language]=!0,u.funbox==="none")Je.funbox.none=!0;else for(const a of u.funbox.split("#"))Je.funbox[a]=!0;Je.tags.none=!0,(e=(t=A())==null?void 0:t.tags)==null||e.forEach(a=>{a.active===!0&&(Je.tags.none=!1,Je.tags[a._id]=!0)}),Je.date.all=!0,br(),hr()});d(".pageAccount .topFilters button.toggleAdvancedFilters").on("click",()=>{d(".pageAccount .filterButtons").slideToggle(250),d(".pageAccount .topFilters button.toggleAdvancedFilters").toggleClass("active")});function Pw(t,e=0){const a=zc[t];if(a===void 0)return;const s=a.render.content.list,n=s.children.item(e);s.scrollTop=n.offsetTop-s.offsetTop}function Zw(t,e,a){const s=e.some(i=>i.value==="all"),n=a.some(i=>i.value==="all");s?n?e.length<a.length&&(e=e.filter(i=>i.value!=="all")):e=e.filter(i=>i.value==="all"):n&&(e=[]),ui(t,!1);for(const i of e){if(i.value==="all"){ui(t,!0);break}ZG(t,i.value,!0)}return br(),hr(),II(),!1}let II=()=>{};async function jG(t){var n;II=t;let e;try{e=await zk()}catch(i){console.error(Ge(i,"Failed to append language buttons"))}if(e){let i="";i+="<select class='languageSelect' group='language' placeholder='select a language' multiple>",i+="<option value='all'>all</option>";for(const o of e)i+=`<option value="${o}" filter="${o}">${oo(o)}</option>`;i+="</select>";const r=document.querySelector(".pageAccount .content .filterButtons .buttonsAndTitle.languages .select");r&&(r.innerHTML=i,zc.language=new La({select:r.querySelector(".languageSelect"),settings:{showSearch:!0,placeholderText:"select a language",allowDeselect:!0,closeOnSelect:!1},events:{beforeChange:(o,l)=>Zw("language",o,l),beforeOpen:()=>{Pw("language")}}}))}let a;try{a=await ku()}catch(i){console.error(Ge(i,"Failed to append funbox buttons"))}if(a){let i="";i+="<select class='funboxSelect' group='funbox' placeholder='select a funbox' multiple>",i+="<option value='all'>all</option>",i+="<option value='none'>no funbox</option>";for(const o of a)i+=`<option value="${o.name}" filter="${o.name}">${o.name.replace(/_/g," ")}</option>`;i+="</select>";const r=document.querySelector(".pageAccount .content .filterButtons .buttonsAndTitle.funbox .select");r&&(r.innerHTML=i,zc.funbox=new La({select:r.querySelector(".funboxSelect"),settings:{showSearch:!0,placeholderText:"select a funbox",allowDeselect:!0,closeOnSelect:!1},events:{beforeChange:(o,l)=>Zw("funbox",o,l),beforeOpen:()=>{Pw("funbox")}}}))}const s=A();if(s!==void 0&&(((n=s.tags)==null?void 0:n.length)??0)>0){d(".pageAccount .content .filterButtons .buttonsAndTitle.tags").removeClass("hidden");let i="";i+="<select class='tagsSelect' group='tags' placeholder='select a tag' multiple>",i+="<option value='all'>all</option>",i+="<option value='none'>no tag</option>";for(const o of s.tags)i+=`<option value="${o._id}" filter="${o.name}">${o.display}</option>`;i+="</select>";const r=document.querySelector(".pageAccount .content .filterButtons .buttonsAndTitle.tags .select");r&&(r.innerHTML=i,zc.tags=new La({select:r.querySelector(".tagsSelect"),settings:{showSearch:!0,placeholderText:"select a tag",allowDeselect:!0,closeOnSelect:!1},events:{beforeChange:(o,l)=>Zw("tags",o,l),beforeOpen:()=>{Pw("tags")}}}))}else d(".pageAccount .content .filterButtons .buttonsAndTitle.tags").addClass("hidden");rC()}function DG(){d(".pageAccount .content .filterButtons .buttonsAndTitle.languages .buttons").empty(),d(".pageAccount .content .filterButtons .buttonsAndTitle.funbox .buttons").empty(),d(".pageAccount .content .filterButtons .buttonsAndTitle.tags .buttons").empty()}d(".group.presetFilterButtons .filterBtns").on("click",".filterPresets .delete-filter-preset",t=>{PG(d(t.currentTarget).data("id"))});function BG(t){const e=Rn(t);return Object.entries(Ua).forEach(a=>{const s=a[0],n=a[1];e[s]===void 0&&(e[s]=n)}),e}function qG(t){let e=[];for(let i=1;i<=t.wpm.length;i++)e.push(i.toString());t.wpm=t.wpm.slice(0,t.raw.length),t.err=t.err.slice(0,t.raw.length),e=e.slice(0,t.raw.length);const a=p$(t.raw,1);Hs.data.labels=e,Hs.getDataset("wpm").data=t.wpm,Hs.getDataset("raw").data=a,Hs.getDataset("error").data=t.err;const s=Math.max(Math.max(...t.wpm),Math.max(...t.raw)),n=Math.min(Math.min(...t.wpm),Math.min(...t.raw));Hs.getScale("wpm").max=Math.round(s),Hs.getScale("raw").max=Math.round(s),u.startGraphsAtZero?(Hs.getScale("wpm").min=0,Hs.getScale("raw").min=0):(Hs.getScale("wpm").min=Math.round(n),Hs.getScale("raw").min=Math.round(n)),Hs.updateColors()}function WG(t){qG(t),FG.show()}const FG=new Pt({dialogId:"miniResultChartModal"});function zG(t){const e=t?"Profile":"Account",s=t?"":`<div class="buttonGroup"><button
  class="showAllButton"
  data-balloon-pos="left"
  aria-label="Show all personal bests"
>
  <i class="fas fa-ellipsis-v"></i>
</button></div>`;d(`.page${e} .profile .pbsWords`).html(`
      <div class="group">
      <div class="quick">
        <div class="test">10 words</div>
        <div class="wpm">-</div>
        <div class="acc">-</div>
      </div>
    </div>
    <div class="group">
      <div class="quick">
        <div class="test">25 words</div>
        <div class="wpm">-</div>
        <div class="acc">-</div>
      </div>
    </div>
    <div class="group">
      <div class="quick">
        <div class="test">50 words</div>
        <div class="wpm">-</div>
        <div class="acc">-</div>
      </div>
    </div>
    <div class="group">
      <div class="quick">
        <div class="test">100 words</div>
        <div class="wpm">-</div>
        <div class="acc">-</div>
      </div>
    </div>
    ${s}
  `),d(`.page${e} .profile .pbsTime`).html(`
      <div class="group">
      <div class="quick">
        <div class="test">15 seconds</div>
        <div class="wpm">-</div>
        <div class="acc">-</div>
      </div>
    </div>
    <div class="group">
      <div class="quick">
        <div class="test">30 seconds</div>
        <div class="wpm">-</div>
        <div class="acc">-</div>
      </div>
    </div>
    <div class="group">
      <div class="quick">
        <div class="test">60 seconds</div>
        <div class="wpm">-</div>
        <div class="acc">-</div>
      </div>
    </div>
    <div class="group">
      <div class="quick">
        <div class="test">120 seconds</div>
        <div class="wpm">-</div>
        <div class="acc">-</div>
      </div>
    </div>
    ${s}
  `)}function W_(t,e=!1){if(zG(e),t===void 0)return;let a="";const s=e?"Profile":"Account";d(`.page${s} .profile .pbsTime`).html(""),d(`.page${s} .profile .pbsWords`).html("");const n=["15","30","60","120"],i=["10","25","50","100"];n.forEach(o=>{a+=iS(t,"time",o)});const r=e?"":`<div class="buttonGroup"><button
      class="showAllButton"
      data-balloon-pos="left"
      aria-label="Show all personal bests"
    >
      <i class="fas fa-ellipsis-v"></i>
    </button></div>`;d(`.page${s} .profile .pbsTime`).append(a+r),a="",i.forEach(o=>{a+=iS(t,"words",o)}),d(`.page${s} .profile .pbsWords`).append(a+r)}function iS(t,e,a){let s="",n="";const i=`${a} ${e==="time"?"seconds":"words"}`,r=u.typingSpeedUnit;try{const o=(t[e][a]??[]).sort((c,m)=>m.wpm-c.wpm)[0];if(o===void 0)throw new Error("No PB data found");const l=new Date(o.timestamp);o.timestamp!==void 0&&o.timestamp>0&&(n=zt(l,"dd MMM yyyy")),s=`<div class="quick">
      <div class="test">${i}</div>
      <div class="wpm">${Te.typingSpeed(o.wpm,{showDecimalPlaces:!1})}</div>
      <div class="acc">${Te.accuracy(o.acc,{showDecimalPlaces:!1})}</div>
    </div>
    <div class="fullTest">
      <div>${i}</div>
      <div>${Te.typingSpeed(o.wpm,{suffix:` ${r}`})}</div>
      <div>${Te.typingSpeed(o.raw,{suffix:" raw"})}</div>
      <div>${Te.accuracy(o.acc,{suffix:" acc"})}</div>
      <div>${Te.percentage(o.consistency,{suffix:" con"})}</div>
      <div>${n}</div>
    </div>`}catch{s=`<div class="quick">
    <div class="test">${i}</div>
    <div class="wpm">-</div>
    <div class="acc">-</div>
  </div>`}return`
  <div class="group">
  ${s}
  </div>
  `}function lg(t=0){let e=t*36e5,a=Date.now();return cf(a,e)}function cf(t,e=0){return t-(t-e)%864e5}function HG(t,e=0){let a=e*36e5,s=cf(Date.now()-864e5,a),n=cf(t,a);return s===n}function UG(t,e=0){let a=e*36e5,s=cf(Date.now(),a),n=cf(t,a);return s===n}const PI={1:{id:1,name:"Developer",description:"I made this",icon:"fa-laptop",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"},2:{id:2,name:"Collaborator",description:"I helped make this",icon:"fa-code",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"},3:{id:3,name:"Server Mod",description:"Discord server moderator",icon:"fa-hammer",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"},4:{id:4,name:"OG Account",description:"First 1000 users on the site",icon:"fa-baby",color:"var(--bg-color)",background:"var(--main-color)"},5:{id:5,name:"OG Discordian",description:"First 1000 Discord server members",icon:"fa-baby",color:"var(--bg-color)",background:"var(--main-color)"},6:{id:6,name:"Supporter",description:"Donated money",icon:"fa-heart",color:"var(--text-color)",background:"var(--sub-color)"},7:{id:7,name:"Sugar Daddy",description:"Donated a lot of money",icon:"fa-gem",color:"var(--bg-color)",background:"var(--main-color)"},8:{id:8,name:"Monkey Supporter",description:"Donated more money",icon:"fa-heart",color:"var(--bg-color)",background:"var(--main-color)"},9:{id:9,name:"White Hat",description:"Reported critical vulnerabilities on the site",icon:"fa-user-secret",color:"var(--bg-color)",background:"var(--main-color)"},10:{id:10,name:"Bug Hunter",description:"Reported or helped track down bugs on the site",icon:"fa-bug",color:"var(--text-color)",background:"var(--sub-color)"},11:{id:11,name:"Content Creator",description:"Verified content creator",icon:"fa-video",color:"var(--text-color)",background:"var(--sub-color)"},12:{id:12,name:"Contributor",description:"Contributed to the site",icon:"fa-hands-helping",color:"var(--text-color)",background:"var(--sub-color)"},13:{id:13,name:"Mythical",description:"Yes, I'm actually this fast",icon:"fa-rocket",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"},14:{id:14,name:"All Year Long",description:"Reached a streak of 365 days",icon:"fa-fire",color:"var(--bg-color)",background:"var(--main-color)"}};function $v(t,e=!1,a=!1,s=!1){const n=PI[t];if(!n&&!s)return"";let i="";(n==null?void 0:n.background)!==void 0&&(i+=`background: ${n.background};`),(n==null?void 0:n.color)!==void 0&&(i+=`color: ${n.color};`),(n==null?void 0:n.customStyle)!==void 0&&(i+=n.customStyle);const r=(n==null?void 0:n.name)??"Badge Name Missing",o=(n==null?void 0:n.description)??"Badge Description Missing",l=(e?r+": ":"")+o;let c="";a||(c=`aria-label="${l}" data-balloon-pos="right"`);let m="";(n==null?void 0:n.icon)!==void 0?m=`<i class="fas ${e?"fa-fw":""} ${n.icon}"></i>`:m='<i class="fas fa-question"></i>';const f=`<div class="text">${r}</div>`;return`<div class="badge" ${c} style="${i}">${m}${e?"":f}</div>`}function VG(t){return PI[t]}async function Av(t,e){var I,me,P,$,T,L,V,na,fa,Ca,Wa,Vn,rw,Rd,Eu,Ou,Iu,Rh,Pu,Po,Ri,jh,jd,Zu,Nu;const a=t.charAt(0).toUpperCase()+t.slice(1),s=d(`.page${a} .profile`),n=d(`.page${a} .profile .details`);s.attr("uid",e.uid??""),s.attr("name",e.name??"");const i=e.banned===!0;if(n===void 0||e===void 0||e.name===void 0||e.addedAt===void 0)return;if(n.find(".placeholderAvatar").removeClass("hidden"),e.discordAvatar!==void 0&&e.discordId!==void 0&&!i?_k(e.discordId,e.discordAvatar,256).then(Xt=>{Xt!==null&&(n.find(".placeholderAvatar").addClass("hidden"),n.find(".avatar").css("background-image",`url(${Xt})`))}):n.find(".avatar").removeAttr("style"),(I=e.inventory)!=null&&I.badges&&!i){let Xt="",x="";for(const gt of e.inventory.badges)gt.selected===!0?Xt=$v(gt.id):x+=$v(gt.id,!0);n.find(".badges").empty().append(Xt),n.find(".allBadges").empty().append(x)}n.find(".name").text(e.name),n.find(".userFlags").html(yb(e)),e.lbOptOut===!0&&(t==="profile"?s.find(".lbOptOutReminder").removeClass("hidden").text("Note: This account has opted out of the leaderboards, meaning their results aren't verified by the anticheat system and may not be legitimate."):s.find(".lbOptOutReminder").addClass("hidden")),setTimeout(()=>{lC(t)},10);const r="Joined "+zt(e.addedAt??0,"dd MMM yyyy"),o=new Date(e.addedAt),l=ol(new Date,o),c=`${l} day${l!==1?"s":""} ago`;n.find(".joined").text(r).attr("aria-label",c);let m="";if(e.streak&&(e==null?void 0:e.streak)>1?(n.find(".streak").text(`Current streak: ${e.streak} ${e.streak===1?"day":"days"}`),m=`Longest streak: ${e.maxStreak} ${e.maxStreak===1?"day":"days"}`):(n.find(".streak").text(""),m=""),t==="account"){const Xt=(me=A())==null?void 0:me.results,x=Xt==null?void 0:Xt[0],gt=e.streakHourOffset,Dt=1e3*60*60*24;let Ls=lg(gt)+Dt;Ls<Date.now()&&(Ls+=Dt);const cn=f$(Ls);if(console.debug("Streak hour offset"),console.debug("date.now()",Date.now(),new Date(Date.now())),console.debug("dayInMilis",Dt),console.debug("difTarget",new Date(lg(gt)+Dt)),console.debug("timeDif",cn),console.debug("DateTime.getCurrentDayTimestamp()",lg(),new Date(lg())),console.debug("profile.streakHourOffset",gt),x!==void 0){const ji=UG(x.timestamp,gt),Bt=HG(x.timestamp,gt);console.debug("lastResult.timestamp",x.timestamp,new Date(x.timestamp)),console.debug("isToday",ji),console.debug("isYesterday",Bt);const Ms=gt?`(${gt>0?"+":""}${gt} offset)`:"";ji?(m+=`
Claimed today: yes`,m+=`
Come back in: ${cn} ${Ms}`):Bt?(m+=`
Claimed today: no`,m+=`
Streak lost in: ${cn} ${Ms}`):(m+=`
Streak lost ${cn} ${Ms} ago`,m+=`
It will be removed from your profile on the next result save`),console.debug(m),gt===void 0&&(m+=`

If the streak reset time doesn't line up with your timezone, you can change it in Settings > Danger zone > Update streak hour offset.`)}}n.find(".streak").attr("aria-label",m).attr("data-balloon-break","");let f="",h="";e.typingStats.completedTests!==void 0&&e.typingStats.startedTests!==void 0&&(f=Math.floor(e.typingStats.completedTests/e.typingStats.startedTests*100).toString(),h=((e.typingStats.startedTests-e.typingStats.completedTests)/e.typingStats.completedTests).toFixed(1));const v=n.find(".typingStats");v.find(".started .value").text(((P=e.typingStats)==null?void 0:P.startedTests)??0),v.find(".completed .value").text((($=e.typingStats)==null?void 0:$.completedTests)??0).attr("data-balloon-pos","up").attr("aria-label",`${f}% (${h} restarts per completed test)`),v.find(".timeTyping .value").text(hs(Math.round(((T=e.typingStats)==null?void 0:T.timeTyping)??0),!0,!0));let w=!1,_=!1,S=!1;if(!i&&(w=!!(((L=e.details)==null?void 0:L.bio)??""),n.find(".bio .value").text(((V=e.details)==null?void 0:V.bio)??""),_=!!(((na=e.details)==null?void 0:na.keyboard)??""),n.find(".keyboard .value").text(((fa=e.details)==null?void 0:fa.keyboard)??""),((Wa=(Ca=e.details)==null?void 0:Ca.socialProfiles)==null?void 0:Wa.github)!==void 0||((rw=(Vn=e.details)==null?void 0:Vn.socialProfiles)==null?void 0:rw.twitter)!==void 0||((Eu=(Rd=e.details)==null?void 0:Rd.socialProfiles)==null?void 0:Eu.website)!==void 0)){S=!0;const Xt=n.find(".socials .value");Xt.empty();const x=((Ou=e.details)==null?void 0:Ou.socialProfiles.github)??"";x&&Xt.append(`<a href='https://github.com/${Is(x)}/' target="_blank" rel="nofollow me" aria-label="${Is(x)}" data-balloon-pos="up" class="textButton"><i class="fab fa-fw fa-github"></i></a>`);const gt=((Iu=e.details)==null?void 0:Iu.socialProfiles.twitter)??"";gt&&Xt.append(`<a href='https://x.com/${Is(gt)}' target="_blank" rel="nofollow me" aria-label="${Is(gt)}" data-balloon-pos="up" class="textButton"><i class="fab fa-fw fa-twitter"></i></a>`);const Dt=((Rh=e.details)==null?void 0:Rh.socialProfiles.website)??"",Ls=/^https?:\/\/(?:www\.)?([^/]+)/,cn=((Pu=Dt==null?void 0:Dt.match(Ls))==null?void 0:Pu[1])??Dt;Dt&&Xt.append(`<a href='${Is(Dt)}' target="_blank" rel="nofollow me" aria-label="${Is(cn??"")}" data-balloon-pos="up" class="textButton"><i class="fas fa-fw fa-globe"></i></a>`)}if(ZI(e.xp??0),i)s.find(".leaderboardsPositions").addClass("hidden");else{s.find(".leaderboardsPositions").removeClass("hidden");const Xt=((jh=(Ri=(Po=e.allTimeLbs)==null?void 0:Po.time)==null?void 0:Ri["15"])==null?void 0:jh.english)??null,x=((Nu=(Zu=(jd=e.allTimeLbs)==null?void 0:jd.time)==null?void 0:Zu["60"])==null?void 0:Nu.english)??null;Xt===null&&x===null?s.find(".leaderboardsPositions").addClass("hidden"):(Xt!==null&&(s.find(".leaderboardsPositions .group.t15 .pos").text(Te.rank(Xt==null?void 0:Xt.rank)),s.find(".leaderboardsPositions .group.t15 .topPercentage").text(rS(Xt))),x!==null&&(s.find(".leaderboardsPositions .group.t60 .pos").text(Te.rank(x==null?void 0:x.rank)),s.find(".leaderboardsPositions .group.t60 .topPercentage").text(rS(x))))}const M=w||_;w?n.find(".bio").removeClass("hidden"):n.find(".bio").addClass("hidden"),_?n.find(".keyboard").removeClass("hidden"):n.find(".keyboard").addClass("hidden"),M?(n.find(".bioAndKeyboard").removeClass("hidden"),n.find(".sep2").removeClass("hidden")):(n.find(".bioAndKeyboard").addClass("hidden"),n.find(".sep2").addClass("hidden")),S?(n.find(".socials").removeClass("hidden"),n.find(".sep3").removeClass("hidden")):(n.find(".socials").addClass("hidden"),n.find(".sep3").addClass("hidden")),n.removeClass("none"),n.removeClass("bioAndKey"),n.removeClass("soc"),n.removeClass("both"),!S&&!M?n.addClass("none"):S&&!M?n.addClass("soc"):!S&&M?n.addClass("bioAndKey"):S&&M&&n.addClass("both")}function ZI(t){const e=d(" .profile .details .levelAndBar");if(e==null)return;const a=Ep(t),s=a.levelMaxXp,n=a.levelCurrentXp;e.find(".level").text(a.level).attr("aria-label",`${ug(t)} total xp`),e.find(".xp").text(`${ug(n)}/${ug(s)}`).attr("aria-label",`${ug(s-n)} xp until next level`),e.find(".xpBar .bar").css("width",`${n/s*100}%`),e.find(".xpBar").attr("aria-label",`${(n/s*100).toFixed(2)}%`)}function lC(t){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return;let a;if(t==="account"?a=d(".pageAccount .profile .details"):t==="profile"&&(a=d(".pageProfile .profile .details")),!a)return;const s=a.find(".user"),n=s.parent()[0],i=s[0],r=ao(2);if(!i||!n)return;i.style.fontSize="10px";const o=n.clientWidth,l=i.clientWidth,m=o/l*10,f=Math.min(Math.max(m,10),r);i.style.fontSize=`${f}px`}const KG=Ck(1e3,()=>{const t=xt();t&&["account","profile"].includes(t)&&lC(t)});d(window).on("resize",()=>{KG()});function rS(t){return t.rank===void 0?"-":t.rank===1?"GOAT":"Top "+Be(t.rank/t.count*100)+"%"}function ug(t){return t<1e3?Math.round(t).toString():bN(t)}let NI;function zb(){return NI}async function GG(){const t=await K.configuration.get();if(t.status!==200){console.error("Could not fetch configuration",t.body.message);return}else NI=t.body.data??void 0}function F_(){d(".pageAccount .resultBatches").addClass("hidden")}function QG(){d(".pageAccount .resultBatches").removeClass("hidden")}async function YG(){var m,f,h,v,w;const t=(m=A())==null?void 0:m.results;if(t===void 0){console.error("(Result batches) Results are missing but they should be available at the time of drawing the account page?"),F_();return}JG();const e=((h=(f=A())==null?void 0:f.typingStats)==null?void 0:h.completedTests)??0,a=Math.round(t.length/e*100),s=((v=zb())==null?void 0:v.results.limits)??{regularUser:0,premiumUser:0},n=(w=A())!=null&&w.isPremium?s.premiumUser:s.regularUser,i=Math.round((t==null?void 0:t.length)/n*100),r=d(".pageAccount .resultBatches .bars"),o={downloaded:{fill:r.find(".downloaded .fill"),rightText:r.find(".downloaded.rightText")},limit:{fill:r.find(".limit .fill"),rightText:r.find(".limit.rightText")}};o.downloaded.fill.css("width",Math.min(a,100)+"%"),o.downloaded.rightText.text(`${t==null?void 0:t.length} / ${e} (${a}%)`);const l=await Mo();o.limit.fill.css({width:Math.min(i,100)+"%",background:_n(l.sub,l.error,Xg(i,50,100,0,1))}),o.limit.rightText.text(`${t==null?void 0:t.length} / ${n} (${i}%)`),d(".pageAccount .resultBatches > .text").text(""),t.length>=e&&(z_(),oS("all results loaded")),t.length>=n&&(z_(),oS("limit reached"))}function z_(){d(".pageAccount .resultBatches button").prop("disabled",!0)}function JG(){d(".pageAccount .resultBatches button").prop("disabled",!1)}function oS(t){d(".pageAccount .resultBatches button").text(t)}function XG(){var s,n,i,r;if(!(((s=A())==null?void 0:s.isPremium)??!1)){F_();return}const e=((i=(n=A())==null?void 0:n.typingStats)==null?void 0:i.completedTests)??0,a=((r=zb())==null?void 0:r.results.maxBatchSize)??0;if(e<=a){F_();return}QG()}let os;function e7(t,e){if(t===void 0){d("#testActivity").addClass("hidden");return}d("#testActivity").removeClass("hidden"),os=DI(),jI("current",(e==null?void 0:e.getFullYear())||2022),RI(t)}function RI(t){const e=document.querySelector("#testActivity .activity");if(e===null)return;if(e.innerHTML="",t===void 0){dS([]),d("#testActivity .nodata").removeClass("hidden");return}dS(t.getMonths()),d("#testActivity .nodata").addClass("hidden");const a=document.querySelector("#testActivity .title");a!==null&&(a.innerHTML=t.getTotalTests()+" tests");for(const s of t.getDays()){const n=document.createElement("div");n.setAttribute("data-level",s.level),s.label!==void 0&&(n.setAttribute("aria-label",s.label),n.setAttribute("data-balloon-pos","up")),e.appendChild(n)}}function jI(t,e){var i,r;const a=new Date().getFullYear(),s=[{text:"last 12 months",value:"current",selected:t==="current"}];for(let o=a;o>=e;o--)(s.length<2||(i=zb())!=null&&i.users.premium.enabled&&((r=A())!=null&&r.isPremium))&&s.push({text:o.toString(),value:o.toString(),selected:o===t});const n=DI();n.setData(s),s.length>1?n.enable():n.disable()}function dS(t){const e=document.querySelector("#testActivity .months");e.innerHTML=t.map(a=>`<div style="grid-column: span ${a.weeks}">${a.text}</div>`).join("")}function DI(){return os!==void 0||(os=new La({select:"#testActivity .yearSelect",settings:{showSearch:!1},events:{afterChange:async t=>{var s;os==null||os.disable();const e=(s=t[0])==null?void 0:s.value,a=await bF(e);RI(a),((os==null?void 0:os.getData())??[]).length>1&&(os==null||os.enable())}}})),os}let Oa=!1;function t7(){Oa=!Oa,Oa&&console.log("filterDebug is on")}let ia=[],Bo=0;function Hb(t){var a;if(ia===void 0||ia.length===0)return;let e;t&&t>Bo?e=Math.ceil(t/10)*10:e=Bo+10;for(let s=Bo;s<e;s++){const n=ia[s];if(!n)continue;let i=n.difficulty;i===void 0&&(i="normal");let r=`<span aria-label="${(a=n.language)==null?void 0:a.replace("_"," ")}" data-balloon-pos="up"><i class="fas fa-fw fa-globe-americas"></i></span>`;i==="normal"?r+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="far fa-fw fa-star"></i></span>`:i==="expert"?r+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="fas fa-fw fa-star-half-alt"></i></span>`:i==="master"&&(r+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="fas fa-fw fa-star"></i></span>`),n.punctuation&&(r+='<span aria-label="punctuation" data-balloon-pos="up"><i class="fas fa-fw fa-at"></i></span>'),n.numbers&&(r+='<span aria-label="numbers" data-balloon-pos="up"><i class="fas fa-fw fa-hashtag"></i></span>'),n.blindMode&&(r+='<span aria-label="blind mode" data-balloon-pos="up"><i class="fas fa-fw fa-eye-slash"></i></span>'),n.lazyMode&&(r+='<span aria-label="lazy mode" data-balloon-pos="up"><i class="fas fa-fw fa-couch"></i></span>'),n.funbox!=="none"&&n.funbox!==void 0&&(r+=`<span aria-label="${n.funbox.replace(/_/g," ").replace(/#/g,", ")}" data-balloon-pos="up"><i class="fas fa-gamepad"></i></span>`),n.chartData===void 0?r+='<span class="miniResultChartButton" aria-label="No chart data found" data-balloon-pos="up"><i class="fas fa-chart-line"></i></span>':n.chartData==="toolong"?r+='<span class="miniResultChartButton" aria-label="Chart history is not available for long tests" data-balloon-pos="up"><i class="fas fa-chart-line"></i></span>':r+=`<span class="miniResultChartButton" aria-label="View graph" data-balloon-pos="up" filteredResultsId="${s}" style="opacity: 1"><i class="fas fa-chart-line"></i></span>`;let o="no tags";n.tags!==void 0&&n.tags.length>0&&(o="",n.tags.forEach(S=>{var M,I;(I=(M=A())==null?void 0:M.tags)==null||I.forEach(me=>{S===me._id&&(o+=me.display+", ")})}),o=o.substring(0,o.length-2));let l;n.tags===void 0?l="[]":l=JSON.stringify(n.tags);const c=n.tags!==void 0&&n.tags.length>0,m=n.tags!==void 0&&n.tags.length>1?"fa-tags":"fa-tag",f=`<button class="textButton resultEditTagsButton ${c?"active":""}" data-result-id="${n._id}" data-tags='${l}' aria-label="${o}" data-balloon-pos="up"><i class="fas fa-fw ${m}"></i></button>`;let h="";n.isPb?h='<i class="fas fa-fw fa-crown"></i>':h="";const v=n.charStats.join("/"),w=n.mode==="custom"?"":n.mode2,_=new Date(n.timestamp);d(".pageAccount .history table tbody").append(`
    <tr class="resultRow" id="result-${s}">
    <td>${h}</td>
    <td>${Te.typingSpeed(n.wpm,{showDecimalPlaces:!0})}</td>
    <td>${Te.typingSpeed(n.rawWpm,{showDecimalPlaces:!0})}</td>
    <td>${Te.percentage(n.acc,{showDecimalPlaces:!0})}</td>
    <td>${Te.percentage(n.consistency,{showDecimalPlaces:!0})}</td>
    <td>${v}</td>
    <td>${n.mode} ${w}</td>
    <td class="infoIcons">${r}</td>
    <td>${f}</td>
    <td>${zt(_,"dd MMM yyyy")}<br>
    ${zt(_,"HH:mm")}
    </td>
    </tr>`)}Bo=e,Bo>=ia.length?d(".pageAccount .loadMoreButton").addClass("hidden"):d(".pageAccount .loadMoreButton").removeClass("hidden")}async function a7(){await Ce.updateColors(),await Qt(0),await Hr.updateColors(),await Qt(0),await wl.updateColors(),await Qt(0)}function s7(){d(".pageAccount .history table tbody").empty(),wl.getDataset("count").data=[],Hr.getDataset("count").data=[],Hr.getDataset("avgWpm").data=[],Ce.getDataset("wpm").data=[],Ce.getDataset("pb").data=[],Ce.getDataset("acc").data=[],Ce.getDataset("wpmAvgTen").data=[],Ce.getDataset("accAvgTen").data=[],Ce.getDataset("wpmAvgHundred").data=[],Ce.getDataset("accAvgHundred").data=[]}let cg=0,rs=[],Ud=[];async function BI(){var Zu,Nu,Xt;by("Displaying stats..."),ni(100),console.log("updating account page"),rh();const t=A();if(!t)return;W_(t.personalBests),Av("account",t),e7(t.testActivity,new Date(t.addedAt)),YG(),rs=[],Ud=[];const e=[];Bo=0;let a=0,s="",n=0,i=0,r=0,o=0,l=0,c=0,m=0,f=0;const h={total:0,count:0,last10Total:0,last10Count:0,max:0};let v=0;cg=0;let w=0,_=0,S=0,M=0;const I={},me=[],P=Da(u.typingSpeedUnit);ia=[],d(".pageAccount .history table tbody").empty(),(Nu=(Zu=A())==null?void 0:Zu.results)==null||Nu.forEach(x=>{var Ms,Ru,Dh,Bh;try{if(!ha("pb",x.isPb?"yes":"no")){Oa&&console.log("skipping result due to pb filter",x);return}let Es=x.difficulty;if(Es===void 0&&(Es="normal"),!ha("difficulty",Es)){Oa&&console.log("skipping result due to difficulty filter",x);return}if(!ha("mode",x.mode)){Oa&&console.log("skipping result due to mode filter",x);return}if(x.mode==="time"){let va="custom";if(["15","30","60","120"].includes(`${x.mode2}`)&&(va=`${x.mode2}`),!ha("time",va)){Oa&&console.log("skipping result due to time filter",x);return}}else if(x.mode==="words"){let va="custom";if(["10","25","50","100","200"].includes(`${x.mode2}`)&&(va=`${x.mode2}`),!ha("words",va)){Oa&&console.log("skipping result due to word filter",x);return}}if(x.quoteLength!==null){let va;if(x.quoteLength===0?va="short":x.quoteLength===1?va="medium":x.quoteLength===2?va="long":x.quoteLength===3&&(va="thicc"),va!==void 0&&!ha("quoteLength",va)){Oa&&console.log("skipping result due to quoteLength filter",x);return}}let Zo=ha("language",x.language??"english");if(x.language==="english_expanded"&&ha("language","english_1k")&&(Zo=!0),!Zo){Oa&&console.log("skipping result due to language filter",x);return}let qh="off";if(x.punctuation&&(qh="on"),!ha("punctuation",qh)){Oa&&console.log("skipping result due to punctuation filter",x);return}let Wh="off";if(x.numbers&&(Wh="on"),!ha("numbers",Wh)){Oa&&console.log("skipping result due to numbers filter",x);return}if(x.funbox==="none"||x.funbox===void 0){if(!ha("funbox","none")){Oa&&console.log("skipping result due to funbox filter",x);return}}else{let va=0;for(const Dd of x.funbox.split("#"))if(ha("funbox",Dd)){va++;break}if(va===0){Oa&&console.log("skipping result due to funbox filter",x);return}}let is=!0;if(x.tags===void 0||x.tags.length===0)(((Ru=(Ms=A())==null?void 0:Ms.tags)==null?void 0:Ru.length)??0)>0?ha("tags","none")&&(is=!1):is=!1;else{const va=(Bh=(Dh=A())==null?void 0:Dh.tags)==null?void 0:Bh.map(Dd=>Dd._id);if(va===void 0)return;x.tags.forEach(Dd=>{is&&(va!=null&&va.includes(Dd)?ha("tags",Dd)&&(is=!1):ha("tags","none")&&(is=!1))})}if(is){Oa&&console.log("skipping result due to tag filter",x);return}const Ws=Math.abs(x.timestamp-Date.now())/1e3;let BC=!0;if((ha("date","all")||ha("date","last_day")&&Ws<=86400||ha("date","last_week")&&Ws<=604800||ha("date","last_month")&&Ws<=2592e3||ha("date","last_3months")&&Ws<=7776e3)&&(BC=!1),BC){Oa&&console.log("skipping result due to date filter",x);return}ia.push(x)}catch(Es){y("Something went wrong when filtering. Resetting filters.",0),console.log(x),console.error(Es),dC(),br(),ru();return}v+=Math.round(x.wpm/60*x.testDuration);const gt=new Date(x.timestamp);gt.setSeconds(0),gt.setMinutes(0),gt.setHours(0),gt.setMilliseconds(0);const Dt=gt.getTime(),Ls=I[Dt];Ls!==void 0?(Ls.amount++,Ls.time+=x.testDuration+(x.incompleteTestSeconds??0)-(x.afkDuration??0),Ls.totalWpm+=x.wpm):I[Dt]={amount:1,time:x.testDuration+(x.incompleteTestSeconds??0)-(x.afkDuration??0),totalWpm:x.wpm};const cn=P.histogramDataBucketSize,ji=Math.floor(Math.round(P.fromWpm(x.wpm))/cn);if(me.length<=ji)for(let Es=me.length;Es<=ji;Es++)me.push(0);me[ji]++;let Bt=0;if(x.testDuration===void 0&&x.mode2!=="custom"&&x.mode2!=="zen"?x.mode==="time"?Bt=parseInt(x.mode2):x.mode==="words"&&(Bt=parseInt(x.mode2)/x.wpm*60):Bt=parseFloat(x.testDuration),x.incompleteTestSeconds!==void 0?Bt+=x.incompleteTestSeconds:x.restartCount!==void 0&&x.restartCount>0&&(Bt+=Bt/4*x.restartCount),cg+=Bt,o<10&&(o++,l+=x.wpm,f+=x.acc,x.consistency!==void 0&&(S+=x.consistency)),r++,x.consistency!==void 0&&(M++,_+=x.consistency,x.consistency>w&&(w=x.consistency)),x.rawWpm!==null&&(h.last10Count<10&&(h.last10Count++,h.last10Total+=x.rawWpm),h.total+=x.rawWpm,h.count++,x.rawWpm>h.max&&(h.max=x.rawWpm)),x.acc>c&&(c=x.acc),m+=x.acc,x.restartCount!==void 0&&(n+=x.restartCount),rs.push({x:ia.length,y:Be(P.fromWpm(x.wpm)),wpm:Be(P.fromWpm(x.wpm)),acc:x.acc,mode:x.mode,mode2:x.mode2,punctuation:x.punctuation,language:x.language,timestamp:x.timestamp,difficulty:x.difficulty,raw:Be(P.fromWpm(x.rawWpm)),isPb:x.isPb??!1}),e.push(x.wpm),Ud.push({x:ia.length,y:x.acc,errorRate:100-x.acc}),x.wpm>a){const Es=x.punctuation?",<br>with punctuation":"",Zo=x.numbers?",<br> "+(x.punctuation?"&":"")+"with numbers":"";a=x.wpm,x.mode==="custom"?s=x.mode:s=x.mode+" "+x.mode2+Es+Zo}i+=x.wpm}),d(".pageAccount .group.history table thead tr td:nth-child(2)").text(u.typingSpeedUnit),await Qt(0),Hb();const $=[],T=[],L=P.historyStepSize;for(const x of Object.keys(I)){const gt=parseInt(x),Dt=I[gt];Dt!==void 0&&($.push({x:gt,y:Dt.time/60,amount:Dt.amount}),T.push({x:gt,y:Be(P.fromWpm(Dt.totalWpm)/Dt.amount)}))}const na=Hr.options.scales.avgWpm;na.title.text="Average "+u.typingSpeedUnit,na.ticks.stepSize=L,Hr.getDataset("count").data=$,Hr.getDataset("avgWpm").data=T;const fa=[],Ca=[],Wa=P.histogramDataBucketSize,Vn=Wa-(Wa<=1?.01:1);me.forEach((x,gt)=>{const Dt=gt*Wa;Ca.push(`${Dt} - ${Dt+Vn}`),fa.push({x:Dt,y:x})}),wl.data.labels=Ca,wl.getDataset("count").data=fa;const Rd=Ce.options.scales.wpm;if(Rd.title.text=P.fullUnitString,rs.length>0){let x=0;const gt=[];for(let Bt=rs.length-1;Bt>=0;Bt--){const Ms=rs[Bt];Ms.y>x&&(x=Ms.y,gt.push(Ms))}gt.push({x:1,y:(Xt=to(gt))==null?void 0:Xt.y});const Dt=[],Ls=[],cn=[],ji=[];for(let Bt=0;Bt<rs.length;Bt++){const Ms=rs.slice(Bt,Bt+10),Ru=Ud.slice(Bt,Bt+10),Dh=Ms.reduce((is,{y:Ws})=>is+Ws,0)/Ms.length,Bh=Ru.reduce((is,{y:Ws})=>is+Ws,0)/Ru.length;Dt.push({x:Bt+1,y:Dh}),Ls.push({x:Bt+1,y:Bh});const Es=rs.slice(Bt,Bt+100),Zo=Ud.slice(Bt,Bt+100),qh=Es.reduce((is,{y:Ws})=>is+Ws,0)/Es.length,Wh=Zo.reduce((is,{y:Ws})=>is+Ws,0)/Zo.length;cn.push({x:Bt+1,y:qh}),ji.push({x:Bt+1,y:Wh})}Ce.getDataset("wpm").data=rs,Ce.getDataset("pb").data=gt,Ce.getDataset("acc").data=Ud,Ce.getDataset("wpmAvgTen").data=Dt,Ce.getDataset("accAvgTen").data=Ls,Ce.getDataset("wpmAvgHundred").data=cn,Ce.getDataset("accAvgHundred").data=ji,Ce.getScale("x").max=rs.length+1}const Eu=rs.map(x=>x.y),Ou=Math.min(...Eu),Iu=Math.max(...Eu),Rh=isFinite(Ou)?Ou:0,Pu=isFinite(Iu)?Iu:0,Po=Math.floor(Pu)+(L-Math.floor(Pu)%L);if(Rd.max=Po,Rd.ticks.stepSize=L,Ce.getScale("pb").max=Po,Ce.getScale("wpmAvgTen").max=Po,Ce.getScale("wpmAvgHundred").max=Po,u.startGraphsAtZero)Ce.getScale("wpm").min=0,Ce.getScale("pb").min=0,Ce.getScale("wpmAvgTen").min=0,Ce.getScale("wpmAvgHundred").min=0;else{const x=Math.floor(Rh/L)*L;Ce.getScale("wpm").min=x,Ce.getScale("pb").min=x,Ce.getScale("wpmAvgTen").min=x,Ce.getScale("wpmAvgHundred").min=x}rs===void 0||rs.length===0?(d(".pageAccount .group.noDataError").removeClass("hidden"),d(".pageAccount .group.chart").addClass("hidden"),d(".pageAccount .group.dailyActivityChart").addClass("hidden"),d(".pageAccount .group.histogramChart").addClass("hidden"),d(".pageAccount .group.aboveHistory").addClass("hidden"),d(".pageAccount .group.history").addClass("hidden"),d(".pageAccount .triplegroup.stats").addClass("hidden"),d(".pageAccount .group.estimatedWordsTyped").addClass("hidden")):(d(".pageAccount .group.noDataError").addClass("hidden"),d(".pageAccount .group.chart").removeClass("hidden"),d(".pageAccount .group.dailyActivityChart").removeClass("hidden"),d(".pageAccount .group.histogramChart").removeClass("hidden"),d(".pageAccount .group.aboveHistory").removeClass("hidden"),d(".pageAccount .group.history").removeClass("hidden"),d(".pageAccount .triplegroup.stats").removeClass("hidden"),d(".pageAccount .group.estimatedWordsTyped").removeClass("hidden")),d(".pageAccount .timeTotalFiltered .val").text(hs(Math.round(cg),!0,!0));const Ri=u.typingSpeedUnit;d(".pageAccount .highestWpm .title").text(`highest ${Ri}`),d(".pageAccount .highestWpm .val").text(Te.typingSpeed(a)),d(".pageAccount .averageWpm .title").text(`average ${Ri}`),d(".pageAccount .averageWpm .val").text(Te.typingSpeed(i/r)),d(".pageAccount .averageWpm10 .title").text(`average ${Ri} (last 10 tests)`),d(".pageAccount .averageWpm10 .val").text(Te.typingSpeed(l/o)),d(".pageAccount .highestRaw .title").text(`highest raw ${Ri}`),d(".pageAccount .highestRaw .val").text(Te.typingSpeed(h.max)),d(".pageAccount .averageRaw .title").text(`average raw ${Ri}`),d(".pageAccount .averageRaw .val").text(Te.typingSpeed(h.total/h.count)),d(".pageAccount .averageRaw10 .title").text(`average raw ${Ri} (last 10 tests)`),d(".pageAccount .averageRaw10 .val").text(Te.typingSpeed(h.last10Total/h.last10Count)),d(".pageAccount .highestWpm .mode").html(s),d(".pageAccount .testsTaken .val").text(r),d(".pageAccount .highestAcc .val").text(Te.accuracy(c)),d(".pageAccount .avgAcc .val").text(Te.accuracy(m/r)),d(".pageAccount .avgAcc10 .val").text(Te.accuracy(f/o)),_===0||_===void 0?(d(".pageAccount .avgCons .val").text("-"),d(".pageAccount .avgCons10 .val").text("-")):(d(".pageAccount .highestCons .val").text(Te.percentage(w)),d(".pageAccount .avgCons .val").text(Te.percentage(_/M)),d(".pageAccount .avgCons10 .val").text(Te.percentage(S/Math.min(o,M)))),d(".pageAccount .testsStarted .val").text(`${r+n}`),d(".pageAccount .testsCompleted .val").text(`${r}(${Math.floor(r/(r+n)*100)}%)`),d(".pageAccount .testsCompleted .avgres").text(`
    ${(n/r).toFixed(1)} restarts per completed test
  `);const jh=ia.map(x=>x.wpm).reverse(),jd=wN(jh);if(jd){const gt=(jd[1][1]-jd[0][1])*(3600/cg),Dt=gt>0?"+":"";d(".pageAccount .group.chart .below .text").text(`Speed change per hour spent typing: ${Dt+Te.typingSpeed(gt,{showDecimalPlaces:!0})} ${u.typingSpeedUnit}`)}d(".pageAccount .estimatedWordsTyped .val").text(v),(rs.length||Ud.length)&&($H(),Ce.options.animation=!1,Ce.update(),delete Ce.options.animation),await Qt(0),Hr.update(),wl.update(),ni(100,!0),Oo(!1),xi(d(".pageAccount .preloader"),d(".pageAccount .content"),250,async()=>{d(".page.pageAccount").css("height","unset")},async()=>{setTimeout(()=>{lC("account")},10)})}async function uC(t){const e=await Uk(t);if(!e&&!ma()){y("Could not get results - you are offline",-1,{duration:5});return}uU(),e&&br()}async function ru(){if(ni(0,!0),A()===null)y("Missing account data. Please refresh.",-1),d(".pageAccount .preloader").html("Missing account data. Please refresh.");else{ni(90),await uC();try{await Qt(0),await BI()}catch(t){console.error(t),y(`Something went wrong: ${t}`,-1)}}}function n7(t,e){var n,i;const a=[];if(e.length>0)for(const r of e)(i=(n=A())==null?void 0:n.tags)==null||i.forEach(o=>{r===o._id&&a.push(o.display)});const s=d(`.pageAccount .resultEditTagsButton[data-result-id='${t}']`);s.attr("data-tags",JSON.stringify(e)),e.length>0?(s.attr("aria-label",a.join(", ")),s.addClass("active"),e.length>1?s.html('<i class="fas fa-fw fa-tags"></i>'):s.html('<i class="fas fa-fw fa-tag"></i>')):(s.attr("aria-label","no tags"),s.removeClass("active"),s.html('<i class="fas fa-fw fa-tag"></i>'))}function Io(t,e,a=null){var o,l;if(d("td").removeClass("headerSorted"),d("td").children("i").remove(),d(e).addClass("headerSorted"),ia.length<2)return;const s=t;let n=!0;a!==null?a?d(e).append('<i class="fas fa-sort-down" aria-hidden="true"></i>'):(n=!1,d(e).append('<i class="fas fa-sort-up" aria-hidden="true"></i>')):parseInt((o=ia==null?void 0:ia[0])==null?void 0:o[s])<=parseInt((l=ia==null?void 0:ia[ia.length-1])==null?void 0:l[s])?(n=!0,d(e).append('<i class="fas fa-sort-down" aria-hidden="true"></i>')):(n=!1,d(e).append('<i class="fas fa-sort-up", aria-hidden="true"></i>'));const i=[],r=[];for(;i.length<ia.length;){let c=Number.MAX_VALUE,m=-1,f=-1;for(const[h,v]of ia.entries())n?v[s]>=m&&!r.includes(h)&&(m=v[s],f=h):v[s]<=c&&!r.includes(h)&&(c=v[s],f=h);i.push(ia[f]),r.push(f)}ia=i,d(".pageAccount .history table tbody").empty(),Bo=0,Hb()}d(".pageAccount button.toggleResultsOnChart").on("click",()=>{const t=u.accountChart;t[0]=t[0]==="on"?"off":"on",ch(t)});d(".pageAccount button.toggleAccuracyOnChart").on("click",()=>{const t=u.accountChart;t[1]=t[1]==="on"?"off":"on",ch(t)});d(".pageAccount button.toggleAverage10OnChart").on("click",()=>{const t=u.accountChart;t[2]=t[2]==="on"?"off":"on",ch(t)});d(".pageAccount button.toggleAverage100OnChart").on("click",()=>{const t=u.accountChart;t[3]=t[3]==="on"?"off":"on",ch(t)});d(".pageAccount .loadMoreButton").on("click",()=>{Hb()});d(".pageAccount #accountHistoryChart").on("click",()=>{var n;const t=hO;if(Hb(t),window===void 0)return;const e=d(window).height()??0,s=(((n=d(`#result-${t}`).offset())==null?void 0:n.top)??0)-e/2;d([document.documentElement,document.body]).animate({scrollTop:s},Jt(500)),d(".resultRow").removeClass("active"),d(`#result-${t}`).addClass("active")});d(".pageAccount").on("click",".miniResultChartButton",t=>{var a;console.log("updating");const e=d(t.currentTarget).attr("filteredResultsId");e!==void 0&&WG((a=ia[parseInt(e)])==null?void 0:a.chartData)});d(".pageAccount .group.history").on("click",".history-wpm-header",()=>{Io("wpm",".history-wpm-header")});d(".pageAccount .group.history").on("click",".history-raw-header",()=>{Io("rawWpm",".history-raw-header")});d(".pageAccount .group.history").on("click",".history-acc-header",()=>{Io("acc",".history-acc-header")});d(".pageAccount .group.history").on("click",".history-correct-chars-header",()=>{Io("correctChars",".history-correct-chars-header")});d(".pageAccount .group.history").on("click",".history-incorrect-chars-header",()=>{Io("incorrectChars",".history-incorrect-chars-header")});d(".pageAccount .group.history").on("click",".history-consistency-header",()=>{Io("consistency",".history-consistency-header")});d(".pageAccount .group.history").on("click",".history-date-header",()=>{Io("timestamp",".history-date-header")});d(".pageAccount .group.history").on("click",".buttonsAndTitle .buttons button",()=>{Io("timestamp",".history-date-header",!0)});d(".pageAccount .group.topFilters, .pageAccount .filterButtons").on("click","button",()=>{setTimeout(()=>{ru()},0)});d(".pageAccount .group.presetFilterButtons").on("click",".filterBtns .filterPresets .select-filter-preset",async t=>{await MG(d(t.target).data("id")),ru()});d(".pageAccount .content .group.aboveHistory .exportCSV").on("click",()=>{bZ(ia)});d(".pageAccount .profile").on("click",".details .copyLink",()=>{const t=A();if(!t)return;const{name:e}=t,a=`${location.origin}/profile/${e}`;navigator.clipboard.writeText(a).then(function(){y("URL Copied to clipboard",0)},function(){alert("Failed to copy using the Clipboard API. Here's the link: "+a)})});d(".pageAccount button.loadMoreResults").on("click",async()=>{var e,a;const t=((a=(e=A())==null?void 0:e.results)==null?void 0:a.length)??0;Ct(),z_(),await uC(t),await BI(),Qe()});Gt(t=>{xt()==="account"&&t==="typingSpeedUnit"&&ru()});const i7=new Ii({name:"account",element:d(".page.pageAccount"),path:"/account",afterHide:async()=>{s7(),DG(),Ga("pageAccount")},beforeShow:async()=>{js("pageAccount","main");const t=A();(t==null?void 0:t.results)===void 0&&(d(".pageLoading .fill, .pageAccount .fill").css("width","0%"),d(".pageAccount .content").addClass("hidden"),d(".pageAccount .preloader").removeClass("hidden"),await P1()),await jG(ru),br(),await Qt(0),jI("current",t!==void 0?new Date(t.addedAt).getFullYear():2020),ru().then(()=>{var e,a;a7(),d(".pageAccount .content .accountVerificatinNotice").remove(),((a=(e=da)==null?void 0:e.currentUser)==null?void 0:a.emailVerified)===!1&&d(".pageAccount .content").prepend('<div class="accountVerificatinNotice"><i class="fas icon fa-exclamation-triangle"></i><p>Your email address is still not verified</p><button class="sendVerificationEmail">resend verification email</button></div>'),XG()})}});d(()=>{$s("pageAccount")});const ra={resultId:"",startingTags:[],tags:[],source:"accountPage"};function qI(t,e,a){if(!ma()){y("You are offline",0,{duration:2});return}if(t===""){y("Failed to show edit result tags modal: result id is empty",-1);return}ra.resultId=t,ra.startingTags=[...e],ra.tags=[...e],ra.source=a,cC.show({beforeAnimation:async()=>{r7(),WI()}})}function lS(){cC.hide()}function r7(){var a,s;const t=cC.getModal().querySelector(".buttons");if(t===null){y("Failed to append buttons to edit result tags modal: could not find buttons element",-1);return}const e=new Set([...((a=A())==null?void 0:a.tags.map(n=>n._id))??[],...ra.tags]);t.innerHTML="";for(const n of e){const i=(s=A())==null?void 0:s.tags.find(o=>o._id===n),r=document.createElement("button");r.classList.add("toggleTag"),r.setAttribute("data-tag-id",n),r.innerHTML=(i==null?void 0:i.display)??"unknown tag",r.addEventListener("click",o=>{o7(n),WI()}),t.appendChild(r)}}function WI(){for(const t of d("#editResultTagsModal .modal .buttons button")){const e=d(t).attr("data-tag-id")??"";ra.tags.includes(e)?d(t).addClass("active"):d(t).removeClass("active")}}function o7(t){ra.tags.includes(t)?ra.tags=ra.tags.filter(e=>e!==t):ra.tags.push(t)}async function d7(){var a,s,n;Ct();const t=await K.results.updateTags({body:{resultId:ra.resultId,tagIds:ra.tags}});if(Qe(),ra.tags=ra.tags.filter(i=>i!==void 0),t.status!==200){y("Failed to update result tags: "+t.body.message,-1);return}const e=((a=t.body.data)==null?void 0:a.tagPbs)??[];y("Tags updated",1,{duration:2}),(n=(s=A())==null?void 0:s.results)==null||n.forEach(i=>{i._id===ra.resultId&&(i.tags=ra.tags)}),ra.source==="accountPage"?n7(ra.resultId,ra.tags):ra.source==="resultPage"&&cV(ra.tags,e)}const cC=new Pt({dialogId:"editResultTagsModal",setup:async t=>{var e;(e=t.querySelector("button.saveButton"))==null||e.addEventListener("click",a=>{if(wZ(ra.startingTags,ra.tags)){lS();return}lS(),d7()})}});function FI(t){const e=/((-\s*)?\d+(\.\d+)?\s*[hms]?)/g,a=[...t.toLowerCase().matchAll(e)].map(s=>{const n=s[0],i=parseFloat(n.replace(/\s+/g,""));return n.includes("h")?3600*i:n.includes("m")?60*i:i}).reduce((s,n)=>s+n,0);return Math.floor(a)}function l7(t){const e=Math.floor(t/3600),a=Math.floor(t%3600/60),s=t%3600%60,n=[];return e>0&&n.push(`${e} hour${e===1?"":"s"}`),a>0&&n.push(`${a} minute${a===1?"":"s"}`),s>0&&n.push(`${s} second${s===1?"":"s"}`),n.length===3?`${n[0]}, ${n[1]} and ${n[2]}`:n.length===2?`${n[0]} and ${n[1]}`:`${n[0]}`}function zI(){const t=d("#customTestDurationModal input").val(),e=FI(t);let a="";e<0?a="Negative time? Really?":e===0?a="Infinite test":a=l7(e),d("#customTestDurationModal .preview").text(a)}function HI(t){UI.show({...t,focusFirstInput:"focusAndSelect",beforeAnimation:async e=>{e.querySelector("input").value=`${u.time}`,zI()}})}function u7(t=!1){UI.hide({clearModalChain:t})}function c7(){const t=FI(d("#customTestDurationModal input").val());if(t!==null&&!isNaN(t)&&t>=0&&isFinite(t))oi(t),jt(),bt(),t>=1800?y("Stay safe and take breaks!",0):t===0&&y("Infinite time! Make sure to use Bail Out from the command line to save your result.",0,{duration:7});else{y("Custom time must be a positive number or zero",0);return}u7(!0)}async function p7(t){var e;t.addEventListener("submit",a=>{a.preventDefault(),c7()}),(e=t.querySelector("input"))==null||e.addEventListener("input",a=>{zI()})}const UI=new Pt({dialogId:"customTestDurationModal",setup:p7}),m7=Yf.recaptchaSiteKey,Xi={};function Ah(t,e,a){if(Xi[e]!==void 0&&Xi[e]!==null)return;const s=grecaptcha.render(t,{sitekey:m7,callback:a});Xi[e]=s}function Mu(t){Xi[t]===void 0||Xi[t]===null||grecaptcha.reset(Xi[t])}function Ub(t){return Xi[t]===void 0||Xi[t]===null?"":grecaptcha.getResponse(Xi[t])}class pf{constructor(e,a){this.textareaElement=e,this.maxLength=a,this.textareaElement.attr("maxlength",this.maxLength.toString()),this.textareaElement.parent().hasClass("textareaWithCounter")||d(this.textareaElement).wrap('<div class="textareaWithCounter"></div>'),this.parentElement=d(this.textareaElement).parent(".textareaWithCounter"),this.parentElement.find(".char-counter").length===0?(this.counterElement=d('<span class="char-counter"></span>'),this.parentElement.append(this.counterElement)):this.counterElement=this.parentElement.find(".char-counter"),this.updateCounter(),this.textareaElement.on("input",()=>this.updateCounter())}updateCounter(){const e=this.maxLength,a=this.textareaElement.val().length,s=e-a;this.counterElement.text(`${a}/${e}`);const n=s/this.maxLength*100;this.counterElement.removeClass("warning"),this.counterElement.removeClass("error"),n===0?this.counterElement.addClass("error"):n<10&&this.counterElement.addClass("warning")}setMaxLength(e){this.maxLength=e,this.updateCounter()}}let uS=!1;async function f7(){if(uS)return;const t=await Hk();for(const e of t)e.name!=="swiss_german"&&d("#quoteSubmitModal .newQuoteLanguage").append(`<option value="${e.name}">${e.name.replace(/_/g," ")}</option>`);uS=!0}let bc;async function h7(){const t=d("#quoteSubmitModal .newQuoteText").val(),e=d("#quoteSubmitModal .newQuoteSource").val(),a=d("#quoteSubmitModal .newQuoteLanguage").val(),s=Ub("submitQuote");if(!t||!e||!a){y("Please fill in all fields",0);return}Ct();const n=await K.quotes.add({body:{text:t,source:e,language:a,captcha:s}});if(Qe(),n.status!==200){y("Failed to submit quote: "+n.body.message,-1);return}y("Quote submitted.",1),d("#quoteSubmitModal .newQuoteText").val(""),d("#quoteSubmitModal .newQuoteSource").val(""),Mu("submitQuote")}async function g7(t){VI.show({...t,mode:"dialog",focusFirstInput:!0,afterAnimation:async()=>{Ah(document.querySelector("#quoteSubmitModal .g-recaptcha"),"submitQuote"),await f7(),bc=new La({select:"#quoteSubmitModal .newQuoteLanguage"}),d("#quoteSubmitModal .newQuoteLanguage").val(ii(u.language)),d("#quoteSubmitModal .newQuoteLanguage").trigger("change"),d("#quoteSubmitModal input").val(""),new pf(d("#quoteSubmitModal .newQuoteText"),250)}})}function y7(t){VI.hide({clearModalChain:t,afterAnimation:async()=>{Mu("submitQuote"),bc==null||bc.destroy(),bc=void 0}})}async function v7(t){var e;(e=t.querySelector("button"))==null||e.addEventListener("click",()=>{h7(),y7(!0)})}const VI=new Pt({dialogId:"quoteSubmitModal",setup:v7});let ko=[];function Vb(){d("#quoteApproveModal .quotes").empty(),ko.forEach((t,e)=>{const a=d(`
      <div class="quote" data-id="${e}" data-db-id="${t._id}">
        <textarea class="text">${t.text}</textarea>
        <input type="text" class="source" placeholder="Source" value="${t.source}">
        <div class="buttons">
          <button disabled class="textButton undo" aria-label="Undo changes" data-balloon-pos="left"><i class="fas fa-fw fa-undo-alt"></i></button>
          <button class="textButton refuse" aria-label="Refuse quote" data-balloon-pos="left"><i class="fas fa-fw fa-times"></i></button>
          <button class="textButton approve" aria-label="Approve quote" data-balloon-pos="left"><i class="fas fa-fw fa-check"></i></button>
          <button class="textButton edit hidden" aria-label="Edit and approve quote" data-balloon-pos="left"><i class="fas fa-fw fa-pen"></i></button>
        </div>
        <div class="bottom">
          <div class="length ${t.text.length<60?"red":""}"><i class="fas fa-fw fa-ruler"></i>${t.text.length}</div>
          <div class="language"><i class="fas fa-fw fa-globe-americas"></i>${t.language}</div>
          <div class="timestamp"><i class="fas fa-fw fa-calendar"></i>${zt(new Date(t.timestamp),"dd MMM yyyy HH:mm")}</div>
        </div>
      </div>
    `);d("#quoteApproveModal .quotes").append(a),a.find(".source").on("input",()=>{d(`#quoteApproveModal .quote[data-id=${e}] .undo`).prop("disabled",!1),d(`#quoteApproveModal .quote[data-id=${e}] .approve`).addClass("hidden"),d(`#quoteApproveModal .quote[data-id=${e}] .edit`).removeClass("hidden")}),a.find(".text").on("input",()=>{d(`#quoteApproveModal .quote[data-id=${e}] .undo`).prop("disabled",!1),d(`#quoteApproveModal .quote[data-id=${e}] .approve`).addClass("hidden"),d(`#quoteApproveModal .quote[data-id=${e}] .edit`).removeClass("hidden"),KI(e)}),a.find(".undo").on("click",()=>{w7(e)}),a.find(".approve").on("click",()=>{_7(e,t._id)}),a.find(".refuse").on("click",()=>{k7(e,t._id)}),a.find(".edit").on("click",()=>{x7(e,t._id)})})}function KI(t){var a;const e=(a=d(`#quoteApproveModal .quote[data-id=${t}] .text`).val())==null?void 0:a.length;d(`#quoteApproveModal .quote[data-id=${t}] .length`).html(`<i class="fas fa-fw fa-ruler"></i>${e}`),e<60?d(`#quoteApproveModal .quote[data-id=${t}] .length`).addClass("red"):d(`#quoteApproveModal .quote[data-id=${t}] .length`).removeClass("red")}async function GI(){Ct();const t=await K.quotes.get();if(Qe(),t.status!==200){y("Failed to get new quotes: "+t.body.message,-1);return}ko=t.body.data??[],Vb()}async function b7(t){T7.show({...t,beforeAnimation:async()=>{ko=[],GI()}})}function pC(t){const e=d(`#quoteApproveModal .quotes .quote[data-id=${t}]`);e.find("button").prop("disabled",!1),e.find(".edit").hasClass("hidden")&&e.find(".undo").prop("disabled",!0)}function w7(t){var e,a;d(`#quoteApproveModal .quote[data-id=${t}] .text`).val(((e=ko[t])==null?void 0:e.text)??""),d(`#quoteApproveModal .quote[data-id=${t}] .source`).val(((a=ko[t])==null?void 0:a.source)??""),d(`#quoteApproveModal .quote[data-id=${t}] .undo`).prop("disabled",!0),d(`#quoteApproveModal .quote[data-id=${t}] .approve`).removeClass("hidden"),d(`#quoteApproveModal .quote[data-id=${t}] .edit`).addClass("hidden"),KI(t)}async function _7(t,e){if(!confirm("Are you sure?"))return;const a=d(`#quoteApproveModal .quotes .quote[data-id=${t}]`);a.find("button").prop("disabled",!0),a.find("textarea, input").prop("disabled",!0),Ct();const s=await K.quotes.approveSubmission({body:{quoteId:e}});if(Qe(),s.status!==200){pC(t),a.find("textarea, input").prop("disabled",!1),y("Failed to approve quote: "+s.body.message,-1);return}y(`Quote approved. ${s.body.message??""}`,1),ko.splice(t,1),Vb()}async function k7(t,e){if(!confirm("Are you sure?"))return;const a=d(`#quoteApproveModal .quotes .quote[data-id=${t}]`);a.find("button").prop("disabled",!0),a.find("textarea, input").prop("disabled",!0),Ct();const s=await K.quotes.rejectSubmission({body:{quoteId:e}});if(Qe(),s.status!==200){pC(t),a.find("textarea, input").prop("disabled",!1),y("Failed to refuse quote: "+s.body.message,-1);return}y("Quote refused.",1),ko.splice(t,1),Vb()}async function x7(t,e){if(!confirm("Are you sure?"))return;const a=d(`#quoteApproveModal .quote[data-id=${t}] .text`).val(),s=d(`#quoteApproveModal .quote[data-id=${t}] .source`).val(),n=d(`#quoteApproveModal .quotes .quote[data-id=${t}]`);n.find("button").prop("disabled",!0),n.find("textarea, input").prop("disabled",!0),Ct();const i=await K.quotes.approveSubmission({body:{quoteId:e,editText:a,editSource:s}});if(Qe(),i.status!==200){pC(t),n.find("textarea, input").prop("disabled",!1),y("Failed to approve quote: "+i.body.message,-1);return}y(`Quote edited and approved. ${i.body.message??""}`,1),ko.splice(t,1),Vb()}async function C7(t){var e;(e=t.querySelector("button.refreshList"))==null||e.addEventListener("click",()=>{d("#quoteApproveModal .quotes").empty(),GI()})}const T7=new Pt({dialogId:"quoteApproveModal",setup:C7}),xl={quoteToReport:void 0,reasonSelect:void 0};async function QI(t,e){YI.show({mode:"dialog",...e,beforeAnimation:async()=>{var n;Ah(document.querySelector("#quoteReportModal .g-recaptcha"),"quoteReportModal");const a=u.language==="swiss_german"?"german":u.language,{quotes:s}=await Ns.getQuotes(a);xl.quoteToReport=s.find(i=>i.id===t),d("#quoteReportModal .quote").text((n=xl.quoteToReport)==null?void 0:n.text),d("#quoteReportModal .reason").val("Grammatical error"),d("#quoteReportModal .comment").val(""),xl.reasonSelect=new La({select:"#quoteReportModal .reason",settings:{showSearch:!1}}),new pf(d("#quoteReportModal .comment"),250)}})}async function S7(t=!1){YI.hide({clearModalChain:t,afterAnimation:async()=>{var e;Mu("quoteReportModal"),(e=xl.reasonSelect)==null||e.destroy(),xl.reasonSelect=void 0}})}async function $7(){var l;const t=Ub("quoteReportModal");if(!t){y("Please complete the captcha");return}const e=(l=xl.quoteToReport)==null?void 0:l.id.toString(),a=ii(u.language),s=d("#quoteReportModal .reason").val(),n=d("#quoteReportModal .comment").val(),i=t;if(e===void 0||e===""){y("Please select a quote");return}if(!s){y("Please select a valid report reason");return}if(!n){y("Please provide a comment");return}const r=n.length-250;if(r>0){y(`Report comment is ${r} character(s) too long`);return}Ct();const o=await K.quotes.report({body:{quoteId:e,quoteLanguage:a,reason:s,comment:n,captcha:i}});if(Qe(),o.status!==200){y("Failed to report quote: "+o.body.message,-1);return}y("Report submitted. Thank you!",1),S7(!0)}async function A7(t){var e;(e=t.querySelector("button"))==null||e.addEventListener("click",async()=>{await $7()})}const YI=new Pt({dialogId:"quoteReportModal",setup:A7}),L7={fuzzyMatchSensitivity:.2,scoreForSimilarMatch:.5,scoreForExactMatch:1};function M7(t,e){return e===0?0:Math.log10(t/e)}const cS=.4;function E7(t,e){return cS+(1-cS)*(e.termFrequencies[t]/e.maxTermFrequency)}function pS(t){return t.match(/[^\\\][.,"/#!?$%^&*;:{}=\-_`~()\s]+/g)??[]}const O7=(t,e,a=L7)=>{const s={},n={};t.forEach((o,l)=>{const c=pS(e(o)),m={id:l,termFrequencies:{},maxTermFrequency:0};let f=0;c.forEach(h=>{var w,_;const v=VC(h);Object.hasOwn(n,v)||(n[v]=new Set),(w=n[v])==null||w.add(h),Object.hasOwn(s,v)||(s[v]=new Set),(_=s[v])==null||_.add(m),v in m.termFrequencies||(m.termFrequencies[v]=0),m.termFrequencies[v]++,f=Math.max(f,m.termFrequencies[v])}),m.maxTermFrequency=f});const i=Object.keys(s);return{query:o=>{const l={results:[],matchedQueryTerms:[]},c=new Set(pS(o).map(v=>VC(v)));if(c.size===0)return l;const m=new Map,f=new Set;c.forEach(v=>{i.forEach(w=>{var I;const{similarity:_}=aN(v,w),S=w===v,M=_>=1-a.fuzzyMatchSensitivity;if(S||M){const me=s[w],P=M7(t.length,me.size);me.forEach($=>{const T=m.get($.id)??0,L=E7(w,$),V=S?a.scoreForExactMatch:0,na=M?a.scoreForSimilarMatch:0,Ca=(V+na)*P*L;m.set($.id,T+Ca)}),(I=n[w])==null||I.forEach($=>{f.add($)})}})});const h=[...m].sort((v,w)=>w[1]-v[1]).map(v=>t[v[0]]);return l.results=h,l.matchedQueryTerms=[...f],l}}},Nw={},Rw=100;let Ur=1;function I7(t,e,a){if(t in Nw)return Nw[t];const s=O7(e,a);return Nw[t]=s,s}function jw(t,e){return e.length===0?t:RF(t,'.,"/#!$%^&*;:{}=-_`~() '.split("")).map(n=>e.find(r=>n.startsWith(r))!==void 0?`<span class="highlight">${n}</span>`:n).join("")}function P7(t){const e=d("#quoteSearchModal .quoteLengthFilter").val();if(e.length===0)return t;const a=e.map(n=>parseInt(n,10));return t.filter(n=>a.includes(n.group))}function Z7(t){const e=document.querySelector(".toggleFavorites").classList.contains("active");return t.filter(s=>e?Ns.isQuoteFavorite(s):!0)}function N7(t,e){let a;t.length<101?a="short":t.length<301?a="medium":t.length<601?a="long":a="thicc";const s=!Se(),n=!s&&Ns.isQuoteFavorite(t);return`
  <div class="searchResult" data-quote-id="${t.id}">

    <div class="text">
      ${jw(t.text,e)}
    </div>

    <div class="id">
      <div class="sub">id</div>
      <span class="quote-id">
        ${jw(t.id.toString(),e)}
      </span>
    </div>

    <div class="length">
      <div class="sub">length</div>
      ${a}
    </div>

    <div class="source">
      <div class="sub">source</div>
      ${jw(t.source,e)}
    </div>

    <div class="textButton report ${s&&"hidden"}" aria-label="Report quote" data-balloon-pos="left">
      <i class="fas fa-flag report"></i>
    </div>

    <div class="textButton favorite ${s&&"hidden"}" aria-label="Favorite quote" data-balloon-pos="left">
      <i class="${n?"fas":"far"} fa-heart favorite"></i>
    </div>

  </div>
  `}async function Lv(t){var f,h;const{quotes:e}=await Ns.getQuotes(u.language),a=I7(u.language,e,v=>`${v.text} ${v.id} ${v.source}`),{results:s,matchedQueryTerms:n}=a.query(t),i=P7(Z7(t===""?e:s)),r=d("#quoteSearchResults");r.empty();const o=Math.ceil(i.length/Rw);if(Ur>=o?d("#quoteSearchPageNavigator .nextPage").prop("disabled",!0):d("#quoteSearchPageNavigator .nextPage").prop("disabled",!1),Ur<=1?d("#quoteSearchPageNavigator .prevPage").prop("disabled",!0):d("#quoteSearchPageNavigator .prevPage").prop("disabled",!1),i.length===0){d("#quoteSearchModal  .pageInfo").html("No search results");return}const l=(Ur-1)*Rw,c=Math.min(Ur*Rw,i.length);d("#quoteSearchModal  .pageInfo").html(`${l+1} - ${c} of ${i.length}`),i.slice(l,c).forEach(v=>{const w=N7(v,n);r.append(w)});const m=$d.getModal().querySelectorAll(".searchResult");for(const v of m){const w=parseInt(v.dataset.quoteId);(f=v.querySelector(".textButton.favorite"))==null||f.addEventListener("click",_=>{if(_.stopPropagation(),w===void 0||isNaN(w)){y("Could not toggle quote favorite: quote id is not a number",-1);return}D7(`${w}`)}),(h=v.querySelector(".textButton.report"))==null||h.addEventListener("click",_=>{if(_.stopPropagation(),w===void 0||isNaN(w)){y("Could not open quote report modal: quote id is not a number",-1);return}QI(w,{modalChain:$d})}),v.addEventListener("click",_=>{Wk(w),j7(w)})}}let wc;async function JI(t){$d.show({...t,focusFirstInput:!0,beforeAnimation:async()=>{var a,s,n;Se()?(d("#quoteSearchModal .goToQuoteSubmit").removeClass("hidden"),d("#quoteSearchModal .toggleFavorites").removeClass("hidden")):(d("#quoteSearchModal .goToQuoteSubmit").addClass("hidden"),d("#quoteSearchModal .toggleFavorites").addClass("hidden")),((a=A())==null?void 0:a.quoteMod)!==void 0&&(((s=A())==null?void 0:s.quoteMod)===!0||((n=A())==null?void 0:n.quoteMod)!=="")?d("#quoteSearchModal .goToQuoteApprove").removeClass("hidden"):d("#quoteSearchModal .goToQuoteApprove").addClass("hidden"),wc=new La({select:"#quoteSearchModal .quoteLengthFilter",settings:{showSearch:!1,placeholderText:"filter by length",contentLocation:$d.getModal()},data:[{text:"short",value:"0"},{text:"medium",value:"1"},{text:"long",value:"2"},{text:"thicc",value:"3"}]})},afterAnimation:async()=>{const e=d("#quoteSearchModal input").val();Ur=1,Lv(e)}})}function R7(t=!1){$d.hide({clearModalChain:t,afterAnimation:async()=>{wc==null||wc.destroy(),wc=void 0}})}function j7(t){if(isNaN(t)&&(t=parseInt(document.getElementById("searchBox").value)),t!==null&&!isNaN(t)&&t>=0)Vi(-2,!1),Wk(t),jt();else{y("Quote ID must be at least 1",0);return}bt(),R7(!0)}const Dw=ns(250,()=>{const t=document.getElementById("searchBox").value;Ur=1,Lv(t)});async function D7(t){const e=u.language;if(e===""||t===""){y("Could not get quote stats!",-1);return}const a={language:e,id:parseInt(t,10)},s=Ns.isQuoteFavorite(a),n=d(`#quoteSearchModal .searchResult[data-quote-id=${t}] .textButton.favorite i`);if(A())if(s)try{Ct(),await Ns.setQuoteFavorite(a,!1),Qe(),n.removeClass("fas").addClass("far")}catch(r){Qe();const o=Ge(r,"Failed to remove quote from favorites");y(o,-1)}else try{Ct(),await Ns.setQuoteFavorite(a,!0),Qe(),n.removeClass("far").addClass("fas")}catch(r){Qe();const o=Ge(r,"Failed to add quote to favorites");y(o,-1)}}async function B7(t){var e,a,s,n,i,r,o;(e=t.querySelector(".searchBox"))==null||e.addEventListener("input",l=>{Dw()}),(a=t.querySelector("button.toggleFavorites"))==null||a.addEventListener("click",l=>{Se()&&(d(l.target).toggleClass("active"),Dw())}),(s=t.querySelector(".goToQuoteApprove"))==null||s.addEventListener("click",l=>{b7({modalChain:$d})}),(n=t.querySelector(".goToQuoteSubmit"))==null||n.addEventListener("click",async l=>{var f;Ct();const c=await K.quotes.isSubmissionEnabled(),m=(c.status===200&&((f=c.body.data)==null?void 0:f.isEnabled))??!1;if(Qe(),!m){y("Quote submission is disabled temporarily due to a large submission queue.",0,{duration:5});return}g7({modalChain:$d})}),(i=t.querySelector(".quoteLengthFilter"))==null||i.addEventListener("change",Dw),(r=t.querySelector(".nextPage"))==null||r.addEventListener("click",()=>{const l=document.getElementById("searchBox").value;Ur++,Lv(l)}),(o=t.querySelector(".prevPage"))==null||o.addEventListener("click",()=>{const l=document.getElementById("searchBox").value;Ur--,Lv(l)})}const $d=new Pt({dialogId:"quoteSearchModal",setup:B7}),XI={homeKeys:{display:"home keys",getIncludeString:t=>{const e=t.keys.row3.slice(0,4),a=t.keys.row3.slice(6,10);return[...e,...a]},getExcludeString:t=>{const e=t.keys.row2,a=t.keys.row4,s=t.keys.row3.slice(10),n=t.keys.row3.slice(4,6);return[...e,...n,...s,...a]}},leftHand:{display:"left hand",getIncludeString:t=>{const e=t.keys.row2.slice(0,5),a=t.keys.row3.slice(0,5),s=t.keys.row4.slice(0,5);return[...e,...a,...s]},getExcludeString:t=>{const e=t.keys.row2.slice(5),a=t.keys.row3.slice(5),s=t.keys.row4.slice(5);return[...e,...a,...s]}},rightHand:{display:"right hand",getIncludeString:t=>{const e=t.keys.row2.slice(5),a=t.keys.row3.slice(5),s=t.keys.row4.slice(4);return[...e,...a,...s]},getExcludeString:t=>{const e=t.keys.row2.slice(0,5),a=t.keys.row3.slice(0,5),s=t.keys.row4.slice(0,4);return[...e,...a,...s]}},homeRow:{display:"home row",getIncludeString:t=>t.keys.row3,getExcludeString:t=>{const e=t.keys.row2,a=t.keys.row4;return[...e,...a]}},topRow:{display:"top row",getIncludeString:t=>t.keys.row2,getExcludeString:t=>{const e=t.keys.row3,a=t.keys.row4;return[...e,...a]}},bottomRow:{display:"bottom row",getIncludeString:t=>t.keys.row4,getExcludeString:t=>{const e=t.keys.row2,a=t.keys.row3;return[...e,...a]}}};async function q7(){d("#wordFilterModal .languageInput").empty(),d("#wordFilterModal .layoutInput").empty(),d("wordFilterModal .presetInput").empty();let t,e;try{t=await zk()}catch(a){console.error(Ge(a,"Failed to initialise word filter popup language list"));return}try{e=await ah()}catch(a){console.error(Ge(a,"Failed to initialise word filter popup preset list"));return}t.forEach(a=>{const s=a.replace(/_/gi," ");d("#wordFilterModal .languageInput").append(`
        <option value=${a}>${s}</option>
      `)});for(const a in e){const s=a.replace(/_/gi," ");d("#wordFilterModal .layoutInput").append(`
      <option value=${a}>${s}</option>
    `)}for(const[a,s]of Object.entries(XI))d("#wordFilterModal .presetInput").append(`<option value=${a}>${s.display}</option>`)}let _c,kc,xc;async function W7(t){Cl.show({...t,beforeAnimation:async e=>{_c=new La({select:"#wordFilterModal .languageInput",settings:{contentLocation:e}}),kc=new La({select:"#wordFilterModal .layoutInput",settings:{contentLocation:Cl.getModal()}}),xc=new La({select:"#wordFilterModal .presetInput",settings:{contentLocation:Cl.getModal()}}),d("#wordFilterModal .loadingIndicator").removeClass("hidden"),eP()}})}function F7(t){Cl.hide({...t,afterAnimation:async()=>{_c==null||_c.destroy(),kc==null||kc.destroy(),xc==null||xc.destroy(),_c=void 0,kc=void 0,xc=void 0}})}async function z7(t){let e=d("#wordFilterModal .wordIncludeInput").val();e=qC(e==null?void 0:e.trim()),e=e.replace(/\s+/gi,"|");const a=new RegExp(e,"i");let s=d("#wordFilterModal .wordExcludeInput").val();s=qC(s.trim()),s=s.replace(/\s+/gi,"|");const n=new RegExp(s,"i"),i=[];let r;try{r=await nh(t)}catch(f){return y(Ge(f,"Failed to filter language words"),-1),[]}const o=d("#wordFilterModal .wordMaxInput").val(),l=d("#wordFilterModal .wordMinInput").val();let c,m;o===""?c=999:c=parseInt(o),l===""?m=1:m=parseInt(l);for(const f of r.words){const h=a.test(f),v=n.test(f);(h&&!v||h&&s==="")&&f.length<=c&&f.length>=m&&i.push(f)}return i}async function mS(t){const e=d("#wordFilterModal .languageInput").val(),a=await z7(e);if(a.length===0){y("No words found",0),eP();return}const s=a.join(Tu()?"|":" ");F7({modalChainData:{text:s,set:t}})}function fS(){for(const t of Cl.getModal().querySelectorAll("button"))t.setAttribute("disabled","true")}function eP(){for(const t of Cl.getModal().querySelectorAll("button"))t.removeAttribute("disabled")}async function H7(){await q7(),d("#wordFilterModal button.generateButton").on("click",async()=>{const t=d("#wordFilterModal .presetInput").val(),e=d("#wordFilterModal .layoutInput").val(),a=XI[t];if(a===void 0){y(`Preset ${t} not found`,-1);return}const s=await sh(e);d("#wordIncludeInput").val(a.getIncludeString(s).map(n=>n[0]).join(" ")),d("#wordExcludeInput").val(a.getExcludeString(s).map(n=>n[0]).join(" "))}),d("#wordFilterModal button.addButton").on("click",()=>{d("#wordFilterModal .loadingIndicator").removeClass("hidden"),fS(),setTimeout(()=>{mS(!1)},0)}),d("#wordFilterModal button.setButton").on("click",()=>{d("#wordFilterModal .loadingIndicator").removeClass("hidden"),fS(),setTimeout(()=>{mS(!0)},0)})}const Cl=new Pt({dialogId:"wordFilterModal",setup:H7});class he{constructor(e,a,s,n,i){if(this.configName=e,this.configValue=u[e],this.mode=s,this.configFunction=a,this.setCallback=n,this.updateCallback=i,this.updateUI(),this.mode==="select"){const r=document.querySelector(`.pageSettings .section[data-config-name=${this.configName}] select`);r==null||r.addEventListener("change",o=>{const l=d(o.target);l.hasClass("disabled")||l.hasClass("no-auto-handle")||this.setValue(l.val())})}else if(this.mode==="button")d(".pageSettings").on("click",`.section[data-config-name='${this.configName}'] button`,r=>{const o=d(r.currentTarget);if(o.hasClass("disabled")||o.hasClass("no-auto-handle"))return;const l=o.attr("data-config-value");if(l===void 0||l===""){console.error(`Failed to handle settings button click for ${e}: data-${e} is missing or empty.`),y("Button is missing data property. Please report this.",-1);return}let c=l;c==="true"&&(c=!0),c==="false"&&(c=!1),this.setValue(c)});else if(this.mode==="range"){const r=document.querySelector(`.pageSettings .section[data-config-name=${this.configName}] input[type=range]`);if(!r){y(`Failed to find range element for ${e}`,-1);return}const o=ns(250,l=>{this.setValue(l)});r.addEventListener("input",l=>{const c=d(l.target);if(c.hasClass("disabled")||c.hasClass("no-auto-handle"))return;const m=parseFloat(c.val());this.updateUI(m),o(m)})}}setValue(e){this.configFunction(e),this.updateUI(),this.setCallback&&this.setCallback()}updateUI(e){if(this.configValue=e??u[this.configName],d(`.pageSettings .section[data-config-name='${this.configName}'] button`).removeClass("active"),this.mode==="select"){const a=document.querySelector(`.pageSettings .section[data-config-name='${this.configName}'] select`);if(a===null)return;a.value=this.configValue;const s=a.slim;s==null||s.store.setSelectedBy("value",[this.configValue]),s==null||s.render.renderValues(),s==null||s.render.renderOptions(s.store.getData())}else if(this.mode==="button")d(`.pageSettings .section[data-config-name='${this.configName}'] button[data-config-value='${this.configValue}']`).addClass("active");else if(this.mode==="range"){const a=document.querySelector(`.pageSettings .section[data-config-name='${this.configName}'] input[type=range]`),s=document.querySelector(`.pageSettings .section[data-config-name='${this.configName}'] .value`);if(a===null||s===null)return;a.value=this.configValue,s.textContent=`${this.configValue.toFixed(1)}`}this.updateCallback&&this.updateCallback()}}const tP=new Bs({key:"activeTags",schema:qt.array(nM),fallback:[]});function Lh(){var e,a;const t=[];(a=(e=A())==null?void 0:e.tags)==null||a.forEach(s=>{s.active===!0&&t.push(s._id)}),tP.set(t)}function U7(t=!1){var a;const e=A();e&&(e.tags=(a=e.tags)==null?void 0:a.map(s=>(s.active=!1,s)),Ea(e),bo(),t||Lh())}function V7(t,e,a=!1){var n;const s=A();s&&(s.tags=(n=s.tags)==null?void 0:n.map(i=>(i._id===t&&(i.active=e),i)),Ea(s),bo(),a||Lh())}function aP(t,e=!1){var a,s;(s=(a=A())==null?void 0:a.tags)==null||s.forEach(n=>{n._id===t&&(n.active===void 0?n.active=!0:n.active=!n.active)}),bo(),e||Lh()}function K7(){const t=tP.get();for(const e of t)aP(e,!0);Lh()}async function G7(t){var s,n;const e=A();if(!e)return;const a=(s=e.presets)==null?void 0:s.find(i=>i._id===t);if(a!==void 0){if(hS(a)){const i={...i_(),...q1(a.config)};await Gl(Lp(i))}else await Gl(Lp(a.config));if((!hS(a)||(n=a.settingGroups)!=null&&n.includes("behavior"))&&(U7(!0),a.config.tags)){for(const i of a.config.tags)V7(i,!0,!1);Lh()}bt(),y("Preset applied",1,{duration:2}),xu()}}function hS(t){return t.settingGroups!==void 0&&t.settingGroups!==null}async function Q7(t){var s;const e=A();if(!e)return;const a=(s=e.presets)==null?void 0:s.find(n=>n._id===t);if(a===void 0){y("Preset not found",0);return}return a}function Y7(){var e;let t=u.theme;u.randomTheme!=="off"&&u.randomTheme!=="custom"&&Na!==null&&(t=Na),document.querySelectorAll(".pageSettings .section.themes .theme").forEach(a=>{a.classList.remove("active")}),(e=document.querySelector(`.pageSettings .section.themes .theme[theme='${t}']`))==null||e.classList.add("active")}function ou(t,e,a=!1,s=!1){if(a){const l=t.find("input.color").attr("id");l===void 0&&console.error("Could not find color ID!"),!s&&l!==void 0&&document.documentElement.style.setProperty(l,e);const c=t.find("label");c.val(e),c.attr("value",e),c.attr("for")!=="--bg-color"&&c.css("background-color",e),t.find("input.input").val(e),t.find("input.color").attr("value",e);return}const n=[{rule:/\b[0-9]{1,3},\s?[0-9]{1,3},\s?[0-9]{1,3}\s*\b/,start:"rgb(",end:")"},{rule:/\b[A-Z, a-z, 0-9]{6}\b/,start:"#",end:""},{rule:/\b[0-9]{1,3},\s?[0-9]{1,3}%,\s?[0-9]{1,3}%?\s*\b/,start:"hsl(",end:")"}];e=e.replace("","");for(const l of n)if(e.match(l.rule)){e=l.start+e+l.end;break}d(".colorConverter").css("color",e);const i=UW(d(".colorConverter").css("color"));if(i===void 0)return;e=i;const r=t.find("input.color").attr("id");r===void 0&&console.error("Could not find color ID!"),!s&&r!==void 0&&document.documentElement.style.setProperty(r,e);const o=t.find("label");o.val(e),o.attr("value",e),o.attr("for")!=="--bg-color"&&o.css("background-color",e),t.find("input.input").val(e),t.find("input.color").attr("value",e)}async function du(){var t;if(u.customTheme){const e=d(".pageSettings .section.themes .allCustomThemes.buttons").empty(),a=d(".pageSettings .section.themes .addCustomThemeButton");if(Se())d(".pageSettings .section.themes .customThemeEdit #saveCustomThemeButton").text("save as new");else{d(".pageSettings .section.themes .customThemeEdit #saveCustomThemeButton").text("save");return}a.removeClass("hidden"),(((t=A())==null?void 0:t.customThemes)??[]).forEach(n=>{const i=n.colors[0],r=n.colors[1];e.append(`<div class="customTheme button" customThemeId='${n._id}' 
        style="color:${r};background:${i}">
        <div class="editButton"><i class="fas fa-pen"></i></div>
        <div class="text">${n.name.replace(/_/g," ")}</div>
        <div class="delButton"><i class="fas fa-trash fa-fw"></i></div>
        </div>`)})}else{const e=document.querySelector(".pageSettings .section.themes .favThemes.buttons");e.innerHTML="";let a="";const s=document.querySelector(".pageSettings .section.themes .allThemes.buttons");s.innerHTML="";let n="",i=u.theme;u.randomTheme!=="off"&&u.randomTheme!=="custom"&&Na!==null&&(i=Na);let r;try{r=await GW()}catch(o){y(Ge(o,"Failed to refresh theme buttons"),-1);return}if(u.favThemes.length>0){e.style.marginBottom="1rem",e.style.marginTop="1rem";for(const o of r)if(u.favThemes.includes(o.name)){const l=i===o.name?"active":"";a+=`<div class="theme button ${l}" theme='${o.name}' style="background: ${o.bgColor}; color: ${o.mainColor};outline: 0 solid ${o.mainColor};">
            <div class="favButton active"><i class="fas fa-star"></i></div>
            <div class="text">${o.name.replace(/_/g," ")}</div>
            <div class="themeBubbles" style="background: ${o.bgColor};outline: 0.25rem solid ${o.bgColor};">
              <div class="themeBubble" style="background: ${o.mainColor}"></div>
              <div class="themeBubble" style="background: ${o.subColor}"></div>
              <div class="themeBubble" style="background: ${o.textColor}"></div>
            </div>
            </div>
            `}e.innerHTML=a}else e.style.marginBottom="0",e.style.marginTop="0";for(const o of r){if(u.favThemes.includes(o.name))continue;const l=i===o.name?"active":"";n+=`<div class="theme button ${l}" theme='${o.name}' style="background: ${o.bgColor}; color: ${o.mainColor};outline: 0 solid ${o.mainColor};">
        <div class="favButton"><i class="far fa-star"></i></div>
        <div class="text">${o.name.replace(/_/g," ")}</div>
        <div class="themeBubbles" style="background: ${o.bgColor};outline: 0.25rem solid ${o.bgColor};">
          <div class="themeBubble" style="background: ${o.mainColor}"></div>
          <div class="themeBubble" style="background: ${o.subColor}"></div>
          <div class="themeBubble" style="background: ${o.textColor}"></div>
        </div>
        </div>
        `}s.innerHTML=n}}function J7(t=!1){d(".pageSettings .section.themes .tabContainer .customTheme .colorPicker").each((e,a)=>{const s=u.customThemeColors[mr.indexOf(d(a).find("input.color").attr("id"))];ou(d(a),s,!1,t)})}function X7(t){if(u.favThemes.includes(t))n_(u.favThemes.filter(e=>e!==t));else{const e=u.favThemes;e.push(t),n_(e)}xu()}function e8(){const t=[];for(const e of mr)t.push(d(`.pageSettings .customTheme .customThemeEdit #${e}[type='color']`).attr("value"));Lm(t),y("Custom theme saved",1)}function H_(t=!1){const e=d(".pageSettings .section.themes .tabs button[data-tab='preset']"),a=d(".pageSettings .section.themes .tabs button[data-tab='custom']");u.customTheme?(e.removeClass("active"),(!a.hasClass("active")||t)&&(a.addClass("active"),du()),xi(d('.pageSettings [tabContent="preset"]'),d('.pageSettings [tabContent="custom"]'),250)):(a.removeClass("active"),(!e.hasClass("active")||t)&&(e.addClass("active"),du()),xi(d('.pageSettings [tabContent="custom"]'),d('.pageSettings [tabContent="preset"]'),250))}d(".pageSettings .section.themes .tabs button").on("click",t=>{d(".pageSettings .section.themes .tabs button").removeClass("active");const e=d(t.currentTarget);e.addClass("active"),e.attr("data-tab")==="preset"?Ki(!1):Ki(!0)});d(".pageSettings").on("click"," .section.themes .customTheme.button",t=>{var s,n;if(d(t.target).hasClass("delButton")||d(t.target).hasClass("editButton"))return;const e=d(t.currentTarget).attr("customThemeId")??"",a=(n=(s=A())==null?void 0:s.customThemes)==null?void 0:n.find(i=>i._id===e);if(a===void 0){console.error("Could not find custom theme in snapshot for id ",e);return}Lm(a.colors)});d(".pageSettings").on("click",".section.themes .theme .favButton",t=>{const e=d(t.currentTarget).parents(".theme.button").attr("theme");e!==void 0?X7(e):console.error("Could not find the theme attribute attached to the button clicked!")});d(".pageSettings").on("click",".section.themes .theme.button",t=>{const e=d(t.currentTarget).attr("theme");!d(t.target).hasClass("favButton")&&e!==void 0&&KM(e)});d(".pageSettings .section.themes .tabContainer .customTheme input[type=color]").on("input",t=>{const e=d(t.currentTarget).attr("id"),a=d(t.currentTarget).val();ou(d(".colorPicker #"+e).parent(),a,!0)});d(".pageSettings .section.themes .tabContainer .customTheme input[type=color]").on("change",t=>{const e=d(t.currentTarget).attr("id"),a=d(t.currentTarget).val();ou(d(".colorPicker #"+e).parent(),a)});d(".pageSettings .section.themes .tabContainer .customTheme input.input").on("blur",t=>{if(t.target.id==="name")return;const e=d(t.currentTarget).attr("id"),a=d(t.currentTarget).val();ou(d(".colorPicker #"+e).parent(),a)}).on("keypress",function(t){if(t.target.id!=="name"&&t.code==="Enter"){d(this).attr("disabled","disabled");const e=d(t.currentTarget).attr("id"),a=d(t.currentTarget).val();ou(d(".colorPicker #"+e).parent(),a),d(this).removeAttr("disabled")}});d(".pageSettings #loadCustomColorsFromPreset").on("click",async()=>{await kO(u.theme),mr.forEach(e=>{document.documentElement.style.setProperty(e,"")}),wO();const t=await Mo();mr.forEach(e=>{let a;e==="--bg-color"?a=t.bg:e==="--main-color"?a=t.main:e==="--sub-color"?a=t.sub:e==="--sub-alt-color"?a=t.subAlt:e==="--caret-color"?a=t.caret:e==="--text-color"?a=t.text:e==="--error-color"?a=t.error:e==="--error-extra-color"?a=t.errorExtra:e==="--colorful-error-color"?a=t.colorfulError:e==="--colorful-error-extra-color"&&(a=t.colorfulErrorExtra),ou(d(".colorPicker #"+e).parent(),a)})});d(".pageSettings #saveCustomThemeButton").on("click",async()=>{if(e8(),Se()){const t={name:"custom",colors:u.customThemeColors};Ct();const e=await lF(t);Qe(),e&&H_(!0)}else H_(!0)});Gt(t=>{t==="customThemeId"&&du(),t==="theme"&&xt()==="settings"&&Y7()});const Wi={mode:"import",value:""};function sP(t,e){Wi.mode=t,Wi.value="",zg.show({focusFirstInput:"focusAndSelect",beforeAnimation:async a=>{var s,n,i,r;a.querySelector("input").value=Wi.value,Wi.mode==="export"?((s=a.querySelector("button"))==null||s.classList.add("hidden"),(n=a.querySelector("input"))==null||n.setAttribute("readonly","true")):Wi.mode==="import"&&((i=a.querySelector("button"))==null||i.classList.remove("hidden"),(r=a.querySelector("input"))==null||r.removeAttribute("readonly"))}})}const zg=new Pt({dialogId:"importExportSettingsModal",setup:async t=>{var e;(e=t.querySelector("input"))==null||e.addEventListener("input",a=>{Wi.value=a.target.value}),t==null||t.addEventListener("submit",async a=>{if(a.preventDefault(),Wi.mode==="import"){if(Wi.value===""){zg.hide();return}try{const s=F5.strip().parse(JSON.parse(Wi.value));await Gl(Lp(s))}catch(s){y("Failed to import settings: incorrect data schema",0),console.error(s),zg.hide();return}y("Settings imported",1),xu(),zg.hide()}})}}),se={};async function t8(){await sE,se.smoothCaret=new he("smoothCaret",DM,"button"),se.difficulty=new he("difficulty",si,"button"),se.quickRestart=new he("quickRestart",WM,"button"),se.showAverage=new he("showAverage",MM,"button"),se.keymapMode=new he("keymapMode",En,"button",()=>{var t;(t=se.showLiveWpm)==null||t.updateUI()},()=>{u.keymapMode==="off"?(d(".pageSettings .section[data-config-name='keymapStyle']").addClass("hidden"),d(".pageSettings .section[data-config-name='keymapLayout']").addClass("hidden"),d(".pageSettings .section[data-config-name='keymapLegendStyle']").addClass("hidden"),d(".pageSettings .section[data-config-name='keymapShowTopRow']").addClass("hidden"),d(".pageSettings .section[data-config-name='keymapSize']").addClass("hidden")):(d(".pageSettings .section[data-config-name='keymapStyle']").removeClass("hidden"),d(".pageSettings .section[data-config-name='keymapLayout']").removeClass("hidden"),d(".pageSettings .section[data-config-name='keymapLegendStyle']").removeClass("hidden"),d(".pageSettings .section[data-config-name='keymapShowTopRow']").removeClass("hidden"),d(".pageSettings .section[data-config-name='keymapSize']").removeClass("hidden"))}),se.keymapMatrix=new he("keymapStyle",eE,"button"),se.keymapLayout=new he("keymapLayout",Xo,"select"),se.keymapLegendStyle=new he("keymapLegendStyle",XM,"button"),se.keymapShowTopRow=new he("keymapShowTopRow",tE,"button"),se.keymapSize=new he("keymapSize",ph,"range"),se.showKeyTips=new he("showKeyTips",jM,"button",void 0,()=>{u.showKeyTips?d(".pageSettings .tip").removeClass("hidden"):d(".pageSettings .tip").addClass("hidden")}),se.freedomMode=new he("freedomMode",zM,"button",()=>{var t;(t=se.confidenceMode)==null||t.updateUI()}),se.strictSpace=new he("strictSpace",SM,"button"),se.oppositeShiftMode=new he("oppositeShiftMode",$M,"button"),se.confidenceMode=new he("confidenceMode",HM,"button",()=>{var t,e;(t=se.freedomMode)==null||t.updateUI(),(e=se.stopOnError)==null||e.updateUI()}),se.indicateTypos=new he("indicateTypos",UM,"button"),se.hideExtraLetters=new he("hideExtraLetters",EM,"button"),se.blindMode=new he("blindMode",lM,"button"),se.quickEnd=new he("quickEnd",_M,"button"),se.repeatQuotes=new he("repeatQuotes",xM,"button"),se.ads=new he("ads",kM,"button"),se.alwaysShowWordsHistory=new he("alwaysShowWordsHistory",vM,"button"),se.britishEnglish=new he("britishEnglish",JM,"button"),se.singleListCommandLine=new he("singleListCommandLine",bM,"button"),se.capsLockWarning=new he("capsLockWarning",wM,"button"),se.flipTestColors=new he("flipTestColors",CM,"button"),se.showOutOfFocusWarning=new he("showOutOfFocusWarning",pM,"button"),se.colorfulMode=new he("colorfulMode",TM,"button"),se.startGraphsAtZero=new he("startGraphsAtZero",BM,"button"),se.autoSwitchTheme=new he("autoSwitchTheme",VM,"button"),se.randomTheme=new he("randomTheme",YM,"button"),se.stopOnError=new he("stopOnError",dx,"button",()=>{var t;(t=se.confidenceMode)==null||t.updateUI()}),se.soundVolume=new he("soundVolume",dM,"range"),se.playSoundOnError=new he("playSoundOnError",rM,"button",()=>{u.playSoundOnError!=="off"&&$b()}),se.playSoundOnClick=new he("playSoundOnClick",oM,"button",()=>{u.playSoundOnClick!=="off"&&cr("KeyQ")}),se.showAllLines=new he("showAllLines",$m,"button"),se.paceCaret=new he("paceCaret",mM,"button"),se.repeatedPace=new he("repeatedPace",fM,"button"),se.minWpm=new he("minWpm",hM,"button"),se.minAcc=new he("minAcc",gM,"button"),se.minBurst=new he("minBurst",yM,"button"),se.smoothLineScroll=new he("smoothLineScroll",qM,"button"),se.lazyMode=new he("lazyMode",Am,"button"),se.layout=new he("layout",ed,"select"),se.language=new he("language",Kl,"select"),se.fontSize=new he("fontSize",bb,"button"),se.maxLineWidth=new he("maxLineWidth",mh,"button"),se.caretStyle=new he("caretStyle",AM,"button"),se.paceCaretStyle=new he("paceCaretStyle",LM,"button"),se.timerStyle=new he("timerStyle",OM,"button"),se.liveSpeedStyle=new he("liveSpeedStyle",IM,"button"),se.liveAccStyle=new he("liveAccStyle",PM,"button"),se.liveBurstStyle=new he("liveBurstStyle",ZM,"button"),se.highlightMode=new he("highlightMode",Eo,"button"),se.tapeMode=new he("tapeMode",mx,"button"),se.timerOpacity=new he("timerOpacity",RM,"button"),se.timerColor=new he("timerColor",NM,"button"),se.fontFamily=new he("fontFamily",FM,"button",void 0,()=>{const t=d(".pageSettings .section[data-config-name='fontFamily'] .buttons button[data-config-value='custom']");d(".pageSettings .section[data-config-name='fontFamily'] .buttons .active").length===0?(t.addClass("active"),t.text(`Custom (${u.fontFamily.replace(/_/g," ")})`)):t.text("Custom")}),se.alwaysShowDecimalPlaces=new he("alwaysShowDecimalPlaces",uM,"button"),se.typingSpeedUnit=new he("typingSpeedUnit",cM,"button"),se.customBackgroundSize=new he("customBackgroundSize",hx,"button")}function a8(){var t,e;d(".pageSettings .section.themes .favThemes.buttons").empty(),d(".pageSettings .section.themes .allThemes.buttons").empty(),d(".pageSettings .section.themes .allCustomThemes.buttons").empty(),d(".pageSettings .section[data-config-name='funbox'] .buttons").empty(),d(".pageSettings .section[data-config-name='fontFamily'] .buttons").empty();for(const a of document.querySelectorAll(".pageSettings select"))(e=(t=a==null?void 0:a.slim)==null?void 0:t.destroy)==null||e.call(t)}let gS=!1;async function s8(){var P;u.showKeyTips?d(".pageSettings .tip").removeClass("hidden"):d(".pageSettings .tip").addClass("hidden");let t;try{t=await Hk()}catch($){console.error(Ge($,"Failed to initialize settings language picker"))}const e=document.querySelector(".pageSettings .section[data-config-name='language'] select");let a="";if(t)for(const $ of t){a+=`<optgroup label="${$.name}">`;for(const T of $.languages){const L=T===u.language?"selected":"",V=oo(T);a+=`<option value="${T}" ${L}>${V}</option>`}a+="</optgroup>"}e.innerHTML=a,new La({select:e,settings:{searchPlaceholder:"search"}});let s;try{s=await ah()}catch($){console.error(Ge($,"Failed to refresh keymap"))}const n=document.querySelector(".pageSettings .section[data-config-name='layout'] select"),i=document.querySelector(".pageSettings .section[data-config-name='keymapLayout'] select");let r='<option value="default">off</option>',o='<option value="overrideSync">emulator sync</option>';if(s)for(const $ of Object.keys(s)){const T=`<option value="${$}">${$.replace(/_/g," ")}</option>`;$.toString()!=="korean"&&(r+=T),$.toString()!=="default"&&(o+=T)}n.innerHTML=r,i.innerHTML=o,new La({select:n}),new La({select:i});let l;try{l=await Fk()}catch($){console.error(Ge($,"Failed to load themes into dropdown boxes"))}const c=document.querySelector(".pageSettings .section[data-config-name='autoSwitchThemeInputs'] select.light"),m=document.querySelector(".pageSettings .section[data-config-name='autoSwitchThemeInputs'] select.dark");let f="",h="";if(l)for(const $ of l){const T=`<option value="${$.name}" ${$.name===u.themeLight?"selected":""}>${$.name.replace(/_/g," ")}</option>`;f+=T;const L=`<option value="${$.name}" ${$.name===u.themeDark?"selected":""}>${$.name.replace(/_/g," ")}</option>`;h+=L}c.innerHTML=f,m.innerHTML=h,new La({select:c,events:{afterChange:$=>{var T;GM((T=$[0])==null?void 0:T.value)}}}),new La({select:m,events:{afterChange:$=>{var T;QM((T=$[0])==null?void 0:T.value)}}});const v=document.querySelector(".pageSettings .section[data-config-name='funbox'] .buttons");v.innerHTML=`<div class="funbox button" data-config-value='none'>none</div>`;let w="",_;try{_=await ku()}catch($){console.error(Ge($,"Failed to get funbox list"))}if(_){for(const $ of _)$.name==="mirror"?w+=`<div class="funbox button" data-config-value='${$.name}' aria-label="${$.info}" data-balloon-pos="up" data-balloon-length="fit" style="transform:scaleX(-1);">${$.name.replace(/_/g," ")}</div>`:$.name==="upside_down"?w+=`<div class="funbox button" data-config-value='${$.name}' aria-label="${$.info}" data-balloon-pos="up" data-balloon-length="fit" style="transform:scaleX(-1) scaleY(-1); z-index:1;">${$.name.replace(/_/g," ")}</div>`:w+=`<div class="funbox button" data-config-value='${$.name}' aria-label="${$.info}" data-balloon-pos="up" data-balloon-length="fit">${$.name.replace(/_/g," ")}</div>`;v.innerHTML=w}let S=!0;const M=document.querySelector(".pageSettings .section[data-config-name='fontFamily'] .buttons");M.innerHTML="";let I="",me;try{me=await XW()}catch($){console.error(Ge($,"Failed to update fonts settings buttons"))}if(me){for(const $ of me){let T=$.name;T==="Helvetica"&&(T="Comic Sans MS"),($.systemFont??!1)===!1&&(T+=" Preview");const L=u.fontFamily===$.name?" active":"",V=$.display!==void 0?$.display:$.name;u.fontFamily===$.name&&(S=!1),I+=`<button class="${L}" style="font-family:${T}" data-config-value="${$.name.replace(/ /g,"_")}">${V}</button>`}I+=S?`<button class="no-auto-handle active" data-config-value="custom">Custom (${u.fontFamily.replace(/_/g," ")})</button>`:'<button class="no-auto-handle" data-config-value="custom"">Custom</button>',M.innerHTML=I}if(d(".pageSettings .section[data-config-name='customBackgroundSize'] input").val(u.customBackground),lP(),d(".pageSettings .section[data-config-name='fontSize'] input").val(u.fontSize),d(".pageSettings .section[data-config-name='maxLineWidth'] input").val(u.maxLineWidth),d(".pageSettings .section[data-config-name='keymapSize'] input").val(u.keymapSize),d(".pageSettings .section[data-config-name='customLayoutfluid'] input").val(u.customLayoutfluid.replace(/#/g," ")),Mv(!0),!gS)await t8(),gS=!0;else for(const $ of Object.keys(se))(P=se[$])==null||P.updateUI();Mv(!1),await du(),await sE}function nP(){d(".pageSettings .section.needsAccount").addClass("hidden")}function n8(){d(".pageSettings .section.needsAccount").removeClass("hidden"),rP(),oP()}function iP(){d(".pageSettings .section[data-config-name='funbox'] .button").removeClass("active"),d(".pageSettings .section[data-config-name='funbox'] .button").removeClass("disabled"),ku().then(t=>{t.forEach(e=>{!Gk(u.funbox,e.name)&&!u.funbox.split("#").includes(e.name)&&d(`.pageSettings .section[data-config-name='funbox'] .button[data-config-value='${e.name}']`).addClass("disabled")})}).catch(t=>{const e=Ge(t,"Failed to update funbox buttons");y(e,-1)}),u.funbox.split("#").forEach(t=>{d(`.pageSettings .section[data-config-name='funbox'] .button[data-config-value='${t}']`).addClass("active")})}function rP(){var t,e;if(Se()&&A()){const a=d(".pageSettings .section.tags .tagsList").empty();(e=(t=A())==null?void 0:t.tags)==null||e.forEach(s=>{a.append(`

      <div class="buttons tag" data-id="${s._id}" data-name="${s.name}" data-display="${s.display}">
        <button class="tagButton ${s.active?"active":""}" active="${s.active}">
          ${s.display}
        </button>
        <button class="clearPbButton" aria-label="clear tags personal bests" data-balloon-pos="left" >
          <i class="fas fa-crown fa-fw"></i>
        </button>
        <button class="editButton" aria-label="rename tag" data-balloon-pos="left" >
          <i class="fas fa-pen fa-fw"></i>
        </button>
        <button class="removeButton" aria-label="remove tag"  data-balloon-pos="left" >
          <i class="fas fa-trash fa-fw"></i>
        </button>
      </div>

      `)}),d(".pageSettings .section.tags").removeClass("hidden")}else d(".pageSettings .section.tags").addClass("hidden")}function oP(){var t,e;if(Se()&&A()){const a=d(".pageSettings .section.presets .presetsList").empty();(e=(t=A())==null?void 0:t.presets)==null||e.forEach(s=>{a.append(`
      <div class="buttons preset" data-id="${s._id}" data-name="${s.name}" data-display="${s.display}">
        <button class="presetButton">${s.display}</button>
        <button class="editButton">
          <i class="fas fa-pen fa-fw"></i>
        </button>
        <button class="removeButton">
          <i class="fas fa-trash fa-fw"></i>
        </button>
      </div>
      
      `)}),d(".pageSettings .section.presets").removeClass("hidden")}else d(".pageSettings .section.presets").addClass("hidden")}async function Vr(t=!0){var n;if(t)for(const i of Object.keys(se))(n=se[i])==null||n.updateUI();rP(),oP(),iP(),await Qt(0),H_(!0),J7(!0),d(".pageSettings .section[data-config-name='paceCaret'] input.customPaceCaretSpeed").val(Da(u.typingSpeedUnit).fromWpm(u.paceCaretCustomSpeed)),d(".pageSettings .section[data-config-name='minWpm'] input.customMinWpmSpeed").val(Da(u.typingSpeedUnit).fromWpm(u.minWpmCustomSpeed)),d(".pageSettings .section[data-config-name='minAcc'] input.customMinAcc").val(u.minAccCustom),d(".pageSettings .section[data-config-name='minBurst'] input.customMinBurst").val(Da(u.typingSpeedUnit).fromWpm(u.minBurstCustomSpeed)),u.autoSwitchTheme?d(".pageSettings .section[data-config-name='autoSwitchThemeInputs']").removeClass("hidden"):d(".pageSettings .section[data-config-name='autoSwitchThemeInputs']").addClass("hidden"),u.customBackground!==""?d(".pageSettings .section[data-config-name='customBackgroundFilter']").removeClass("hidden"):d(".pageSettings .section[data-config-name='customBackgroundFilter']").addClass("hidden"),lP(),d(".pageSettings .section[data-config-name='customBackgroundSize'] input").val(u.customBackground),Se()?n8():nP(),_O();const e=window.navigator.userAgent.toLowerCase(),a=e.includes("mac")&&!e.includes("firefox")?"cmd":"ctrl",s=u.quickRestart==="esc"?"tab":"esc";d(".pageSettings .tip").html(`
    tip: You can also change all these settings quickly using the
    command line (<key>${s}</key> or <key>${a}</key> + <key>shift</key> + <key>p</key>)`)}function dP(t){const e=d(`.pageSettings .settingsGroup.${t}`);e.stop(!0,!0).slideToggle(250).toggleClass("slideup"),e.hasClass("slideup")?d(`.pageSettings .sectionGroupTitle[group=${t}]`).addClass("rotateIcon"):d(`.pageSettings .sectionGroupTitle[group=${t}]`).removeClass("rotateIcon")}function lP(){const t=d(".pageSettings .section[data-config-name='customBackgroundSize'] button.remove");u.customBackground!==void 0&&u.customBackground.length>0?t.removeClass("hidden"):t.addClass("hidden")}d(".pageSettings .section[data-config-name='paceCaret']").on("focusout","input.customPaceCaretSpeed",()=>{const t=parseInt(d(".pageSettings .section[data-config-name='paceCaret'] input.customPaceCaretSpeed").val()),e=Da(u.typingSpeedUnit).toWpm(t);lx(e)});d(".pageSettings .section[data-config-name='paceCaret']").on("click","button.save",()=>{const t=parseInt(d(".pageSettings .section[data-config-name='paceCaret'] input.customPaceCaretSpeed").val()),e=Da(u.typingSpeedUnit).toWpm(t);lx(e)});d(".pageSettings .section[data-config-name='minWpm']").on("focusout","input.customMinWpmSpeed",()=>{const t=parseInt(d(".pageSettings .section[data-config-name='minWpm'] input.customMinWpmSpeed").val()),e=Da(u.typingSpeedUnit).toWpm(t);ux(e)});d(".pageSettings .section[data-config-name='minWpm']").on("click","button.save",()=>{const t=parseInt(d(".pageSettings .section[data-config-name='minWpm'] input.customMinWpmSpeed").val()),e=Da(u.typingSpeedUnit).toWpm(t);ux(e)});d(".pageSettings .section[data-config-name='minAcc']").on("focusout","input.customMinAcc",()=>{cx(parseInt(d(".pageSettings .section[data-config-name='minAcc'] input.customMinAcc").val()))});d(".pageSettings .section[data-config-name='minAcc']").on("click","button.save",()=>{cx(parseInt(d(".pageSettings .section[data-config-name='minAcc'] input.customMinAcc").val()))});d(".pageSettings .section[data-config-name='minBurst']").on("focusout","input.customMinBurst",()=>{const t=parseInt(d(".pageSettings .section[data-config-name='minBurst'] input.customMinBurst").val()),e=Da(u.typingSpeedUnit).toWpm(t);px(e)});d(".pageSettings .section[data-config-name='minBurst']").on("click","button.save",()=>{const t=parseInt(d(".pageSettings .section[data-config-name='minBurst'] input.customMinBurst").val()),e=Da(u.typingSpeedUnit).toWpm(t);px(e)});d(".pageSettings .section[data-config-name='funbox']").on("click",".button",t=>{const e=d(t.currentTarget).attr("data-config-value");fO(e),iP()});d(".pageSettings .section.tags").on("click",".tagsList .tag .tagButton",t=>{const e=t.currentTarget,a=d(e).parent(".tag").attr("data-id");aP(a),d(e).toggleClass("active")});d(".pageSettings .section.presets").on("click",".presetsList .preset .presetButton",async t=>{const e=t.currentTarget,a=d(e).parent(".preset").attr("data-id");await G7(a),Vr()});d("#importSettingsButton").on("click",()=>{sP("import")});d("#exportSettingsButton").on("click",()=>{const t=JSON.stringify(u);navigator.clipboard.writeText(t).then(function(){y("JSON Copied to clipboard",0)},function(){sP("export")})});d(".pageSettings .sectionGroupTitle").on("click",t=>{dP(d(t.currentTarget).attr("group"))});d(".pageSettings .section[data-config-name='customBackgroundSize'] .inputAndButton button.save").on("click",()=>{fh(d(".pageSettings .section[data-config-name='customBackgroundSize'] .inputAndButton input").val())});d(".pageSettings .section[data-config-name='customBackgroundSize'] .inputAndButton button.remove").on("click",()=>{fh("")});d(".pageSettings .section[data-config-name='customBackgroundSize'] .inputAndButton input").on("keypress",t=>{t.key==="Enter"&&fh(d(".pageSettings .section[data-config-name='customBackgroundSize'] .inputAndButton input").val())});d(".pageSettings .section[data-config-name='fontSize'] .inputAndButton button.save").on("click",()=>{bb(parseFloat(d(".pageSettings .section[data-config-name='fontSize'] .inputAndButton input").val()))&&y("Saved",1,{duration:1})});d(".pageSettings .section[data-config-name='fontSize'] .inputAndButton input").on("keypress",t=>{t.key==="Enter"&&bb(parseFloat(d(".pageSettings .section[data-config-name='fontSize'] .inputAndButton input").val()))&&y("Saved",1,{duration:1})});d(".pageSettings .section[data-config-name='maxLineWidth'] .inputAndButton button.save").on("click",()=>{mh(parseFloat(d(".pageSettings .section[data-config-name='maxLineWidth'] .inputAndButton input").val()))&&y("Saved",1,{duration:1})});d(".pageSettings .section[data-config-name='maxLineWidth'] .inputAndButton input").on("focusout",()=>{mh(parseFloat(d(".pageSettings .section[data-config-name='maxLineWidth'] .inputAndButton input").val()))&&y("Saved",1,{duration:1})});d(".pageSettings .section[data-config-name='maxLineWidth'] .inputAndButton input").on("keypress",t=>{t.key==="Enter"&&mh(parseFloat(d(".pageSettings .section[data-config-name='maxLineWidth'] .inputAndButton input").val()))&&y("Saved",1,{duration:1})});d(".pageSettings .section[data-config-name='keymapSize'] .inputAndButton button.save").on("click",()=>{ph(parseFloat(d(".pageSettings .section[data-config-name='keymapSize'] .inputAndButton input").val()))&&y("Saved",1,{duration:1})});d(".pageSettings .section[data-config-name='keymapSize'] .inputAndButton input").on("focusout",()=>{ph(parseFloat(d(".pageSettings .section[data-config-name='keymapSize'] .inputAndButton input").val()))&&y("Saved",1,{duration:1})});d(".pageSettings .section[data-config-name='keymapSize'] .inputAndButton input").on("keypress",t=>{t.key==="Enter"&&ph(parseFloat(d(".pageSettings .section[data-config-name='keymapSize'] .inputAndButton input").val()))&&y("Saved",1,{duration:1})});d(".pageSettings .section[data-config-name='customLayoutfluid'] .inputAndButton button.save").on("click",()=>{fx(d(".pageSettings .section[data-config-name='customLayoutfluid'] .inputAndButton input").val()).then(t=>{t&&y("Custom layoutfluid saved",1)})});d(".pageSettings .section[data-config-name='customLayoutfluid'] .inputAndButton .input").on("keypress",t=>{t.key==="Enter"&&fx(d(".pageSettings .section[data-config-name='customLayoutfluid'] .inputAndButton input").val()).then(e=>{e&&y("Custom layoutfluid saved",1)})});d(".pageSettings .quickNav .links a").on("click",t=>{const e=t.target.innerText;d(`.pageSettings .settingsGroup.${e}`).hasClass("slideup")&&dP(e)});let uP=!1;function Mv(t){uP=t}Gt((t,e)=>{t==="fullConfigChange"&&Mv(!0),t==="fullConfigChangeFinished"&&Mv(!1),t==="themeLight"?d(`.pageSettings .section[data-config-name='autoSwitchThemeInputs'] select.light option[value="${e}"]`).attr("selected","true"):t==="themeDark"&&d(`.pageSettings .section[data-config-name='autoSwitchThemeInputs'] select.dark option[value="${e}"]`).attr("selected","true"),!(uP||t==="saveToLocalStorage")&&xt()==="settings"&&t!=="theme"&&Vr()});const i8=new Ii({name:"settings",element:d(".page.pageSettings"),path:"/settings",afterHide:async()=>{a8(),Ga("pageSettings")},beforeShow:async()=>{js("pageSettings","main"),await s8(),await Vr(!1)}});d(async()=>{$s("pageSettings")});class wr{constructor(e,a){var n;this.inputElement=e,d(this.inputElement).wrap('<div class="inputAndIndicator"></div>'),this.parentElement=d(this.inputElement).parent(".inputAndIndicator"),this.options=a,this.currentStatus=null;let s='<div class="statusIndicator">';for(const[i,r]of Object.entries(a))s+=`
      <div
        class="indicator level${r.level} hidden"
        data-option-id="${i}"
        
        ${(((n=r.message)==null?void 0:n.length)??0)>27?'data-balloon-length="large"':""}
        data-balloon-pos="left"
        ${r.message??""?`aria-label="${r.message}"`:""}
      >
        <i class="fas fa-fw ${r.icon} ${r.spinIcon?"fa-spin":""}"></i>
      </div>
      `;s+="</div>",this.parentElement.append(s)}hide(){this.parentElement.find(".statusIndicator div").addClass("hidden"),this.currentStatus=null,d(this.inputElement).css("padding-right","0.5em")}show(e,a){this.hide(),this.currentStatus=e;const s=this.parentElement.find(`[data-option-id="${e}"]`);s.removeClass("hidden"),a!==void 0&&a!==""&&(a.length>20?s.attr("data-balloon-length","large"):s.removeAttr("data-balloon-length"),s.attr("aria-label",a)),d(this.inputElement).css("padding-right","2.1em")}get(){return this.currentStatus}}const r8=["gmaill.com","gamil.com","gmali.com","gnail.com","gmil.com","gamail.com","hotmai.com","gmial.com","hotmal.com","yaho.com","outlokk.com","gmil.com","hotmial.com","yahooo.com","otulook.com","gamil.com","hotnail.com","yaoo.com","outlok.com","gmail.cmo","hotmail.cmo","yahho.com","outloook.com","gmaail.com","hottmail.com","yaho.com","outllok.com","gmai.com","hotmil.com","yhaoo.com","outlookk.com","gmil.com","htmial.com","yaahoo.com","otlook.com","gamail.com","hotnail.com","yaoho.com","outlok.com","gemail.com","hotmiall.com","yahhoo.com","outloookk.com","gmal.com","hottmail.com","yahio.com","outlokkk.com",".comm",".con",".cmo",".coom",".cim",".vom","-online.de","-tonline.de","acor.de","aecor.de","ahoo.de","al.com","ao.com","aol.cm","aol.con","aol.ocm","aol.om","aoll.com","apl.com","arco.de","arocr.de","aror.de","feenet.de","freeenet.de","freeent.de","freeet.de","freemet.de","freeneet.de","freent.de","frenet.de","gm.de","gm.net","gm.xde","gmc.de","gmx.ded","gmx.dw","gmxx.de","gmy.de","gx.de","hmx.de","homail.de","hotmai.de","hotmal.de","mx.de","mx.net","@otmail.com","r-online.de","rcor.de","reenet.de","t--online.de","t-0nline.de","t-nline.de","t-oline.de","t-omline.de","t-onine.de","t-onlien.de","t-onliine.de","t-onlin.de","t-onlinde.de","t-onlinr.de","t-onlione.de","t-onlline.de","t-onlne.de","t-onlone.de","t.-online.de","t.online.de","tonline.de","wb.de","we.de","web.ded","web.dw","wed.de","weeb.de","wen.de","wweb.de","yaho.de","yahooo.de","yaoo.de","yhoo.de","yahhoo.de","icoud.com","icloud.cim","icloud.con","icloud.ocm","icloud.om","icloud.cm"];function mC(){d(".page.pageLogin .register.side button").prop("disabled",!1)}function Mh(){d(".page.pageLogin .register.side button").prop("disabled",!0)}function ps(){d(".pageLogin input").prop("disabled",!1),d(".pageLogin button").prop("disabled",!1)}function fC(){d(".pageLogin input").prop("disabled",!0),d(".pageLogin button").prop("disabled",!0)}function hC(){d(".pageLogin .preloader").removeClass("hidden")}function us(){d(".pageLogin .preloader").addClass("hidden")}const ms=()=>{Kr.get()!=="available"||ci.get()!=="valid"&&ci.get()!=="typo"&&ci.get()!=="edu"||lu.get()!=="match"||Gr.get()!=="good"||uu.get()!=="match"?Mh():mC()},o8=ns(1e3,async()=>{const t=d(".page.pageLogin .register.side .usernameInput").val();if(!t){ms();return}const e=await K.users.getNameAvailability({params:{name:t}});e.status===200?Kr.show("available",e.body.message):e.status===422?Kr.show("unavailable",e.body.message):e.status===409?Kr.show("taken",e.body.message):(Kr.show("unavailable",e.body.message),y("Failed to check name availability: "+e.body.message,-1)),ms()}),d8=()=>{const t=d(".page.pageLogin .register.side .emailInput").val(),e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,a=/@.*(student|education|school|\.edu$|\.edu\.|\.ac\.|\.sch\.)/i,s=r8.some(n=>t.endsWith(n));e.test(t)?s?ci.show("typo","Please check your email address, it may contain a typo."):a.test(t)?ci.show("edu","Some education emails will fail to receive our messages, or disable the account as soon as you graduate. Consider using a personal email address."):ci.show("valid"):ci.show("invalid"),ms()},cP=()=>{const t=d(".page.pageLogin .register.side .emailInput").val(),e=d(".page.pageLogin .register.side .verifyEmailInput").val();t===e?lu.show("match"):lu.show("mismatch"),ms()},pP=()=>{const t=d(".page.pageLogin .register.side .passwordInput").val();kk(t)?Gr.show("good","Password is good"):t.length<8?Gr.show("short","Password must be at least 8 characters"):t.length>64?Gr.show("long","Password must be at most 64 characters"):Gr.show("weak","Password must contain at least one capital letter, number, and special character"),ms()},mP=()=>{const t=d(".page.pageLogin .register.side .passwordInput").val(),e=d(".page.pageLogin .register.side .verifyPasswordInput").val();t===e?uu.show("match"):uu.show("mismatch"),ms()},Kr=new wr(d(".page.pageLogin .register.side input.usernameInput"),{available:{icon:"fa-check",level:1},unavailable:{icon:"fa-times",level:-1},taken:{icon:"fa-user",level:-1},checking:{icon:"fa-circle-notch",spinIcon:!0,level:0}}),ci=new wr(d(".page.pageLogin .register.side input.emailInput"),{valid:{icon:"fa-check",level:1},invalid:{icon:"fa-times",level:-1},typo:{icon:"fa-exclamation-triangle",level:1},edu:{icon:"fa-exclamation-triangle",level:1}}),lu=new wr(d(".page.pageLogin .register.side input.verifyEmailInput"),{match:{icon:"fa-check",level:1},mismatch:{icon:"fa-times",level:-1}}),Gr=new wr(d(".page.pageLogin .register.side input.passwordInput"),{good:{icon:"fa-check",level:1},short:{icon:"fa-times",level:-1},long:{icon:"fa-times",level:-1},weak:{icon:"fa-times",level:-1}}),uu=new wr(d(".page.pageLogin .register.side input.verifyPasswordInput"),{match:{icon:"fa-check",level:1},mismatch:{icon:"fa-times",level:-1}});d(".page.pageLogin .register.side .usernameInput").on("input",()=>{setTimeout(()=>{if(d(".page.pageLogin .register.side .usernameInput").val()===""){Kr.hide();return}else Kr.show("checking"),o8()},1)});d(".page.pageLogin .register.side .emailInput").on("input",()=>{const t=d(".page.pageLogin .register.side .emailInput").val(),e=d(".page.pageLogin .register.side .verifyEmailInput").val();if(!t&&!e){ci.hide(),lu.hide();return}d8(),cP()});d(".page.pageLogin .register.side .verifyEmailInput").on("input",()=>{const t=d(".page.pageLogin .register.side .emailInput").val(),e=d(".page.pageLogin .register.side .verifyEmailInput").val();if(!t&&!e){ci.hide(),lu.hide();return}cP()});d(".page.pageLogin .register.side .passwordInput").on("input",()=>{const t=d(".page.pageLogin .register.side .passwordInput").val(),e=d(".page.pageLogin .register.side .verifyPasswordInput").val();if(!t&&!e){Gr.hide(),uu.hide();return}pP(),mP()});d(".page.pageLogin .register.side .verifyPasswordInput").on("input",()=>{const t=d(".page.pageLogin .register.side .passwordInput").val(),e=d(".page.pageLogin .register.side .verifyPasswordInput").val();if(!t&&!e){Gr.hide(),uu.hide();return}pP(),mP()});const l8=new Ii({name:"login",element:d(".page.pageLogin"),path:"/login",afterHide:async()=>{d(".pageLogin input").val(""),Kr.hide(),ci.hide(),lu.hide(),Gr.hide(),uu.hide(),Ga("pageLogin")},beforeShow:async()=>{js("pageLogin","main"),ps(),Mh()}});d(()=>{$s("pageLogin")});let Ev,fP=new Promise(t=>{Ev=t});function u8(){hP.show({mode:"dialog",beforeAnimation:async t=>{fP=new Promise(e=>{Ev=e}),Mu("register"),Ah(t.querySelector(".g-recaptcha"),"register",e=>{Ev(e),U_()})}})}function U_(t=!1){t&&Ev(),hP.hide()}const hP=new Pt({dialogId:"registerCaptchaModal",customEscapeHandler:async()=>{U_(!0)},customWrapperClickHandler:async()=>{U_(!0)}});async function c8(t){const e=kn;if(e===null)return;KV(t);const a=await K.results.add({body:{result:e}});if(a.status!==200){y("Failed to save last result: "+a.body.message,-1);return}const s=Rn(e);s._id=a.body.data.insertedId,a.body.data.isPb&&(s.isPb=!0),H1(s),U1(1,s.testDuration+s.incompleteTestSeconds-s.afkDuration),nI(),y(`Last test result saved ${a.body.data.isPb?"(new pb!)":""}`,1)}function p8(){mf.getModal().querySelector(".result").innerHTML=`
  <div class="group wpm">
        <div class="sub">wpm</div>
        <div class="val">-</div>
      </div>
      <div class="group acc">
        <div class="sub">accuracy</div>
        <div class="val">-</div>
      </div>
      <div class="group raw">
        <div class="sub">raw</div>
        <div class="val">-</div>
      </div>
      <div class="group con">
        <div class="sub">consistency</div>
        <div class="val">-</div>
      </div>
      <div class="group chardata">
        <div class="sub">characters</div>
        <div class="val">-</div>
      </div>
      <div class="group testType">
        <div class="sub">test type</div>
        <div class="val">-</div>
      </div>`}function m8(){const t=kn;Vd("wpm",t.wpm),Vd("acc",t.acc+"%"),Vd("raw",t.rawWpm),Vd("con",t.consistency+"%"),Vd("chardata",t.charStats.join("/"));let e=t.mode+" "+t.mode2;e+="<br>"+t.language,t.numbers&&(e+="<br>numbers"),t.punctuation&&(e+="<br>punctuation"),t.blindMode&&(e+="<br>blind"),t.lazyMode&&(e+="<br>lazy"),t.funbox!=="none"&&(e+="<br>"+t.funbox.replace(/_/g," ").replace(/#/g,", ")),t.difficulty!=="normal"&&(e+="<br>"+t.difficulty),t.tags.length>0&&(e+="<br>"+t.tags.length+" tags"),Vd("testType",e,!0)}function Vd(t,e,a=!1){a?d(mf.getModal()).find(`.group.${t} .val`).html(`${e}`):d(mf.getModal()).find(`.group.${t} .val`).text(e)}function f8(){if(!kn){y("Failed to show last signed out result modal: no last result",-1);return}p8(),mf.show({beforeAnimation:async()=>{m8()}})}function yS(){mf.hide()}const mf=new Pt({dialogId:"lastSignedOutResult",setup:async t=>{var e,a;(e=t.querySelector("button.save"))==null||e.addEventListener("click",async s=>{var n,i;c8((i=(n=da)==null?void 0:n.currentUser)==null?void 0:i.uid),yS()}),(a=t.querySelector("button.discard"))==null||a.addEventListener("click",s=>{nI(),y("Last test result discarded",0),yS()})},customWrapperClickHandler:()=>{}});async function h8(t){if(!t)return;const e=new URLSearchParams(t.slice(1));if(e.has("access_token")){history.replaceState(null,"","/");const a=e.get("access_token"),s=e.get("token_type"),n=e.get("state");Ct();const i=await K.users.linkDiscord({body:{tokenType:s,accessToken:a,state:n}});if(Qe(),i.status!==200){y("Failed to link Discord: "+i.body.message,-1);return}if(i.body.data===null){y("Failed to link Discord: data returned was null",-1);return}y(i.body.message,1);const r=A();if(!r)return;const{discordId:o,discordAvatar:l}=i.body.data;o!==void 0?r.discordId=o:r.discordAvatar=l,Ea(r),Ty(o,l)}}const g8=qt.object({c:ex,i:qt.string().optional(),s:Jk.optional(),f:Xk.optional()});function y8(t){const e=xk("customTheme",t);if(e===null)return;let a;try{a=_Z(atob(e),g8)}catch(c){console.log("Custom theme URL decoding failed",c),y("Failed to load theme from URL: "+c.message,0);return}let s,n,i,r;if(Array.isArray(a.c)&&a.c.length===10?(s=a.c,n=a.i,i=a.s,r=a.f):Array.isArray(a)&&a.length===10&&(s=a),s===void 0||s.length!==10){y("Failed to load theme from URL: no colors found",0);return}const o=u.customTheme,l=u.customThemeColors;try{Lm(s),y("Custom theme applied",1),n!==void 0&&i!==void 0&&r!==void 0&&(fh(n),hx(i),gx(r)),u.customTheme||Ki(!0)}catch(c){y("Something went wrong. Reverting to previous state.",0),console.error(c),Ki(o),Lm(l)}}function v8(t){const e=xk("testSettings",t);if(e===null)return;const a=JSON.parse(sN.decompressFromURI(e)??""),s={};if(a[0]!==null&&($a(a[0],!0),s.mode=a[0]),a[1]!==null&&(u.mode==="time"?oi(parseInt(a[1],10),!0):u.mode==="words"?ho(parseInt(a[1],10),!0):u.mode==="quote"&&(Vi(-2,!1),Wk(parseInt(a[1],10)),jt()),s.mode2=a[1]),a[2]!==null){const i=a[2];lr(i.text),Jr(i.limit.mode),td(i.limit.value),Ql(i.pipeDelimiter),s["custom text settings"]=""}a[3]!==null&&(Fn(a[3],!0),s.punctuation=a[3]?"on":"off"),a[4]!==null&&(rn(a[4],!0),s.numbers=a[4]?"on":"off"),a[5]!==null&&(Kl(a[5],!0),s.language=a[5]),a[6]!==null&&(si(a[6],!0),s.difficulty=a[6]),a[7]!==null&&(zi(a[7],!0),s.funbox=a[7]),bt({nosave:!0});let n="";Object.keys(s).forEach(i=>{const r=s[i];r!==void 0&&(n+=`${i}${Is(r?": "+r:"")}<br>`)}),n!==""&&y("Settings applied from URL:<br><br>"+n,1,{duration:10,allowHTML:!0})}function b8(t){const e=(xk("challenge",t)??"").toLowerCase();e!==""&&(y("Loading challenge",0),pU(e).then(a=>{a&&(y("Challenge loaded",1),bt({nosave:!0}))}).catch(a=>{y("Failed to load challenge",-1),console.error(a)}))}let Pn=[],gP=0,Hi=[],rd=[];const eo={notifications:[],psas:[]};function Bw(){yP(!1),bP.hide({afterAnimation:async()=>{var r;d("#alertsPopup .notificationHistory .list").empty(),d("#alertsPopup .psas .list").empty();const t=[];let e=0;if(Hi.length===0&&rd.length===0)return;const a=await K.users.updateInbox({body:{mailIdsToMarkRead:Hi.length>0?Hi:void 0,mailIdsToDelete:rd.length>0?rd:void 0}}),s=a.status,n=a.body.message;if(s!==200){y(`Failed to update inbox: ${n}`,-1);return}const i=Pn.filter(o=>o.rewards.length>0&&Hi.includes(o.id)).map(o=>o.rewards).reduce(function(o,l){return o.concat(l)},[]);for(const o of i)if(o.type==="xp")e+=o.item;else if(o.type==="badge"){const l=VG(o.item.id);l&&(t.push(l.name),yF(o.item))}if(t.length>0&&y(`New badge${t.length>1?"s":""} unlocked: ${t.join(", ")}`,1,{duration:5,customTitle:"Reward",customIcon:"gift"}),e>0){const o=((r=A())==null?void 0:r.xp)??0;J1(o,e),ZI(o+e),V1(e)}}})}async function w8(){bP.show({beforeAnimation:async()=>{Se()?(d("#alertsPopup .accountAlerts").removeClass("hidden"),d("#alertsPopup .separator.accountSeparator").removeClass("hidden"),d("#alertsPopup .accountAlerts .list").html(`
          <div class="preloader"><i class="fas fa-fw fa-spin fa-circle-notch"></i></div>`)):(d("#alertsPopup .accountAlerts").addClass("hidden"),d("#alertsPopup .separator.accountSeparator").addClass("hidden")),Pn=[],rd=[],Hi=[],C8(),x8()},afterAnimation:async()=>{Se()&&_8()}})}async function _8(){if(!ma()){d("#alertsPopup .accountAlerts .list").html(`
    <div class="nothing">
    You are offline
    </div>
    `);return}const t=await K.users.getInbox();if(t.status===503){d("#alertsPopup .accountAlerts .list").html(`
    <div class="nothing">
    Account inboxes are temporarily unavailable
    </div>
    `);return}else if(t.status!==200){d("#alertsPopup .accountAlerts .list").html(`
    <div class="nothing">
    Error getting inbox: ${t.body.message} Please try again later
    </div>
    `);return}const e=t.body.data;if(Pn=e.inbox,gC(),Pn.length===0){d("#alertsPopup .accountAlerts .list").html(`
    <div class="nothing">
    Nothing to show
    </div>
    `);return}gP=e.maxMail,vP(),d("#alertsPopup .accountAlerts .list").empty();for(const a of Pn){!a.read&&a.rewards.length===0&&Hi.push(a.id);let s="";a.rewards.length>0&&!a.read&&(s=`<div class="rewards">
        <i class="fas fa-fw fa-gift"></i>
        <span>${a.rewards.length}</span>
      </div>`),d("#alertsPopup .accountAlerts .list").append(`
    
      <div class="item" data-id="${a.id}">
        <div class="indicator ${a.read?"":"main"}"></div>
        <div class="timestamp">${f$(new Date(a.timestamp))} ago</div>
        <div class="title">${a.subject}</div>
        <div class="body">
          ${a.body}

${s}
        </div>
        <div class="buttons">
          ${a.rewards.length>0&&!a.read?'<button class="markReadAlert textButton" aria-label="Claim" data-balloon-pos="left"><i class="fas fa-gift"></i></button>':""}
          ${a.rewards.length>0&&a.read||a.rewards.length===0?'<button class="deleteAlert textButton" aria-label="Delete" data-balloon-pos="left"><i class="fas fa-trash"></i></button>':""}
        </div>
      </div>
    
    `)}}function k8(t,e){eo.psas.push({message:t,level:e})}function x8(){if(eo.psas.length===0)d("#alertsPopup .psas .list").html('<div class="nothing">Nothing to show</div>');else{d("#alertsPopup .psas .list").empty();for(const t of eo.psas){const{message:e,level:a}=t;let s="";a===-1?s="error":a===1?s="main":a===0&&(s="sub"),d("#alertsPopup .psas .list").prepend(`
        <div class="item">
        <div class="indicator ${s}"></div>
        <div class="body">
          ${Is(e)}
        </div>
      </div>
      `)}}}function C8(){if(eo.notifications.length===0)d("#alertsPopup .notificationHistory .list").html('<div class="nothing">Nothing to show</div>');else{d("#alertsPopup .notificationHistory .list").empty();for(const t of eo.notifications){const{message:e,level:a,customTitle:s}=t;let n="Notice",i="sub";a===-1?(i="error",n="Error"):a===1&&(i="main",n="Success"),s!==void 0&&(n=s),d("#alertsPopup .notificationHistory .list").prepend(`
      <div class="item">
      <div class="indicator ${i}"></div>
      <div class="title">${n}</div>
      <div class="body">
        ${Is(e)}
      </div>
    </div>
    `)}}}function yP(t){t?d("header nav .showAlerts .notificationBubble").removeClass("hidden"):d("header nav .showAlerts .notificationBubble").addClass("hidden")}function vP(){d("#alertsPopup .accountAlerts .title .right").text(`${Pn.length}/${gP}`)}function vS(t){rd.push(t),d(`#alertsPopup .accountAlerts .list .item[data-id="${t}"]`).remove(),d("#alertsPopup .accountAlerts .list .item").length==0&&d("#alertsPopup .accountAlerts .list").html(`
    <div class="nothing">
    Nothing to show
    </div>
    `),gC(),vP()}function bS(t){Hi.push(t);const e=d(`#alertsPopup .accountAlerts .list .item[data-id="${t}"]`);gC(),e.find(".indicator").removeClass("main"),e.find(".buttons").empty(),e.find(".buttons").append('<button class="deleteAlert textButton" aria-label="Delete" data-balloon-pos="left"><i class="fas fa-trash"></i></button>'),e.find(".rewards").animate({opacity:0,height:0,marginTop:0},250,"easeOutCubic",()=>{e.find(".rewards").remove()})}function gC(){const t=d("#alertsPopup .accountAlerts .claimAll"),e=d("#alertsPopup .accountAlerts .deleteAll");if(t.addClass("hidden"),e.addClass("hidden"),Pn.length>0){let a=0;for(const s of Pn)!s.read&&!Hi.includes(s.id)&&(a+=s.rewards.length);a>0?t.removeClass("hidden"):e.removeClass("hidden")}rd.length===Pn.length&&e.addClass("hidden")}d("header nav .showAlerts").on("click",()=>{w8()});_N((t,e,a)=>{eo.notifications.push({message:t,level:e,customTitle:a}),eo.notifications.length>25&&eo.notifications.shift()});const bP=new Pt({dialogId:"alertsPopup",customAnimations:{show:{modal:{from:{marginRight:"-10rem"},to:{marginRight:"0"},easing:"easeOutCirc"}},hide:{modal:{from:{marginRight:"0"},to:{marginRight:"-10rem"},easing:"easeInCirc"}}},customEscapeHandler:()=>{Bw()},customWrapperClickHandler:()=>{Bw()},setup:async()=>{d("#alertsPopup .accountAlerts").on("click",".claimAll",()=>{for(const t of Pn)!t.read&&!Hi.includes(t.id)&&bS(t.id)}),d("#alertsPopup .accountAlerts").on("click",".deleteAll",()=>{for(const t of Pn)rd.includes(t.id)||vS(t.id)}),d("#alertsPopup .mobileClose").on("click",()=>{Bw()}),d("#alertsPopup .accountAlerts .list").on("click",".item .buttons .deleteAlert",t=>{const e=d(t.currentTarget).closest(".item").attr("data-id");vS(e)}),d("#alertsPopup .accountAlerts .list").on("click",".item .buttons .markReadAlert",t=>{const e=d(t.currentTarget).closest(".item").attr("data-id");bS(e)})}});function T8(){if(!ma()){y("You are offline",0,{duration:2});return}ff.show({focusFirstInput:!0,beforeAnimation:async t=>{var e,a,s,n;((e=A())==null?void 0:e.streakHourOffset)!==void 0?((a=t.querySelector("input"))==null||a.remove(),(s=t.querySelector(".preview"))==null||s.remove(),(n=t.querySelector("button"))==null||n.remove(),t.querySelector(".text").textContent="You have already set your streak hour offset."):(t.querySelector("input").value="0",wP())}})}function wP(){var n;const t=parseInt((n=ff.getModal().querySelector("input"))==null?void 0:n.value,10),e=ff.getModal().querySelector(".preview"),a=new Date;a.setUTCHours(0),a.setUTCMinutes(0),a.setUTCSeconds(0),a.setUTCMilliseconds(0);const s=new Date;s.setUTCHours(0),s.setUTCMinutes(0),s.setUTCSeconds(0),s.setUTCMilliseconds(0),s.setHours(s.getHours()- -1*t),e.innerHTML=`
    <div class="row"><div>Current local reset time:</div><div>${a.toLocaleTimeString()}</div></div>
    <div class="row"><div>New local reset time:</div><div>${s.toLocaleTimeString()}</div></div>
  `}function S8(){ff.hide()}async function $8(){var a;const t=parseInt((a=ff.getModal().querySelector("input"))==null?void 0:a.value,10);if(isNaN(t)){y("Streak hour offset must be a number",0);return}if(t<-11||t>12){y("Streak hour offset must be between -11 and 12",0);return}Ct();const e=await K.users.setStreakHourOffset({body:{hourOffset:t}});if(Qe(),e.status!==200)y("Failed to set streak hour offset: "+e.body.message,-1);else{y("Streak hour offset set",1);const s=A();s.streakHourOffset=t,Ea(s),S8()}}const ff=new Pt({dialogId:"streakHourOffsetModal",setup:async t=>{var e,a;(e=t.querySelector("input"))==null||e.addEventListener("input",()=>{wP()}),(a=t.querySelector("button"))==null||a.addEventListener("click",()=>{$8()})}});function pg({tagname:t,classes:e,attributes:a,innerHTML:s}){let n=`<${t}`;return e!==void 0&&(n+=` class="${e.join(" ")}"`),a!==void 0&&(n+=" "+Object.entries(a).filter(i=>i[1]!==void 0).sort((i,r)=>i[0].localeCompare(r[0])).map(i=>i[1]===!0?`${i[0]}`:`${i[0]}="${i[1]}"`).join(" ")),s!==void 0?n+=`>${s}</${t}>`:n+=" />",n}class Ut{constructor(e){this.parameters=[],this.id=e.id,this.execFn=e.execFn,this.title=e.title,this.inputs=e.inputs??[],this.text=e.text,this.textAllowHtml=e.textAllowHtml??!1,this.wrapper=Vu.getWrapper(),this.element=Vu.getModal(),this.modal=Vu,this.buttonText=e.buttonText,this.beforeInitFn=e.beforeInitFn,this.beforeShowFn=e.beforeShowFn,this.canClose=e.canClose??!0,this.onlineOnly=e.onlineOnly??!1,this.hideCallsExec=e.hideCallsExec??!1,this.showLabels=e.showLabels??!1}reset(){this.element.innerHTML=`
    <div class="title"></div>
    <div class="inputs"></div>
    <div class="text"></div>
    <button type="submit" class="submitButton"></button>`}init(){const e=d(this.element);e.find("input").val(""),this.reset(),e.attr("data-popup-id",this.id),e.find(".title").text(this.title),this.textAllowHtml?e.find(".text").html(this.text??""):e.find(".text").text(this.text??""),this.initInputs(),this.buttonText===""?e.find(".submitButton").remove():e.find(".submitButton").text(this.buttonText),(this.text??"")===""?e.find(".text").addClass("hidden"):e.find(".text").removeClass("hidden")}initInputs(){const e=d(this.element);if(this.inputs.every(n=>n.hidden)||this.inputs.length===0){e.find(".inputs").addClass("hidden");return}const s=e.find(".inputs");this.showLabels&&s.addClass("withLabel"),this.inputs.forEach((n,i)=>{var f,h,v,w;const r=`${this.id}_${i}`;this.showLabels&&!n.hidden&&s.append(`<label for="${r}">${n.label??""}</label>`);const o=n.type==="textarea"?"textarea":"input",l=n.hidden?["hidden"]:void 0,c={id:r,placeholder:n.placeholder??"",autocomplete:"off"};if(n.type!=="textarea"&&(c.value=((f=n.initVal)==null?void 0:f.toString())??"",c.type=n.type),!n.hidden&&!n.optional&&(c.required=!0),n.disabled&&(c.disabled=!0),n.type==="textarea")s.append(pg({tagname:o,classes:l,attributes:c,innerHTML:n.initVal}));else if(n.type==="checkbox"){let _=pg({tagname:o,classes:l,attributes:c});n.description!==void 0&&(_+=`<span>${n.description}</span>`),this.showLabels?_=`<div>${_}</div>`:_=`
          <label class="checkbox">
            ${_}
            <div>${n.label}</div>
          </label>
        `,s.append(_)}else if(n.type==="range")s.append(`
          <div>
            ${pg({tagname:o,classes:l,attributes:{...c,min:n.min.toString(),max:n.max.toString(),step:(h=n.step)==null?void 0:h.toString(),oninput:"this.nextElementSibling.innerHTML = this.value"}})}
            <span>${n.initVal??""}</span>
          </div>
          `);else{switch(n.type){case"text":case"password":case"email":break;case"datetime-local":{n.min!==void 0&&(c.min=zt(n.min,"yyyy-MM-dd'T'HH:mm:ss")),n.max!==void 0&&(c.max=zt(n.max,"yyyy-MM-dd'T'HH:mm:ss")),n.initVal!==void 0&&(c.value=zt(n.initVal,"yyyy-MM-dd'T'HH:mm:ss"));break}case"date":{n.min!==void 0&&(c.min=zt(n.min,"yyyy-MM-dd")),n.max!==void 0&&(c.max=zt(n.max,"yyyy-MM-dd")),n.initVal!==void 0&&(c.value=zt(n.initVal,"yyyy-MM-dd"));break}case"number":{c.min=(v=n.min)==null?void 0:v.toString(),c.max=(w=n.max)==null?void 0:w.toString();break}}s.append(pg({tagname:o,classes:l,attributes:c}))}const m=document.querySelector("#"+c.id);if(n.oninput!==void 0&&(m.oninput=n.oninput),n.validation!==void 0){const _=new wr(m,{valid:{icon:"fa-check",level:1},invalid:{icon:"fa-times",level:-1},checking:{icon:"fa-circle-notch",spinIcon:!0,level:0}});n.indicator=_;const S=ns(1e3,async I=>{var P,$;const me=await(($=(P=n.validation)==null?void 0:P.isValid)==null?void 0:$.call(P,I));m.value===I&&(me===!0?_.show("valid"):_.show("invalid",me))}),M=async I=>{var me,P;if(I===void 0||I===""){_.hide();return}if(((me=n.validation)==null?void 0:me.schema)!==void 0){const $=n.validation.schema.safeParse(I);if(!$.success){_.show("invalid",$.error.errors.map(T=>T.message).join(", "));return}}if(((P=n.validation)==null?void 0:P.isValid)!==void 0){_.show("checking"),S(I);return}_.show("valid")};m.oninput=async I=>{var P;const me=I.target.value;await M(me),(P=n.oninput)==null||P.call(n,I)}}}),e.find(".inputs").removeClass("hidden")}exec(){if(!this.canClose)return;const e=[];for(const s of d("#simpleModal input, #simpleModal textarea"))d(s).is(":checkbox")?e.push(d(s).is(":checked")?"true":"false"):e.push(d(s).val());const a=[];for(let s=0;s<this.inputs.length;s++)a.push({...this.inputs[s],currentValue:e[s]});if(a.filter(s=>s.hidden!==!0&&s.optional!==!0).some(s=>s.currentValue===void 0||s.currentValue==="")){y("Please fill in all fields",0);return}if(a.some(s=>{var n;return((n=s.indicator)==null?void 0:n.get())==="invalid"})){y("Please solve all validation errors",0);return}this.disableInputs(),Ct(),this.execFn(this,...e).then(s=>{Qe(),(s.showNotification??!0)&&y(s.message,s.status,s.notificationOptions),s.status===1?this.hide(!0,s.hideOptions).then(()=>{s.afterHide&&s.afterHide()}):(this.enableInputs(),d(d("#simpleModal").find("input")[0]).trigger("focus"))})}disableInputs(){d("#simpleModal input").prop("disabled",!0),d("#simpleModal button").prop("disabled",!0),d("#simpleModal textarea").prop("disabled",!0),d("#simpleModal .checkbox").addClass("disabled")}enableInputs(){d("#simpleModal input").prop("disabled",!1),d("#simpleModal button").prop("disabled",!1),d("#simpleModal textarea").prop("disabled",!1),d("#simpleModal .checkbox").removeClass("disabled")}show(e=[],a){if(this.onlineOnly&&!ma()){y("You are offline",0,{duration:2});return}od=this,this.parameters=e,Vu.show({focusFirstInput:!0,...a,beforeAnimation:async()=>{var s,n;(s=this.beforeInitFn)==null||s.call(this,this),this.init(),(n=this.beforeShowFn)==null||n.call(this,this)}})}async hide(e,a){this.canClose&&(this.hideCallsExec&&!e?this.exec():(od=null,await Vu.hide(a)))}}function wS(){if(od){od.hide();return}}let od=null;const Vu=new Pt({dialogId:"simpleModal",setup:async t=>{t.addEventListener("submit",e=>{e.preventDefault(),od==null||od.exec()})},customEscapeHandler:t=>{wS()},customWrapperClickHandler:t=>{wS()}}),A8=new Ut({id:"editApeKey",title:"Edit Ape key",inputs:[{type:"text",placeholder:"name",initVal:""}],buttonText:"edit",onlineOnly:!0,execFn:async(t,e)=>{const a=await K.apeKeys.save({params:{apeKeyId:t.parameters[0]??""},body:{name:e}});return a.status!==200?{status:-1,message:"Failed to update key: "+a.body.message}:{status:1,message:"Key updated",hideOptions:{clearModalChain:!0}}}}),L8=new Ut({id:"deleteApeKey",title:"Delete Ape key",text:"Are you sure?",buttonText:"delete",onlineOnly:!0,execFn:async t=>{const e=await K.apeKeys.delete({params:{apeKeyId:t.parameters[0]??""}});return e.status!==200?{status:-1,message:"Failed to delete key: "+e.body.message}:(dd==null||dd(),{status:1,message:"Key deleted",hideOptions:{clearModalChain:!0}})}}),M8=new Ut({id:"viewApeKey",title:"Ape key",inputs:[{type:"textarea",disabled:!0,placeholder:"key",initVal:""}],textAllowHtml:!0,text:`
    This is your new Ape Key. Please keep it safe. You will only see it once!<br><br>
    <strong>Note:</strong> Ape Keys are disabled by default, you need to enable them before they can be used.`,buttonText:"close",hideCallsExec:!0,execFn:async t=>({status:1,message:"Key generated",showNotification:!1,hideOptions:{clearModalChain:!0}}),beforeInitFn:t=>{t.inputs[0].initVal=t.parameters[0]},beforeShowFn:t=>{t.canClose=!1,d("#simpleModal textarea").css("height","110px"),d("#simpleModal .submitButton").addClass("hidden"),setTimeout(()=>{t.canClose=!0,d("#simpleModal .submitButton").removeClass("hidden")},5e3)}}),E8=new Ut({id:"generateApeKey",title:"Generate new Ape key",inputs:[{type:"text",placeholder:"Name",initVal:""}],buttonText:"generate",onlineOnly:!0,execFn:async(t,e)=>{const a=await K.apeKeys.add({body:{name:e,enabled:!1}});if(a.status!==200)return{status:-1,message:"Failed to generate key: "+a.body.message};const s=a.body.data,n=t.modal.getPreviousModalInChain();return dd==null||dd(),{status:1,message:"Key generated",hideOptions:{clearModalChain:!0,animationMode:"modalOnly"},afterHide:()=>{M8.show([s.apeKey],{modalChain:n,animationMode:"modalOnly"})}}}});let pl={};const _P=d("#pageAccountSettings .tab[data-tab='api']");async function O8(){I8();const t=await K.apeKeys.get();return t.status!==200?t.body.message==="You have lost access to ape keys, please contact support"?(xP=!0,CP(),!1):(y("Error getting ape keys: "+t.body.message,-1),!1):(pl=t.body.data,!0)}function I8(){const t=_P.find("table tbody");t.empty(),t.append("<tr><td colspan='6' style='text-align: center;font-size:1rem;'><i class='fas fa-spin fa-circle-notch'></i></td></tr>")}function kP(){var s,n,i;const t=pl;if(t==null)return;const e=_P.find("table tbody");e.empty();const a=Object.keys(t);if(a.length===0){e.append("<tr><td colspan='6' style='text-align: center;'>No keys found</td></tr>");return}a.forEach(r=>{const o=t[r];e.append(`
      <tr keyId="${r}">
        <td>
          <button class="textButton toggleActive" style="font-size: 1.25rem">
            ${o.enabled?'<i class="fas fa-fw fa-check-square"></i>':'<i class="far fa-fw fa-square"></i>'}
          </button>
        </td>
        <td>${o.name}</td>
        <td>${zt(new Date(o.createdOn),"dd MMM yyyy HH:mm")}</td>
        <td>${zt(new Date(o.modifiedOn),"dd MMM yyyy HH:mm")}</td>
        <td>${o.lastUsedOn===-1?"-":zt(new Date(o.lastUsedOn),"dd MMM yyyy HH:mm")}</td>
        <td>
          <div class="keyButtons">
            <button class="editButton">
              <i class="fas fa-fw fa-pen"></i>
            </button>
            <button class="deleteButton">
              <i class="fas fa-fw fa-trash-alt"></i>
            </button>
          </div>
        </td>
      </tr>
    `)});for(const r of e.find("tr")){const o=r.getAttribute("keyid");(s=r.querySelector("button.toggleActive"))==null||s.addEventListener("click",l=>{P8(o)}),(n=r.querySelector("button.deleteButton"))==null||n.addEventListener("click",l=>{L8.show([o],{})}),(i=r.querySelector("button.editButton"))==null||i.addEventListener("click",l=>{A8.show([o],{})})}}async function P8(t){const e=pl==null?void 0:pl[t];if(!e||pl===void 0)return;Ct();const a=await K.apeKeys.save({params:{apeKeyId:t},body:{enabled:!e.enabled}});if(Qe(),a.status!==200){y("Failed to update key: "+a.body.message,-1);return}e.enabled=!e.enabled,kP(),e.enabled?y("Key active",1):y("Key inactive",1)}let dd,xP=!1;async function CP(t){if(xP){d(".pageAccountSettings .tab[data-tab='api'] table").remove(),d(".pageAccountSettings .section.apeKeys .buttons").remove(),d(".pageAccountSettings .section.apeKeys .lostAccess").removeClass("hidden");return}dd=t,await O8(),kP()}d(".pageAccountSettings").on("click","#generateNewApeKey",()=>{E8.show([],{})});const vt=d(".page.pageAccountSettings"),Hg={activeTab:"general"};function Z8(){if(vt.find(".section.passwordAuthSettings button").addClass("hidden"),vt.find(".section.googleAuthSettings button").addClass("hidden"),vt.find(".section.githubAuthSettings button").addClass("hidden"),!Se())return;const t=ub(),e=t.providerData.some(n=>n.providerId==="password"),a=t.providerData.some(n=>n.providerId==="google.com"),s=t.providerData.some(n=>n.providerId==="github.com");e?(vt.find(".section.passwordAuthSettings #emailPasswordAuth").removeClass("hidden"),vt.find(".section.passwordAuthSettings #passPasswordAuth").removeClass("hidden"),(a||s)&&vt.find(".section.passwordAuthSettings #removePasswordAuth").removeClass("hidden")):vt.find(".section.passwordAuthSettings #addPasswordAuth").removeClass("hidden"),a?(vt.find(".section.googleAuthSettings #removeGoogleAuth").removeClass("hidden"),e||s?vt.find(".section.googleAuthSettings #removeGoogleAuth").removeClass("disabled"):vt.find(".section.googleAuthSettings #removeGoogleAuth").addClass("disabled")):vt.find(".section.googleAuthSettings #addGoogleAuth").removeClass("hidden"),s?(vt.find(".section.githubAuthSettings #removeGithubAuth").removeClass("hidden"),e||a?vt.find(".section.githubAuthSettings #removeGithubAuth").removeClass("disabled"):vt.find(".section.githubAuthSettings #removeGithubAuth").addClass("disabled")):vt.find(".section.githubAuthSettings #addGithubAuth").removeClass("hidden")}function N8(){var t;if(!Se())vt.find(".section.discordIntegration").addClass("hidden");else{if(!A())return;vt.find(".section.discordIntegration").removeClass("hidden"),((t=A())==null?void 0:t.discordId)===void 0?(vt.find(".section.discordIntegration .buttons").removeClass("hidden"),vt.find(".section.discordIntegration .info").addClass("hidden")):(vt.find(".section.discordIntegration .buttons").addClass("hidden"),vt.find(".section.discordIntegration .info").removeClass("hidden"))}}function TP(){xi(vt.find(".tab.active"),vt.find(`.tab[data-tab="${Hg.activeTab}"]`),250,async()=>{},async()=>{vt.find(".tab").removeClass("active"),vt.find(`.tab[data-tab="${Hg.activeTab}"]`).addClass("active")}),vt.find("button").removeClass("active"),vt.find(`button[data-tab="${Hg.activeTab}"]`).addClass("active")}function R8(){vt.find(".section.optOutOfLeaderboards .optedOut").addClass("hidden"),vt.find(".section.optOutOfLeaderboards .buttons").removeClass("hidden"),vt.find(".section.setStreakHourOffset .info").addClass("hidden"),vt.find(".section.setStreakHourOffset .buttons").removeClass("hidden");const t=A();if((t==null?void 0:t.lbOptOut)===!0&&(vt.find(".section.optOutOfLeaderboards .optedOut").removeClass("hidden"),vt.find(".section.optOutOfLeaderboards .buttons").addClass("hidden")),(t==null?void 0:t.streakHourOffset)!==void 0){vt.find(".section.setStreakHourOffset .info").removeClass("hidden");const e=(t==null?void 0:t.streakHourOffset)>0?"+":"";vt.find(".section.setStreakHourOffset .info span").text(e+(t==null?void 0:t.streakHourOffset)),vt.find(".section.setStreakHourOffset .buttons").addClass("hidden")}}function _r(){xt()==="accountSettings"&&(Z8(),N8(),R8(),CP(_r),TP())}d(".page.pageAccountSettings").on("click",".tabs button",t=>{Hg.activeTab=d(t.target).data("tab"),TP()});d(".page.pageAccountSettings .section.discordIntegration .getLinkAndGoToOauth").on("click",()=>{Ct(),K.users.getDiscordOAuth().then(t=>{t.status===200?window.open(t.body.data.url,"_self"):y("Failed to get OAuth from discord: "+t.body.message,-1)})});d(".page.pageAccountSettings #setStreakHourOffset").on("click",()=>{T8()});const j8=new Ii({name:"accountSettings",element:vt,path:"/account-settings",afterHide:async()=>{Ga("pageAccountSettings")},beforeShow:async()=>{js("pageAccountSettings","main"),_r()}});d(()=>{$s("pageAccountSettings")});const SP=[];function D8(t){SP.push(t)}function B8(t,e){SP.forEach(a=>{try{a(t,e)}catch(s){console.error("Google Sign Up event subscriber threw an error"),console.error(s)}})}const q8=new Ii({name:"test",element:d(".page.pageTest"),path:"/",beforeHide:async()=>{jt(),bt(),cl(),bo(),d("#wordsInput").trigger("focusout")},afterHide:async()=>{yv(!0)},beforeShow:async()=>{yv(!1),tO(),jt(),bt({noAnim:!0}),UU(),Gx(),gv()}});function W8(){d(".pageAbout .contributors").empty(),d(".pageAbout .supporters").empty(),_l.getDataset("count").data=[],_l.updateColors()}let Ov,Pr;function F8(){var t;if(Ov){_l.updateColors();const e=U8(Ov);_l.data.labels=e.labels,_l.getDataset("count").data=e.data}if(Pr){const e=Math.round(Pr.timeTyping),a=nN({start:0,end:e*1e3});d(".pageAbout #totalTimeTypingStat .val").text(((t=a.years)==null?void 0:t.toString())??""),d(".pageAbout #totalTimeTypingStat .valSmall").text("years"),d(".pageAbout #totalTimeTypingStat").attr("aria-label",dw(Math.round(e/3600))+" hours");const s=KC(Pr.testsStarted);d(".pageAbout #totalStartedTestsStat .val").text(s.rounded<10?s.roundedTo2:s.rounded),d(".pageAbout #totalStartedTestsStat .valSmall").text(s.orderOfMagnitude),d(".pageAbout #totalStartedTestsStat").attr("aria-label",dw(Pr.testsStarted)+" tests");const n=KC(Pr.testsCompleted);d(".pageAbout #totalCompletedTestsStat .val").text(n.rounded<10?n.roundedTo2:n.rounded),d(".pageAbout #totalCompletedTestsStat .valSmall").text(n.orderOfMagnitude),d(".pageAbout #totalCompletedTestsStat").attr("aria-label",dw(Pr.testsCompleted)+" tests")}}async function z8(){if(Ov&&Pr)return;if(!ma()){y("Cannot update all time stats - offline",0);return}const t=await K.public.getSpeedHistogram({query:{language:"english",mode:"time",mode2:"60"}});t.status===200?Ov=t.body.data:y(`Failed to get global speed stats for histogram: ${t.body.message}`,-1);const e=await K.public.getTypingStats();e.status===200?Pr=e.body.data:y(`Failed to get global typing stats: ${t.body.message}`,-1)}async function H8(){let t;try{t=await tF()}catch(r){y(Ge(r,"Failed to get supporters"),-1),t=[]}let e;try{e=await aF()}catch(r){y(Ge(r,"Failed to get contributors"),-1),e=[]}z8().then(()=>{F8()});const a=document.querySelector(".pageAbout .supporters");let s="";for(const r of t)s+=`<div>${r}</div>`;a&&(a.innerHTML=s);const n=document.querySelector(".pageAbout .contributors");let i="";for(const r of e)i+=`<div>${r}</div>`;n&&(n.innerHTML=i)}function U8(t){const e=[],a=[],s=Object.keys(t).sort((n,i)=>parseInt(n,10)-parseInt(i,10));for(const[n,i]of s.entries()){const r=s[n+1],o=parseInt(i,10);if(e.push({x:o,y:t[o]}),a.push(`${o} - ${o+9}`),r!==void 0&&o+10!==parseInt(r,10))for(let l=o+10;l<parseInt(r,10);l+=10)e.push({x:l,y:0}),a.push(`${l} - ${l+9}`)}return{data:e,labels:a}}const V8=new Ii({name:"about",element:d(".page.pageAbout"),path:"/about",afterHide:async()=>{W8(),Ga("pageAbout")},beforeShow:async()=>{js("pageAbout","main"),H8()}});d(()=>{$s("pageAbout")});const Iv={userUid:void 0,lbOptOut:void 0};let Cc;async function K8(t){if(!Se()){y("You must be logged in to submit a report",0);return}$P.show({mode:"dialog",focusFirstInput:!0,beforeAnimation:async e=>{Ah(e.querySelector(".g-recaptcha"),"userReportModal");const{name:a}=t;Iv.userUid=t.uid,Iv.lbOptOut=t.lbOptOut,e.querySelector(".user").textContent=a,e.querySelector(".reason").value="Inappropriate name",e.querySelector(".comment").value="",Cc=new La({select:e.querySelector(".reason"),settings:{showSearch:!1,contentLocation:e}})}}),new pf(d("#userReportModal .comment"),250)}async function G8(){$P.hide({afterAnimation:async()=>{Cc==null||Cc.destroy(),Cc=void 0,Mu("userReportModal")}})}async function Q8(){const t=Ub("userReportModal");if(!t){y("Please complete the captcha");return}const e=d("#userReportModal .reason").val(),a=d("#userReportModal .comment").val(),s=t;if(!e){y("Please select a valid report reason");return}if(!a){y("Please provide a comment");return}if(e==="Suspected cheating"&&Iv.lbOptOut){y("You cannot report this user for suspected cheating as they have opted out of the leaderboards.",0,{duration:10});return}const n=a.length-250;if(n>0){y(`Report comment is ${n} character(s) too long`);return}Ct();const i=await K.users.report({body:{uid:Iv.userUid,reason:e,comment:a,captcha:s}});if(Qe(),i.status!==200){y("Failed to report user: "+i.body.message,-1);return}y("Report submitted. Thank you!",1),G8()}const $P=new Pt({dialogId:"userReportModal",setup:async t=>{var e;(e=t.querySelector("button"))==null||e.addEventListener("click",()=>{Q8()})}});function _S(){d(".page.pageProfile .preloader").removeClass("hidden"),d(".page.pageProfile .profile").html(`
      <div class="details none">
        <div class="avatarAndName">
          <div class="avatars">
            <div class="placeholderAvatar">
              <i class="fas fa-user-circle"></i>
            </div>
            <div class="avatar"></div>
          </div>
          <div>
             <div class="user">
              <div class="name">-</div>
              <div class="userFlags"></div>
            </div>
            <div class="badges"></div>
            <div class="allBadges"></div>
            <div class="joined" data-balloon-pos="up">-</div>
	          <div class="streak" data-balloon-pos="up">-</div>
          </div>
          <div class="levelAndBar">
            <div class="level" data-balloon-pos="up">-</div>
            <div class="xpBar" data-balloon-pos="up">
              <div class="bar" style="width: 0%;"></div>
            </div>
            <div class="xp" data-balloon-pos="up">-/-</div>
          </div>
        </div>
        <div class="separator sep1"></div>
        <div class="typingStats vertical">
          <div class="started">
            <div class="title">tests started</div>
            <div class="value">-</div>
          </div>
          <div class="completed">
            <div class="title">tests completed</div>
            <div class="value">-</div>
          </div>
          <div class="timeTyping">
            <div class="title">time typing</div>
            <div class="value">-</div>
          </div>
        </div>
        <div class="separator sep2 hidden"></div>

        <div class="bioAndKeyboard vertical hidden">
          <div class="bio">
            <div class="title">bio</div>
            <div class="value">-</div>
          </div>
          <div class="keyboard hidden">
            <div class="title">keyboard</div>
            <div class="value">-</div>
          </div>
        </div>
        <div class="separator sep3 hidden"></div>

        <div class="socials big hidden">
          <div class="title">socials</div>
          <div class="value">-</div>
        </div>
        <div class="buttonGroup">
          <button
            class="userReportButton"
            data-balloon-pos="left"
            aria-label="Report user"
          >
            <i class="fas fa-flag"></i>
          </button>
        </div>
      </div>
      <div class="leaderboardsPositions">
        <div class="title">All-Time English Leaderboards</div>
        <div class="group t15">
          <div class="testType">15 seconds</div>
          <div class="pos">-</div>
          <div class="topPercentage">-</div>
        </div>
        <div class="group t60">
          <div class="testType">60 seconds</div>
          <div class="pos">-</div>
          <div class="topPercentage">-</div>
        </div>
      </div>
      <div class="pbsWords">
        <div class="group">
          <div class="quick">
            <div class="test">10 words</div>
            <div class="wpm">-</div>
            <div class="acc">-</div>
          </div>
        </div>
        <div class="group">
          <div class="quick">
            <div class="test">25 words</div>
            <div class="wpm">-</div>
            <div class="acc">-</div>
          </div>
        </div>
        <div class="group">
          <div class="quick">
            <div class="test">50 words</div>
            <div class="wpm">-</div>
            <div class="acc">-</div>
          </div>
        </div>
        <div class="group">
          <div class="quick">
            <div class="test">100 words</div>
            <div class="wpm">-</div>
            <div class="acc">-</div>
          </div>
        </div>
      </div>
      <div class="pbsTime">
        <div class="group">
          <div class="quick">
            <div class="test">15 seconds</div>
            <div class="wpm">-</div>
            <div class="acc">-</div>
          </div>
        </div>
        <div class="group">
          <div class="quick">
            <div class="test">30 seconds</div>
            <div class="wpm">-</div>
            <div class="acc">-</div>
          </div>
        </div>
        <div class="group">
          <div class="quick">
            <div class="test">60 seconds</div>
            <div class="wpm">-</div>
            <div class="acc">-</div>
          </div>
        </div>
        <div class="group">
          <div class="quick">
            <div class="test">120 seconds</div>
            <div class="wpm">-</div>
            <div class="acc">-</div>
          </div>
        </div>
      </div><div class="lbOptOutReminder hidden"></div>`)}async function Y8(t){const e=kZ("isUid");if(t.data)d(".page.pageProfile .preloader").addClass("hidden"),await Av("profile",t.data),W_(t.data.personalBests,!0);else if(t.uidOrName!==void 0&&t.uidOrName!==""){const a=await K.users.getProfile({params:{uidOrName:t.uidOrName},query:{isUid:e}});if(d(".page.pageProfile .preloader").addClass("hidden"),a.status===404){const s=e?"User not found":`User ${t.uidOrName} not found`;d(".page.pageProfile .preloader").addClass("hidden"),d(".page.pageProfile .error").removeClass("hidden"),d(".page.pageProfile .error .message").text(s)}else if(a.status===200)window.history.replaceState(null,"",`/profile/${a.body.data.name}`),await Av("profile",a.body.data),W_(a.body.data.personalBests,!0);else{y("Failed to load profile: "+a.body.message,-1);return}}else y("Missing update parameter!",-1)}d(".page.pageProfile").on("click",".profile .userReportButton",()=>{const t=d(".page.pageProfile .profile").attr("uid")??"",e=d(".page.pageProfile .profile").attr("name")??"",a=(d(".page.pageProfile .profile").attr("lbOptOut")??"false")==="true";K8({uid:t,name:e,lbOptOut:a})});const J8=new Ii({name:"profile",element:d(".page.pageProfile"),path:"/profile",afterHide:async()=>{Ga("pageProfile"),_S()},beforeShow:async t=>{var a;js("pageProfile","main");const e=((a=t==null?void 0:t.params)==null?void 0:a.uidOrName)??"";e?(d(".page.pageProfile .preloader").removeClass("hidden"),d(".page.pageProfile .search").addClass("hidden"),d(".page.pageProfile .content").removeClass("hidden"),_S(),Y8({uidOrName:e,data:t==null?void 0:t.data})):(d(".page.pageProfile .preloader").addClass("hidden"),d(".page.pageProfile .search").removeClass("hidden"),d(".page.pageProfile .content").addClass("hidden"))}});$s("pageProfile");const X8=new Ii({name:"profileSearch",element:d(".page.pageProfileSearch"),path:"/profile",afterHide:async()=>{Ga("pageProfileSearch")},beforeShow:async()=>{js("pageProfileSearch","main"),d(".page.pageProfileSearch input").val("")},afterShow:async()=>{d(".page.pageProfileSearch input").trigger("focus")}}),eQ=new Ii({name:"404",element:d(".page.page404"),path:"/404",afterHide:async()=>{Ga("page404")},beforeShow:async()=>{js("page404","main")}});$s("page404");async function ti(t,e={}){return e={...{force:!1},...e},new Promise(s=>{if(Gc()){console.debug(`change page to ${t} stopped, page transition is true`),s(!1);return}if(!e.force&&xt()===t){console.debug(`change page ${t} stoped, page already active`),s(!1);return}else console.log(`changing page ${t}`);const n={loading:DW,test:q8,settings:i8,about:V8,account:i7,login:l8,profile:J8,profileSearch:X8,404:eQ,accountSettings:j8},i=n[xt()],r=n[t];i==null||i.beforeHide().then(()=>{pd(!0),d(".page").removeClass("active"),xi(i.element,r.element,250,async()=>{pd(!1),r.element.addClass("active"),s(!0),await(r==null?void 0:r.afterShow()),IU()},async()=>{r.name==="test"?WC():WC(oh(r.name)+" | Monkeytype"),Oo(!1),Y3(r.name),await(i==null?void 0:i.afterHide()),await(r==null?void 0:r.beforeShow({params:e.params,data:e.data}))})})})}const yC="leaderboardsWrapper";let Rs="allTime",xo="english",cu=!1,Va={15:[],60:[]},gs={15:{},60:{}},Ad={15:[],60:[]};const mg={15:!1,60:!1},pu=50;let V_;function Pv(t){t==="15"?d("#leaderboardsWrapper table.left tbody").empty():t==="60"&&d("#leaderboardsWrapper table.right tbody").empty()}function kS(t){t==="15"?d("#leaderboardsWrapper table.left tfoot").empty():t==="60"&&d("#leaderboardsWrapper table.right tfoot").empty()}function tQ(){Va={15:[],60:[]},gs={15:{},60:{}},Ad={15:[],60:[]}}function aQ(){clearInterval(V_),V_=void 0,d("#leaderboards .subTitle").text("-")}function xS(){if(Rs==="daily"){const t=new Date;t.setUTCHours(0,0,0,0),t.setDate(t.getDate()+1);const e=new Date;e.setUTCMilliseconds(0);const a=iN(t,e);d("#leaderboards .subTitle").text("Next reset in: "+hs(a,!0))}else{const t=new Date,e=14-t.getMinutes()%15,a=60-t.getSeconds(),s=e*60+a;d("#leaderboards .subTitle").text("Next update in: "+hs(s,!0))}}function sQ(){xS(),V_=setInterval(()=>{xS()},1e3)}function Zv(t){t==="15"?d("#leaderboardsWrapper .leftTableLoader").removeClass("hidden"):t==="60"&&d("#leaderboardsWrapper .rightTableLoader").removeClass("hidden")}function ld(t){t==="15"?d("#leaderboardsWrapper .leftTableLoader").addClass("hidden"):t==="60"&&d("#leaderboardsWrapper .rightTableLoader").addClass("hidden")}function nQ(t){var i,r,o,l;let e;if(t==="15"?e="left":e="right",!Se()){d(`#leaderboardsWrapper table.${e} tfoot`).html(`
    <tr>
      <td colspan="6" style="text-align:center;"></>
    </tr>
    `);return}if((((r=(i=A())==null?void 0:i.typingStats)==null?void 0:r.timeTyping)??0)<7200){d(`#leaderboardsWrapper table.${e} tfoot`).html(`
    <tr>
      <td colspan="6" style="text-align:center;">Your account must have 2 hours typed to be placed on the leaderboard.</>
    </tr>
    `);return}if(((o=A())==null?void 0:o.lbOptOut)===!0){d(`#leaderboardsWrapper table.${e} tfoot`).html(`
    <tr>
      <td colspan="6" style="text-align:center;">You have opted out of the leaderboards</>
    </tr>
    `);return}const a=gs[t];if(Rs==="daily"&&a!==null&&a.minWpm===void 0){d(`#leaderboardsWrapper table.${e} tfoot`).html(`
    <tr>
      <td colspan="6" style="text-align:center;">Looks like the server returned data in a new format, please refresh</>
    </tr>
    `);return}let s="";if(Rs==="allTime"&&a!==void 0&&(a!=null&&a.rank)){const c=Be(a.rank/gs[t].count*100);gs[t].rank===1?s="GOAT":s=`Top ${c}%`,s=`<br><span class="sub">${s}</span>`}const n=a==null?void 0:a.entry;if(n){const c=new Date(n.timestamp);d(`#leaderboardsWrapper table.${e} tfoot`).html(`
    <tr>
    <td>${a.rank}</td>
    <td><span class="top">You</span>${s||""}</td>
    <td class="alignRight">${Te.typingSpeed(n.wpm,{showDecimalPlaces:!0})}<br>
    <div class="sub">${Te.percentage(n.acc,{showDecimalPlaces:!0})}</div></td>
    <td class="alignRight">${Te.typingSpeed(n.raw,{showDecimalPlaces:!0})}<br>
    <div class="sub">${Te.percentage(n.consistency,{showDecimalPlaces:!0})}</div></td>
    <td class="alignRight">${zt(c,"dd MMM yyyy")}<br>
    <div class='sub'>${zt(c,"HH:mm")}</div></td>
  </tr>
  `)}else Rs==="daily"?d(`#leaderboardsWrapper table.${e} tfoot`).html(`
    <tr>
      <td colspan="6" style="text-align:center;">Not qualified ${`(min speed required: ${(l=gs[t])==null?void 0:l.minWpm} wpm)`}</>
    </tr>
    `):d(`#leaderboardsWrapper table.${e} tfoot`).html(`
    <tr>
      <td colspan="6" style="text-align:center;">Not qualified</>
    </tr>
    `)}function iQ(t){var n,i,r,o,l;if(Rs==="daily")return;let e;t==="15"?e="left":e="right";const a=((o=(r=(i=(n=A())==null?void 0:n.lbMemory)==null?void 0:i.time)==null?void 0:r[t])==null?void 0:o.english)??0,s=(l=gs[t])==null?void 0:l.rank;if(s){const c=a-s;c>0?(wT("time",t,"english",s,!0),a!==0&&d(`#leaderboardsWrapper table.${e} tfoot tr td .top`).append(` (<i class="fas fa-fw fa-angle-up"></i>${Math.abs(c)} since you last checked)`)):c<0?(wT("time",t,"english",s,!0),a!==0&&d(`#leaderboardsWrapper table.${e} tfoot tr td .top`).append(` (<i class="fas fa-fw fa-angle-down"></i>${Math.abs(c)} since you last checked)`)):a!==0&&d(`#leaderboardsWrapper table.${e} tfoot tr td .top`).append(" ( = since you last checked)")}}async function vC(t){var n;if(Va[t]===void 0)return;let e;t==="15"?e="left":e="right",Va[t].length===0&&d(`#leaderboardsWrapper table.${e} tbody`).html("<tr><td colspan='7'>No results found</td></tr>");const a=(n=A())==null?void 0:n.name;let s="";for(let i=0;i<Va[t].length;i++){const r=Va[t][i];if(r===void 0)break;let o="";r.name===a&&(o=' class="me"');const l=new Date(r.timestamp);Rs==="daily"&&!r.rank&&(r.rank=i+1);let c='<div class="avatarPlaceholder"><i class="fas fa-user-circle"></i></div>';r.discordAvatar!==void 0&&(c='<div class="avatarPlaceholder"><i class="fas fa-circle-notch fa-spin"></i></div>'),s+=`
    <tr ${o}>
    <td>${r.rank===1?'<i class="fas fa-fw fa-crown"></i>':r.rank}</td>
    <td>
    <div class="avatarNameBadge">
      <div class="lbav">${c}</div>
      <a href="${location.origin}/profile/${r.uid}?isUid" class="entryName" uid=${r.uid} router-link>${r.name}</a>
      <div class="flagsAndBadge">
        ${yb(r)}
        ${r.badgeId?$v(r.badgeId):""}
      </div>
    </div>
    </td>
    <td class="alignRight">${Te.typingSpeed(r.wpm,{showDecimalPlaces:!0})}<br>
    <div class="sub">${Te.percentage(r.acc,{showDecimalPlaces:!0})}</div></td>
    <td class="alignRight">${Te.typingSpeed(r.raw,{showDecimalPlaces:!0})}<br>
    <div class="sub">${Te.percentage(r.consistency,{showDecimalPlaces:!0})}</div></td>
    <td class="alignRight">${zt(l,"dd MMM yyyy")}<br>
    <div class='sub'>${zt(l,"HH:mm")}</div></td>
  </tr>
  `}d(`#leaderboardsWrapper table.${e} tbody`).html(s)}const CS=d("#leaderboardsWrapper .showYesterdayButton"),TS=d("#leaderboardsWrapper .showYesterdayButton .text");function bC(){d("#leaderboardsWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},Jt(100),()=>{fs==null||fs.destroy(),fs=void 0,Pv("15"),Pv("60"),kS("15"),kS("60"),tQ(),aQ(),cu=!1,wC(),d("#leaderboardsWrapper").addClass("hidden"),Ga(yC)})}function AP(){const t=d("#leaderboardsWrapper .mainTitle"),e=Rs==="daily"?"Daily":"All-Time",a=xo.charAt(0).toUpperCase()+xo.slice(1);let s=`${e} ${a} Leaderboards`;cu&&Rs!=="allTime"&&(s+=" (Yesterday)"),t.text(s)}function wC(){CS.addClass("hidden"),Rs==="daily"&&CS.removeClass("hidden"),cu?TS.text("Show today"):TS.text("Show yesterday")}function _C(){const t=Rs==="daily";return{isDaily:t,daysBefore:t&&cu?1:void 0}}async function hf(){var v;Mi=!1,gf=!1,Zv("15"),Zv("60");const{isDaily:t,daysBefore:e}=_C(),a=t?K.leaderboards.getDaily:K.leaderboards.get,s=t?K.leaderboards.getDailyRank:K.leaderboards.getRank,n={language:xo,mode:"time",daysBefore:e},i={status:200,body:{message:"",data:null}},r=Se()?s({query:{...n,mode2:"15"}}):i,o=Se()?s({query:{...n,mode2:"60"}}):i,[l,c,m,f]=await Promise.all([a({query:{...n,mode2:"15"}}),a({query:{...n,mode2:"60"}}),r,o]);if(l.status!==200||c.status!==200||m.status!==200||f.status!==200){const w=[l,c,m,f].filter(_=>_.status!==200);ld("15"),ld("60"),y("Failed to load leaderboards: "+((v=w[0])==null?void 0:v.body.message),-1);return}l.body.data!==null&&(Va[15]=l.body.data),c.body.data!==null&&(Va[60]=c.body.data),m.body.data!==null&&(gs[15]=m.body.data),f.body.data!==null&&(gs[60]=f.body.data),["15","60"].forEach(async w=>{ld(w),Pv(w),nQ(w),iQ(w),await vC(w),kC(Va[w]).then(_=>{Ad[w]=_,xC(w)})}),d("#leaderboardsWrapper .leftTableWrapper").removeClass("invisible"),d("#leaderboardsWrapper .rightTableWrapper").removeClass("invisible"),AP(),wC(),d("#leaderboardsWrapper .buttons .button").removeClass("active"),d("#leaderboardsWrapper .buttonGroup.timeRange .button."+Rs).addClass("active"),d("#leaderboardsWrapper #leaderboards .leftTableWrapper").scrollTop(0),d("#leaderboardsWrapper #leaderboards .rightTableWrapper").scrollTop(0),Mi=!0,gf=!0}async function rQ(t,e=!1){var c,m,f;if(e&&((c=Va[t][0])==null?void 0:c.rank)===1||mg[t])return;mg[t]=!0,Zv(t);let a=(m=to(Va[t]))==null?void 0:m.rank;e&&(a=(((f=Va[t][0])==null?void 0:f.rank)??0)-pu);let s;a<0&&(s=Math.abs(a)-1,a=0);const{isDaily:n,daysBefore:i}=_C(),o=await(n?K.leaderboards.getDaily:K.leaderboards.get)({query:{language:xo,mode:"time",mode2:t,skip:a,limit:s,daysBefore:i}});if(o.status!==200||o.body.data===null||o.body.data.length===0){ld(t),mg[t]=!1;return}const l=o.body.data;e?Va[t].unshift(...l):Va[t].push(...l),e&&!s&&(s=pu-1),await vC(t),kC(l).then(h=>{e?Ad[t].unshift(...h):Ad[t].push(...h),xC(t)}),ld(t),mg[t]=!1}async function Kb(t,e){Zv(t);const{isDaily:a,daysBefore:s}=_C(),i=await(a?K.leaderboards.getDaily:K.leaderboards.get)({query:{language:xo,mode:"time",mode2:t,skip:e,daysBefore:s}});if(i.status===503){y("Leaderboards are currently updating - please try again later",-1);return}if(Pv(t),Va[t]=[],Ad[t]=[],i.status!==200||i.body.data===null||i.body.data.length===0){ld(t);return}const r=i.body.data;Va[t]=r,await vC(t),kC(r).then(o=>{Ad[t]=o,xC(t)}),ld(t)}async function kC(t){return Promise.allSettled(t.map(async e=>_k(e.discordId,e.discordAvatar))).then(e=>e.map(a=>a.status==="fulfilled"?a.value:null))}function xC(t){const a=d(`#leaderboardsWrapper table.${t==="15"?"left":"right"} tbody .lbav`);for(const[s,n]of Ad[t].entries()){const i=a[s];n!==null?d(i).html(`<div class="avatar" style="background-image:url(${n})"></div>`):d(i).html('<div class="avatarPlaceholder"><i class="fas fa-user-circle"></i></div>')}}function oQ(){if(!ma()){y("You can't view leaderboards while offline",0);return}js(yC,"popups"),Ka("leaderboardsWrapper")||(Se()?(d("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").removeClass("disabled"),d("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").removeClass("disabled")):(d("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").addClass("disabled"),d("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").addClass("disabled")),d("#leaderboards table thead tr td:nth-child(3)").html(u.typingSpeedUnit+'<br><div class="sub">accuracy</div>'),fs=new La({select:"#leaderboardsWrapper #leaderboards .leaderboardsTop .buttonGroup.timeRange .languageSelect",settings:{showSearch:!1},data:["english","spanish","german","french","portuguese","indonesian","italian"].map(t=>({value:t,text:t,selected:t===xo})),events:{afterChange:t=>{var e;xo=(e=t[0])==null?void 0:e.value,AP(),hf()}}}),d("#leaderboardsWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},Jt(125),()=>{hf(),sQ()}))}d("#leaderboardsWrapper").on("click",t=>{d(t.target).attr("id")==="leaderboardsWrapper"&&bC()});let fs,Mi=!0;d("#leaderboardsWrapper #leaderboards .leftTableWrapper").on("scroll",t=>{if(!Mi)return;const e=d(t.currentTarget);Math.round(e.scrollTop())<=50&&Gb("15",!0)});const Gb=ns(500,rQ);d("#leaderboardsWrapper #leaderboards .leftTableWrapper").on("scroll",t=>{if(!Mi)return;const e=d(t.currentTarget);e===void 0||e[0]===void 0||Math.round(e[0].scrollHeight-e.scrollTop())<=Math.round(e.outerHeight())+50&&Gb("15")});let gf=!0;d("#leaderboardsWrapper #leaderboards .rightTableWrapper").on("scroll",t=>{if(!gf)return;const e=d(t.currentTarget);Math.round(e.scrollTop())<=50&&Gb("60",!0)});d("#leaderboardsWrapper #leaderboards .rightTableWrapper").on("scroll",t=>{const e=d(t.currentTarget);e===void 0||e[0]===void 0||Math.round(e[0].scrollHeight-e.scrollTop())<=Math.round(e.outerHeight()+50)&&Gb("60")});d("#leaderboardsWrapper #leaderboards .leftTableJumpToTop").on("click",async()=>{Mi=!1,d("#leaderboardsWrapper #leaderboards .leftTableWrapper").scrollTop(0),await Kb("15",0),Mi=!0});d("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").on("click",async()=>{var e;if(!((e=gs[15])!=null&&e.rank))return;Mi=!1,await Kb("15",gs[15].rank-pu/2);const t=d("#leaderboardsWrapper #leaderboards .leftTableWrapper table tbody td").outerHeight();d("#leaderboardsWrapper #leaderboards .leftTableWrapper").animate({scrollTop:t*Math.min(gs[15].rank,pu/2)-d("#leaderboardsWrapper #leaderboards .leftTableWrapper").outerHeight()/2.25},0,()=>{Mi=!0})});d("#leaderboardsWrapper #leaderboards .rightTableJumpToTop").on("click",async()=>{gf=!1,d("#leaderboardsWrapper #leaderboards .rightTableWrapper").scrollTop(0),await Kb("60",0),gf=!0});d("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").on("click",async()=>{var e;if(!((e=gs[60])!=null&&e.rank))return;Mi=!1,await Kb("60",gs[60].rank-pu/2);const t=d("#leaderboardsWrapper #leaderboards .rightTableWrapper table tbody td").outerHeight();d("#leaderboardsWrapper #leaderboards .rightTableWrapper").animate({scrollTop:t*Math.min(gs[60].rank,pu/2)-d("#leaderboardsWrapper #leaderboards .rightTableWrapper").outerHeight()/2.25},0,()=>{Mi=!0})});d("#leaderboardsWrapper #leaderboards .leaderboardsTop .buttonGroup.timeRange .allTime").on("click",()=>{Rs="allTime",xo="english",fs==null||fs.disable(),fs==null||fs.setSelected("english"),hf()});d("#leaderboardsWrapper #leaderboards .leaderboardsTop .buttonGroup.timeRange .daily").on("click",()=>{Rs="daily",wC(),fs==null||fs.enable(),hf()});d("#leaderboardsWrapper .showYesterdayButton").on("click",()=>{cu=!cu,hf()});d(document).on("keydown",t=>{t.key==="Escape"&&Ka("leaderboardsWrapper")&&(bC(),t.preventDefault())});d("header nav").on("click",".textButton",t=>{d(t.currentTarget).hasClass("leaderboards")&&oQ()});$s(yC);function dQ(t){return new RegExp("^"+t.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$")}function lQ(t){const e=t.result.slice(1),s=Array.from(t.route.path.matchAll(/:(\w+)/g)).map(n=>n[1]).map((n,i)=>[n,e[i]]);return Object.fromEntries(s)}const uQ={path:"404",load:()=>{ti("404")}},cQ=[{path:"/",load:()=>{ti("test")}},{path:"/verify",load:()=>{ti("test")}},{path:"/about",load:()=>{ti("about")}},{path:"/settings",load:()=>{ti("settings")}},{path:"/login",load:()=>{if(!da){Ra("/");return}if(Se()){Ra("/account");return}ti("login")}},{path:"/account",load:(t,e)=>{if(!da){Ra("/");return}ti("account",{data:e.data})}},{path:"/account-settings",load:(t,e)=>{if(!da){Ra("/");return}if(!Se()){Ra("/login");return}ti("accountSettings",{data:e.data})}},{path:"/profile",load:t=>{ti("profileSearch")}},{path:"/profile/:uidOrName",load:(t,e)=>{ti("profile",{force:!0,params:{uidOrName:t.uidOrName},data:e.data})}}];function Ra(t=window.location.pathname+window.location.search,e={}){if(ks||kd||Gc()){console.debug(`navigate: ${t} ignored, page is busy (testRestarting: ${ks}, resultCalculating: ${kd}, pageTransition: ${Gc()})`);return}t=t.replace(/\/$/,""),t===""&&(t="/"),history.pushState(null,"",t),LP(e)}async function LP(t={}){const a=cQ.map(s=>({route:s,result:location.pathname.match(dQ(s.path))})).find(s=>s.result!==null);if(a===void 0){uQ.load({},{});return}a.route.load(lQ(a),t)}window.addEventListener("popstate",()=>{LP()});document.addEventListener("DOMContentLoaded",()=>{document.body.addEventListener("click",t=>{const e=t==null?void 0:t.target;e.matches("[router-link]")&&(e!=null&&e.href)&&(t.preventDefault(),Ra(e.href))})});d("#popups").on("click","#leaderboards a.entryName",()=>{bC()});const CC=new Bs({key:"confirmedPSAs",schema:qt.array(nM),fallback:[]});function pQ(){CC.set([])}function MP(){return CC.get()}function mQ(t){const e=MP();e.push(t),CC.set(e)}async function fQ(){const t=await K.psas.get();return t.status===500?(Kc("Looks like the server is experiencing maintenance or some unexpected down time.<br>Check the <a target= '_blank' href='https://monkeytype.instatus.com/'>status page</a> or <a target= '_blank' href='https://x.com/monkeytype'>Twitter</a> for more information.",-1,"exclamation-triangle",!1,void 0,!0),null):t.status===503?(Kc("Server is currently under maintenance. <a target= '_blank' href='https://monkeytype.instatus.com/'>Check the status page</a> for more info.",-1,"bullhorn",!0,void 0,!0),null):t.status!==200?null:t.body.data}async function hQ(){const t=await fQ();if(t===null)return;if(t.length===0){pQ();return}const e=MP();t.forEach(a=>{if(a.date){const s=new Date(a.date),n=a.date-Date.now(),i=hs(n/1e3,!1,!1,"text",!1,!0);a.message=a.message.replace("{dateDifference}",i),a.message=a.message.replace("{dateNoTime}",zt(s,"dd MMM yyyy")),a.message=a.message.replace("{date}",zt(s,"dd MMM yyyy HH:mm"))}k8(a.message,a.level??-1),!(e.includes(a._id)&&!(a.sticky??!1))&&Kc(a.message,a.level,"bullhorn",a.sticky,()=>{mQ(a._id)},!0)})}const TC=new rN,SC=new oN;async function EP(){if(da===void 0){y("Authentication uninitialized",-1,{duration:3});return}Ct(),d(".sendVerificationEmail").prop("disabled",!0);const t=await K.users.verificationEmail();d(".sendVerificationEmail").prop("disabled",!1),t.status!==200?(Qe(),y("Failed to request verification email: "+t.body.message,-1)):(Qe(),y("Verification email sent",1))}async function gQ(){try{console.log("getting account data"),window.location.pathname!=="/account"?ni(90):ni(45),by("Downloading user data..."),await P1(),await dF()}catch(a){if(console.error(a),Ys(!1),ps(),d("header nav .view-account").css("opacity",1),a instanceof ic)a.responseCode===429&&(y("Doing so will save you bandwidth, make the next test be ready faster and will not sign you out (which could mean your new personal best would not save to your account).",0,{duration:0}),y("You will run into this error if you refresh the website to restart the test. It is NOT recommended to do that. Instead, use tab + enter or just tab (with quick tab mode enabled) to restart the test.",0,{duration:0})),y("Failed to get user data: "+a.message,-1);else{const s=Ge(a,"Failed to get user data");y(s,-1)}return!1}xt()==="loading"?ni(100):ni(45),by("Applying settings...");const t=A();Vk(t),yP(t.inboxUnreadSize>0),KU(),NG(t.tags),Promise.all([zk(),ku()]).then(a=>{const[s,n]=a;s.forEach(i=>{Ua.language[i]=!0}),n.forEach(i=>{Ua.funbox[i.name]=!0}),LG()}).catch(a=>{console.log(Ge(a,"Something went wrong while loading the filters"))}),t.needsToChangeName&&Kc("You need to update your account name. <a class='openNameChange'>Click here</a> to change it and learn more about why.",-1,void 0,!0,void 0,!0);const e=JSON.stringify(u)===JSON.stringify(t.config);return(u===void 0||!e)&&(console.log("no local config or local and db configs are different - applying db"),await Gl(t.config),xu(!0)),Ys(!1),K7(),window.location.pathname==="/account"&&(ni(90),await uC()),window.location.pathname==="/login"?Ra("/account"):Ra(),!0}async function Eh(t){pd(!1),Ys(!0),await gQ()||Nd(),us(),kn!==null&&f8()}async function SS(t,e){const a=window.location.search,s=window.location.hash;console.debug("account controller ready"),t?(hQ(),console.debug(`auth state changed, user ${!!e}`),console.debug(e),e?await Eh():(window.location.pathname==="/account"&&window.history.replaceState("","","/login"),pd(!1),Ra())):(console.debug("auth not initialised or not connected"),window.location.pathname==="/account"&&window.history.replaceState("","","/login"),pd(!1),Ra()),y8(a),v8(a),b8(a),h8(s),_r()}let Qb;var t$;da&&ma()?Qb=(t$=da)==null?void 0:t$.onAuthStateChanged(function(t){SS(!0,t)}):d(()=>{SS(!1,null)});async function yQ(t,e){if(da===void 0){y("Authentication uninitialized",-1);return}if(!ma()){y("You are offline",0,{duration:2});return}if(Qb(),hC(),fC(),Mh(),t===""||e===""){y("Please fill in all fields",0),us(),ps(),mC();return}const a=d(".pageLogin .login #rememberMe input").prop("checked")?h$:g$;return await y$(da,a),dN(da,t,e).then(async s=>{await Eh(s.user)}).catch(function(s){console.error(s);let n=Ge(s,"Failed to sign in with email and password");s instanceof v$&&(s.code==="auth/wrong-password"?n="Incorrect password":s.code==="auth/user-not-found"?n="User not found":s.code==="auth/invalid-email"?n="Invalid email format (make sure you are using your email to login - not your username)":s.code==="auth/invalid-credential"&&(n="Email/password is incorrect or your account does not have password authentication enabled.")),y(n,-1),us(),ps(),ms()})}async function OP(t){if(da===void 0){y("Authentication uninitialized",-1,{duration:3});return}if(!ma()){y("You are offline",0,{duration:2});return}hC(),fC(),Mh(),Qb();const e=d(".pageLogin .login #rememberMe input").prop("checked")?h$:g$;await y$(da,e),cN(da,t).then(async a=>{var s;(s=Tk(a))!=null&&s.isNewUser?B8(a,!0):await Eh(a.user)}).catch(a=>{console.log(a);let s=Ge(a,"Failed to sign in with popup");a instanceof v$&&(a.code==="auth/wrong-password"?s="Incorrect password":a.code==="auth/user-not-found"?s="User not found":a.code==="auth/invalid-email"?s="Invalid email format (make sure you are using your email to login - not your username)":a.code==="auth/popup-closed-by-user"?s="":a.code==="auth/popup-blocked"?s="Sign in popup was blocked by the browser. Check the address bar for a blocked popup icon, or update your browser settings to allow popups.":a.code==="auth/user-cancelled"?s="":a.code==="auth/account-exists-with-different-credential"&&(s="Account already exists, but its using a different authentication method. Try signing in with a different method")),s!==""&&y(s,-1),us(),ps(),ms()})}async function vQ(){return OP(TC)}async function bQ(){return OP(SC)}async function wQ(){return IP("Google",TC)}async function _Q(){return IP("GitHub",SC)}async function IP(t,e){if(!ma()){y("You are offline",0,{duration:2});return}if(da===void 0){y("Authentication uninitialized",-1,{duration:3});return}Ct(),Se()&&lN(ub(),e).then(function(){Qe(),y(`${t} authentication added`,1),_r()}).catch(function(a){Qe();const s=Ge(a,`Failed to add ${t} authentication`);y(s,-1)})}function Nd(){if(da===void 0){y("Authentication uninitialized",-1,{duration:3});return}Se()&&da.signOut().then(function(){y("Signed out",0,{duration:2}),nP(),Vk(void 0),Ra("/login"),Ea(void 0),setTimeout(()=>{GU()},125)}).catch(function(t){const e=Ge(t,"Failed to sign out");y(e,-1)})}async function kQ(){if(da===void 0){y("Authentication uninitialized",-1,{duration:3});return}if(!ma()){y("You are offline",0,{duration:2});return}u8();const t=await fP;if(t===void 0||t===""){y("Please complete the captcha",-1);return}fC(),Mh(),hC();const e=d(".pageLogin .register input")[0].value,a=d(".pageLogin .register input")[1].value,s=d(".pageLogin .register input")[2].value,n=d(".pageLogin .register input")[3].value,i=d(".pageLogin .register input")[4].value;if(e===""||a===""||s===""||n===""){us(),ps(),ms(),y("Please fill in all fields",0);return}if(!a.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){y("Invalid email",0),us(),ps(),ms();return}if(a!==s){y("Emails do not match",0),us(),ps(),ms();return}if(n!==i){y("Passwords do not match",0),us(),ps(),ms();return}if(!kk(n)){y("Password must contain at least one capital letter, number, a special character and must be between 8 and 64 characters long",0,{duration:4}),us(),ps(),ms();return}Qb();try{const r=await uN(da,a,n),o=await K.users.create({body:{name:e,captcha:t,email:a,uid:r.user.uid}});if(o.status!==200)throw new Error(`Failed to sign in: ${o.body.message}`);await b$(r.user,{displayName:e}),await EP(),us(),await Eh(r.user),y("Account created",1)}catch(r){let o=Ge(r,"Failed to create account");r instanceof Error&&"code"in r&&r.code==="auth/email-already-in-use"&&(o=Ge({message:"Email already in use"},"Failed to create account")),y(o,-1),us(),ps(),ms(),Nd();return}}d(".pageLogin .login form").on("submit",t=>{t.preventDefault();const e=d(".pageLogin .login input")[0].value??"",a=d(".pageLogin .login input")[1].value??"";yQ(e,a)});d(".pageLogin .login button.signInWithGoogle").on("click",()=>{vQ()});d(".pageLogin .login button.signInWithGitHub").on("click",()=>{bQ()});d("nav .accountButtonAndMenu .menu button.signOut").on("click",()=>{if(da===void 0){y("Authentication uninitialized",-1,{duration:3});return}Nd()});d(".pageLogin .register form").on("submit",t=>{t.preventDefault(),kQ()});d(".pageAccountSettings").on("click","#addGoogleAuth",()=>{wQ()});d(".pageAccountSettings").on("click","#addGithubAuth",()=>{_Q()});d(".pageAccount").on("click",".sendVerificationEmail",()=>{if(!ma()){y("You are offline",0,{duration:2});return}EP()});var Ot;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function a(n){throw new Error}t.assertNever=a,t.arrayToEnum=n=>{let i={};for(let r of n)i[r]=r;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),r={};for(let o of i)r[o]=n[o];return t.objectValues(r)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.push(r);return i},t.find=(n,i)=>{for(let r of n)if(i(r))return r},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(r=>typeof r=="string"?`'${r}'`:r).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Ot||(Ot={}));var K_;(function(t){t.mergeShapes=(e,a)=>({...e,...a})})(K_||(K_={}));var ue=Ot.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wr=t=>{switch(typeof t){case"undefined":return ue.undefined;case"string":return ue.string;case"number":return isNaN(t)?ue.nan:ue.number;case"boolean":return ue.boolean;case"function":return ue.function;case"bigint":return ue.bigint;case"symbol":return ue.symbol;case"object":return Array.isArray(t)?ue.array:t===null?ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ue.promise:typeof Map<"u"&&t instanceof Map?ue.map:typeof Set<"u"&&t instanceof Set?ue.set:typeof Date<"u"&&t instanceof Date?ue.date:ue.object;default:return ue.unknown}},W=Ot.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),xQ=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Zn=class PP extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let a=e||function(i){return i.message},s={_errors:[]},n=i=>{for(let r of i.issues)if(r.code==="invalid_union")r.unionErrors.map(n);else if(r.code==="invalid_return_type")n(r.returnTypeError);else if(r.code==="invalid_arguments")n(r.argumentsError);else if(r.path.length===0)s._errors.push(a(r));else{let o=s,l=0;for(;l<r.path.length;){let c=r.path[l];l===r.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(a(r))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),s}static assert(e){if(!(e instanceof PP))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ot.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){let a={},s=[];for(let n of this.issues)n.path.length>0?(a[n.path[0]]=a[n.path[0]]||[],a[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:a}}get formErrors(){return this.flatten()}};Zn.create=t=>new Zn(t);var mu=(t,e)=>{let a;switch(t.code){case W.invalid_type:t.received===ue.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case W.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,Ot.jsonStringifyReplacer)}`;break;case W.unrecognized_keys:a=`Unrecognized key(s) in object: ${Ot.joinValues(t.keys,", ")}`;break;case W.invalid_union:a="Invalid input";break;case W.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${Ot.joinValues(t.options)}`;break;case W.invalid_enum_value:a=`Invalid enum value. Expected ${Ot.joinValues(t.options)}, received '${t.received}'`;break;case W.invalid_arguments:a="Invalid function arguments";break;case W.invalid_return_type:a="Invalid function return type";break;case W.invalid_date:a="Invalid date";break;case W.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:Ot.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case W.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case W.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case W.custom:a="Invalid input";break;case W.invalid_intersection_types:a="Intersection results could not be merged";break;case W.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case W.not_finite:a="Number must be finite";break;default:a=e.defaultError,Ot.assertNever(t)}return{message:a}},ZP=mu;function CQ(t){ZP=t}function Nv(){return ZP}var Rv=t=>{let{data:e,path:a,errorMaps:s,issueData:n}=t,i=[...a,...n.path||[]],r={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="",l=s.filter(c=>!!c).slice().reverse();for(let c of l)o=c(r,{data:e,defaultError:o}).message;return{...n,path:i,message:o}},TQ=[];function te(t,e){let a=Nv(),s=Rv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===mu?void 0:mu].filter(n=>!!n)});t.common.issues.push(s)}var Cs=class NP{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){let s=[];for(let n of a){if(n.status==="aborted")return Ve;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,a){let s=[];for(let n of a){let i=await n.key,r=await n.value;s.push({key:i,value:r})}return NP.mergeObjectSync(e,s)}static mergeObjectSync(e,a){let s={};for(let n of a){let{key:i,value:r}=n;if(i.status==="aborted"||r.status==="aborted")return Ve;i.status==="dirty"&&e.dirty(),r.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof r.value<"u"||n.alwaysSet)&&(s[i.value]=r.value)}return{status:e.value,value:s}}},Ve=Object.freeze({status:"aborted"}),jv=t=>({status:"dirty",value:t}),as=t=>({status:"valid",value:t}),G_=t=>t.status==="aborted",Q_=t=>t.status==="dirty",yf=t=>t.status==="valid",vf=t=>typeof Promise<"u"&&t instanceof Promise;function Dv(t,e,a,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function RP(t,e,a,s,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,a),a}var ke;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ke||(ke={}));var Tc,Sc,Ei=class{constructor(e,a,s,n){this._cachedPath=[],this.parent=e,this.data=a,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},$S=(t,e)=>{if(yf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let a=new Zn(t.common.issues);return this._error=a,this._error}}};function it(t){if(!t)return{};let{errorMap:e,invalid_type_error:a,required_error:s,description:n}=t;if(e&&(a||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,r)=>{var o,l;let{message:c}=t;return i.code==="invalid_enum_value"?{message:c??r.defaultError}:typeof r.data>"u"?{message:(o=c??s)!==null&&o!==void 0?o:r.defaultError}:i.code!=="invalid_type"?{message:r.defaultError}:{message:(l=c??a)!==null&&l!==void 0?l:r.defaultError}},description:n}}var mt=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Wr(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:Wr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Cs,ctx:{common:e.parent.common,data:e.data,parsedType:Wr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let a=this._parse(e);if(vf(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){let a=this._parse(e);return Promise.resolve(a)}parse(e,a){let s=this.safeParse(e,a);if(s.success)return s.data;throw s.error}safeParse(e,a){var s;let n={common:{issues:[],async:(s=a==null?void 0:a.async)!==null&&s!==void 0?s:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return $S(n,i)}async parseAsync(e,a){let s=await this.safeParseAsync(e,a);if(s.success)return s.data;throw s.error}async safeParseAsync(e,a){let s={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wr(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(vf(n)?n:Promise.resolve(n));return $S(s,i)}refine(e,a){let s=n=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(n):a;return this._refinement((n,i)=>{let r=e(n),o=()=>i.addIssue({code:W.custom,...s(n)});return typeof Promise<"u"&&r instanceof Promise?r.then(l=>l?!0:(o(),!1)):r?!0:(o(),!1)})}refinement(e,a){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof a=="function"?a(s,n):a),!1))}_refinement(e){return new Hn({schema:this,typeName:Ne.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return _i.create(this,this._def)}nullable(){return To.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ld.create(this,this._def)}promise(){return gu.create(this,this._def)}or(e){return Tf.create([this,e],this._def)}and(e){return Sf.create(this,e,this._def)}transform(e){return new Hn({...it(this._def),schema:this,typeName:Ne.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let a=typeof e=="function"?e:()=>e;return new Mf({...it(this._def),innerType:this,defaultValue:a,typeName:Ne.ZodDefault})}brand(){return new $C({typeName:Ne.ZodBranded,type:this,...it(this._def)})}catch(e){let a=typeof e=="function"?e:()=>e;return new Ef({...it(this._def),innerType:this,catchValue:a,typeName:Ne.ZodCatch})}describe(e){let a=this.constructor;return new a({...this._def,description:e})}pipe(e){return AC.create(this,e)}readonly(){return Of.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},SQ=/^c[^\s-]{8,}$/i,$Q=/^[0-9a-z]+$/,AQ=/^[0-9A-HJKMNP-TV-Z]{26}$/,LQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,MQ=/^[a-z0-9_-]{21}$/i,EQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,OQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,IQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",qw,PQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ZQ=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,NQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,jP="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",RQ=new RegExp(`^${jP}$`);function DP(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function jQ(t){return new RegExp(`^${DP(t)}$`)}function BP(t){let e=`${jP}T${DP(t)}`,a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function DQ(t,e){return!!((e==="v4"||!e)&&PQ.test(t)||(e==="v6"||!e)&&ZQ.test(t))}var fu=class $c extends mt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ue.string){let n=this._getOrReturnCtx(e);return te(n,{code:W.invalid_type,expected:ue.string,received:n.parsedType}),Ve}let a=new Cs,s;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:W.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="max")e.data.length>n.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:W.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="length"){let i=e.data.length>n.value,r=e.data.length<n.value;(i||r)&&(s=this._getOrReturnCtx(e,s),i?te(s,{code:W.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):r&&te(s,{code:W.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),a.dirty())}else if(n.kind==="email")OQ.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"email",code:W.invalid_string,message:n.message}),a.dirty());else if(n.kind==="emoji")qw||(qw=new RegExp(IQ,"u")),qw.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"emoji",code:W.invalid_string,message:n.message}),a.dirty());else if(n.kind==="uuid")LQ.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"uuid",code:W.invalid_string,message:n.message}),a.dirty());else if(n.kind==="nanoid")MQ.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"nanoid",code:W.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid")SQ.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cuid",code:W.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid2")$Q.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cuid2",code:W.invalid_string,message:n.message}),a.dirty());else if(n.kind==="ulid")AQ.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"ulid",code:W.invalid_string,message:n.message}),a.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),te(s,{validation:"url",code:W.invalid_string,message:n.message}),a.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"regex",code:W.invalid_string,message:n.message}),a.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(s=this._getOrReturnCtx(e,s),te(s,{code:W.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),a.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(s=this._getOrReturnCtx(e,s),te(s,{code:W.invalid_string,validation:{startsWith:n.value},message:n.message}),a.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(s=this._getOrReturnCtx(e,s),te(s,{code:W.invalid_string,validation:{endsWith:n.value},message:n.message}),a.dirty()):n.kind==="datetime"?BP(n).test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:W.invalid_string,validation:"datetime",message:n.message}),a.dirty()):n.kind==="date"?RQ.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:W.invalid_string,validation:"date",message:n.message}),a.dirty()):n.kind==="time"?jQ(n).test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:W.invalid_string,validation:"time",message:n.message}),a.dirty()):n.kind==="duration"?EQ.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"duration",code:W.invalid_string,message:n.message}),a.dirty()):n.kind==="ip"?DQ(e.data,n.version)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"ip",code:W.invalid_string,message:n.message}),a.dirty()):n.kind==="base64"?NQ.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"base64",code:W.invalid_string,message:n.message}),a.dirty()):Ot.assertNever(n);return{status:a.value,value:e.data}}_regex(e,a,s){return this.refinement(n=>e.test(n),{validation:a,code:W.invalid_string,...ke.errToObj(s)})}_addCheck(e){return new $c({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ke.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ke.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ke.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ke.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ke.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ke.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ke.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ke.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ke.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ke.errToObj(e)})}datetime(e){var a,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(a=e==null?void 0:e.offset)!==null&&a!==void 0?a:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...ke.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ke.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ke.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,...ke.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,...ke.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,...ke.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,...ke.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,...ke.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,...ke.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,...ke.errToObj(a)})}nonempty(e){return this.min(1,ke.errToObj(e))}trim(){return new $c({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $c({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $c({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};fu.create=t=>{var e;return new fu({checks:[],typeName:Ne.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...it(t)})};function BQ(t,e){let a=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=a>s?a:s,i=parseInt(t.toFixed(n).replace(".","")),r=parseInt(e.toFixed(n).replace(".",""));return i%r/Math.pow(10,n)}var bf=class Y_ extends mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ue.number){let n=this._getOrReturnCtx(e);return te(n,{code:W.invalid_type,expected:ue.number,received:n.parsedType}),Ve}let a,s=new Cs;for(let n of this._def.checks)n.kind==="int"?Ot.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),te(a,{code:W.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),te(a,{code:W.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),te(a,{code:W.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="multipleOf"?BQ(e.data,n.value)!==0&&(a=this._getOrReturnCtx(e,a),te(a,{code:W.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),te(a,{code:W.not_finite,message:n.message}),s.dirty()):Ot.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,ke.toString(a))}gt(e,a){return this.setLimit("min",e,!1,ke.toString(a))}lte(e,a){return this.setLimit("max",e,!0,ke.toString(a))}lt(e,a){return this.setLimit("max",e,!1,ke.toString(a))}setLimit(e,a,s,n){return new Y_({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:ke.toString(n)}]})}_addCheck(e){return new Y_({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ke.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ke.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:ke.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:ke.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ke.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ke.toString(e)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ot.isInteger(e.value))}get isFinite(){let e=null,a=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(a===null||s.value>a)&&(a=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(a)&&Number.isFinite(e)}};bf.create=t=>new bf({checks:[],typeName:Ne.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...it(t)});var wf=class J_ extends mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ue.bigint){let n=this._getOrReturnCtx(e);return te(n,{code:W.invalid_type,expected:ue.bigint,received:n.parsedType}),Ve}let a,s=new Cs;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),te(a,{code:W.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),te(a,{code:W.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),te(a,{code:W.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):Ot.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,ke.toString(a))}gt(e,a){return this.setLimit("min",e,!1,ke.toString(a))}lte(e,a){return this.setLimit("max",e,!0,ke.toString(a))}lt(e,a){return this.setLimit("max",e,!1,ke.toString(a))}setLimit(e,a,s,n){return new J_({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:ke.toString(n)}]})}_addCheck(e){return new J_({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ke.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:ke.toString(a)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};wf.create=t=>{var e;return new wf({checks:[],typeName:Ne.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...it(t)})};var _f=class extends mt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ue.boolean){let a=this._getOrReturnCtx(e);return te(a,{code:W.invalid_type,expected:ue.boolean,received:a.parsedType}),Ve}return as(e.data)}};_f.create=t=>new _f({typeName:Ne.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...it(t)});var kf=class qP extends mt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ue.date){let n=this._getOrReturnCtx(e);return te(n,{code:W.invalid_type,expected:ue.date,received:n.parsedType}),Ve}if(isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return te(n,{code:W.invalid_date}),Ve}let a=new Cs,s;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:W.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),a.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:W.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),a.dirty()):Ot.assertNever(n);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new qP({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:ke.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:ke.toString(a)})}get minDate(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}};kf.create=t=>new kf({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ne.ZodDate,...it(t)});var Bv=class extends mt{_parse(e){if(this._getType(e)!==ue.symbol){let a=this._getOrReturnCtx(e);return te(a,{code:W.invalid_type,expected:ue.symbol,received:a.parsedType}),Ve}return as(e.data)}};Bv.create=t=>new Bv({typeName:Ne.ZodSymbol,...it(t)});var xf=class extends mt{_parse(e){if(this._getType(e)!==ue.undefined){let a=this._getOrReturnCtx(e);return te(a,{code:W.invalid_type,expected:ue.undefined,received:a.parsedType}),Ve}return as(e.data)}};xf.create=t=>new xf({typeName:Ne.ZodUndefined,...it(t)});var Cf=class extends mt{_parse(e){if(this._getType(e)!==ue.null){let a=this._getOrReturnCtx(e);return te(a,{code:W.invalid_type,expected:ue.null,received:a.parsedType}),Ve}return as(e.data)}};Cf.create=t=>new Cf({typeName:Ne.ZodNull,...it(t)});var hu=class extends mt{constructor(){super(...arguments),this._any=!0}_parse(e){return as(e.data)}};hu.create=t=>new hu({typeName:Ne.ZodAny,...it(t)});var ud=class extends mt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return as(e.data)}};ud.create=t=>new ud({typeName:Ne.ZodUnknown,...it(t)});var gr=class extends mt{_parse(e){let a=this._getOrReturnCtx(e);return te(a,{code:W.invalid_type,expected:ue.never,received:a.parsedType}),Ve}};gr.create=t=>new gr({typeName:Ne.ZodNever,...it(t)});var qv=class extends mt{_parse(e){if(this._getType(e)!==ue.undefined){let a=this._getOrReturnCtx(e);return te(a,{code:W.invalid_type,expected:ue.void,received:a.parsedType}),Ve}return as(e.data)}};qv.create=t=>new qv({typeName:Ne.ZodVoid,...it(t)});var Ld=class Ug extends mt{_parse(e){let{ctx:a,status:s}=this._processInputParams(e),n=this._def;if(a.parsedType!==ue.array)return te(a,{code:W.invalid_type,expected:ue.array,received:a.parsedType}),Ve;if(n.exactLength!==null){let r=a.data.length>n.exactLength.value,o=a.data.length<n.exactLength.value;(r||o)&&(te(a,{code:r?W.too_big:W.too_small,minimum:o?n.exactLength.value:void 0,maximum:r?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&a.data.length<n.minLength.value&&(te(a,{code:W.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&a.data.length>n.maxLength.value&&(te(a,{code:W.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),a.common.async)return Promise.all([...a.data].map((r,o)=>n.type._parseAsync(new Ei(a,r,a.path,o)))).then(r=>Cs.mergeArray(s,r));let i=[...a.data].map((r,o)=>n.type._parseSync(new Ei(a,r,a.path,o)));return Cs.mergeArray(s,i)}get element(){return this._def.type}min(e,a){return new Ug({...this._def,minLength:{value:e,message:ke.toString(a)}})}max(e,a){return new Ug({...this._def,maxLength:{value:e,message:ke.toString(a)}})}length(e,a){return new Ug({...this._def,exactLength:{value:e,message:ke.toString(a)}})}nonempty(e){return this.min(1,e)}};Ld.create=(t,e)=>new Ld({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ne.ZodArray,...it(e)});function nl(t){if(t instanceof dn){let e={};for(let a in t.shape){let s=t.shape[a];e[a]=_i.create(nl(s))}return new dn({...t._def,shape:()=>e})}else return t instanceof Ld?new Ld({...t._def,type:nl(t.element)}):t instanceof _i?_i.create(nl(t.unwrap())):t instanceof To?To.create(nl(t.unwrap())):t instanceof Co?Co.create(t.items.map(e=>nl(e))):t}var dn=class vn extends mt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),a=Ot.objectKeys(e);return this._cached={shape:e,keys:a}}_parse(e){if(this._getType(e)!==ue.object){let l=this._getOrReturnCtx(e);return te(l,{code:W.invalid_type,expected:ue.object,received:l.parsedType}),Ve}let{status:a,ctx:s}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof gr&&this._def.unknownKeys==="strip"))for(let l in s.data)i.includes(l)||r.push(l);let o=[];for(let l of i){let c=n[l],m=s.data[l];o.push({key:{status:"valid",value:l},value:c._parse(new Ei(s,m,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof gr){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of r)o.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(l==="strict")r.length>0&&(te(s,{code:W.unrecognized_keys,keys:r}),a.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of r){let m=s.data[c];o.push({key:{status:"valid",value:c},value:l._parse(new Ei(s,m,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of o){let m=await c.key,f=await c.value;l.push({key:m,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>Cs.mergeObjectSync(a,l)):Cs.mergeObjectSync(a,o)}get shape(){return this._def.shape()}strict(e){return ke.errToObj,new vn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,s)=>{var n,i,r,o;let l=(r=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,a,s).message)!==null&&r!==void 0?r:s.defaultError;return a.code==="unrecognized_keys"?{message:(o=ke.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new vn({...this._def,unknownKeys:"strip"})}passthrough(){return new vn({...this._def,unknownKeys:"passthrough"})}extend(e){return new vn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new vn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ne.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new vn({...this._def,catchall:e})}pick(e){let a={};return Ot.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(a[s]=this.shape[s])}),new vn({...this._def,shape:()=>a})}omit(e){let a={};return Ot.objectKeys(this.shape).forEach(s=>{e[s]||(a[s]=this.shape[s])}),new vn({...this._def,shape:()=>a})}deepPartial(){return nl(this)}partial(e){let a={};return Ot.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?a[s]=n:a[s]=n.optional()}),new vn({...this._def,shape:()=>a})}required(e){let a={};return Ot.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])a[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof _i;)n=n._def.innerType;a[s]=n}}),new vn({...this._def,shape:()=>a})}keyof(){return VP(Ot.objectKeys(this.shape))}};dn.create=(t,e)=>new dn({shape:()=>t,unknownKeys:"strip",catchall:gr.create(),typeName:Ne.ZodObject,...it(e)});dn.strictCreate=(t,e)=>new dn({shape:()=>t,unknownKeys:"strict",catchall:gr.create(),typeName:Ne.ZodObject,...it(e)});dn.lazycreate=(t,e)=>new dn({shape:t,unknownKeys:"strip",catchall:gr.create(),typeName:Ne.ZodObject,...it(e)});var Tf=class extends mt{_parse(e){let{ctx:a}=this._processInputParams(e),s=this._def.options;function n(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return a.common.issues.push(...o.ctx.common.issues),o.result;let r=i.map(o=>new Zn(o.ctx.common.issues));return te(a,{code:W.invalid_union,unionErrors:r}),Ve}if(a.common.async)return Promise.all(s.map(async i=>{let r={...a,common:{...a.common,issues:[]},parent:null};return{result:await i._parseAsync({data:a.data,path:a.path,parent:r}),ctx:r}})).then(n);{let i,r=[];for(let l of s){let c={...a,common:{...a.common,issues:[]},parent:null},m=l._parseSync({data:a.data,path:a.path,parent:c});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:c}),c.common.issues.length&&r.push(c.common.issues)}if(i)return a.common.issues.push(...i.ctx.common.issues),i.result;let o=r.map(l=>new Zn(l));return te(a,{code:W.invalid_union,unionErrors:o}),Ve}}get options(){return this._def.options}};Tf.create=(t,e)=>new Tf({options:t,typeName:Ne.ZodUnion,...it(e)});var Er=t=>t instanceof $f?Er(t.schema):t instanceof Hn?Er(t.innerType()):t instanceof Af?[t.value]:t instanceof Oh?t.options:t instanceof Lf?Ot.objectValues(t.enum):t instanceof Mf?Er(t._def.innerType):t instanceof xf?[void 0]:t instanceof Cf?[null]:t instanceof _i?[void 0,...Er(t.unwrap())]:t instanceof To?[null,...Er(t.unwrap())]:t instanceof $C||t instanceof Of?Er(t.unwrap()):t instanceof Ef?Er(t._def.innerType):[],WP=class FP extends mt{_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ue.object)return te(a,{code:W.invalid_type,expected:ue.object,received:a.parsedType}),Ve;let s=this.discriminator,n=a.data[s],i=this.optionsMap.get(n);return i?a.common.async?i._parseAsync({data:a.data,path:a.path,parent:a}):i._parseSync({data:a.data,path:a.path,parent:a}):(te(a,{code:W.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Ve)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,s){let n=new Map;for(let i of a){let r=Er(i.shape[e]);if(!r.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of r){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new FP({typeName:Ne.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:n,...it(s)})}};function X_(t,e){let a=Wr(t),s=Wr(e);if(t===e)return{valid:!0,data:t};if(a===ue.object&&s===ue.object){let n=Ot.objectKeys(e),i=Ot.objectKeys(t).filter(o=>n.indexOf(o)!==-1),r={...t,...e};for(let o of i){let l=X_(t[o],e[o]);if(!l.valid)return{valid:!1};r[o]=l.data}return{valid:!0,data:r}}else if(a===ue.array&&s===ue.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let r=t[i],o=e[i],l=X_(r,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return a===ue.date&&s===ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Sf=class extends mt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e),n=(i,r)=>{if(G_(i)||G_(r))return Ve;let o=X_(i.value,r.value);return o.valid?((Q_(i)||Q_(r))&&a.dirty(),{status:a.value,value:o.data}):(te(s,{code:W.invalid_intersection_types}),Ve)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,r])=>n(i,r)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};Sf.create=(t,e,a)=>new Sf({left:t,right:e,typeName:Ne.ZodIntersection,...it(a)});var Co=class zP extends mt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ue.array)return te(s,{code:W.invalid_type,expected:ue.array,received:s.parsedType}),Ve;if(s.data.length<this._def.items.length)return te(s,{code:W.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ve;!this._def.rest&&s.data.length>this._def.items.length&&(te(s,{code:W.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());let n=[...s.data].map((i,r)=>{let o=this._def.items[r]||this._def.rest;return o?o._parse(new Ei(s,i,s.path,r)):null}).filter(i=>!!i);return s.common.async?Promise.all(n).then(i=>Cs.mergeArray(a,i)):Cs.mergeArray(a,n)}get items(){return this._def.items}rest(e){return new zP({...this._def,rest:e})}};Co.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Co({items:t,typeName:Ne.ZodTuple,rest:null,...it(e)})};var HP=class ek extends mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ue.object)return te(s,{code:W.invalid_type,expected:ue.object,received:s.parsedType}),Ve;let n=[],i=this._def.keyType,r=this._def.valueType;for(let o in s.data)n.push({key:i._parse(new Ei(s,o,s.path,o)),value:r._parse(new Ei(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?Cs.mergeObjectAsync(a,n):Cs.mergeObjectSync(a,n)}get element(){return this._def.valueType}static create(e,a,s){return a instanceof mt?new ek({keyType:e,valueType:a,typeName:Ne.ZodRecord,...it(s)}):new ek({keyType:fu.create(),valueType:e,typeName:Ne.ZodRecord,...it(a)})}},Wv=class extends mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ue.map)return te(s,{code:W.invalid_type,expected:ue.map,received:s.parsedType}),Ve;let n=this._def.keyType,i=this._def.valueType,r=[...s.data.entries()].map(([o,l],c)=>({key:n._parse(new Ei(s,o,s.path,[c,"key"])),value:i._parse(new Ei(s,l,s.path,[c,"value"]))}));if(s.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of r){let c=await l.key,m=await l.value;if(c.status==="aborted"||m.status==="aborted")return Ve;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}})}else{let o=new Map;for(let l of r){let c=l.key,m=l.value;if(c.status==="aborted"||m.status==="aborted")return Ve;(c.status==="dirty"||m.status==="dirty")&&a.dirty(),o.set(c.value,m.value)}return{status:a.value,value:o}}}};Wv.create=(t,e,a)=>new Wv({valueType:e,keyType:t,typeName:Ne.ZodMap,...it(a)});var Fv=class tk extends mt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ue.set)return te(s,{code:W.invalid_type,expected:ue.set,received:s.parsedType}),Ve;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(te(s,{code:W.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),a.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(te(s,{code:W.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),a.dirty());let i=this._def.valueType;function r(l){let c=new Set;for(let m of l){if(m.status==="aborted")return Ve;m.status==="dirty"&&a.dirty(),c.add(m.value)}return{status:a.value,value:c}}let o=[...s.data.values()].map((l,c)=>i._parse(new Ei(s,l,s.path,c)));return s.common.async?Promise.all(o).then(l=>r(l)):r(o)}min(e,a){return new tk({...this._def,minSize:{value:e,message:ke.toString(a)}})}max(e,a){return new tk({...this._def,maxSize:{value:e,message:ke.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}};Fv.create=(t,e)=>new Fv({valueType:t,minSize:null,maxSize:null,typeName:Ne.ZodSet,...it(e)});var UP=class Vg extends mt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ue.function)return te(a,{code:W.invalid_type,expected:ue.function,received:a.parsedType}),Ve;function s(o,l){return Rv({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Nv(),mu].filter(c=>!!c),issueData:{code:W.invalid_arguments,argumentsError:l}})}function n(o,l){return Rv({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Nv(),mu].filter(c=>!!c),issueData:{code:W.invalid_return_type,returnTypeError:l}})}let i={errorMap:a.common.contextualErrorMap},r=a.data;if(this._def.returns instanceof gu){let o=this;return as(async function(...l){let c=new Zn([]),m=await o._def.args.parseAsync(l,i).catch(h=>{throw c.addIssue(s(l,h)),c}),f=await Reflect.apply(r,this,m);return await o._def.returns._def.type.parseAsync(f,i).catch(h=>{throw c.addIssue(n(f,h)),c})})}else{let o=this;return as(function(...l){let c=o._def.args.safeParse(l,i);if(!c.success)throw new Zn([s(l,c.error)]);let m=Reflect.apply(r,this,c.data),f=o._def.returns.safeParse(m,i);if(!f.success)throw new Zn([n(m,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Vg({...this._def,args:Co.create(e).rest(ud.create())})}returns(e){return new Vg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,s){return new Vg({args:e||Co.create([]).rest(ud.create()),returns:a||ud.create(),typeName:Ne.ZodFunction,...it(s)})}},$f=class extends mt{get schema(){return this._def.getter()}_parse(e){let{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}};$f.create=(t,e)=>new $f({getter:t,typeName:Ne.ZodLazy,...it(e)});var Af=class extends mt{_parse(e){if(e.data!==this._def.value){let a=this._getOrReturnCtx(e);return te(a,{received:a.data,code:W.invalid_literal,expected:this._def.value}),Ve}return{status:"valid",value:e.data}}get value(){return this._def.value}};Af.create=(t,e)=>new Af({value:t,typeName:Ne.ZodLiteral,...it(e)});function VP(t,e){return new Oh({values:t,typeName:Ne.ZodEnum,...it(e)})}var Oh=class ak extends mt{constructor(){super(...arguments),Tc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let a=this._getOrReturnCtx(e),s=this._def.values;return te(a,{expected:Ot.joinValues(s),received:a.parsedType,code:W.invalid_type}),Ve}if(Dv(this,Tc)||RP(this,Tc,new Set(this._def.values)),!Dv(this,Tc).has(e.data)){let a=this._getOrReturnCtx(e),s=this._def.values;return te(a,{received:a.data,code:W.invalid_enum_value,options:s}),Ve}return as(e.data)}get options(){return this._def.values}get enum(){let e={};for(let a of this._def.values)e[a]=a;return e}get Values(){let e={};for(let a of this._def.values)e[a]=a;return e}get Enum(){let e={};for(let a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return ak.create(e,{...this._def,...a})}exclude(e,a=this._def){return ak.create(this.options.filter(s=>!e.includes(s)),{...this._def,...a})}};Tc=new WeakMap;Oh.create=VP;var Lf=class extends mt{constructor(){super(...arguments),Sc.set(this,void 0)}_parse(e){let a=Ot.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==ue.string&&s.parsedType!==ue.number){let n=Ot.objectValues(a);return te(s,{expected:Ot.joinValues(n),received:s.parsedType,code:W.invalid_type}),Ve}if(Dv(this,Sc)||RP(this,Sc,new Set(Ot.getValidEnumValues(this._def.values))),!Dv(this,Sc).has(e.data)){let n=Ot.objectValues(a);return te(s,{received:s.data,code:W.invalid_enum_value,options:n}),Ve}return as(e.data)}get enum(){return this._def.values}};Sc=new WeakMap;Lf.create=(t,e)=>new Lf({values:t,typeName:Ne.ZodNativeEnum,...it(e)});var gu=class extends mt{unwrap(){return this._def.type}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ue.promise&&a.common.async===!1)return te(a,{code:W.invalid_type,expected:ue.promise,received:a.parsedType}),Ve;let s=a.parsedType===ue.promise?a.data:Promise.resolve(a.data);return as(s.then(n=>this._def.type.parseAsync(n,{path:a.path,errorMap:a.common.contextualErrorMap})))}};gu.create=(t,e)=>new gu({type:t,typeName:Ne.ZodPromise,...it(e)});var Hn=class extends mt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ne.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:e,ctx:a}=this._processInputParams(t),s=this._def.effect||null,n={addIssue:i=>{te(a,i),i.fatal?e.abort():e.dirty()},get path(){return a.path}};if(n.addIssue=n.addIssue.bind(n),s.type==="preprocess"){let i=s.transform(a.data,n);if(a.common.async)return Promise.resolve(i).then(async r=>{if(e.value==="aborted")return Ve;let o=await this._def.schema._parseAsync({data:r,path:a.path,parent:a});return o.status==="aborted"?Ve:o.status==="dirty"||e.value==="dirty"?jv(o.value):o});{if(e.value==="aborted")return Ve;let r=this._def.schema._parseSync({data:i,path:a.path,parent:a});return r.status==="aborted"?Ve:r.status==="dirty"||e.value==="dirty"?jv(r.value):r}}if(s.type==="refinement"){let i=r=>{let o=s.refinement(r,n);if(a.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return r};if(a.common.async===!1){let r=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return r.status==="aborted"?Ve:(r.status==="dirty"&&e.dirty(),i(r.value),{status:e.value,value:r.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(r=>r.status==="aborted"?Ve:(r.status==="dirty"&&e.dirty(),i(r.value).then(()=>({status:e.value,value:r.value}))))}if(s.type==="transform")if(a.common.async===!1){let i=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!yf(i))return i;let r=s.transform(i.value,n);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:r}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(i=>yf(i)?Promise.resolve(s.transform(i.value,n)).then(r=>({status:e.value,value:r})):i);Ot.assertNever(s)}};Hn.create=(t,e,a)=>new Hn({schema:t,typeName:Ne.ZodEffects,effect:e,...it(a)});Hn.createWithPreprocess=(t,e,a)=>new Hn({schema:e,effect:{type:"preprocess",transform:t},typeName:Ne.ZodEffects,...it(a)});var _i=class extends mt{_parse(e){return this._getType(e)===ue.undefined?as(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};_i.create=(t,e)=>new _i({innerType:t,typeName:Ne.ZodOptional,...it(e)});var To=class extends mt{_parse(e){return this._getType(e)===ue.null?as(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};To.create=(t,e)=>new To({innerType:t,typeName:Ne.ZodNullable,...it(e)});var Mf=class extends mt{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return a.parsedType===ue.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:a.path,parent:a})}removeDefault(){return this._def.innerType}};Mf.create=(t,e)=>new Mf({innerType:t,typeName:Ne.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...it(e)});var Ef=class extends mt{_parse(e){let{ctx:a}=this._processInputParams(e),s={...a,common:{...a.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return vf(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Zn(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Zn(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Ef.create=(t,e)=>new Ef({innerType:t,typeName:Ne.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...it(e)});var zv=class extends mt{_parse(e){if(this._getType(e)!==ue.nan){let a=this._getOrReturnCtx(e);return te(a,{code:W.invalid_type,expected:ue.nan,received:a.parsedType}),Ve}return{status:"valid",value:e.data}}};zv.create=t=>new zv({typeName:Ne.ZodNaN,...it(t)});var qQ=Symbol("zod_brand"),$C=class extends mt{_parse(e){let{ctx:a}=this._processInputParams(e),s=a.data;return this._def.type._parse({data:s,path:a.path,parent:a})}unwrap(){return this._def.type}},AC=class KP extends mt{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Ve:n.status==="dirty"?(a.dirty(),jv(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Ve:n.status==="dirty"?(a.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,a){return new KP({in:e,out:a,typeName:Ne.ZodPipeline})}},Of=class extends mt{_parse(e){let a=this._def.innerType._parse(e),s=n=>(yf(n)&&(n.value=Object.freeze(n.value)),n);return vf(a)?a.then(n=>s(n)):s(a)}unwrap(){return this._def.innerType}};Of.create=(t,e)=>new Of({innerType:t,typeName:Ne.ZodReadonly,...it(e)});function GP(t,e={},a){return t?hu.create().superRefine((s,n)=>{var i,r;if(!t(s)){let o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,l=(r=(i=o.fatal)!==null&&i!==void 0?i:a)!==null&&r!==void 0?r:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:l})}}):hu.create()}var WQ={object:dn.lazycreate},Ne;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ne||(Ne={}));var FQ=(t,e={message:`Input not instance of ${t.name}`})=>GP(a=>a instanceof t,e),QP=fu.create,YP=bf.create,zQ=zv.create,HQ=wf.create,JP=_f.create,UQ=kf.create,VQ=Bv.create,KQ=xf.create,GQ=Cf.create,QQ=hu.create,YQ=ud.create,JQ=gr.create,XQ=qv.create,eY=Ld.create,tY=dn.create,aY=dn.strictCreate,sY=Tf.create,nY=WP.create,iY=Sf.create,rY=Co.create,oY=HP.create,dY=Wv.create,lY=Fv.create,uY=UP.create,cY=$f.create,sk=Af.create,pY=Oh.create,mY=Lf.create,fY=gu.create,AS=Hn.create,hY=_i.create,gY=To.create,yY=Hn.createWithPreprocess,vY=AC.create,bY=()=>QP().optional(),wY=()=>YP().optional(),_Y=()=>JP().optional(),kY={string:t=>fu.create({...t,coerce:!0}),number:t=>bf.create({...t,coerce:!0}),boolean:t=>_f.create({...t,coerce:!0}),bigint:t=>wf.create({...t,coerce:!0}),date:t=>kf.create({...t,coerce:!0})},xY=Ve,g=Object.freeze({__proto__:null,defaultErrorMap:mu,setErrorMap:CQ,getErrorMap:Nv,makeIssue:Rv,EMPTY_PATH:TQ,addIssueToContext:te,ParseStatus:Cs,INVALID:Ve,DIRTY:jv,OK:as,isAborted:G_,isDirty:Q_,isValid:yf,isAsync:vf,get util(){return Ot},get objectUtil(){return K_},ZodParsedType:ue,getParsedType:Wr,ZodType:mt,datetimeRegex:BP,ZodString:fu,ZodNumber:bf,ZodBigInt:wf,ZodBoolean:_f,ZodDate:kf,ZodSymbol:Bv,ZodUndefined:xf,ZodNull:Cf,ZodAny:hu,ZodUnknown:ud,ZodNever:gr,ZodVoid:qv,ZodArray:Ld,ZodObject:dn,ZodUnion:Tf,ZodDiscriminatedUnion:WP,ZodIntersection:Sf,ZodTuple:Co,ZodRecord:HP,ZodMap:Wv,ZodSet:Fv,ZodFunction:UP,ZodLazy:$f,ZodLiteral:Af,ZodEnum:Oh,ZodNativeEnum:Lf,ZodPromise:gu,ZodEffects:Hn,ZodTransformer:Hn,ZodOptional:_i,ZodNullable:To,ZodDefault:Mf,ZodCatch:Ef,ZodNaN:zv,BRAND:qQ,ZodBranded:$C,ZodPipeline:AC,ZodReadonly:Of,custom:GP,Schema:mt,ZodSchema:mt,late:WQ,get ZodFirstPartyTypeKind(){return Ne},coerce:kY,any:QQ,array:eY,bigint:HQ,boolean:JP,date:UQ,discriminatedUnion:nY,effect:AS,enum:pY,function:uY,instanceof:FQ,intersection:iY,lazy:cY,literal:sk,map:dY,nan:zQ,nativeEnum:mY,never:JQ,null:GQ,nullable:gY,number:YP,object:tY,oboolean:_Y,onumber:wY,optional:hY,ostring:bY,pipeline:vY,preprocess:yY,promise:fY,record:oY,set:lY,strictObject:aY,string:QP,symbol:VQ,transformer:AS,tuple:rY,undefined:KQ,union:sY,unknown:YQ,void:XQ,NEVER:xY,ZodIssueCode:W,quotelessJson:xQ,ZodError:Zn}),Ww=t=>typeof(t==null?void 0:t.passthrough)=="function",CY=(t,e)=>Ww(t)?Ww(e)?t.merge(e):t:Ww(e)?e:Object.assign({},t,e);g.object({name:g.literal("ZodError"),issues:g.array(g.object({path:g.array(g.union([g.string(),g.number()])),message:g.string().optional(),code:g.nativeEnum(g.ZodIssueCode)}).catchall(g.any()))});var TY=Symbol("ContractNoBody"),SY=t=>"method"in t&&"path"in t,XP=(t,e)=>Object.fromEntries(Object.entries(t).map(([a,s])=>{var n,i,r;return SY(s)?[a,{...s,path:e!=null&&e.pathPrefix?e.pathPrefix+s.path:s.path,headers:CY(e==null?void 0:e.baseHeaders,s.headers),strictStatusCodes:(n=s.strictStatusCodes)!==null&&n!==void 0?n:e==null?void 0:e.strictStatusCodes,validateResponseOnClient:(i=s.validateResponseOnClient)!==null&&i!==void 0?i:e==null?void 0:e.validateResponseOnClient,responses:{...e==null?void 0:e.commonResponses,...s.responses},metadata:e!=null&&e.metadata?{...e==null?void 0:e.metadata,...(r=s.metadata)!==null&&r!==void 0?r:{}}:s.metadata}]:[a,XP(s,e)]})),Fw=Symbol("ContractPlainType"),$Y=()=>({router:(t,e)=>XP(t,e),query:t=>t,mutation:t=>t,responses:t=>t,response:()=>Fw,body:()=>Fw,type:()=>Fw,otherResponse:({contentType:t,body:e})=>({contentType:t,body:e}),noBody:()=>TY}),Rt=g.object({message:g.string()}),AY=Rt.extend({validationErrors:g.array(g.string())}),ml=Rt,LS=ml.extend({errorId:g.string(),uid:g.string().optional()});function Yb(t){return Rt.extend({data:t.nullable()})}function qs(t){return Rt.extend({data:t})}var LY={400:ml.describe("Generic client error"),401:ml.describe("Authentication required but not provided or invalid"),403:ml.describe("Operation not permitted"),422:AY.describe("Request validation failed"),429:ml.describe("Rate limit exceeded"),500:LS.describe("Generic server error"),503:LS.describe("Endpoint disabled or server is under maintenance")},er=g.string().regex(/^\d+$/,'Needs to be a number or a number represented as a string e.g. "10".').or(g.number().transform(String)),Jb=()=>g.string().regex(/^[a-zA-Z0-9_]+$/),Pi=Jb();Jb().max(50);var Zi=g.string().max(50).regex(/^[a-zA-Z0-9_+]+$/,"Can only contain letters [a-zA-Z0-9_+]");g.string().nullable().optional().transform(t=>t??void 0);g.number().nonnegative().max(100);g.number().nonnegative().max(420);g.enum(["repeat","random","shuffle"]);g.enum(["word","time","section"]);var LC=g.enum(["normal","expert","master"]),il=g.object({acc:g.number().nonnegative().max(100),consistency:g.number().nonnegative().max(100),difficulty:LC,lazyMode:g.boolean().optional(),language:g.string().max(100).regex(/[\w+]+/),punctuation:g.boolean().optional(),numbers:g.boolean().optional(),raw:g.number().nonnegative(),wpm:g.number().nonnegative(),timestamp:g.number().nonnegative()}),Xb=g.object({time:g.record(er.describe("Number of seconds as string"),g.array(il)),words:g.record(er.describe("Number of words as string"),g.array(il)),quote:g.record(er,g.array(il)),custom:g.record(g.literal("custom"),g.array(il)),zen:g.record(g.literal("zen"),g.array(il))}),MY=g.union([g.literal("10"),g.literal("25"),g.literal("50"),g.literal("100")]),EY=g.union([g.literal("15"),g.literal("30"),g.literal("60"),g.literal("120")]),OY=g.union([g.literal("short"),g.literal("medium"),g.literal("long"),g.literal("thicc")]),Ih=Xb.keyof(),ew=g.union([er,sk("zen"),sk("custom")],{errorMap:()=>({message:'Needs to be either a number, "zen" or "custom".'})}),IY=g.enum(["off","slow","medium","fast"]),PY=g.enum(["off","esc","tab","enter"]),ZY=g.union([g.literal(-3),g.literal(-2),g.literal(-1),g.literal(0),g.literal(1),g.literal(2),g.literal(3)]),NY=g.array(ZY),MS=g.enum(["off","default","block","outline","underline","carrot","banana"]),RY=g.enum(["off","on","max"]),jY=g.enum(["off","below","replace"]),DY=g.enum(["off","bar","text","mini"]),zw=g.enum(["off","text","mini"]),BY=g.enum(["off","on","fav","light","dark","custom"]),qY=g.enum(["black","sub","text","main"]),WY=g.enum(["0.25","0.5","0.75","1"]),FY=g.enum(["off","word","letter"]),zY=g.enum(["off","static","react","next"]),HY=g.enum(["staggered","alice","matrix","split","split_matrix","steno","steno_matrix"]),UY=g.enum(["lowercase","uppercase","blank","dynamic"]),VY=g.enum(["always","layout","never"]),KY=g.number().min(.5).max(3.5).step(.1),GY=g.enum(["manual","on"]),QY=g.enum(["off","1","2","3","4"]),YY=g.enum(["off","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"]),JY=g.number().min(0).max(1),XY=g.enum(["off","average","pb","tagPb","last","custom","daily"]),eJ=g.tuple([g.enum(["on","off"]),g.enum(["on","off"]),g.enum(["on","off"]),g.enum(["on","off"])]),tJ=g.enum(["off","custom"]),aJ=g.enum(["off","letter","word","next_word","next_two_words","next_three_words"]),sJ=g.enum(["off","letter","word"]),nJ=g.enum(["wpm","cpm","wps","cps","wph"]),iJ=g.enum(["off","result","on","sellout"]),rJ=g.enum(["off","custom"]),oJ=g.enum(["off","typing"]),dJ=g.enum(["off","on","keymap"]),lJ=g.enum(["cover","contain","max"]),uJ=g.tuple([g.number(),g.number(),g.number(),g.number()]),cJ=g.string().regex(/^[0-9a-zA-Z_#]+$/),pJ=g.enum(["off","1","2","3","4"]),mJ=g.enum(["off","fixed","flex"]),fJ=g.enum(["off","speed","acc","both"]),Jn=g.string().regex(/^#([\da-f]{3}){1,2}$/i),hJ=LC,MC=g.tuple([Jn,Jn,Jn,Jn,Jn,Jn,Jn,Jn,Jn,Jn]),gJ=g.array(Jb().max(50)),yJ=g.string().max(100).regex(/[\w#]+/),vJ=g.number().nonnegative(),bJ=g.number().nonnegative(),wJ=g.number().nonnegative().max(100),_J=g.number().nonnegative(),kJ=g.number().int().nonnegative(),xJ=g.number().int().nonnegative(),CJ=g.string().max(50).regex(/^[a-zA-Z0-9_\-+.]+$/),Hw=Jb().max(50),TJ=g.string().max(50).regex(/^[a-zA-Z0-9\-_]+$/gi),SJ=g.string().max(50).regex(/^[a-zA-Z0-9\-_]+$/gi),$J=g.number().positive(),AJ=g.number().min(20).max(1e3).or(g.literal(0)),LJ=g.string().regex(/(https|http):\/\/(www\.|).+\..+\/.+(\.png|\.gif|\.jpeg|\.jpg)/gi).or(g.literal("")),MJ=g.object({theme:Hw,themeLight:Hw,themeDark:Hw,autoSwitchTheme:g.boolean(),customTheme:g.boolean(),customThemeColors:MC,favThemes:gJ,showKeyTips:g.boolean(),smoothCaret:IY,quickRestart:PY,punctuation:g.boolean(),numbers:g.boolean(),words:xJ,time:kJ,mode:Ih,quoteLength:NY,language:Zi,fontSize:$J,freedomMode:g.boolean(),difficulty:hJ,blindMode:g.boolean(),quickEnd:g.boolean(),caretStyle:MS,paceCaretStyle:MS,flipTestColors:g.boolean(),layout:SJ,funbox:yJ,confidenceMode:RY,indicateTypos:jY,timerStyle:DY,liveSpeedStyle:zw,liveAccStyle:zw,liveBurstStyle:zw,colorfulMode:g.boolean(),randomTheme:BY,timerColor:qY,timerOpacity:WY,stopOnError:FY,showAllLines:g.boolean(),keymapMode:zY,keymapStyle:HY,keymapLegendStyle:UY,keymapLayout:TJ,keymapShowTopRow:VY,keymapSize:KY,fontFamily:CJ,smoothLineScroll:g.boolean(),alwaysShowDecimalPlaces:g.boolean(),alwaysShowWordsHistory:g.boolean(),singleListCommandLine:GY,capsLockWarning:g.boolean(),playSoundOnError:QY,playSoundOnClick:YY,soundVolume:JY,startGraphsAtZero:g.boolean(),showOutOfFocusWarning:g.boolean(),paceCaret:XY,paceCaretCustomSpeed:vJ,repeatedPace:g.boolean(),accountChart:eJ,minWpm:tJ,minWpmCustomSpeed:bJ,highlightMode:aJ,tapeMode:sJ,typingSpeedUnit:nJ,ads:iJ,hideExtraLetters:g.boolean(),strictSpace:g.boolean(),minAcc:rJ,minAccCustom:wJ,monkey:g.boolean(),repeatQuotes:oJ,oppositeShiftMode:dJ,customBackground:LJ,customBackgroundSize:lJ,customBackgroundFilter:uJ,customLayoutfluid:cJ,monkeyPowerLevel:pJ,minBurst:mJ,minBurstCustomSpeed:_J,burstHeatmap:g.boolean(),britishEnglish:g.boolean(),lazyMode:g.boolean(),showAverage:fJ,maxLineWidth:AJ}).strict();MJ.partial();var ES={a:["","","","",""],c:["","",""],d:["",""],e:["","","","","",""],g:[""],h:[""],i:["","","",""],j:["",""],k:[""],l:["",""],n:[""],o:["","","","","","","","","",""],p:[""],q:[""],s:[""],u:["","","","",""],v:["",""],x:["",""],y:["",""],z:["",""]};function EJ(t){for(let e in ES)ES[e].forEach(a=>{t=t.replace(a,e)});return t}function OJ(t,e){let a=t.toLowerCase().split(/[.,"/#!?$%^&*;:{}=\-_`~()\s\n]+/g).map(s=>EJ(IJ(s)??""));return PJ.some(s=>a.some(n=>e==="word"?n.startsWith(s):n.includes(s)))}function IJ(t){return t===void 0||t===""?t:t.replace(/[\u0300-\u036F]/g,"").trim().replace(/\n{3,}/g,`

`).replace(/\s{3,}/g,"  ")}function e2(t,e){return e.refine(a=>!OJ(a,t),a=>({message:`Profanity detected. Please remove it. If you believe this is a mistake, please contact us. (${a})`}))}var PJ=["miodec","bitly","niqqa","niqqer","ni99a","ni99er","niggas","niga","niger","retard","ahole","anus","ash0le","asholes","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","biatch","bitch","bitches","blow job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","carpet muncher","cawk","cawks","clit","cnts","cntz","cock","cockhead","cock-head","cocks","cocksucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagit","fags","fagz","faigs","flipping the bird","fudge packer","fukah","fuken","fuker","fukin","fukk","fukkah","fukken","fukker","fukkin","g00k","gayboy","gaygirl","gayz","god-damned","h00r","h0ar","h0re","jackoff","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","lezzian","lipshits","lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","phuc","phuck","phuk","phuker","phukker","poonani","pr1c","pr1ck","pr1k","puss","pussee","pussy","puuke","puuker","qweers","qweerz","qweir","recktum","rectum","retard","sadist","scank","schlong","semen","sex","sexy","sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","shitty","shity","shitz","shyt","shyte","shytty","shyty","skanck","skank","skankee","skankey","skanks","skanky","slut","sluts","slutty","slutz","son-of-a-bitch","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","wh00r","wh0re","whore","xrated","b!+ch","bitch","blowjob","clit","arschloch","shit","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","masturbate","masterbat","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","dyke","fuck","shit","amcik","andskota","arse","assrammer","ayir","bi7ch","bitch","bollock","breasts","butt-pirate","cabron","cazzo","chraa","chuj","cunt","daygo","dego","dick","dike","dupa","dziwka","ejackulate","ekrem","enculer","fag","fanculo","fanny","feces","felcher","ficken","flikker","foreskin","fotze","futkretzn","gook","guiena","h4x0r","helvete","hoer","honkey","huevon","injun","jizz","kanker","klootzak","kraut","knulle","kuksuger","kurac","kurwa","kusi","kyrpa","lesbo","mamhoon","masturbat","merd","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger","orospu","paska","perse","picka","pierdol","pillu","pimmel","piss","pizda","poontsee","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef","rautenberg","schaffer","scheiss","schlampe","schmuck","sh!t","sharmuta","sharmute","skurwysyn","sphencter","spierdalaj","splooge","suka","b00b","testicle","titt","twat","vittu","wank","wetback","wichser","zabourah"],t2=g.object({_id:Pi,name:g.string().regex(/^[0-9a-zA-Z_.-]+$/).max(16),pb:g.object({no:g.boolean(),yes:g.boolean()}).strict(),difficulty:g.record(LC,g.boolean()),mode:g.record(Ih,g.boolean()),words:g.record(MY.or(g.literal("custom")),g.boolean()),time:g.record(EY.or(g.literal("custom")),g.boolean()),quoteLength:g.record(OY,g.boolean()),punctuation:g.object({on:g.boolean(),off:g.boolean()}).strict(),numbers:g.object({on:g.boolean(),off:g.boolean()}).strict(),date:g.object({last_day:g.boolean(),last_week:g.boolean(),last_month:g.boolean(),last_3months:g.boolean(),all:g.boolean()}).strict(),tags:g.record(g.string(),g.boolean()),language:g.record(Zi,g.boolean()),funbox:g.record(g.string(),g.boolean())}),a2=g.number().int().min(-11).max(12),s2=g.object({lastResultTimestamp:g.number().int().nonnegative(),length:g.number().int().nonnegative(),maxLength:g.number().int().nonnegative(),hourOffset:a2.optional()}).strict(),EC=g.object({_id:Pi,name:g.string(),personalBests:Xb}).strict();function Ku(t){return e2("word",t).optional().transform(e=>e===null?void 0:e)}var tw=g.object({bio:Ku(g.string().max(250)).or(g.literal("")),keyboard:Ku(g.string().max(75)).or(g.literal("")),socialProfiles:g.object({twitter:Ku(g.string().max(20).regex(/^[0-9a-zA-Z_.-]+$/)).or(g.literal("")),github:Ku(g.string().max(39).regex(/^[0-9a-zA-Z_.-]+$/)).or(g.literal("")),website:Ku(g.string().url().max(200).startsWith("https://")).or(g.literal(""))}).strict().optional()}).strict(),n2=g.string().regex(/^[0-9a-zA-Z_-]+$/).max(16),aw=g.object({_id:Pi,name:n2,colors:MC}).strict(),ZJ=g.object({startTimestamp:g.number().int().nonnegative(),expirationTimestamp:g.number().int().nonnegative().or(g.literal(-1).describe("lifetime premium"))}),NJ=g.record(Zi,g.record(er.describe("quoteId as string"),g.number().nonnegative())),RJ=g.record(Ih,g.record(ew,g.record(Zi,g.number().int().nonnegative()))),jJ=g.object({rank:g.number().int().nonnegative().optional(),count:g.number().int().nonnegative()}),DJ=g.object({time:g.record(ew,g.record(Zi,jJ.optional()))}),i2=g.object({id:g.number().int().nonnegative(),selected:g.boolean().optional()}).strict(),BJ=g.object({badges:g.array(i2)}).strict(),qJ=g.boolean().describe("Admin for all languages if true").or(Zi.describe("Admin for the given language")),r2=g.object({testsByDays:g.array(g.number().int().nonnegative().or(g.null())).describe("Number of tests by day. Last element of the array is on the date `lastDay`. `null` means no tests on that day."),lastDay:g.number().int().nonnegative().describe("Timestamp of the last day included in the test activity")}).strict(),WJ=g.record(er.describe("year"),g.array(g.number().int().nonnegative().nullable().describe("number of tests, position in the array is the day of the year"))),o2=g.record(Zi,g.array(er)),sw=g.object({name:g.string(),email:g.string().email(),uid:g.string(),addedAt:g.number().int().nonnegative(),personalBests:Xb,lastReultHashes:g.array(g.string()).optional(),completedTests:g.number().int().nonnegative().optional(),startedTests:g.number().int().nonnegative().optional(),timeTyping:g.number().nonnegative().optional().describe("time typing in seconds"),streak:s2.optional(),xp:g.number().int().nonnegative().optional(),discordId:g.string().optional(),discordAvatar:g.string().optional(),tags:g.array(EC).optional(),profileDetails:tw.optional(),customThemes:g.array(aw).optional(),premium:ZJ.optional(),isPremium:g.boolean().optional(),quoteRatings:NJ.optional(),favoriteQuotes:o2.optional(),lbMemory:RJ.optional(),allTimeLbs:DJ,inventory:BJ.optional(),banned:g.boolean().optional(),lbOptOut:g.boolean().optional(),verified:g.boolean().optional(),needsToChangeName:g.boolean().optional(),quoteMod:qJ.optional(),resultFilterPresets:g.array(t2).optional(),testActivity:r2.optional()}),d2=g.string().regex(/^[0-9a-zA-Z_.-]+$/).max(16),FJ=g.object({completedTests:g.number().int().nonnegative().optional(),startedTests:g.number().int().nonnegative().optional(),timeTyping:g.number().int().nonnegative().optional()}),zJ=sw.pick({uid:!0,name:!0,banned:!0,addedAt:!0,discordId:!0,discordAvatar:!0,xp:!0,lbOptOut:!0,isPremium:!0,inventory:!0,allTimeLbs:!0}).extend({typingStats:FJ,personalBests:Xb.pick({time:!0,words:!0}),streak:g.number().int().nonnegative(),maxStreak:g.number().int().nonnegative(),details:tw}).partial({inventory:!0,details:!0,allTimeLbs:!0,uid:!0}),l2=g.enum(["xp","badge"]),HJ=g.object({type:g.literal(l2.enum.xp),item:g.number().int()}),UJ=g.object({type:g.literal(l2.enum.badge),item:i2}),VJ=HJ.or(UJ),KJ=g.object({id:Pi,subject:g.string(),body:g.string(),timestamp:g.number().int().nonnegative(),read:g.boolean(),rewards:g.array(VJ)}),GJ=g.enum(["Inappropriate name","Inappropriate bio","Inappropriate social links","Suspected cheating"]),QJ=qs(sw.extend({inboxUnreadSize:g.number().int().nonnegative()})),Ph=e2("substring",g.string().min(1).max(16).regex(/^[\da-zA-Z_-]+$/,"Can only contain lower/uppercase letters, underscare and minus.")),YJ=g.object({email:g.string().email().optional(),name:Ph,uid:g.string().optional(),captcha:g.string()}),JJ=g.object({name:Ph}),XJ=g.object({name:Ph}),eX=g.object({mode:Ih,mode2:ew,language:Zi,rank:g.number().int().nonnegative()}),tX=g.object({newEmail:g.string().email(),previousEmail:g.string().email()}),aX=g.object({newPassword:g.string().min(6)}),sX=g.object({mode:Ih,mode2:ew.optional()}),nX=Yb(il),iX=t2,rX=qs(Pi.describe("Id of the created result filter preset")),oX=g.object({presetId:Pi}),dX=qs(g.array(EC)),lX=g.object({tagName:d2}),uX=qs(EC),cX=g.object({tagId:Pi,newName:d2}),OS=g.object({tagId:Pi}),pX=qs(g.array(aw)),mX=g.object({name:n2,colors:MC}),fX=qs(aw.pick({_id:!0,name:!0})),hX=g.object({themeId:Pi}),gX=g.object({themeId:Pi,theme:aw.pick({name:!0,colors:!0})}),yX=qs(g.object({url:g.string().url()})),vX=g.object({tokenType:g.string(),accessToken:g.string(),state:g.string().length(20)}),bX=qs(sw.pick({discordId:!0,discordAvatar:!0})),wX=qs(sw.pick({completedTests:!0,startedTests:!0,timeTyping:!0})),_X=g.object({hourOffset:a2}),kX=qs(o2),xX=g.object({language:Zi,quoteId:er}),CX=g.object({language:Zi,quoteId:er}),TX=g.object({uidOrName:g.string()}),SX=g.object({isUid:g.string().length(0).transform(t=>t==="").or(g.boolean()).default(!1)}),$X=qs(zJ),AX=tw.extend({selectedBadgeId:g.number().int().nonnegative().optional().or(g.literal(-1).describe("no badge selected"))}),LX=qs(tw),MX=qs(g.object({inbox:g.array(KJ),maxMail:g.number().int()})),EX=g.object({mailIdsToDelete:g.array(g.string().uuid()).min(1).optional(),mailIdsToMarkRead:g.array(g.string().uuid()).min(1).optional()}),OX=g.object({uid:g.string(),reason:GJ,comment:g.string().regex(/^([.]|[^/<>])+$/).max(250).optional().or(g.string().length(0)),captcha:g.string()}),IX=g.object({email:g.string().email()}),PX=Yb(WJ),ZX=Yb(r2),NX=Yb(s2),Xn=$Y();Xn.router({get:{summary:"get user",description:"Get a user's data.",method:"GET",path:"",responses:{200:QJ},metadata:{rateLimit:"userGet"}},create:{summary:"create user",description:"Creates a new user",method:"POST",path:"/signup",body:YJ.strict(),responses:{200:Rt},metadata:{rateLimit:"userSignup",requireConfiguration:{path:"users.signUp",invalidMessage:"Sign up is temporarily disabled"}}},getNameAvailability:{summary:"check name",description:"Checks to see if a username is available",method:"GET",path:"/checkName/:name",pathParams:JJ.strict(),responses:{200:Rt.describe("Name is available"),409:Rt.describe("Name is not available")},metadata:{authenticationOptions:{isPublic:!0},rateLimit:"userCheckName"}},delete:{summary:"delete user",description:"Deletes a user's account",method:"DELETE",path:"",body:Xn.noBody(),responses:{200:Rt},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userDelete"}},reset:{summary:"reset user",description:"Completely resets a user's account to a blank state",method:"PATCH",path:"/reset",body:Xn.noBody(),responses:{200:Rt},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userReset"}},updateName:{summary:"update username",description:"Updates a user's name",method:"PATCH",path:"/name",body:XJ.strict(),responses:{200:Rt},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userUpdateName"}},updateLeaderboardMemory:{summary:"update lbMemory",description:"Updates a user's cached leaderboard state",method:"PATCH",path:"/leaderboardMemory",body:eX.strict(),responses:{200:Rt},metadata:{rateLimit:"userUpdateLBMemory"}},updateEmail:{summary:"update email",description:"Updates a user's email",method:"PATCH",path:"/email",body:tX.strict(),responses:{200:Rt},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userUpdateEmail"}},updatePassword:{summary:"update password",description:"Updates a user's email",method:"PATCH",path:"/password",body:aX.strict(),responses:{200:Rt},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userUpdateEmail"}},getPersonalBests:{summary:"get personal bests",description:"Get user's personal bests",method:"GET",path:"/personalBests",query:sX.strict(),responses:{200:nX},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"userGet"}},deletePersonalBests:{summary:"delete personal bests",description:"Deletes a user's personal bests",method:"DELETE",path:"/personalBests",body:Xn.noBody(),responses:{200:Rt},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userClearPB"}},optOutOfLeaderboards:{summary:"leaderboards opt out",description:"Opt out of the leaderboards",method:"POST",path:"/optOutOfLeaderboards",body:Xn.noBody(),responses:{200:Rt},metadata:{authenticationOptions:{requireFreshToken:!0},rateLimit:"userOptOutOfLeaderboards"}},addResultFilterPreset:{summary:"add result filter preset",description:"Add a result filter preset",method:"POST",path:"/resultFilterPresets",body:iX.strict(),responses:{200:rX},metadata:{rateLimit:"userCustomFilterAdd",requireConfiguration:{path:"results.filterPresets.enabled",invalidMessage:"Result filter presets are not available at this time."}}},removeResultFilterPreset:{summary:"remove result filter preset",description:"Remove a result filter preset",method:"DELETE",path:"/resultFilterPresets/:presetId",pathParams:oX.strict(),body:Xn.noBody(),responses:{200:Rt},metadata:{rateLimit:"userCustomFilterRemove",requireConfiguration:{path:"results.filterPresets.enabled",invalidMessage:"Result filter presets are not available at this time."}}},getTags:{summary:"get tags",description:"Get the users tags",method:"GET",path:"/tags",responses:{200:dX},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"userTagsGet"}},createTag:{summary:"add tag",description:"Add a tag for the current user",method:"POST",path:"/tags",body:lX.strict(),responses:{200:uX},metadata:{rateLimit:"userTagsAdd"}},editTag:{summary:"edit tag",description:"Edit a tag",method:"PATCH",path:"/tags",body:cX.strict(),responses:{200:Rt},metadata:{rateLimit:"userTagsEdit"}},deleteTag:{summary:"delete tag",description:"Delete a tag",method:"DELETE",path:"/tags/:tagId",pathParams:OS.strict(),body:Xn.noBody(),responses:{200:Rt},metadata:{rateLimit:"userTagsRemove"}},deleteTagPersonalBest:{summary:"delete tag PBs",description:"Delete personal bests of a tag",method:"DELETE",path:"/tags/:tagId/personalBest",pathParams:OS.strict(),body:Xn.noBody(),responses:{200:Rt},metadata:{rateLimit:"userTagsClearPB"}},getCustomThemes:{summary:"get custom themes",description:"Get custom themes for the current user",method:"GET",path:"/customThemes",responses:{200:pX},metadata:{rateLimit:"userCustomThemeGet"}},addCustomTheme:{summary:"add custom themes",description:"Add a custom theme for the current user",method:"POST",path:"/customThemes",body:mX.strict(),responses:{200:fX},metadata:{rateLimit:"userCustomThemeAdd"}},deleteCustomTheme:{summary:"delete custom themes",description:"Delete a custom theme",method:"DELETE",path:"/customThemes",body:hX.strict(),responses:{200:Rt},metadata:{rateLimit:"userCustomThemeRemove"}},editCustomTheme:{summary:"edit custom themes",description:"Edit a custom theme",method:"PATCH",path:"/customThemes",body:gX.strict(),responses:{200:Rt},metadata:{rateLimit:"userCustomThemeEdit"}},getDiscordOAuth:{summary:"discord oauth",description:"Start OAuth authentication with discord",method:"GET",path:"/discord/oauth",responses:{200:yX},metadata:{rateLimit:"userDiscordLink",requireConfiguration:{path:"users.discordIntegration.enabled",invalidMessage:"Discord integration is not available at this time"}}},linkDiscord:{summary:"link with discord",description:"Links a user's account with a discord account",method:"POST",path:"/discord/link",body:vX.strict(),responses:{200:bX},metadata:{rateLimit:"userDiscordLink",requireConfiguration:{path:"users.discordIntegration.enabled",invalidMessage:"Discord integration is not available at this time"}}},unlinkDiscord:{summary:"unlink discord",description:"Unlinks a user's account with a discord account",method:"POST",path:"/discord/unlink",body:Xn.noBody(),responses:{200:Rt},metadata:{rateLimit:"userDiscordUnlink"}},getStats:{summary:"get stats",description:"Gets a user's typing stats data",method:"GET",path:"/stats",responses:{200:wX},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"userGet"}},setStreakHourOffset:{summary:"set streak hour offset",description:"Sets a user's streak hour offset",method:"POST",path:"/setStreakHourOffset",body:_X.strict(),responses:{200:Rt},metadata:{rateLimit:"setStreakHourOffset"}},getFavoriteQuotes:{summary:"get favorite quotes",description:"Gets a user's favorite quotes",method:"GET",path:"/favoriteQuotes",responses:{200:kX},metadata:{rateLimit:"quoteFavoriteGet"}},addQuoteToFavorites:{summary:"add favorite quotes",description:"Add a quote to the user's favorite quotes",method:"POST",path:"/favoriteQuotes",body:xX.strict(),responses:{200:Rt},metadata:{rateLimit:"quoteFavoritePost"}},removeQuoteFromFavorites:{summary:"remove favorite quotes",description:"Remove a quote to the user's favorite quotes",method:"DELETE",path:"/favoriteQuotes",body:CX.strict(),responses:{200:Rt},metadata:{rateLimit:"quoteFavoriteDelete"}},getProfile:{summary:"get profile",description:"Gets a user's profile",method:"GET",path:"/:uidOrName/profile",pathParams:TX.strict(),query:SX.strict(),responses:{200:$X,404:ml.describe("User not found")},metadata:{authenticationOptions:{isPublic:!0},rateLimit:"userProfileGet",requireConfiguration:{path:"users.profiles.enabled",invalidMessage:"Profiles are not available at this time"}}},updateProfile:{summary:"update profile",description:"Update a user's profile",method:"PATCH",path:"/profile",body:AX.strict(),responses:{200:LX},metadata:{rateLimit:"userProfileUpdate",requireConfiguration:{path:"users.profiles.enabled",invalidMessage:"Profiles are not available at this time"}}},getInbox:{summary:"get inbox",description:"Gets the user's inbox",method:"GET",path:"/inbox",responses:{200:MX},metadata:{rateLimit:"userMailGet",requireConfiguration:{path:"users.inbox.enabled",invalidMessage:"Your inbox is not available at this time."}}},updateInbox:{summary:"update inbox",description:"Updates the user's inbox",method:"PATCH",body:EX.strict(),path:"/inbox",responses:{200:Rt},metadata:{rateLimit:"userMailUpdate",requireConfiguration:{path:"users.inbox.enabled",invalidMessage:"Your inbox is not available at this time."}}},report:{summary:"report user",description:"Report a user",method:"POST",path:"/report",body:OX.strict(),responses:{200:Rt},metadata:{rateLimit:"quoteReportSubmit",requirePermission:"canReport",requireConfiguration:{path:"quotes.reporting.enabled",invalidMessage:"User reporting is unavailable."}}},verificationEmail:{summary:"send verification email",description:"Send a verification email",method:"GET",path:"/verificationEmail",responses:{200:Rt},metadata:{authenticationOptions:{noCache:!0},rateLimit:"userRequestVerificationEmail"}},forgotPasswordEmail:{summary:"send forgot password email",description:"Send a forgot password email",method:"POST",path:"/forgotPasswordEmail",body:IX.strict(),responses:{200:Rt},metadata:{authenticationOptions:{isPublic:!0},rateLimit:"userForgotPasswordEmail"}},revokeAllTokens:{summary:"revoke all tokens",description:"Revoke all tokens for the current user.",method:"POST",path:"/revokeAllTokens",body:Xn.noBody(),responses:{200:Rt},metadata:{authenticationOptions:{requireFreshToken:!0,noCache:!0},rateLimit:"userRevokeAllTokens"}},getTestActivity:{summary:"get test activity",description:"Get user's test activity",method:"GET",path:"/testActivity",responses:{200:PX},metadata:{rateLimit:"userTestActivity"}},getCurrentTestActivity:{summary:"get current test activity",description:"Get test activity for the last up to 372 days for the current user ",method:"GET",path:"/currentTestActivity",responses:{200:ZX},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"userCurrentTestActivity"}},getStreak:{summary:"get streak",description:"Get user's streak data",method:"GET",path:"/streak",responses:{200:NX},metadata:{authenticationOptions:{acceptApeKeys:!0},rateLimit:"userStreak"}}},{pathPrefix:"/users",strictStatusCodes:!0,metadata:{openApiTags:"users"},commonResponses:LY});const sa={updateEmail:void 0,updateName:void 0,updatePassword:void 0,removeGoogleAuth:void 0,removeGithubAuth:void 0,removePasswordAuth:void 0,addPasswordAuth:void 0,deleteAccount:void 0,resetAccount:void 0,clearTagPb:void 0,optOutOfLeaderboards:void 0,applyCustomFont:void 0,resetPersonalBests:void 0,resetSettings:void 0,revokeAllTokens:void 0,unlinkDiscord:void 0,editApeKey:void 0,deleteCustomText:void 0,deleteCustomTextLong:void 0,resetProgressCustomTextLong:void 0,updateCustomTheme:void 0,deleteCustomTheme:void 0,forgotPassword:void 0,devGenerateData:void 0};function RX(t){const a=["password","github.com","google.com"].filter(s=>s!==t);for(const s of a)if(nw(s))return s}function Ni(){return nw("password")}function jX(){return nw("github.com")}function DX(){return nw("google.com")}function nw(t){var e,a;return((a=(e=da)==null?void 0:e.currentUser)==null?void 0:a.providerData.some(s=>s.providerId===t))||!1}async function un(t){if(da===void 0)return{status:-1,message:"Authentication is not initialized"};if(!Se())return{status:-1,message:"User is not signed in"};const e=ub(),a=RX(t.excludeMethod);try{if(a===void 0)return{status:-1,message:"Failed to reauthenticate: there is no valid authentication present on the account."};if(a==="password"){if(t.password===void 0)return{status:-1,message:"Failed to reauthenticate using password: password missing."};const s=w$.credential(e.email,t.password);await mN(e,s)}else await fN(e,a==="github.com"?SC:TC);return{status:1,message:"Reauthenticated",user:e}}catch(s){const n=s;return n.code==="auth/wrong-password"?{status:0,message:"Incorrect password"}:{status:-1,message:"Failed to reauthenticate: "+((n==null?void 0:n.message)??JSON.stringify(s))}}}sa.updateEmail=new Ut({id:"updateEmail",title:"Update email",inputs:[{placeholder:"Password",type:"password",initVal:""},{type:"text",placeholder:"New email",initVal:""},{type:"text",placeholder:"Confirm new email",initVal:""}],buttonText:"update",onlineOnly:!0,execFn:async(t,e,a,s)=>{if(a!==s)return{status:0,message:"Emails don't match"};const n=await un({password:e});if(n.status!==1)return{status:n.status,message:n.message};const i=await K.users.updateEmail({body:{newEmail:a,previousEmail:n.user.email}});return i.status!==200?{status:-1,message:"Failed to update email: "+i.body.message}:(Nd(),{status:1,message:"Email updated"})},beforeInitFn:t=>{Se()&&(Ni()||(t.inputs=[],t.buttonText="",t.text="Password authentication is not enabled"))}});sa.removeGoogleAuth=new Ut({id:"removeGoogleAuth",title:"Remove Google authentication",inputs:[{placeholder:"Password",type:"password",initVal:""}],onlineOnly:!0,buttonText:"remove",execFn:async(t,e)=>{const a=await un({password:e,excludeMethod:"google.com"});if(a.status!==1)return{status:a.status,message:a.message};try{await Sk(a.user,"google.com")}catch(s){return{status:-1,message:Ge(s,"Failed to unlink Google account")}}return _r(),vr(3),{status:1,message:"Google authentication removed"}},beforeInitFn:t=>{Se()&&(Ni()||(t.inputs=[],jX()||(t.buttonText="",t.text="Password or GitHub authentication is not enabled")))}});sa.removeGithubAuth=new Ut({id:"removeGithubAuth",title:"Remove GitHub authentication",inputs:[{placeholder:"Password",type:"password",initVal:""}],onlineOnly:!0,buttonText:"remove",execFn:async(t,e)=>{const a=await un({password:e,excludeMethod:"github.com"});if(a.status!==1)return{status:a.status,message:a.message};try{await Sk(a.user,"github.com")}catch(s){return{status:-1,message:Ge(s,"Failed to unlink GitHub account")}}return _r(),vr(3),{status:1,message:"GitHub authentication removed"}},beforeInitFn:t=>{Se()&&(Ni()||(t.inputs=[],DX()||(t.buttonText="",t.text="Password or Google authentication is not enabled")))}});sa.removePasswordAuth=new Ut({id:"removePaswordAuth",title:"Remove Password authentication",inputs:[{type:"checkbox",label:"I understand I will lose access to my Monkeytype account if my Google/GitHub account is lost or disabled."}],onlineOnly:!0,buttonText:"reauthenticate to remove",execFn:async t=>{const e=await un({excludeMethod:"password"});if(e.status!==1)return{status:e.status,message:e.message};try{await Sk(e.user,"password")}catch(a){return{status:-1,message:Ge(a,"Failed to remove password authentication")}}return _r(),vr(3),{status:1,message:"Password authentication removed"}},beforeInitFn:()=>{Se()}});sa.updateName=new Ut({id:"updateName",title:"Update name",inputs:[{placeholder:"password",type:"password",initVal:""},{placeholder:"new name",type:"text",initVal:"",validation:{schema:Ph,isValid:async t=>(await K.users.getNameAvailability({params:{name:t}})).status===200?!0:"Name not available"}}],buttonText:"update",onlineOnly:!0,execFn:async(t,e,a)=>{const s=await un({password:e});if(s.status!==1)return{status:s.status,message:s.message};const n=await K.users.updateName({body:{name:a}});if(n.status!==200)return{status:-1,message:"Failed to update name: "+n.body.message};const i=A();return i&&(i.name=a,Ea(i),i.needsToChangeName&&vr(2),Vk(i)),{status:1,message:"Name updated"}},beforeInitFn:t=>{if(!Se())return;const e=A();e&&(Ni()||(t.inputs[0].hidden=!0,t.buttonText="reauthenticate to update"),e.needsToChangeName===!0&&(t.text="You need to change your account name. This might be because you have a duplicate name, no account name or your name is not allowed (contains whitespace or invalid characters). Sorry for the inconvenience."))}});sa.updatePassword=new Ut({id:"updatePassword",title:"Update password",inputs:[{placeholder:"current password",type:"password",initVal:""},{placeholder:"new password",type:"password",initVal:""},{placeholder:"confirm new password",type:"password",initVal:""}],buttonText:"update",onlineOnly:!0,execFn:async(t,e,a,s)=>{if(a!==s)return{status:0,message:"New passwords don't match"};if(a===e)return{status:0,message:"New password must be different from previous password"};if(!kk(a))return{status:0,message:"New password must contain at least one capital letter, number, a special character and must be between 8 and 64 characters long"};const n=await un({password:e});if(n.status!==1)return{status:n.status,message:n.message};const i=await K.users.updatePassword({body:{newPassword:a}});return i.status!==200?{status:-1,message:"Failed to update password: "+i.body.message}:(Nd(),{status:1,message:"Password updated"})},beforeInitFn:t=>{Se()&&(Ni()||(t.inputs=[],t.buttonText="",t.text="Password authentication is not enabled"))}});sa.addPasswordAuth=new Ut({id:"addPasswordAuth",title:"Add password authentication",inputs:[{placeholder:"email",type:"email",initVal:""},{placeholder:"confirm email",type:"email",initVal:""},{placeholder:"new password",type:"password",initVal:""},{placeholder:"confirm new password",type:"password",initVal:""}],buttonText:"reauthenticate to add",onlineOnly:!0,execFn:async(t,e,a,s,n)=>{if(e!==a)return{status:0,message:"Emails don't match"};if(s!==n)return{status:0,message:"Passwords don't match"};const i=await un({password:s});if(i.status!==1)return{status:i.status,message:i.message};try{const o=w$.credential(e,s);await pN(i.user,o)}catch(o){return{status:-1,message:Ge(o,"Failed to add password authentication")}}const r=await K.users.updateEmail({body:{newEmail:e,previousEmail:i.user.email}});return r.status!==200?{status:-1,message:"Password authentication added but updating the database email failed. This shouldn't happen, please contact support. Error: "+r.body.message}:(_r(),{status:1,message:"Password authentication added"})}});sa.deleteAccount=new Ut({id:"deleteAccount",title:"Delete account",inputs:[{placeholder:"password",type:"password",initVal:""}],text:"This is the last time you can change your mind. After pressing the button everything is gone.",buttonText:"delete",onlineOnly:!0,execFn:async(t,e)=>{const a=await un({password:e});if(a.status!==1)return{status:a.status,message:a.message};y("Deleting all data...",0);const s=await K.users.delete();return s.status!==200?{status:-1,message:"Failed to delete user data: "+s.body.message}:(vr(3),{status:1,message:"Account deleted, goodbye"})},beforeInitFn:t=>{Se()&&(Ni()||(t.inputs=[],t.buttonText="reauthenticate to delete"))}});sa.resetAccount=new Ut({id:"resetAccount",title:"Reset account",inputs:[{placeholder:"password",type:"password",initVal:""}],text:"This is the last time you can change your mind. After pressing the button everything is gone.",buttonText:"reset",onlineOnly:!0,execFn:async(t,e)=>{const a=await un({password:e});if(a.status!==1)return{status:a.status,message:a.message};y("Resetting settings...",0),await yx(),y("Resetting account...",0);const s=await K.users.reset();return s.status!==200?{status:-1,message:"Failed to reset account: "+s.body.message}:(vr(3),{status:1,message:"Account reset"})},beforeInitFn:t=>{Se()&&(Ni()||(t.inputs=[],t.buttonText="reauthenticate to reset"))}});sa.optOutOfLeaderboards=new Ut({id:"optOutOfLeaderboards",title:"Opt out of leaderboards",inputs:[{placeholder:"password",type:"password",initVal:""}],text:"Are you sure you want to opt out of leaderboards?",buttonText:"opt out",onlineOnly:!0,execFn:async(t,e)=>{const a=await un({password:e});if(a.status!==1)return{status:a.status,message:a.message};const s=await K.users.optOutOfLeaderboards();return s.status!==200?{status:-1,message:"Failed to opt out: "+s.body.message}:(vr(3),{status:1,message:"Leaderboards opt out successful"})},beforeInitFn:t=>{Se()&&(Ni()||(t.inputs=[],t.buttonText="reauthenticate to opt out"))}});sa.clearTagPb=new Ut({id:"clearTagPb",title:"Clear tag PB",text:"Are you sure you want to clear this tags PB?",buttonText:"clear",execFn:async t=>{var n,i;const e=t.parameters[0],a=await K.users.deleteTagPersonalBest({params:{tagId:e}});if(a.status!==200)return{status:-1,message:"Failed to clear tag PB: "+a.body.message};const s=(i=(n=A())==null?void 0:n.tags)==null?void 0:i.filter(r=>r._id===e)[0];return s===void 0?{status:-1,message:"Tag not found"}:(s.personalBests={time:{},words:{},quote:{},zen:{},custom:{}},d(`.pageSettings .section.tags .tagsList .tag[id="${e}"] .clearPbButton`).attr("aria-label","No PB found"),{status:1,message:"Tag PB cleared"})},beforeInitFn:t=>{t.text=`Are you sure you want to clear PB for tag ${t.parameters[1]}?`}});sa.applyCustomFont=new Ut({id:"applyCustomFont",title:"Custom font",inputs:[{type:"text",placeholder:"Font name",initVal:""}],text:"Make sure you have the font installed on your computer before applying",buttonText:"apply",execFn:async(t,e)=>{var a;return(a=se.fontFamily)==null||a.setValue(e.replace(/\s/g,"_")),{status:1,message:"Font applied"}}});sa.resetPersonalBests=new Ut({id:"resetPersonalBests",title:"Reset personal bests",inputs:[{placeholder:"password",type:"password",initVal:""}],buttonText:"reset",onlineOnly:!0,execFn:async(t,e)=>{const a=await un({password:e});if(a.status!==1)return{status:a.status,message:a.message};const s=await K.users.deletePersonalBests();if(s.status!==200)return{status:-1,message:"Failed to reset personal bests: "+s.body.message};const n=A();return n?(n.personalBests={time:{},words:{},quote:{},zen:{},custom:{}},{status:1,message:"Personal bests reset"}):{status:-1,message:"Failed to reset personal bests: no snapshot"}},beforeInitFn:t=>{Se()&&(Ni()||(t.inputs=[],t.buttonText="reauthenticate to reset"))}});sa.resetSettings=new Ut({id:"resetSettings",title:"Reset settings",text:"Are you sure you want to reset all your settings?",buttonText:"reset",onlineOnly:!0,execFn:async()=>(await yx(),{status:1,message:"Settings reset"})});sa.revokeAllTokens=new Ut({id:"revokeAllTokens",title:"Revoke all tokens",inputs:[{placeholder:"password",type:"password",initVal:""}],text:"Are you sure you want to this? This will log you out of all devices.",buttonText:"revoke all",onlineOnly:!0,execFn:async(t,e)=>{const a=await un({password:e});if(a.status!==1)return{status:a.status,message:a.message};const s=await K.users.revokeAllTokens();return s.status!==200?{status:-1,message:"Failed to revoke tokens: "+s.body.message}:(vr(3),{status:1,message:"Tokens revoked"})},beforeInitFn:t=>{!Se()||!A()||Ni()||(t.inputs[0].hidden=!0,t.buttonText="reauthenticate to revoke all tokens")}});sa.unlinkDiscord=new Ut({id:"unlinkDiscord",title:"Unlink Discord",text:"Are you sure you want to unlink your Discord account?",buttonText:"unlink",onlineOnly:!0,execFn:async()=>{const t=A();if(!t)return{status:-1,message:"Failed to unlink Discord: no snapshot"};const e=await K.users.unlinkDiscord();return e.status!==200?{status:-1,message:"Failed to unlink Discord: "+e.body.message}:(t.discordAvatar=void 0,t.discordId=void 0,Ty(void 0,void 0),Ea(t),_r(),{status:1,message:"Discord unlinked"})}});sa.deleteCustomText=new Ut({id:"deleteCustomText",title:"Delete custom text",text:"Are you sure?",buttonText:"delete",execFn:async t=>(bE(t.parameters[0],!1),vo("",void 0),{status:1,message:"Custom text deleted"}),beforeInitFn:t=>{t.text=`Are you sure you want to delete custom text ${t.parameters[0]}?`}});sa.deleteCustomTextLong=new Ut({id:"deleteCustomTextLong",title:"Delete custom text",text:"Are you sure?",buttonText:"delete",execFn:async t=>(bE(t.parameters[0],!0),vo("",void 0),{status:1,message:"Custom text deleted"}),beforeInitFn:t=>{t.text=`Are you sure you want to delete custom text ${t.parameters[0]}?`}});sa.resetProgressCustomTextLong=new Ut({id:"resetProgressCustomTextLong",title:"Reset progress for custom text",text:"Are you sure?",buttonText:"reset",execFn:async t=>{l_(t.parameters[0],0);const e=sv(t.parameters[0],!0);return lr(e),{status:1,message:"Custom text progress reset"}},beforeInitFn:t=>{t.text=`Are you sure you want to reset your progress for custom text ${t.parameters[0]}?`}});sa.updateCustomTheme=new Ut({id:"updateCustomTheme",title:"Update custom theme",inputs:[{type:"text",placeholder:"name",initVal:""},{type:"checkbox",initVal:!1,label:"Update custom theme to current colors",optional:!0}],buttonText:"update",onlineOnly:!0,execFn:async(t,e,a)=>{var l;const s=A();if(!s)return{status:-1,message:"Failed to update custom theme: no snapshot"};const n=(l=s.customThemes)==null?void 0:l.find(c=>c._id===t.parameters[0]);if(n===void 0)return{status:-1,message:"Failed to update custom theme: theme not found"};let i=[];if(a==="true")for(const c of mr)i.push(d(`.pageSettings .customTheme .customThemeEdit #${c}[type='color']`).attr("value"));else i=n.colors;const r={name:e.replaceAll(" ","_"),colors:i};return await uF(n._id,r)?(Lm(i),du(),{status:1,message:"Custom theme updated"}):{status:-1,message:"Failed to update custom theme"}},beforeInitFn:t=>{var s;const e=A();if(!e)return;const a=(s=e.customThemes)==null?void 0:s.find(n=>n._id===t.parameters[0]);a&&(t.inputs[0].initVal=a.name)}});sa.deleteCustomTheme=new Ut({id:"deleteCustomTheme",title:"Delete custom theme",text:"Are you sure?",buttonText:"delete",onlineOnly:!0,execFn:async t=>(await cF(t.parameters[0]),du(),{status:1,message:"Custom theme deleted"})});sa.forgotPassword=new Ut({id:"forgotPassword",title:"Forgot password",inputs:[{type:"text",placeholder:"email",initVal:""}],buttonText:"send",execFn:async(t,e)=>{const a=await K.users.forgotPasswordEmail({body:{email:e.trim()}});return a.status!==200?{status:-1,message:"Failed to send password reset email: "+a.body.message}:{status:1,message:a.body.message,notificationOptions:{duration:8}}},beforeInitFn:t=>{const e=d('.pageLogin .login input[name="current-email"]').val();e&&(t.inputs[0].initVal=e)}});sa.devGenerateData=new Ut({id:"devGenerateData",title:"Generate data",showLabels:!0,inputs:[{type:"text",label:"username",placeholder:"username",oninput:t=>{const e=t.target,a=document.querySelector("#devGenerateData_1 + span");a.innerHTML=`if checked, user will be created with ${e.value}@example.com and password: password`},validation:{schema:Ph}},{type:"checkbox",label:"create user",description:"if checked, user will be created with {username}@example.com and password: password",optional:!0},{type:"date",label:"first test",optional:!0},{type:"date",label:"last test",max:new Date,optional:!0},{type:"range",label:"min tests per day",initVal:0,min:0,max:200,step:10},{type:"range",label:"max tests per day",initVal:50,min:0,max:200,step:10}],buttonText:"generate (might take a while)",execFn:async(t,e,a,s,n,i,r)=>{const o={username:e,createUser:a==="true"};s!==void 0&&s.length>0&&(o.firstTestTimestamp=Date.parse(s)),n!==void 0&&n.length>0&&(o.lastTestTimestamp=Date.parse(n)),i!==void 0&&i.length>0&&(o.minTestsPerDay=Number.parseInt(i)),r!==void 0&&r.length>0&&(o.maxTestsPerDay=Number.parseInt(r));const l=await K.dev.generateData({body:o});return{status:l.status===200?1:-1,message:l.body.message,hideOptions:{clearModalChain:!0}}}});function ca(t,e=[],a={}){const s=sa[t];if(s===void 0){y("Failed to show popup - popup is not defined",-1);return}s.show(e,a)}d(".pageLogin #forgotPasswordButton").on("click",()=>{ca("forgotPassword")});d(".pageAccountSettings").on("click","#unlinkDiscordButton",()=>{ca("unlinkDiscord")});d(".pageAccountSettings").on("click","#removeGoogleAuth",()=>{ca("removeGoogleAuth")});d(".pageAccountSettings").on("click","#removeGithubAuth",()=>{ca("removeGithubAuth")});d(".pageAccountSettings").on("click","#removePasswordAuth",()=>{ca("removePasswordAuth")});d("#resetSettingsButton").on("click",()=>{ca("resetSettings")});d(".pageAccountSettings").on("click","#revokeAllTokens",()=>{ca("revokeAllTokens")});d(".pageAccountSettings").on("click","#resetPersonalBestsButton",()=>{ca("resetPersonalBests")});d(".pageAccountSettings").on("click","#updateAccountName",()=>{ca("updateName")});d("#bannerCenter").on("click",".banner .text .openNameChange",()=>{ca("updateName")});d(".pageAccountSettings").on("click","#addPasswordAuth",()=>{ca("addPasswordAuth")});d(".pageAccountSettings").on("click","#emailPasswordAuth",()=>{ca("updateEmail")});d(".pageAccountSettings").on("click","#passPasswordAuth",()=>{ca("updatePassword")});d(".pageAccountSettings").on("click","#deleteAccount",()=>{ca("deleteAccount")});d(".pageAccountSettings").on("click","#resetAccount",()=>{ca("resetAccount")});d(".pageAccountSettings").on("click","#optOutOfLeaderboardsButton",()=>{ca("optOutOfLeaderboards")});d(".pageSettings").on("click",".section.themes .customTheme .delButton",t=>{const a=d(t.currentTarget).parent(".customTheme.button").attr("customThemeId");ca("deleteCustomTheme",[a])});d(".pageSettings").on("click",".section.themes .customTheme .editButton",t=>{const a=d(t.currentTarget).parent(".customTheme.button").attr("customThemeId");ca("updateCustomTheme",[a],{focusFirstInput:"focusAndSelect"})});d(".pageSettings").on("click",".section[data-config-name='fontFamily'] button[data-config-value='custom']",()=>{ca("applyCustomFont")});async function u2(){const t=u_(),e=d("#savedTextsModal .list").empty();let a="";if(t.length===0)a+="<div>No saved custom texts found</div>";else for(const r of t)a+=`<div class="savedText" data-name="${Is(r)}">
      <div class="button name">${Is(r)}</div>
      <div class="button delete">
      <i class="fas fa-fw fa-trash"></i>
      </div>
      </div>`;e.html(a);const s=u_(!0),n=d("#savedTextsModal .listLong").empty();let i="";if(s.length===0)i+="<div>No saved long custom texts found</div>";else for(const r of s)i+=`<div class="savedLongText" data-name="${Is(r)}">
      <div class="button name">${Is(r)}</div>
      <div class="button ${wx(r)<=0?"disabled":""} resetProgress">reset</div>
      <div class="button delete">
      <i class="fas fa-fw fa-trash"></i>
      </div>
      </div>`;n.html(i),d("#savedTextsModal .list .savedText .button.delete").on("click",r=>{const o=d(r.target).closest(".savedText").data("name");if(o===void 0){y("Failed to show delete modal: no name found",-1);return}ca("deleteCustomText",[o],{modalChain:Hc})}),d("#savedTextsModal .listLong .savedLongText .button.delete").on("click",r=>{const o=d(r.target).closest(".savedLongText").data("name");if(o===void 0){y("Failed to show delete modal: no name found",-1);return}ca("deleteCustomTextLong",[o],{modalChain:Hc})}),d("#savedTextsModal .listLong .savedLongText .button.resetProgress").on("click",r=>{const o=d(r.target).closest(".savedLongText").data("name");if(o===void 0){y("Failed to show delete modal: no name found",-1);return}ca("resetProgressCustomTextLong",[o],{modalChain:Hc})}),d("#savedTextsModal .list .savedText .button.name").on("click",r=>{const o=d(r.target).text();vo(o,!1);const l=PS(o,!1);IS({modalChainData:{text:l,long:!1}})}),d("#savedTextsModal .listLong .savedLongText .button.name").on("click",r=>{const o=d(r.target).text();vo(o,!0);const l=PS(o,!0);IS({modalChainData:{text:l,long:!0}})})}async function BX(t){Hc.show({...t,beforeAnimation:async()=>{u2()}})}function IS(t){Hc.hide({...t})}function PS(t,e){let a=sv(t,e);return e&&(a=a.slice(wx(t))),a.join(" ")}async function qX(){}const Hc=new Pt({dialogId:"savedTextsModal",setup:qX,showOptionsWhenInChain:{beforeAnimation:async()=>{u2()}}});let Pa;const Hv={textToSave:[]};async function WX(t){Hv.textToSave=[],c2.show({...t,beforeAnimation:async(e,a)=>{Hv.textToSave=(a==null?void 0:a.text)??[],d("#saveCustomTextModal .textName").val(""),d("#saveCustomTextModal .isLongText").prop("checked",!1),d("#saveCustomTextModal button.save").prop("disabled",!0)}})}function FX(){c2.hide()}function zX(){const t=d("#saveCustomTextModal .textName").val(),e=d("#saveCustomTextModal .isLongText").prop("checked");return t?Hv.textToSave.length===0?(y("Custom text can't be empty",0),!1):(C3(t,Hv.textToSave,e),vo(t,e),y("Custom text saved",1),!0):(y("Custom text needs a name",0),!1)}function HX(){const t=d("#saveCustomTextModal .textName").val(),e=d("#saveCustomTextModal .isLongText").prop("checked");t?u_(e).includes(t)?(Pa==null||Pa.show("unavailable"),d("#saveCustomTextModal button.save").prop("disabled",!0)):(Pa==null||Pa.show("available"),d("#saveCustomTextModal button.save").prop("disabled",!1)):(Pa==null||Pa.hide(),d("#saveCustomTextModal button.save").prop("disabled",!0))}const ZS=ns(500,HX);async function UX(t){var e,a;Pa=new wr(d("#saveCustomTextModal .textName"),{available:{icon:"fa-check",level:1},unavailable:{icon:"fa-times",level:-1},loading:{icon:"fa-circle-notch",spinIcon:!0,level:0}}),t.addEventListener("submit",s=>{s.preventDefault(),zX()&&FX()}),(e=t.querySelector(".textName"))==null||e.addEventListener("input",s=>{s.target.value.length>0&&(Pa==null||Pa.show("loading"),ZS())}),(a=t.querySelector(".isLongText"))==null||a.addEventListener("input",s=>{s.target.value.length>0&&(Pa==null||Pa.show("loading"),ZS())})}const c2=new Pt({dialogId:"saveCustomTextModal",setup:UX}),je="#customTextModal .modal",O={textarea:yh().join(Tu()?"|":" "),longCustomTextWarning:!1,challengeWarning:!1,customTextMode:"simple",customTextLimits:{word:"",time:"",section:""},removeFancyTypographyEnabled:!0,replaceControlCharactersEnabled:!0,customTextPipeDelimiter:!1,replaceNewlines:"off",removeZeroWidthCharactersEnabled:!0};function Os(){d(`${je} .inputs .group[data-id="mode"] button`).removeClass("active"),d(`${je} .inputs .group[data-id="mode"] button[value="${O.customTextMode}"]`).addClass("active"),d(`${je} .inputs .group[data-id="limit"] input.words`).addClass("hidden"),d(`${je} .inputs .group[data-id="limit"] input.sections`).addClass("hidden"),d(`${je} .inputs .group[data-id="limit"] input.words`).val(O.customTextLimits.word),d(`${je} .inputs .group[data-id="limit"] input.time`).val(O.customTextLimits.time),d(`${je} .inputs .group[data-id="limit"] input.sections`).val(O.customTextLimits.section),O.customTextLimits.word!==""&&d(`${je} .inputs .group[data-id="limit"] input.words`).removeClass("hidden"),O.customTextLimits.section!==""&&d(`${je} .inputs .group[data-id="limit"] input.sections`).removeClass("hidden"),O.customTextPipeDelimiter?(d(`${je} .inputs .group[data-id="limit"] input.sections`).removeClass("hidden"),d(`${je} .inputs .group[data-id="limit"] input.words`).addClass("hidden")):(d(`${je} .inputs .group[data-id="limit"] input.words`).removeClass("hidden"),d(`${je} .inputs .group[data-id="limit"] input.sections`).addClass("hidden")),O.customTextMode==="simple"?(d(`${je} .inputs .group[data-id="limit"]`).addClass("disabled"),d(`${je} .inputs .group[data-id="limit"] input`).val(""),d(`${je} .inputs .group[data-id="limit"] input`).prop("disabled",!0)):(d(`${je} .inputs .group[data-id="limit"]`).removeClass("disabled"),d(`${je} .inputs .group[data-id="limit"] input`).prop("disabled",!1)),d(`${je} .inputs .group[data-id="fancy"] button`).removeClass("active"),d(`${je} .inputs .group[data-id="fancy"] button[value="${O.removeFancyTypographyEnabled}"]`).addClass("active"),d(`${je} .inputs .group[data-id="control"] button`).removeClass("active"),d(`${je} .inputs .group[data-id="control"] button[value="${O.replaceControlCharactersEnabled}"]`).addClass("active"),d(`${je} .inputs .group[data-id="zeroWidth"] button`).removeClass("active"),d(`${je} .inputs .group[data-id="zeroWidth"] button[value="${O.removeZeroWidthCharactersEnabled}"]`).addClass("active"),d(`${je} .inputs .group[data-id="delimiter"] button`).removeClass("active"),d(`${je} .inputs .group[data-id="delimiter"] button[value="${O.customTextPipeDelimiter}"]`).addClass("active"),d(`${je} .inputs .group[data-id="newlines"] button`).removeClass("active"),d(`${je} .inputs .group[data-id="newlines"] button[value="${O.replaceNewlines}"]`).addClass("active"),d(`${je} textarea`).val(O.textarea),O.longCustomTextWarning?(d(`${je} .longCustomTextWarning`).removeClass("hidden"),d(`${je} .randomWordsCheckbox input`).prop("checked",!1),d(`${je} .delimiterCheck input`).prop("checked",!1),d(`${je} .typographyCheck`).prop("checked",!0),d(`${je} .replaceNewlineWithSpace input`).prop("checked",!1),d(`${je} .inputs`).addClass("disabled")):(d(`${je} .longCustomTextWarning`).addClass("hidden"),d(`${je} .inputs`).removeClass("disabled")),O.challengeWarning?(d(`${je} .challengeWarning`).removeClass("hidden"),d(`${je} .randomWordsCheckbox input`).prop("checked",!1),d(`${je} .delimiterCheck input`).prop("checked",!1),d(`${je} .typographyCheck`).prop("checked",!0),d(`${je} .replaceNewlineWithSpace input`).prop("checked",!1),d(`${je} .inputs`).addClass("disabled")):(d(`${je} .challengeWarning`).addClass("hidden"),d(`${je} .inputs`).removeClass("disabled"))}async function p2(t,e){if(O.customTextMode=Rc(),O.customTextMode==="repeat"&&ua()==="word"&&Yt()===yh().length&&(O.customTextMode="simple"),O.customTextLimits.word="",O.customTextLimits.time="",O.customTextLimits.section="",ua()==="word"?O.customTextLimits.word=`${Yt()}`:ua()==="time"?O.customTextLimits.time=`${Yt()}`:ua()==="section"&&(O.customTextLimits.section=`${Yt()}`),O.customTextPipeDelimiter=Tu(),O.longCustomTextWarning=pr()??!1,(e==null?void 0:e.text)!==void 0){e.long!==!0&&pr()&&(vo("",void 0),y("Disabled long custom text progress tracking",0,{duration:5}),O.longCustomTextWarning=!1);const a=e.set??!0?e.text:O.textarea+" "+e.text;O.textarea=a,O.customTextMode="simple",O.customTextLimits.word=`${Uv().length}`,O.customTextLimits.time="",O.customTextLimits.section=""}Os()}async function m2(){!O.challengeWarning&&!O.longCustomTextWarning&&d(`${je} textarea`).trigger("focus")}function f2(t){O.textarea=yh().join(Tu()?"|":" "),Uc.show({...t,beforeAnimation:p2,afterAnimation:m2})}function nk(){Uc.hide()}function VX(){var e;const t=(e=d("#fileInput")[0].files)==null?void 0:e[0];if(t){if(t.type!=="text/plain"){y("File is not a text file",-1,{duration:5});return}const a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=s=>{var i;const n=(i=s.target)==null?void 0:i.result;O.textarea=n,Os(),d("#fileInput").val("")},a.onerror=()=>{y("Failed to read file",-1,{duration:5})}}}function Uv(){let t=O.textarea;return t===""?[]:(t=t.normalize().trim(),t=t.replace(/[\u2000-\u200A\u202F\u205F\u00A0]/g," "),O.removeZeroWidthCharactersEnabled&&(t=t.replace(/[\u200B-\u200D\u2060\uFEFF]/g,"")),O.replaceControlCharactersEnabled&&(t=t.replace(/([^\\]|^)\\t/gm,"$1	"),t=t.replace(/\\n/g,` 
`),t=t.replace(/([^\\]|^)\\n/gm,`$1
`),t=t.replace(/\\\\t/gm,"\\t"),t=t.replace(/\\\\n/gm,"\\n")),t=t.replace(/ +/gm," "),t=t.replace(/( *(\r\n|\r|\n) *)/g,`
 `),O.removeFancyTypographyEnabled&&(t=tA(t)),O.replaceNewlines!=="off"&&(O.replaceNewlines==="periodSpace"?(t=t.replace(/\n/gm,". "),t=t.replace(/\.\. /gm,". "),t=t.replace(/ +/gm," ")):(t=t.replace(/\n/gm," "),t=t.replace(/ +/gm," "))),t.split(O.customTextPipeDelimiter?"|":" ").filter(a=>a!==""))}function KX(){if(O.textarea===""){y("Text cannot be empty",0);return}if([O.customTextLimits.word,O.customTextLimits.time,O.customTextLimits.section].filter(e=>e!=="").length>1){y("You can only specify one limit",0,{duration:5});return}if(O.customTextMode!=="simple"&&O.customTextLimits.word===""&&O.customTextLimits.time===""&&O.customTextLimits.section===""){y("You need to specify a limit",0,{duration:5});return}(O.customTextLimits.section==="0"||O.customTextLimits.word==="0"||O.customTextLimits.time==="0")&&y("Infinite test! Make sure to use Bail Out from the command line to save your result.",0,{duration:7});const t=Uv();O.customTextMode==="simple"?(Pm("repeat"),O.customTextLimits.word=`${t.length}`,O.customTextLimits.time="",O.customTextLimits.section=""):Pm(O.customTextMode),Ql(O.customTextPipeDelimiter),lr(t),O.customTextLimits.word!==""?(Jr("word"),td(parseInt(O.customTextLimits.word))):O.customTextLimits.time!==""?(Jr("time"),td(parseInt(O.customTextLimits.time))):O.customTextLimits.section!==""&&(Jr("section"),td(parseInt(O.customTextLimits.section))),EO(),jt(),u.mode!=="custom"&&$a("custom"),bt(),nk()}function GX(){let t=O.textarea.split(O.customTextPipeDelimiter?" ":"|").join(O.customTextPipeDelimiter?"|":" ");t=t.replace(/\n /g,`
`),O.textarea=t}async function QX(t){var s,n,i,r,o,l,c,m,f,h;(s=t.querySelector("#fileInput"))==null||s.addEventListener("change",VX);const e=t.querySelectorAll(".group[data-id='mode'] button");for(const v of e)v.addEventListener("click",w=>{if(O.customTextMode=w.target.value,O.customTextMode==="simple"){const _=Uv();O.customTextLimits.word=`${_.length}`,O.customTextLimits.time="",O.customTextLimits.section=""}Os()});for(const v of t.querySelectorAll(".group[data-id='fancy'] button"))v.addEventListener("click",w=>{O.removeFancyTypographyEnabled=w.target.value==="true",Os()});for(const v of t.querySelectorAll(".group[data-id='control'] button"))v.addEventListener("click",w=>{O.replaceControlCharactersEnabled=w.target.value==="true",Os()});for(const v of t.querySelectorAll(".group[data-id='zeroWidth'] button"))v.addEventListener("click",w=>{O.removeZeroWidthCharactersEnabled=w.target.value==="true",Os()});for(const v of t.querySelectorAll(".group[data-id='delimiter'] button"))v.addEventListener("click",w=>{O.customTextPipeDelimiter=w.target.value==="true",O.customTextPipeDelimiter&&O.customTextLimits.word!==""&&(O.customTextLimits.word=""),!O.customTextPipeDelimiter&&O.customTextLimits.section!==""&&(O.customTextLimits.section=""),GX(),Os()});for(const v of t.querySelectorAll(".group[data-id='newlines'] button"))v.addEventListener("click",w=>{O.replaceNewlines=w.target.value,Os()});(n=t.querySelector(".group[data-id='limit'] input.words"))==null||n.addEventListener("input",v=>{O.customTextLimits.word=v.target.value,O.customTextLimits.time="",O.customTextLimits.section="",Os()}),(i=t.querySelector(".group[data-id='limit'] input.time"))==null||i.addEventListener("input",v=>{O.customTextLimits.time=v.target.value,O.customTextLimits.word="",O.customTextLimits.section="",Os()}),(r=t.querySelector(".group[data-id='limit'] input.sections"))==null||r.addEventListener("input",v=>{O.customTextLimits.section=v.target.value,O.customTextLimits.word="",O.customTextLimits.time="",Os()});const a=t.querySelector("textarea");a==null||a.addEventListener("input",v=>{O.textarea=v.target.value}),a==null||a.addEventListener("keydown",v=>{if(v.key!=="Tab")return;v.preventDefault();const w=v.target,_=w.selectionStart,S=w.selectionEnd;w.value=w.value.substring(0,_)+"	"+w.value.substring(S),w.selectionStart=w.selectionEnd=_+1,O.textarea=w.value}),a==null||a.addEventListener("keypress",v=>{if(O.longCustomTextWarning||O.challengeWarning){v.preventDefault();return}v.code==="Enter"&&v.ctrlKey&&d(`${je} .button.apply`).trigger("click"),pr()&&Px()!==""&&(vo("",void 0),O.longCustomTextWarning=!1,y("Disabled long custom text progress tracking",0,{duration:5}))}),(o=t.querySelector(".button.apply"))==null||o.addEventListener("click",()=>{KX()}),(l=t.querySelector(".button.wordfilter"))==null||l.addEventListener("click",()=>{W7({modalChain:Uc})}),(c=t.querySelector(".button.showSavedTexts"))==null||c.addEventListener("click",()=>{BX({modalChain:Uc})}),(m=t.querySelector(".button.saveCustomText"))==null||m.addEventListener("click",()=>{WX({modalChain:Uc,modalChainData:{text:Uv()}})}),(f=t.querySelector(".longCustomTextWarning"))==null||f.addEventListener("click",()=>{O.longCustomTextWarning=!1,Os()}),(h=t.querySelector(".challengeWarning"))==null||h.addEventListener("click",()=>{O.challengeWarning=!1,Os()})}const Uc=new Pt({dialogId:"customTextModal",setup:QX,customEscapeHandler:async()=>{nk()},customWrapperClickHandler:async()=>{nk()},showOptionsWhenInChain:{beforeAnimation:p2,afterAnimation:m2}});function h2(){const t=d("#mobileTestConfigModal");if(t.find("button").removeClass("active"),t.find(`.modeGroup button[data-mode='${u.mode}']`).addClass("active"),t.find(".timeGroup").addClass("hidden"),t.find(".wordsGroup").addClass("hidden"),t.find(".quoteGroup").addClass("hidden"),t.find(".customGroup").addClass("hidden"),t.find(`.${u.mode}Group`).removeClass("hidden"),u.punctuation?t.find(".punctuation").addClass("active"):t.find(".punctuation").removeClass("active"),u.numbers?t.find(".numbers").addClass("active"):t.find(".numbers").removeClass("active"),u.mode==="time")t.find(`.timeGroup button[data-time='${u.time}']`).addClass("active"),t.find(".punctuation").removeClass("disabled"),t.find(".numbers").removeClass("disabled");else if(u.mode==="words")t.find(`.wordsGroup button[data-words='${u.words}']`).addClass("active"),t.find(".punctuation").removeClass("disabled"),t.find(".numbers").removeClass("disabled");else if(u.mode==="quote"){for(const e of u.quoteLength)t.find(`.quoteGroup button[data-quoteLength='${e}']`).addClass("active");t.find(".punctuation").addClass("disabled"),t.find(".numbers").addClass("disabled")}else u.mode==="zen"?(t.find(".punctuation").addClass("disabled"),t.find(".numbers").addClass("disabled")):u.mode==="custom"&&(t.find(".punctuation").removeClass("disabled"),t.find(".numbers").removeClass("disabled"))}function YX(){Ac.show({beforeAnimation:async()=>{h2()}})}async function JX(t){var r,o,l;const e=t.querySelectorAll(".wordsGroup button");for(const c of e)c.addEventListener("click",m=>{const h=m.currentTarget.getAttribute("data-words");if(h==="custom")rI({modalChain:Ac});else if(h!==void 0){const v=parseInt(h);ho(v),jt(),bt()}});const a=t.querySelectorAll(".modeGroup button");for(const c of a)c.addEventListener("click",m=>{const h=m.currentTarget.getAttribute("data-mode");h!==u.mode&&($a(h),jt(),bt())});const s=t.querySelectorAll(".timeGroup button");for(const c of s)c.addEventListener("click",m=>{const h=m.currentTarget.getAttribute("data-time");if(h==="custom")HI({modalChain:Ac});else if(h!==void 0){const v=parseInt(h);oi(v),jt(),bt()}});const n=t.querySelectorAll(".quoteGroup button");for(const c of n)c.addEventListener("click",m=>{const f=m.currentTarget,h=parseInt(f.getAttribute("data-quoteLength")??"0",10);if(h===-2)JI({modalChain:Ac});else{let v=h;h===-1&&(v=[0,1,2,3]),Vi(v,!1,m.shiftKey),jt(),bt()}});(r=t.querySelector(".customChange"))==null||r.addEventListener("click",()=>{f2({modalChain:Ac})}),(o=t.querySelector(".punctuation"))==null||o.addEventListener("click",()=>{Fn(!u.punctuation),jt(),bt()}),(l=t.querySelector(".numbers"))==null||l.addEventListener("click",()=>{rn(!u.numbers),jt(),bt()});const i=t.querySelectorAll("button");for(const c of i)c.addEventListener("click",()=>{h2()})}const Ac=new Pt({dialogId:"mobileTestConfigModal",setup:JX}),Qr={missed:"words",slow:!1},Kd="#practiseWordsModal .modal";function Uw(){d(`${Kd} .group[data-id="missed"] button`).removeClass("active"),d(`${Kd} .group[data-id="missed"] button[value="${Qr.missed}"]`).addClass("active"),d(`${Kd} .group[data-id="slow"] button`).removeClass("active"),d(`${Kd} .group[data-id="slow"] button[value="${Qr.slow}"]`).addClass("active"),Qr.missed==="off"&&!Qr.slow?d(`${Kd} .start`).prop("disabled",!0):d(`${Kd} .start`).prop("disabled",!1)}async function XX(t){var e;for(const a of t.querySelectorAll(".group[data-id='missed'] button"))a.addEventListener("click",s=>{Qr.missed=s.target.value,Uw()});for(const a of t.querySelectorAll(".group[data-id='slow'] button"))a.addEventListener("click",s=>{Qr.slow=s.target.value==="true",Uw()});(e=t.querySelector(".start"))==null||e.addEventListener("click",()=>{NS()}),t.addEventListener("submit",a=>{a.preventDefault(),NS()}),Uw()}function eee(t){g2.show(t)}function tee(t=!1){g2.hide({clearModalChain:t})}function NS(){$9(Qr.missed,Qr.slow),tee(!0),bt({practiseMissed:!0})}const g2=new Pt({dialogId:"practiseWordsModal",setup:XX});d(".pageTest").on("click","#testModesNotice .textButton",async t=>{const e=d(t.currentTarget).attr("commands");e!==void 0&&(await Cu()).show({subgroupOverride:e})});d(".pageTest").on("click","#testConfig .wordCount .textButton",t=>{d(t.currentTarget).attr("wordCount")==="custom"&&rI()});d(".pageTest").on("click","#testConfig .time .textButton",t=>{d(t.currentTarget).attr("timeconfig")==="custom"&&HI()});d(".pageTest").on("click",".tags .editTagsButton",()=>{var t,e;if((((e=(t=A())==null?void 0:t.tags)==null?void 0:e.length)??0)>0){const a=d(".pageTest .tags .editTagsButton").attr("data-result-id"),s=d(".pageTest .tags .editTagsButton").attr("data-active-tag-ids"),n=s===""?[]:s.split(",");qI(a,n,"resultPage")}});d(".pageTest").on("click","#mobileTestConfigButton",()=>{YX()});d(".pageTest #rateQuoteButton").on("click",async()=>{if(_t===null){y("Failed to show quote rating popup: no quote",-1);return}yU(_t)});d(".pageTest #reportQuoteButton").on("click",async()=>{if(_t===null){y("Failed to show quote report popup: no quote",-1);return}QI(_t==null?void 0:_t.id)});d(".pageTest").on("click","#testConfig .quoteLength .textButton",t=>{parseInt(d(t.currentTarget).attr("quoteLength")??"0")===-2&&JI()});d(".pageTest").on("click","#testConfig .customText .textButton",()=>{f2()});d(".pageTest").on("click","#practiseWordsButton",()=>{if(u.mode==="zen"){y("Practice words is unsupported in zen mode",0);return}eee()});var a$;(a$=document.querySelector("#pageAbout #supportMeAboutButton"))==null||a$.addEventListener("click",()=>{nE()});var s$;(s$=document.querySelector("#pageAbout #contactPopupButton2"))==null||s$.addEventListener("click",()=>{rE()});const OC={includeBackground:!1};function aee(){ik.show({beforeAnimation:async t=>{t.querySelector("input[type='checkbox']").checked=!1,OC.includeBackground=!1}})}async function see(){const t={c:mr.map(e=>d(`.pageSettings .customTheme .customThemeEdit #${e}[type='color']`).attr("value"))};return OC.includeBackground&&(t.i=u.customBackground,t.s=u.customBackgroundSize,t.f=u.customBackgroundFilter),window.location.origin+"?customTheme="+btoa(JSON.stringify(t))}async function nee(){const t=await see();try{await navigator.clipboard.writeText(t),y("URL Copied to clipboard",1),ik.hide()}catch{y("Looks like we couldn't copy the link straight to your clipboard. Please copy it manually.",0,{duration:5}),rk.show({modalChain:ik,focusFirstInput:"focusAndSelect",beforeAnimation:async a=>{a.querySelector("input").value=t}})}}const ik=new Pt({dialogId:"shareCustomThemeModal",setup:async t=>{var e,a;(e=t.querySelector("button"))==null||e.addEventListener("click",nee),(a=t.querySelector("input[type='checkbox']"))==null||a.addEventListener("change",s=>{OC.includeBackground=s.target.checked})}}),rk=new Pt({dialogId:"shareCustomThemeUrlModal",customEscapeHandler:async()=>{await rk.hide({clearModalChain:!0})},customWrapperClickHandler:async()=>{await rk.hide({clearModalChain:!0})}}),iee=qt.object({security:qt.boolean(),analytics:qt.boolean()}),y2=new Bs({key:"acceptedCookies",schema:iee,fallback:void 0});function Vw(t){y2.set(t)}function ree(){y2.get()===void 0&&v2()}function v2(t){If.show({beforeAnimation:async()=>{t&&b2()},afterAnimation:async()=>{Ka("cookiesModal")||If.destroy()}})}function b2(){var t,e;(t=If.getModal().querySelector(".main"))==null||t.classList.add("hidden"),(e=If.getModal().querySelector(".settings"))==null||e.classList.remove("hidden")}async function Kw(){If.hide({afterAnimation:async()=>{Mb()}})}const If=new Pt({dialogId:"cookiesModal",customEscapeHandler:()=>{},customWrapperClickHandler:()=>{},setup:async t=>{var e,a,s,n,i;(e=t.querySelector(".acceptAll"))==null||e.addEventListener("click",()=>{Vw({security:!0,analytics:!0}),S0(),Kw()}),(a=t.querySelector(".rejectAll"))==null||a.addEventListener("click",()=>{Vw({security:!0,analytics:!1}),Kw()}),(s=t.querySelector(".openSettings"))==null||s.addEventListener("click",()=>{b2()}),(n=t.querySelector(".cookie.ads .textButton"))==null||n.addEventListener("click",()=>{try{ZU()}catch{console.error("Failed to open ad consent UI"),y("Failed to open Ad consent popup. Do you have an ad or cookie popup blocker enabled?",-1)}}),(i=t.querySelector(".acceptSelected"))==null||i.addEventListener("click",()=>{const r=t.querySelector(".cookie.analytics input").checked;Vw({security:!0,analytics:r}),Kw(),r&&S0()})}});var It;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function a(n){throw new Error}t.assertNever=a,t.arrayToEnum=n=>{let i={};for(let r of n)i[r]=r;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),r={};for(let o of i)r[o]=n[o];return t.objectValues(r)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.push(r);return i},t.find=(n,i)=>{for(let r of n)if(i(r))return r},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(r=>typeof r=="string"?`'${r}'`:r).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(It||(It={}));var ok;(function(t){t.mergeShapes=(e,a)=>({...e,...a})})(ok||(ok={}));var ce=It.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fr=t=>{switch(typeof t){case"undefined":return ce.undefined;case"string":return ce.string;case"number":return isNaN(t)?ce.nan:ce.number;case"boolean":return ce.boolean;case"function":return ce.function;case"bigint":return ce.bigint;case"symbol":return ce.symbol;case"object":return Array.isArray(t)?ce.array:t===null?ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ce.promise:typeof Map<"u"&&t instanceof Map?ce.map:typeof Set<"u"&&t instanceof Set?ce.set:typeof Date<"u"&&t instanceof Date?ce.date:ce.object;default:return ce.unknown}},F=It.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),oee=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Nn=class w2 extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let a=e||function(i){return i.message},s={_errors:[]},n=i=>{for(let r of i.issues)if(r.code==="invalid_union")r.unionErrors.map(n);else if(r.code==="invalid_return_type")n(r.returnTypeError);else if(r.code==="invalid_arguments")n(r.argumentsError);else if(r.path.length===0)s._errors.push(a(r));else{let o=s,l=0;for(;l<r.path.length;){let c=r.path[l];l===r.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(a(r))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),s}static assert(e){if(!(e instanceof w2))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,It.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){let a={},s=[];for(let n of this.issues)n.path.length>0?(a[n.path[0]]=a[n.path[0]]||[],a[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:a}}get formErrors(){return this.flatten()}};Nn.create=t=>new Nn(t);var yu=(t,e)=>{let a;switch(t.code){case F.invalid_type:t.received===ce.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case F.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,It.jsonStringifyReplacer)}`;break;case F.unrecognized_keys:a=`Unrecognized key(s) in object: ${It.joinValues(t.keys,", ")}`;break;case F.invalid_union:a="Invalid input";break;case F.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${It.joinValues(t.options)}`;break;case F.invalid_enum_value:a=`Invalid enum value. Expected ${It.joinValues(t.options)}, received '${t.received}'`;break;case F.invalid_arguments:a="Invalid function arguments";break;case F.invalid_return_type:a="Invalid function return type";break;case F.invalid_date:a="Invalid date";break;case F.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:It.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case F.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case F.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case F.custom:a="Invalid input";break;case F.invalid_intersection_types:a="Intersection results could not be merged";break;case F.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case F.not_finite:a="Number must be finite";break;default:a=e.defaultError,It.assertNever(t)}return{message:a}},_2=yu;function dee(t){_2=t}function Vv(){return _2}var Kv=t=>{let{data:e,path:a,errorMaps:s,issueData:n}=t,i=[...a,...n.path||[]],r={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="",l=s.filter(c=>!!c).slice().reverse();for(let c of l)o=c(r,{data:e,defaultError:o}).message;return{...n,path:i,message:o}},lee=[];function ae(t,e){let a=Vv(),s=Kv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===yu?void 0:yu].filter(n=>!!n)});t.common.issues.push(s)}var Ts=class k2{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){let s=[];for(let n of a){if(n.status==="aborted")return Ke;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,a){let s=[];for(let n of a){let i=await n.key,r=await n.value;s.push({key:i,value:r})}return k2.mergeObjectSync(e,s)}static mergeObjectSync(e,a){let s={};for(let n of a){let{key:i,value:r}=n;if(i.status==="aborted"||r.status==="aborted")return Ke;i.status==="dirty"&&e.dirty(),r.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof r.value<"u"||n.alwaysSet)&&(s[i.value]=r.value)}return{status:e.value,value:s}}},Ke=Object.freeze({status:"aborted"}),Gv=t=>({status:"dirty",value:t}),ss=t=>({status:"valid",value:t}),dk=t=>t.status==="aborted",lk=t=>t.status==="dirty",Pf=t=>t.status==="valid",Zf=t=>typeof Promise<"u"&&t instanceof Promise;function Qv(t,e,a,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function x2(t,e,a,s,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,a),a}var xe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(xe||(xe={}));var Lc,Mc,Oi=class{constructor(t,e,a,s){this._cachedPath=[],this.parent=t,this.data=e,this._path=a,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},RS=(t,e)=>{if(Pf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let a=new Nn(t.common.issues);return this._error=a,this._error}}};function rt(t){if(!t)return{};let{errorMap:e,invalid_type_error:a,required_error:s,description:n}=t;if(e&&(a||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,r)=>{var o,l;let{message:c}=t;return i.code==="invalid_enum_value"?{message:c??r.defaultError}:typeof r.data>"u"?{message:(o=c??s)!==null&&o!==void 0?o:r.defaultError}:i.code!=="invalid_type"?{message:r.defaultError}:{message:(l=c??a)!==null&&l!==void 0?l:r.defaultError}},description:n}}var ft=class{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return Fr(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:Fr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ts,ctx:{common:t.parent.common,data:t.data,parsedType:Fr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let e=this._parse(t);if(Zf(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){let e=this._parse(t);return Promise.resolve(e)}parse(t,e){let a=this.safeParse(t,e);if(a.success)return a.data;throw a.error}safeParse(t,e){var a;let s={common:{issues:[],async:(a=e==null?void 0:e.async)!==null&&a!==void 0?a:!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fr(t)},n=this._parseSync({data:t,path:s.path,parent:s});return RS(s,n)}async parseAsync(t,e){let a=await this.safeParseAsync(t,e);if(a.success)return a.data;throw a.error}async safeParseAsync(t,e){let a={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fr(t)},s=this._parse({data:t,path:a.path,parent:a}),n=await(Zf(s)?s:Promise.resolve(s));return RS(a,n)}refine(t,e){let a=s=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(s):e;return this._refinement((s,n)=>{let i=t(s),r=()=>n.addIssue({code:F.custom,...a(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(o=>o?!0:(r(),!1)):i?!0:(r(),!1)})}refinement(t,e){return this._refinement((a,s)=>t(a)?!0:(s.addIssue(typeof e=="function"?e(a,s):e),!1))}_refinement(t){return new Un({schema:this,typeName:Re.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return ki.create(this,this._def)}nullable(){return $o.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Md.create(this,this._def)}promise(){return wu.create(this,this._def)}or(t){return Wf.create([this,t],this._def)}and(t){return Ff.create(this,t,this._def)}transform(t){return new Un({...rt(this._def),schema:this,typeName:Re.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let e=typeof t=="function"?t:()=>t;return new Vf({...rt(this._def),innerType:this,defaultValue:e,typeName:Re.ZodDefault})}brand(){return new IC({typeName:Re.ZodBranded,type:this,...rt(this._def)})}catch(t){let e=typeof t=="function"?t:()=>t;return new Kf({...rt(this._def),innerType:this,catchValue:e,typeName:Re.ZodCatch})}describe(t){let e=this.constructor;return new e({...this._def,description:t})}pipe(t){return PC.create(this,t)}readonly(){return Gf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},uee=/^c[^\s-]{8,}$/i,cee=/^[0-9a-z]+$/,pee=/^[0-9A-HJKMNP-TV-Z]{26}$/,mee=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fee=/^[a-z0-9_-]{21}$/i,hee=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,gee=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,yee="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Gw,vee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,bee=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,wee=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,C2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_ee=new RegExp(`^${C2}$`);function T2(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function kee(t){return new RegExp(`^${T2(t)}$`)}function S2(t){let e=`${C2}T${T2(t)}`,a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function xee(t,e){return!!((e==="v4"||!e)&&vee.test(t)||(e==="v6"||!e)&&bee.test(t))}var vu=class Ec extends ft{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ce.string){let n=this._getOrReturnCtx(e);return ae(n,{code:F.invalid_type,expected:ce.string,received:n.parsedType}),Ke}let a=new Ts,s;for(let n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:F.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="max")e.data.length>n.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:F.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="length"){let i=e.data.length>n.value,r=e.data.length<n.value;(i||r)&&(s=this._getOrReturnCtx(e,s),i?ae(s,{code:F.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):r&&ae(s,{code:F.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),a.dirty())}else if(n.kind==="email")gee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"email",code:F.invalid_string,message:n.message}),a.dirty());else if(n.kind==="emoji")Gw||(Gw=new RegExp(yee,"u")),Gw.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"emoji",code:F.invalid_string,message:n.message}),a.dirty());else if(n.kind==="uuid")mee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"uuid",code:F.invalid_string,message:n.message}),a.dirty());else if(n.kind==="nanoid")fee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"nanoid",code:F.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid")uee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"cuid",code:F.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid2")cee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"cuid2",code:F.invalid_string,message:n.message}),a.dirty());else if(n.kind==="ulid")pee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"ulid",code:F.invalid_string,message:n.message}),a.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ae(s,{validation:"url",code:F.invalid_string,message:n.message}),a.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"regex",code:F.invalid_string,message:n.message}),a.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(s=this._getOrReturnCtx(e,s),ae(s,{code:F.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),a.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(s=this._getOrReturnCtx(e,s),ae(s,{code:F.invalid_string,validation:{startsWith:n.value},message:n.message}),a.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(s=this._getOrReturnCtx(e,s),ae(s,{code:F.invalid_string,validation:{endsWith:n.value},message:n.message}),a.dirty()):n.kind==="datetime"?S2(n).test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:F.invalid_string,validation:"datetime",message:n.message}),a.dirty()):n.kind==="date"?_ee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:F.invalid_string,validation:"date",message:n.message}),a.dirty()):n.kind==="time"?kee(n).test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:F.invalid_string,validation:"time",message:n.message}),a.dirty()):n.kind==="duration"?hee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"duration",code:F.invalid_string,message:n.message}),a.dirty()):n.kind==="ip"?xee(e.data,n.version)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"ip",code:F.invalid_string,message:n.message}),a.dirty()):n.kind==="base64"?wee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"base64",code:F.invalid_string,message:n.message}),a.dirty()):It.assertNever(n);return{status:a.value,value:e.data}}_regex(e,a,s){return this.refinement(n=>e.test(n),{validation:a,code:F.invalid_string,...xe.errToObj(s)})}_addCheck(e){return new Ec({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...xe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...xe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...xe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...xe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...xe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...xe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...xe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...xe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...xe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...xe.errToObj(e)})}datetime(e){var a,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(a=e==null?void 0:e.offset)!==null&&a!==void 0?a:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...xe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...xe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...xe.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,...xe.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,...xe.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,...xe.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,...xe.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,...xe.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,...xe.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,...xe.errToObj(a)})}nonempty(e){return this.min(1,xe.errToObj(e))}trim(){return new Ec({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ec({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ec({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};vu.create=t=>{var e;return new vu({checks:[],typeName:Re.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...rt(t)})};function Cee(t,e){let a=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=a>s?a:s,i=parseInt(t.toFixed(n).replace(".","")),r=parseInt(e.toFixed(n).replace(".",""));return i%r/Math.pow(10,n)}var Nf=class uk extends ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ce.number){let n=this._getOrReturnCtx(e);return ae(n,{code:F.invalid_type,expected:ce.number,received:n.parsedType}),Ke}let a,s=new Ts;for(let n of this._def.checks)n.kind==="int"?It.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),ae(a,{code:F.invalid_type,expected:"integer",received:"float",message:n.message}),s.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),ae(a,{code:F.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),ae(a,{code:F.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),s.dirty()):n.kind==="multipleOf"?Cee(e.data,n.value)!==0&&(a=this._getOrReturnCtx(e,a),ae(a,{code:F.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),ae(a,{code:F.not_finite,message:n.message}),s.dirty()):It.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,xe.toString(a))}gt(e,a){return this.setLimit("min",e,!1,xe.toString(a))}lte(e,a){return this.setLimit("max",e,!0,xe.toString(a))}lt(e,a){return this.setLimit("max",e,!1,xe.toString(a))}setLimit(e,a,s,n){return new uk({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:xe.toString(n)}]})}_addCheck(e){return new uk({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:xe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xe.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:xe.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:xe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:xe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:xe.toString(e)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&It.isInteger(e.value))}get isFinite(){let e=null,a=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(a===null||s.value>a)&&(a=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(a)&&Number.isFinite(e)}};Nf.create=t=>new Nf({checks:[],typeName:Re.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...rt(t)});var Rf=class ck extends ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ce.bigint){let n=this._getOrReturnCtx(e);return ae(n,{code:F.invalid_type,expected:ce.bigint,received:n.parsedType}),Ke}let a,s=new Ts;for(let n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),ae(a,{code:F.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),ae(a,{code:F.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),s.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),ae(a,{code:F.not_multiple_of,multipleOf:n.value,message:n.message}),s.dirty()):It.assertNever(n);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,xe.toString(a))}gt(e,a){return this.setLimit("min",e,!1,xe.toString(a))}lte(e,a){return this.setLimit("max",e,!0,xe.toString(a))}lt(e,a){return this.setLimit("max",e,!1,xe.toString(a))}setLimit(e,a,s,n){return new ck({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:s,message:xe.toString(n)}]})}_addCheck(e){return new ck({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:xe.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:xe.toString(a)})}get minValue(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}};Rf.create=t=>{var e;return new Rf({checks:[],typeName:Re.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...rt(t)})};var jf=class extends ft{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ce.boolean){let e=this._getOrReturnCtx(t);return ae(e,{code:F.invalid_type,expected:ce.boolean,received:e.parsedType}),Ke}return ss(t.data)}};jf.create=t=>new jf({typeName:Re.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...rt(t)});var Df=class $2 extends ft{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ce.date){let n=this._getOrReturnCtx(e);return ae(n,{code:F.invalid_type,expected:ce.date,received:n.parsedType}),Ke}if(isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return ae(n,{code:F.invalid_date}),Ke}let a=new Ts,s;for(let n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:F.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),a.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:F.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),a.dirty()):It.assertNever(n);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $2({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:xe.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:xe.toString(a)})}get minDate(){let e=null;for(let a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}};Df.create=t=>new Df({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Re.ZodDate,...rt(t)});var Yv=class extends ft{_parse(t){if(this._getType(t)!==ce.symbol){let e=this._getOrReturnCtx(t);return ae(e,{code:F.invalid_type,expected:ce.symbol,received:e.parsedType}),Ke}return ss(t.data)}};Yv.create=t=>new Yv({typeName:Re.ZodSymbol,...rt(t)});var Bf=class extends ft{_parse(t){if(this._getType(t)!==ce.undefined){let e=this._getOrReturnCtx(t);return ae(e,{code:F.invalid_type,expected:ce.undefined,received:e.parsedType}),Ke}return ss(t.data)}};Bf.create=t=>new Bf({typeName:Re.ZodUndefined,...rt(t)});var qf=class extends ft{_parse(t){if(this._getType(t)!==ce.null){let e=this._getOrReturnCtx(t);return ae(e,{code:F.invalid_type,expected:ce.null,received:e.parsedType}),Ke}return ss(t.data)}};qf.create=t=>new qf({typeName:Re.ZodNull,...rt(t)});var bu=class extends ft{constructor(){super(...arguments),this._any=!0}_parse(t){return ss(t.data)}};bu.create=t=>new bu({typeName:Re.ZodAny,...rt(t)});var cd=class extends ft{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ss(t.data)}};cd.create=t=>new cd({typeName:Re.ZodUnknown,...rt(t)});var yr=class extends ft{_parse(t){let e=this._getOrReturnCtx(t);return ae(e,{code:F.invalid_type,expected:ce.never,received:e.parsedType}),Ke}};yr.create=t=>new yr({typeName:Re.ZodNever,...rt(t)});var Jv=class extends ft{_parse(t){if(this._getType(t)!==ce.undefined){let e=this._getOrReturnCtx(t);return ae(e,{code:F.invalid_type,expected:ce.void,received:e.parsedType}),Ke}return ss(t.data)}};Jv.create=t=>new Jv({typeName:Re.ZodVoid,...rt(t)});var Md=class Kg extends ft{_parse(e){let{ctx:a,status:s}=this._processInputParams(e),n=this._def;if(a.parsedType!==ce.array)return ae(a,{code:F.invalid_type,expected:ce.array,received:a.parsedType}),Ke;if(n.exactLength!==null){let r=a.data.length>n.exactLength.value,o=a.data.length<n.exactLength.value;(r||o)&&(ae(a,{code:r?F.too_big:F.too_small,minimum:o?n.exactLength.value:void 0,maximum:r?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&a.data.length<n.minLength.value&&(ae(a,{code:F.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&a.data.length>n.maxLength.value&&(ae(a,{code:F.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),a.common.async)return Promise.all([...a.data].map((r,o)=>n.type._parseAsync(new Oi(a,r,a.path,o)))).then(r=>Ts.mergeArray(s,r));let i=[...a.data].map((r,o)=>n.type._parseSync(new Oi(a,r,a.path,o)));return Ts.mergeArray(s,i)}get element(){return this._def.type}min(e,a){return new Kg({...this._def,minLength:{value:e,message:xe.toString(a)}})}max(e,a){return new Kg({...this._def,maxLength:{value:e,message:xe.toString(a)}})}length(e,a){return new Kg({...this._def,exactLength:{value:e,message:xe.toString(a)}})}nonempty(e){return this.min(1,e)}};Md.create=(t,e)=>new Md({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Re.ZodArray,...rt(e)});function rl(t){if(t instanceof ln){let e={};for(let a in t.shape){let s=t.shape[a];e[a]=ki.create(rl(s))}return new ln({...t._def,shape:()=>e})}else return t instanceof Md?new Md({...t._def,type:rl(t.element)}):t instanceof ki?ki.create(rl(t.unwrap())):t instanceof $o?$o.create(rl(t.unwrap())):t instanceof So?So.create(t.items.map(e=>rl(e))):t}var ln=class bn extends ft{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),a=It.objectKeys(e);return this._cached={shape:e,keys:a}}_parse(e){if(this._getType(e)!==ce.object){let l=this._getOrReturnCtx(e);return ae(l,{code:F.invalid_type,expected:ce.object,received:l.parsedType}),Ke}let{status:a,ctx:s}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof yr&&this._def.unknownKeys==="strip"))for(let l in s.data)i.includes(l)||r.push(l);let o=[];for(let l of i){let c=n[l],m=s.data[l];o.push({key:{status:"valid",value:l},value:c._parse(new Oi(s,m,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof yr){let l=this._def.unknownKeys;if(l==="passthrough")for(let c of r)o.push({key:{status:"valid",value:c},value:{status:"valid",value:s.data[c]}});else if(l==="strict")r.length>0&&(ae(s,{code:F.unrecognized_keys,keys:r}),a.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let c of r){let m=s.data[c];o.push({key:{status:"valid",value:c},value:l._parse(new Oi(s,m,s.path,c)),alwaysSet:c in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let l=[];for(let c of o){let m=await c.key,f=await c.value;l.push({key:m,value:f,alwaysSet:c.alwaysSet})}return l}).then(l=>Ts.mergeObjectSync(a,l)):Ts.mergeObjectSync(a,o)}get shape(){return this._def.shape()}strict(e){return xe.errToObj,new bn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,s)=>{var n,i,r,o;let l=(r=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,a,s).message)!==null&&r!==void 0?r:s.defaultError;return a.code==="unrecognized_keys"?{message:(o=xe.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new bn({...this._def,unknownKeys:"strip"})}passthrough(){return new bn({...this._def,unknownKeys:"passthrough"})}extend(e){return new bn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new bn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Re.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new bn({...this._def,catchall:e})}pick(e){let a={};return It.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(a[s]=this.shape[s])}),new bn({...this._def,shape:()=>a})}omit(e){let a={};return It.objectKeys(this.shape).forEach(s=>{e[s]||(a[s]=this.shape[s])}),new bn({...this._def,shape:()=>a})}deepPartial(){return rl(this)}partial(e){let a={};return It.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?a[s]=n:a[s]=n.optional()}),new bn({...this._def,shape:()=>a})}required(e){let a={};return It.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])a[s]=this.shape[s];else{let n=this.shape[s];for(;n instanceof ki;)n=n._def.innerType;a[s]=n}}),new bn({...this._def,shape:()=>a})}keyof(){return I2(It.objectKeys(this.shape))}};ln.create=(t,e)=>new ln({shape:()=>t,unknownKeys:"strip",catchall:yr.create(),typeName:Re.ZodObject,...rt(e)});ln.strictCreate=(t,e)=>new ln({shape:()=>t,unknownKeys:"strict",catchall:yr.create(),typeName:Re.ZodObject,...rt(e)});ln.lazycreate=(t,e)=>new ln({shape:t,unknownKeys:"strip",catchall:yr.create(),typeName:Re.ZodObject,...rt(e)});var Wf=class extends ft{_parse(t){let{ctx:e}=this._processInputParams(t),a=this._def.options;function s(n){for(let r of n)if(r.result.status==="valid")return r.result;for(let r of n)if(r.result.status==="dirty")return e.common.issues.push(...r.ctx.common.issues),r.result;let i=n.map(r=>new Nn(r.ctx.common.issues));return ae(e,{code:F.invalid_union,unionErrors:i}),Ke}if(e.common.async)return Promise.all(a.map(async n=>{let i={...e,common:{...e.common,issues:[]},parent:null};return{result:await n._parseAsync({data:e.data,path:e.path,parent:i}),ctx:i}})).then(s);{let n,i=[];for(let o of a){let l={...e,common:{...e.common,issues:[]},parent:null},c=o._parseSync({data:e.data,path:e.path,parent:l});if(c.status==="valid")return c;c.status==="dirty"&&!n&&(n={result:c,ctx:l}),l.common.issues.length&&i.push(l.common.issues)}if(n)return e.common.issues.push(...n.ctx.common.issues),n.result;let r=i.map(o=>new Nn(o));return ae(e,{code:F.invalid_union,unionErrors:r}),Ke}}get options(){return this._def.options}};Wf.create=(t,e)=>new Wf({options:t,typeName:Re.ZodUnion,...rt(e)});var Or=t=>t instanceof zf?Or(t.schema):t instanceof Un?Or(t.innerType()):t instanceof Hf?[t.value]:t instanceof Zh?t.options:t instanceof Uf?It.objectValues(t.enum):t instanceof Vf?Or(t._def.innerType):t instanceof Bf?[void 0]:t instanceof qf?[null]:t instanceof ki?[void 0,...Or(t.unwrap())]:t instanceof $o?[null,...Or(t.unwrap())]:t instanceof IC||t instanceof Gf?Or(t.unwrap()):t instanceof Kf?Or(t._def.innerType):[],A2=class L2 extends ft{_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ce.object)return ae(a,{code:F.invalid_type,expected:ce.object,received:a.parsedType}),Ke;let s=this.discriminator,n=a.data[s],i=this.optionsMap.get(n);return i?a.common.async?i._parseAsync({data:a.data,path:a.path,parent:a}):i._parseSync({data:a.data,path:a.path,parent:a}):(ae(a,{code:F.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Ke)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,s){let n=new Map;for(let i of a){let r=Or(i.shape[e]);if(!r.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of r){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new L2({typeName:Re.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:n,...rt(s)})}};function pk(t,e){let a=Fr(t),s=Fr(e);if(t===e)return{valid:!0,data:t};if(a===ce.object&&s===ce.object){let n=It.objectKeys(e),i=It.objectKeys(t).filter(o=>n.indexOf(o)!==-1),r={...t,...e};for(let o of i){let l=pk(t[o],e[o]);if(!l.valid)return{valid:!1};r[o]=l.data}return{valid:!0,data:r}}else if(a===ce.array&&s===ce.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let r=t[i],o=e[i],l=pk(r,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return a===ce.date&&s===ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Ff=class extends ft{_parse(t){let{status:e,ctx:a}=this._processInputParams(t),s=(n,i)=>{if(dk(n)||dk(i))return Ke;let r=pk(n.value,i.value);return r.valid?((lk(n)||lk(i))&&e.dirty(),{status:e.value,value:r.data}):(ae(a,{code:F.invalid_intersection_types}),Ke)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([n,i])=>s(n,i)):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}};Ff.create=(t,e,a)=>new Ff({left:t,right:e,typeName:Re.ZodIntersection,...rt(a)});var So=class M2 extends ft{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ce.array)return ae(s,{code:F.invalid_type,expected:ce.array,received:s.parsedType}),Ke;if(s.data.length<this._def.items.length)return ae(s,{code:F.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ke;!this._def.rest&&s.data.length>this._def.items.length&&(ae(s,{code:F.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());let n=[...s.data].map((i,r)=>{let o=this._def.items[r]||this._def.rest;return o?o._parse(new Oi(s,i,s.path,r)):null}).filter(i=>!!i);return s.common.async?Promise.all(n).then(i=>Ts.mergeArray(a,i)):Ts.mergeArray(a,n)}get items(){return this._def.items}rest(e){return new M2({...this._def,rest:e})}};So.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new So({items:t,typeName:Re.ZodTuple,rest:null,...rt(e)})};var E2=class mk extends ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ce.object)return ae(s,{code:F.invalid_type,expected:ce.object,received:s.parsedType}),Ke;let n=[],i=this._def.keyType,r=this._def.valueType;for(let o in s.data)n.push({key:i._parse(new Oi(s,o,s.path,o)),value:r._parse(new Oi(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?Ts.mergeObjectAsync(a,n):Ts.mergeObjectSync(a,n)}get element(){return this._def.valueType}static create(e,a,s){return a instanceof ft?new mk({keyType:e,valueType:a,typeName:Re.ZodRecord,...rt(s)}):new mk({keyType:vu.create(),valueType:e,typeName:Re.ZodRecord,...rt(a)})}},Xv=class extends ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:e,ctx:a}=this._processInputParams(t);if(a.parsedType!==ce.map)return ae(a,{code:F.invalid_type,expected:ce.map,received:a.parsedType}),Ke;let s=this._def.keyType,n=this._def.valueType,i=[...a.data.entries()].map(([r,o],l)=>({key:s._parse(new Oi(a,r,a.path,[l,"key"])),value:n._parse(new Oi(a,o,a.path,[l,"value"]))}));if(a.common.async){let r=new Map;return Promise.resolve().then(async()=>{for(let o of i){let l=await o.key,c=await o.value;if(l.status==="aborted"||c.status==="aborted")return Ke;(l.status==="dirty"||c.status==="dirty")&&e.dirty(),r.set(l.value,c.value)}return{status:e.value,value:r}})}else{let r=new Map;for(let o of i){let l=o.key,c=o.value;if(l.status==="aborted"||c.status==="aborted")return Ke;(l.status==="dirty"||c.status==="dirty")&&e.dirty(),r.set(l.value,c.value)}return{status:e.value,value:r}}}};Xv.create=(t,e,a)=>new Xv({valueType:e,keyType:t,typeName:Re.ZodMap,...rt(a)});var eb=class fk extends ft{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.parsedType!==ce.set)return ae(s,{code:F.invalid_type,expected:ce.set,received:s.parsedType}),Ke;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(ae(s,{code:F.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),a.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(ae(s,{code:F.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),a.dirty());let i=this._def.valueType;function r(l){let c=new Set;for(let m of l){if(m.status==="aborted")return Ke;m.status==="dirty"&&a.dirty(),c.add(m.value)}return{status:a.value,value:c}}let o=[...s.data.values()].map((l,c)=>i._parse(new Oi(s,l,s.path,c)));return s.common.async?Promise.all(o).then(l=>r(l)):r(o)}min(e,a){return new fk({...this._def,minSize:{value:e,message:xe.toString(a)}})}max(e,a){return new fk({...this._def,maxSize:{value:e,message:xe.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}};eb.create=(t,e)=>new eb({valueType:t,minSize:null,maxSize:null,typeName:Re.ZodSet,...rt(e)});var O2=class Gg extends ft{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:a}=this._processInputParams(e);if(a.parsedType!==ce.function)return ae(a,{code:F.invalid_type,expected:ce.function,received:a.parsedType}),Ke;function s(o,l){return Kv({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Vv(),yu].filter(c=>!!c),issueData:{code:F.invalid_arguments,argumentsError:l}})}function n(o,l){return Kv({data:o,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Vv(),yu].filter(c=>!!c),issueData:{code:F.invalid_return_type,returnTypeError:l}})}let i={errorMap:a.common.contextualErrorMap},r=a.data;if(this._def.returns instanceof wu){let o=this;return ss(async function(...l){let c=new Nn([]),m=await o._def.args.parseAsync(l,i).catch(h=>{throw c.addIssue(s(l,h)),c}),f=await Reflect.apply(r,this,m);return await o._def.returns._def.type.parseAsync(f,i).catch(h=>{throw c.addIssue(n(f,h)),c})})}else{let o=this;return ss(function(...l){let c=o._def.args.safeParse(l,i);if(!c.success)throw new Nn([s(l,c.error)]);let m=Reflect.apply(r,this,c.data),f=o._def.returns.safeParse(m,i);if(!f.success)throw new Nn([n(m,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Gg({...this._def,args:So.create(e).rest(cd.create())})}returns(e){return new Gg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,s){return new Gg({args:e||So.create([]).rest(cd.create()),returns:a||cd.create(),typeName:Re.ZodFunction,...rt(s)})}},zf=class extends ft{get schema(){return this._def.getter()}_parse(t){let{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};zf.create=(t,e)=>new zf({getter:t,typeName:Re.ZodLazy,...rt(e)});var Hf=class extends ft{_parse(t){if(t.data!==this._def.value){let e=this._getOrReturnCtx(t);return ae(e,{received:e.data,code:F.invalid_literal,expected:this._def.value}),Ke}return{status:"valid",value:t.data}}get value(){return this._def.value}};Hf.create=(t,e)=>new Hf({value:t,typeName:Re.ZodLiteral,...rt(e)});function I2(t,e){return new Zh({values:t,typeName:Re.ZodEnum,...rt(e)})}var Zh=class hk extends ft{constructor(){super(...arguments),Lc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let a=this._getOrReturnCtx(e),s=this._def.values;return ae(a,{expected:It.joinValues(s),received:a.parsedType,code:F.invalid_type}),Ke}if(Qv(this,Lc)||x2(this,Lc,new Set(this._def.values)),!Qv(this,Lc).has(e.data)){let a=this._getOrReturnCtx(e),s=this._def.values;return ae(a,{received:a.data,code:F.invalid_enum_value,options:s}),Ke}return ss(e.data)}get options(){return this._def.values}get enum(){let e={};for(let a of this._def.values)e[a]=a;return e}get Values(){let e={};for(let a of this._def.values)e[a]=a;return e}get Enum(){let e={};for(let a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return hk.create(e,{...this._def,...a})}exclude(e,a=this._def){return hk.create(this.options.filter(s=>!e.includes(s)),{...this._def,...a})}};Lc=new WeakMap;Zh.create=I2;var Uf=class extends ft{constructor(){super(...arguments),Mc.set(this,void 0)}_parse(t){let e=It.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(t);if(a.parsedType!==ce.string&&a.parsedType!==ce.number){let s=It.objectValues(e);return ae(a,{expected:It.joinValues(s),received:a.parsedType,code:F.invalid_type}),Ke}if(Qv(this,Mc)||x2(this,Mc,new Set(It.getValidEnumValues(this._def.values))),!Qv(this,Mc).has(t.data)){let s=It.objectValues(e);return ae(a,{received:a.data,code:F.invalid_enum_value,options:s}),Ke}return ss(t.data)}get enum(){return this._def.values}};Mc=new WeakMap;Uf.create=(t,e)=>new Uf({values:t,typeName:Re.ZodNativeEnum,...rt(e)});var wu=class extends ft{unwrap(){return this._def.type}_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==ce.promise&&e.common.async===!1)return ae(e,{code:F.invalid_type,expected:ce.promise,received:e.parsedType}),Ke;let a=e.parsedType===ce.promise?e.data:Promise.resolve(e.data);return ss(a.then(s=>this._def.type.parseAsync(s,{path:e.path,errorMap:e.common.contextualErrorMap})))}};wu.create=(t,e)=>new wu({type:t,typeName:Re.ZodPromise,...rt(e)});var Un=class extends ft{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:e,ctx:a}=this._processInputParams(t),s=this._def.effect||null,n={addIssue:i=>{ae(a,i),i.fatal?e.abort():e.dirty()},get path(){return a.path}};if(n.addIssue=n.addIssue.bind(n),s.type==="preprocess"){let i=s.transform(a.data,n);if(a.common.async)return Promise.resolve(i).then(async r=>{if(e.value==="aborted")return Ke;let o=await this._def.schema._parseAsync({data:r,path:a.path,parent:a});return o.status==="aborted"?Ke:o.status==="dirty"||e.value==="dirty"?Gv(o.value):o});{if(e.value==="aborted")return Ke;let r=this._def.schema._parseSync({data:i,path:a.path,parent:a});return r.status==="aborted"?Ke:r.status==="dirty"||e.value==="dirty"?Gv(r.value):r}}if(s.type==="refinement"){let i=r=>{let o=s.refinement(r,n);if(a.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return r};if(a.common.async===!1){let r=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return r.status==="aborted"?Ke:(r.status==="dirty"&&e.dirty(),i(r.value),{status:e.value,value:r.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(r=>r.status==="aborted"?Ke:(r.status==="dirty"&&e.dirty(),i(r.value).then(()=>({status:e.value,value:r.value}))))}if(s.type==="transform")if(a.common.async===!1){let i=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Pf(i))return i;let r=s.transform(i.value,n);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:r}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(i=>Pf(i)?Promise.resolve(s.transform(i.value,n)).then(r=>({status:e.value,value:r})):i);It.assertNever(s)}};Un.create=(t,e,a)=>new Un({schema:t,typeName:Re.ZodEffects,effect:e,...rt(a)});Un.createWithPreprocess=(t,e,a)=>new Un({schema:e,effect:{type:"preprocess",transform:t},typeName:Re.ZodEffects,...rt(a)});var ki=class extends ft{_parse(t){return this._getType(t)===ce.undefined?ss(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};ki.create=(t,e)=>new ki({innerType:t,typeName:Re.ZodOptional,...rt(e)});var $o=class extends ft{_parse(t){return this._getType(t)===ce.null?ss(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};$o.create=(t,e)=>new $o({innerType:t,typeName:Re.ZodNullable,...rt(e)});var Vf=class extends ft{_parse(t){let{ctx:e}=this._processInputParams(t),a=e.data;return e.parsedType===ce.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};Vf.create=(t,e)=>new Vf({innerType:t,typeName:Re.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...rt(e)});var Kf=class extends ft{_parse(t){let{ctx:e}=this._processInputParams(t),a={...e,common:{...e.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return Zf(s)?s.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Nn(a.common.issues)},input:a.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Nn(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}};Kf.create=(t,e)=>new Kf({innerType:t,typeName:Re.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...rt(e)});var tb=class extends ft{_parse(t){if(this._getType(t)!==ce.nan){let e=this._getOrReturnCtx(t);return ae(e,{code:F.invalid_type,expected:ce.nan,received:e.parsedType}),Ke}return{status:"valid",value:t.data}}};tb.create=t=>new tb({typeName:Re.ZodNaN,...rt(t)});var Tee=Symbol("zod_brand"),IC=class extends ft{_parse(t){let{ctx:e}=this._processInputParams(t),a=e.data;return this._def.type._parse({data:a,path:e.path,parent:e})}unwrap(){return this._def.type}},PC=class P2 extends ft{_parse(e){let{status:a,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let n=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Ke:n.status==="dirty"?(a.dirty(),Gv(n.value)):this._def.out._parseAsync({data:n.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Ke:n.status==="dirty"?(a.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,a){return new P2({in:e,out:a,typeName:Re.ZodPipeline})}},Gf=class extends ft{_parse(t){let e=this._def.innerType._parse(t),a=s=>(Pf(s)&&(s.value=Object.freeze(s.value)),s);return Zf(e)?e.then(s=>a(s)):a(e)}unwrap(){return this._def.innerType}};Gf.create=(t,e)=>new Gf({innerType:t,typeName:Re.ZodReadonly,...rt(e)});function Z2(t,e={},a){return t?bu.create().superRefine((s,n)=>{var i,r;if(!t(s)){let o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,l=(r=(i=o.fatal)!==null&&i!==void 0?i:a)!==null&&r!==void 0?r:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:l})}}):bu.create()}var See={object:ln.lazycreate},Re;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Re||(Re={}));var $ee=(t,e={message:`Input not instance of ${t.name}`})=>Z2(a=>a instanceof t,e),N2=vu.create,R2=Nf.create,Aee=tb.create,Lee=Rf.create,j2=jf.create,Mee=Df.create,Eee=Yv.create,Oee=Bf.create,Iee=qf.create,Pee=bu.create,Zee=cd.create,Nee=yr.create,Ree=Jv.create,jee=Md.create,Dee=ln.create,Bee=ln.strictCreate,qee=Wf.create,Wee=A2.create,Fee=Ff.create,zee=So.create,Hee=E2.create,Uee=Xv.create,Vee=eb.create,Kee=O2.create,Gee=zf.create,gk=Hf.create,Qee=Zh.create,Yee=Uf.create,Jee=wu.create,jS=Un.create,Xee=ki.create,ete=$o.create,tte=Un.createWithPreprocess,ate=PC.create,ste=()=>N2().optional(),nte=()=>R2().optional(),ite=()=>j2().optional(),rte={string:t=>vu.create({...t,coerce:!0}),number:t=>Nf.create({...t,coerce:!0}),boolean:t=>jf.create({...t,coerce:!0}),bigint:t=>Rf.create({...t,coerce:!0}),date:t=>Df.create({...t,coerce:!0})},ote=Ke,k=Object.freeze({__proto__:null,defaultErrorMap:yu,setErrorMap:dee,getErrorMap:Vv,makeIssue:Kv,EMPTY_PATH:lee,addIssueToContext:ae,ParseStatus:Ts,INVALID:Ke,DIRTY:Gv,OK:ss,isAborted:dk,isDirty:lk,isValid:Pf,isAsync:Zf,get util(){return It},get objectUtil(){return ok},ZodParsedType:ce,getParsedType:Fr,ZodType:ft,datetimeRegex:S2,ZodString:vu,ZodNumber:Nf,ZodBigInt:Rf,ZodBoolean:jf,ZodDate:Df,ZodSymbol:Yv,ZodUndefined:Bf,ZodNull:qf,ZodAny:bu,ZodUnknown:cd,ZodNever:yr,ZodVoid:Jv,ZodArray:Md,ZodObject:ln,ZodUnion:Wf,ZodDiscriminatedUnion:A2,ZodIntersection:Ff,ZodTuple:So,ZodRecord:E2,ZodMap:Xv,ZodSet:eb,ZodFunction:O2,ZodLazy:zf,ZodLiteral:Hf,ZodEnum:Zh,ZodNativeEnum:Uf,ZodPromise:wu,ZodEffects:Un,ZodTransformer:Un,ZodOptional:ki,ZodNullable:$o,ZodDefault:Vf,ZodCatch:Kf,ZodNaN:tb,BRAND:Tee,ZodBranded:IC,ZodPipeline:PC,ZodReadonly:Gf,custom:Z2,Schema:ft,ZodSchema:ft,late:See,get ZodFirstPartyTypeKind(){return Re},coerce:rte,any:Pee,array:jee,bigint:Lee,boolean:j2,date:Mee,discriminatedUnion:Wee,effect:jS,enum:Qee,function:Kee,instanceof:$ee,intersection:Fee,lazy:Gee,literal:gk,map:Uee,nan:Aee,nativeEnum:Yee,never:Nee,null:Iee,nullable:ete,number:R2,object:Dee,oboolean:ite,onumber:nte,optional:Xee,ostring:ste,pipeline:ate,preprocess:tte,promise:Jee,record:Hee,set:Vee,strictObject:Bee,string:N2,symbol:Eee,transformer:jS,tuple:zee,undefined:Oee,union:qee,unknown:Zee,void:Ree,NEVER:ote,ZodIssueCode:F,quotelessJson:oee,ZodError:Nn}),Qg=k.string().regex(/^\d+$/,'Needs to be a number or a number represented as a string e.g. "10".').or(k.number().transform(String)),iw=()=>k.string().regex(/^[a-zA-Z0-9_]+$/),dte=iw(),lte=iw().max(50),ute=k.string().max(50).regex(/^[a-zA-Z0-9_+]+$/,"Can only contain letters [a-zA-Z0-9_+]");k.string().nullable().optional().transform(t=>t??void 0);k.number().nonnegative().max(100);k.number().nonnegative().max(420);k.enum(["repeat","random","shuffle"]);k.enum(["word","time","section"]);var D2=k.enum(["normal","expert","master"]),Gu=k.object({acc:k.number().nonnegative().max(100),consistency:k.number().nonnegative().max(100),difficulty:D2,lazyMode:k.boolean().optional(),language:k.string().max(100).regex(/[\w+]+/),punctuation:k.boolean().optional(),numbers:k.boolean().optional(),raw:k.number().nonnegative(),wpm:k.number().nonnegative(),timestamp:k.number().nonnegative()}),cte=k.object({time:k.record(Qg.describe("Number of seconds as string"),k.array(Gu)),words:k.record(Qg.describe("Number of words as string"),k.array(Gu)),quote:k.record(Qg,k.array(Gu)),custom:k.record(k.literal("custom"),k.array(Gu)),zen:k.record(k.literal("zen"),k.array(Gu))});k.union([k.literal("10"),k.literal("25"),k.literal("50"),k.literal("100")]);k.union([k.literal("15"),k.literal("30"),k.literal("60"),k.literal("120")]);k.union([k.literal("short"),k.literal("medium"),k.literal("long"),k.literal("thicc")]);var pte=cte.keyof();k.union([Qg,gk("zen"),gk("custom")],{errorMap:()=>({message:'Needs to be either a number, "zen" or "custom".'})});var mte=k.enum(["off","slow","medium","fast"]),fte=k.enum(["off","esc","tab","enter"]),hte=k.union([k.literal(-3),k.literal(-2),k.literal(-1),k.literal(0),k.literal(1),k.literal(2),k.literal(3)]),gte=k.array(hte),DS=k.enum(["off","default","block","outline","underline","carrot","banana"]),yte=k.enum(["off","on","max"]),vte=k.enum(["off","below","replace"]),bte=k.enum(["off","bar","text","mini"]),Qw=k.enum(["off","text","mini"]),wte=k.enum(["off","on","fav","light","dark","custom"]),_te=k.enum(["black","sub","text","main"]),kte=k.enum(["0.25","0.5","0.75","1"]),xte=k.enum(["off","word","letter"]),Cte=k.enum(["off","static","react","next"]),Tte=k.enum(["staggered","alice","matrix","split","split_matrix","steno","steno_matrix"]),Ste=k.enum(["lowercase","uppercase","blank","dynamic"]),$te=k.enum(["always","layout","never"]),Ate=k.number().min(.5).max(3.5).step(.1),Lte=k.enum(["manual","on"]),Mte=k.enum(["off","1","2","3","4"]),Ete=k.enum(["off","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"]),Ote=k.number().min(0).max(1),Ite=k.enum(["off","average","pb","tagPb","last","custom","daily"]),Pte=k.tuple([k.enum(["on","off"]),k.enum(["on","off"]),k.enum(["on","off"]),k.enum(["on","off"])]),Zte=k.enum(["off","custom"]),Nte=k.enum(["off","letter","word","next_word","next_two_words","next_three_words"]),Rte=k.enum(["off","letter","word"]),jte=k.enum(["wpm","cpm","wps","cps","wph"]),Dte=k.enum(["off","result","on","sellout"]),Bte=k.enum(["off","custom"]),qte=k.enum(["off","typing"]),Wte=k.enum(["off","on","keymap"]),Fte=k.enum(["cover","contain","max"]),zte=k.tuple([k.number(),k.number(),k.number(),k.number()]),Hte=k.string().regex(/^[0-9a-zA-Z_#]+$/),Ute=k.enum(["off","1","2","3","4"]),Vte=k.enum(["off","fixed","flex"]),Kte=k.enum(["off","speed","acc","both"]),ei=k.string().regex(/^#([\da-f]{3}){1,2}$/i),Gte=D2,Qte=k.tuple([ei,ei,ei,ei,ei,ei,ei,ei,ei,ei]),Yte=k.array(iw().max(50)),Jte=k.string().max(100).regex(/[\w#]+/),Xte=k.number().nonnegative(),eae=k.number().nonnegative(),tae=k.number().nonnegative().max(100),aae=k.number().nonnegative(),sae=k.number().int().nonnegative(),nae=k.number().int().nonnegative(),iae=k.string().max(50).regex(/^[a-zA-Z0-9_\-+.]+$/),Yw=iw().max(50),rae=k.string().max(50).regex(/^[a-zA-Z0-9\-_]+$/gi),oae=k.string().max(50).regex(/^[a-zA-Z0-9\-_]+$/gi),dae=k.number().positive(),lae=k.number().min(20).max(1e3).or(k.literal(0)),uae=k.string().regex(/(https|http):\/\/(www\.|).+\..+\/.+(\.png|\.gif|\.jpeg|\.jpg)/gi).or(k.literal("")),cae=k.object({theme:Yw,themeLight:Yw,themeDark:Yw,autoSwitchTheme:k.boolean(),customTheme:k.boolean(),customThemeColors:Qte,favThemes:Yte,showKeyTips:k.boolean(),smoothCaret:mte,quickRestart:fte,punctuation:k.boolean(),numbers:k.boolean(),words:nae,time:sae,mode:pte,quoteLength:gte,language:ute,fontSize:dae,freedomMode:k.boolean(),difficulty:Gte,blindMode:k.boolean(),quickEnd:k.boolean(),caretStyle:DS,paceCaretStyle:DS,flipTestColors:k.boolean(),layout:oae,funbox:Jte,confidenceMode:yte,indicateTypos:vte,timerStyle:bte,liveSpeedStyle:Qw,liveAccStyle:Qw,liveBurstStyle:Qw,colorfulMode:k.boolean(),randomTheme:wte,timerColor:_te,timerOpacity:kte,stopOnError:xte,showAllLines:k.boolean(),keymapMode:Cte,keymapStyle:Tte,keymapLegendStyle:Ste,keymapLayout:rae,keymapShowTopRow:$te,keymapSize:Ate,fontFamily:iae,smoothLineScroll:k.boolean(),alwaysShowDecimalPlaces:k.boolean(),alwaysShowWordsHistory:k.boolean(),singleListCommandLine:Lte,capsLockWarning:k.boolean(),playSoundOnError:Mte,playSoundOnClick:Ete,soundVolume:Ote,startGraphsAtZero:k.boolean(),showOutOfFocusWarning:k.boolean(),paceCaret:Ite,paceCaretCustomSpeed:Xte,repeatedPace:k.boolean(),accountChart:Pte,minWpm:Zte,minWpmCustomSpeed:eae,highlightMode:Nte,tapeMode:Rte,typingSpeedUnit:jte,ads:Dte,hideExtraLetters:k.boolean(),strictSpace:k.boolean(),minAcc:Bte,minAccCustom:tae,monkey:k.boolean(),repeatQuotes:qte,oppositeShiftMode:Wte,customBackground:uae,customBackgroundSize:Fte,customBackgroundFilter:zte,customLayoutfluid:Hte,monkeyPowerLevel:Ute,minBurst:Vte,minBurstCustomSpeed:aae,burstHeatmap:k.boolean(),britishEnglish:k.boolean(),lazyMode:k.boolean(),showAverage:Kte,maxLineWidth:lae}).strict(),pae=cae.partial(),mae=k.string().regex(/^[0-9a-zA-Z_-]+$/).max(16),fae=k.enum(["full","partial"]),_u=k.enum(["test","behavior","input","sound","caret","appearance","theme","hideElements","ads","hidden"]),B2=k.array(_u).min(1).superRefine((t,e)=>{_u.options.forEach(a=>{t.filter(s=>s===a).length>1&&e.addIssue({code:k.ZodIssueCode.custom,message:"No duplicates allowed."})})}),hae=k.object({_id:dte,name:mae,settingGroups:B2.nullable().optional(),config:pae.extend({tags:k.array(lte).optional()})});hae.partial({config:!0,settingGroups:!0});const Nt={presetType:"full",checkboxes:new Map(_u.options.map(t=>[t,!0])),setPresetToCurrent:!1};function Jw(t,e,a){if(!ma()){y("You are offline",0,{duration:2});return}W2.show({focusFirstInput:!0,beforeAnimation:async()=>{d("#editPresetModal .modal .text").addClass("hidden"),vae(),t==="add"?(d("#editPresetModal .modal").attr("data-action","add"),d("#editPresetModal .modal .popupTitle").html("Add new preset"),d("#editPresetModal .modal .submit").html("add"),d("#editPresetModal .modal input").val(""),d("#editPresetModal .modal input").removeClass("hidden"),d("#editPresetModal .modal label.changePresetToCurrentCheckbox").addClass("hidden"),d("#editPresetModal .modal .inputs").removeClass("hidden"),d("#editPresetModal .modal .presetType").removeClass("hidden"),d("#editPresetModal .modal .presetNameTitle").removeClass("hidden"),Nt.presetType="full"):t==="edit"&&e!==void 0&&a!==void 0?(d("#editPresetModal .modal").attr("data-action","edit"),d("#editPresetModal .modal").attr("data-preset-id",e),d("#editPresetModal .modal .popupTitle").html("Edit preset"),d("#editPresetModal .modal .submit").html("save"),d("#editPresetModal .modal input").val(a),d("#editPresetModal .modal input").removeClass("hidden"),d("#editPresetModal .modal label.changePresetToCurrentCheckbox").removeClass("hidden"),d("#editPresetModal .modal .presetNameTitle").removeClass("hidden"),Nt.setPresetToCurrent=!1,await q2()):t==="remove"&&e!==void 0&&a!==void 0&&(d("#editPresetModal .modal").attr("data-action","remove"),d("#editPresetModal .modal").attr("data-preset-id",e),d("#editPresetModal .modal .popupTitle").html("Delete preset"),d("#editPresetModal .modal .submit").html("delete"),d("#editPresetModal .modal input").addClass("hidden"),d("#editPresetModal .modal label.changePresetToCurrentCheckbox").addClass("hidden"),d("#editPresetModal .modal .text").removeClass("hidden"),d("#editPresetModal .modal .deletePrompt").text(`Are you sure you want to delete the preset ${a}?`),d("#editPresetModal .modal .inputs").addClass("hidden"),d("#editPresetModal .modal .presetType").addClass("hidden"),d("#editPresetModal .modal .presetNameTitle").addClass("hidden")),ZC()}})}async function gae(t){for(const a of Nt.checkboxes.keys())Nt.checkboxes.set(a,!1);const e=await Q7(t);if(e===void 0){y("Preset not found",-1);return}if(e.settingGroups===void 0||e.settingGroups===null){Nt.presetType="full";for(const a of Nt.checkboxes.keys())Nt.checkboxes.set(a,!0)}else Nt.presetType="partial",e.settingGroups.forEach(a=>Nt.checkboxes.set(a,!0));Nt.setPresetToCurrent=!1,ZC()}function yae(){_u.options.forEach(e=>{const a=d(`#editPresetModal .modal .checkboxList .checkboxTitlePair[data-id="${e}"] input`);a.on("change",s=>{Nt.checkboxes.set(e,a.prop("checked"))})});const t=d("#editPresetModal .modal .changePresetToCurrentCheckbox input");t.on("change",async()=>{Nt.setPresetToCurrent=t.prop("checked"),await q2()})}function vae(){function t(a){return a.replace(/([a-z])([A-Z])/g,"$1 $2")}const e=d("#editPresetModal .modal .inputs .checkboxList").empty();_u.options.forEach(a=>{const s=t(a),n=`<label class="checkboxTitlePair" data-id="${a}">
              <input type="checkbox" />
              <div class="title">${s}</div>
              </label>`;e.append(n)});for(const a of Nt.checkboxes.keys())Nt.checkboxes.set(a,!0);yae()}function ZC(){_u.options.forEach(t=>{d(`#editPresetModal .modal .checkboxList .checkboxTitlePair[data-id="${t}"] input`).prop("checked",Nt.checkboxes.get(t))}),d("#editPresetModal .modal .presetType button").removeClass("active"),d(`#editPresetModal .modal .presetType button[value="${Nt.presetType}"]`).addClass("active"),d("#editPresetModal .modal .partialPresetGroups").removeClass("hidden"),Nt.presetType==="full"&&d("#editPresetModal .modal .partialPresetGroups").addClass("hidden")}async function q2(){if(d("#editPresetModal .modal label.changePresetToCurrentCheckbox input").prop("checked",Nt.setPresetToCurrent),Nt.setPresetToCurrent){const t=d("#editPresetModal .modal").attr("data-preset-id");await gae(t),d("#editPresetModal .modal .inputs").removeClass("hidden"),d("#editPresetModal .modal .presetType").removeClass("hidden")}else d("#editPresetModal .modal .inputs").addClass("hidden"),d("#editPresetModal .modal .presetType").addClass("hidden")}function bae(){W2.hide()}async function wae(){var l;const t=d("#editPresetModal .modal").attr("data-action"),e=d("#editPresetModal .modal input").val(),a=e.replaceAll(" ","_"),s=d("#editPresetModal .modal").attr("data-preset-id"),n=d("#editPresetModal .modal label input").prop("checked"),i=((l=A())==null?void 0:l.presets)??[];if(t===void 0)return;if(["add","edit"].includes(t)&&Nt.presetType==="partial"&&Array.from(Nt.checkboxes.values()).every(c=>!c)){y("At least one setting group must be active while saving partial presets",0);return}if(["add","edit"].includes(t)&&a.replace(/^_+|_+$/g,"").length===0){y("Preset name cannot be empty",0);return}if(bae(),Ct(),t==="add"){const c=BS(),m=Xw(),f=await K.presets.add({body:{name:a,config:c,...Nt.presetType==="partial"&&{settingGroups:m}}});f.status!==200||f.body.data===null?y("Failed to add preset: "+f.body.message.replace(a,e),-1):(y("Preset added",1,{duration:2}),i.push({name:a,config:c,...Nt.presetType==="partial"&&{settingGroups:m},display:e,_id:f.body.data.presetId}))}else if(t==="edit"){const c=i.filter(v=>v._id===s)[0];if(c===void 0){y("Preset not found",-1);return}const m=BS(),f=Nt.presetType==="partial"?Xw():null,h=await K.presets.save({body:{_id:s,name:a,...n&&{config:m,settingGroups:f}}});h.status!==200?y("Failed to edit preset: "+h.body.message,-1):(y("Preset updated",1),c.name=a,c.display=a.replace(/_/g," "),n&&(c.config=m,Nt.presetType==="partial"?c.settingGroups=Xw():c.settingGroups=null))}else if(t==="remove"){const c=await K.presets.delete({params:{presetId:s}});c.status!==200?y("Failed to remove preset: "+c.body.message,-1):(y("Preset removed",1),i.forEach((m,f)=>{m._id===s&&i.splice(f,1)}))}Vr(),Qe()}function _ae(t){const e=["theme","themeLight","themeDark","autoSwitchTheme","customTheme","customThemeColors","favThemes","flipTestColors","colorfulMode","randomTheme","customBackground","customBackgroundSize","customBackgroundFilter"],a=["showKeyTips","capsLockWarning","showOutOfFocusWarning","showAverage"],s=["smoothCaret","caretStyle","paceCaretStyle","paceCaret","paceCaretCustomSpeed","repeatedPace"],n=["quickRestart","difficulty","blindMode","funbox","alwaysShowWordsHistory","singleListCommandLine","minWpm","minWpmCustomSpeed","minAcc","minAccCustom","repeatQuotes","customLayoutfluid","minBurst","minBurstCustomSpeed","britishEnglish","tags"],i=["punctuation","words","time","numbers","mode","quoteLength","language","burstHeatmap"],r=["fontSize","timerStyle","liveSpeedStyle","liveAccStyle","liveBurstStyle","timerColor","timerOpacity","showAllLines","keymapMode","keymapStyle","keymapLegendStyle","keymapLayout","keymapShowTopRow","keymapSize","fontFamily","smoothLineScroll","alwaysShowDecimalPlaces","startGraphsAtZero","highlightMode","tapeMode","typingSpeedUnit","maxLineWidth"],o=["freedomMode","quickEnd","layout","confidenceMode","indicateTypos","stopOnError","hideExtraLetters","strictSpace","oppositeShiftMode","lazyMode"],l=["playSoundOnError","playSoundOnClick","soundVolume"],c=["accountChart","monkey","monkeyPowerLevel"],m=["ads"];if(e.includes(t))return"theme";if(a.includes(t))return"hideElements";if(s.includes(t))return"caret";if(n.includes(t))return"behavior";if(i.includes(t))return"test";if(r.includes(t))return"appearance";if(o.includes(t))return"input";if(l.includes(t))return"sound";if(c.includes(t))return"hidden";if(m.includes(t))return"ads";throw new Error(`${t} setting not part of any setting group`)}function kae(t){const e={};return Object.keys(Ba).filter(a=>Nt.checkboxes.get(_ae(a))===!0).forEach(a=>{const s=a,n=t[s]!==void 0?t[s]:Ba[s];e[s]=n}),e}function Xw(){return B2.parse(Array.from(Nt.checkboxes.entries()).filter(([,t])=>t).map(([t])=>t))}function BS(){var n;const t=Nt.presetType==="partial"?kae(i_()):i_(),a=(((n=A())==null?void 0:n.tags)??[]).filter(i=>i.active).map(i=>i._id),s=Nt.presetType==="full"||Nt.checkboxes.get("behavior")===!0;return{...t,...s&&{tags:a}}}async function xae(t){t.addEventListener("submit",e=>{e.preventDefault(),wae()}),fae.options.forEach(e=>{const a=t.querySelector(`.presetType button[value="${e}"]`);a!==null&&a.addEventListener("click",()=>{Nt.presetType=e,ZC()})})}const W2=new Pt({dialogId:"editPresetModal",setup:xae});function fg(t,e,a,s){if(!ma()){y("You are offline",0,{duration:2});return}F2.show({focusFirstInput:!0,modalChain:s,beforeAnimation:async()=>{d("#editTagModal .modal .text").addClass("hidden"),t==="add"?(d("#editTagModal .modal").attr("data-action","add"),d("#editTagModal .modal .title").html("Add new tag"),d("#editTagModal .modal button").html("add"),d("#editTagModal .modal input").val(""),d("#editTagModal .modal input").removeClass("hidden")):t==="edit"&&e!==void 0&&a!==void 0?(d("#editTagModal .modal").attr("data-action","edit"),d("#editTagModal .modal").attr("data-tag-id",e),d("#editTagModal .modal .title").html("Edit tag"),d("#editTagModal .modal button").html("save"),d("#editTagModal .modal input").val(a),d("#editTagModal .modal input").removeClass("hidden")):t==="remove"&&e!==void 0&&a!==void 0?(d("#editTagModal .modal").attr("data-action","remove"),d("#editTagModal .modal").attr("data-tag-id",e),d("#editTagModal .modal .title").html("Delete tag"),d("#editTagModal .modal .text").removeClass("hidden"),d("#editTagModal .modal .text").html(`Are you sure you want to delete tag ${a}?`),d("#editTagModal .modal button").html("delete"),d("#editTagModal .modal input").addClass("hidden")):t==="clearPb"&&e!==void 0&&a!==void 0&&(d("#editTagModal .modal").attr("data-action","clearPb"),d("#editTagModal .modal").attr("data-tag-id",e),d("#editTagModal .modal .title").html("Clear personal bests"),d("#editTagModal .modal .text").removeClass("hidden"),d("#editTagModal .modal .text").html(`Are you sure you want to clear personal bests for tag ${a}?`),d("#editTagModal .modal button").html("clear"),d("#editTagModal .modal input").addClass("hidden"))}})}function Cae(t=!1){F2.hide({clearModalChain:t})}async function Tae(){var n,i,r,o,l,c,m,f;const t=d("#editTagModal .modal").attr("data-action"),e=d("#editTagModal .modal input").val(),a=e.replaceAll(" ","_"),s=d("#editTagModal .modal").attr("data-tag-id");if(Cae(!0),Ct(),t==="add"){const h=await K.users.createTag({body:{tagName:a}});if(h.status!==200)y("Failed to add tag: "+h.body.message.replace(a,e),-1);else{if(h.body.data===null){y("Tag was added but data returned was null",-1),Qe();return}y("Tag added",1),(i=(n=A())==null?void 0:n.tags)==null||i.push({display:e,name:h.body.data.name,_id:h.body.data._id,personalBests:{time:{},words:{},quote:{},zen:{},custom:{}}}),Vr()}}else if(t==="edit"){const h=await K.users.editTag({body:{tagId:s,newName:a}});h.status!==200?y("Failed to edit tag: "+h.body.message,-1):(y("Tag updated",1),(o=(r=A())==null?void 0:r.tags)==null||o.forEach(v=>{v._id===s&&(v.name=a,v.display=e)}),Vr())}else if(t==="remove"){const h=await K.users.deleteTag({params:{tagId:s}});h.status!==200?y("Failed to remove tag: "+h.body.message,-1):(y("Tag removed",1),(c=(l=A())==null?void 0:l.tags)==null||c.forEach((v,w)=>{var _,S;v._id===s&&((S=(_=A())==null?void 0:_.tags)==null||S.splice(w,1))}),Vr())}else if(t==="clearPb"){const h=await K.users.deleteTagPersonalBest({params:{tagId:s}});h.status!==200?y("Failed to clear tag pb: "+h.body.message,-1):(y("Tag PB cleared",1),(f=(m=A())==null?void 0:m.tags)==null||f.forEach(v=>{v._id===s&&(v.personalBests={time:{},words:{},quote:{},zen:{},custom:{}})}),Vr())}Qe()}const F2=new Pt({dialogId:"editTagModal",setup:async t=>{t.addEventListener("submit",e=>{e.preventDefault(),Tae()})}}),Js=document.querySelector("#pageSettings");var n$;(n$=Js==null?void 0:Js.querySelector("#shareCustomThemeButton"))==null||n$.addEventListener("click",()=>{aee()});var i$;(i$=Js==null?void 0:Js.querySelector(".section.updateCookiePreferences button"))==null||i$.addEventListener("click",()=>{v2(!0)});var r$;(r$=Js==null?void 0:Js.querySelector(".section.presets"))==null||r$.addEventListener("click",t=>{var a,s,n,i;const e=t.target;if(e.classList.contains("addPresetButton"))Jw("add");else if(e.classList.contains("editButton")){const r=(a=e.parentElement)==null?void 0:a.getAttribute("data-id"),o=(s=e.parentElement)==null?void 0:s.getAttribute("data-display");if(r===void 0||o===void 0||r===""||o===""||r===null||o===null){y("Failed to edit preset: Could not find preset id or name",-1);return}Jw("edit",r,o)}else if(e.classList.contains("removeButton")){const r=(n=e.parentElement)==null?void 0:n.getAttribute("data-id"),o=(i=e.parentElement)==null?void 0:i.getAttribute("data-display");if(r===void 0||o===void 0||r===""||o===""||r===null||o===null){y("Failed to remove preset: Could not find preset id or name",-1);return}Jw("remove",r,o)}});var o$;(o$=Js==null?void 0:Js.querySelector(".section.tags"))==null||o$.addEventListener("click",t=>{var a,s,n,i,r,o;const e=t.target;if(e.classList.contains("addTagButton"))fg("add");else if(e.classList.contains("editButton")){const l=(a=e.parentElement)==null?void 0:a.getAttribute("data-id"),c=(s=e.parentElement)==null?void 0:s.getAttribute("data-display");if(l===void 0||c===void 0||l===""||c===""||l===null||c===null){y("Failed to edit tag: Could not find tag id or name",-1);return}fg("edit",l,c)}else if(e.classList.contains("clearPbButton")){const l=(n=e.parentElement)==null?void 0:n.getAttribute("data-id"),c=(i=e.parentElement)==null?void 0:i.getAttribute("data-display");if(l===void 0||c===void 0||l===""||c===""||l===null||c===null){y("Failed to clear tag PB: Could not find tag id or name",-1);return}fg("clearPb",l,c)}else if(e.classList.contains("removeButton")){const l=(r=e.parentElement)==null?void 0:r.getAttribute("data-id"),c=(o=e.parentElement)==null?void 0:o.getAttribute("data-display");if(l===void 0||c===void 0||l===""||c===""||l===null||c===null){y("Failed to remove tag: Could not find tag id or name",-1);return}fg("remove",l,c)}});function Sae(t){var r;const e=H2.getModal();e.querySelector("table tbody").innerHTML="",e.querySelector("table thead tr td").textContent=t,e.querySelector("table thead tr td span.unit").textContent=u.typingSpeedUnit;const a=A();if(!a)return;const s=(r=a.personalBests)==null?void 0:r[t];if(s===void 0)return;const n=[];Object.keys(s).forEach(function(o){let l=s[o]??[];l=l.sort(function(c,m){return m.wpm-c.wpm}),l.forEach(function(c){c.mode2=o,n.push(c)})});let i;n.forEach(o=>{var m;let l='-<br><span class="sub">-</span>';const c=new Date(o.timestamp);o.timestamp&&(l=zt(c,"dd MMM yyyy")+"<br><div class='sub'>"+zt(c,"HH:mm")+"</div>"),(m=e.querySelector("table tbody"))==null||m.insertAdjacentHTML("beforeend",`
      <tr>
        <td>${i===o.mode2?"":o.mode2}</td>
        <td>
          ${Te.typingSpeed(o.wpm)}
          <br />
          <span class="sub">${Te.accuracy(o.acc)}</span>
        </td>
        <td>
          ${Te.typingSpeed(o.raw)}
          <br />
          <span class="sub">${Te.percentage(o.consistency)}</span>
        </td>
        <td>${o.difficulty}</td>
        <td>${o.language?oo(o.language):"-"}</td>
        <td>${o.punctuation?'<i class="fas fa-check"></i>':""}</td>
        <td>${o.numbers?'<i class="fas fa-check"></i>':""}</td>
        <td>${o.lazyMode?'<i class="fas fa-check"></i>':""}</td>
        <td>${l}</td>
      </tr>
    `),i=o.mode2})}function z2(t){H2.show({beforeAnimation:async()=>{Sae(t)}})}const H2=new Pt({dialogId:"pbTablesModal"});function $ae(){if(!ma()){y("You are offline",0,{duration:2});return}G2.show({beforeAnimation:async()=>{Lae(),Mae()}})}function Aae(){G2.hide({afterAnimation:async()=>{const t=A();t&&Av("account",t)}})}const NC=d("#editProfileModal .bio"),RC=d("#editProfileModal .keyboard"),U2=d("#editProfileModal .twitter"),V2=d("#editProfileModal .github"),K2=d("#editProfileModal .website"),hg=d("#editProfileModal .badgeSelectionContainer");let fl=-1;function Lae(){var i;const t=A();if(!t)return;const e=((i=t.inventory)==null?void 0:i.badges)??[],{bio:a,keyboard:s,socialProfiles:n}=t.details??{};fl=-1,NC.val(a??""),RC.val(s??""),U2.val((n==null?void 0:n.twitter)??""),V2.val((n==null?void 0:n.github)??""),K2.val((n==null?void 0:n.website)??""),hg.html(""),e==null||e.forEach(r=>{r.selected&&(fl=r.id);const o=$v(r.id,!1,!0),l=`<button type="button" class="badgeSelectionItem ${r.selected?"selected":""}" selection-id=${r.id}>${o}</button>`;hg.append(l)}),hg.prepend(`<button type="button" class="badgeSelectionItem ${fl===-1?"selected":""}" selection-id=-1>
      <div class="badge">
        <i class="fas fa-frown-open"></i>
        <div class="text">none</div>
      </div>
    </button>`),d(".badgeSelectionItem").on("click",({currentTarget:r})=>{const o=d(r).attr("selection-id");fl=parseInt(o,10),hg.find(".badgeSelectionItem").removeClass("selected"),d(r).addClass("selected")})}function Mae(){new pf(NC,250),new pf(RC,75)}function Eae(){const t=NC.val()??"",e=RC.val()??"",a=U2.val()??"",s=V2.val()??"",n=K2.val()??"";return{bio:t,keyboard:e,socialProfiles:{twitter:a,github:s,website:n}}}async function Oae(){var i,r,o,l,c;const t=A();if(!t)return;const e=Eae(),a=39;if(((i=e.socialProfiles)==null?void 0:i.github)!==void 0&&((r=e.socialProfiles)==null?void 0:r.github.length)>a){y(`GitHub username exceeds maximum allowed length (${a} characters).`,-1);return}const s=20;if(((o=e.socialProfiles)==null?void 0:o.twitter)!==void 0&&((l=e.socialProfiles)==null?void 0:l.twitter.length)>s){y(`Twitter username exceeds maximum allowed length (${s} characters).`,-1);return}Ct();const n=await K.users.updateProfile({body:{...e,selectedBadgeId:fl}});if(Qe(),n.status!==200){y("Failed to update profile: "+n.body.message,-1);return}t.details=n.body.data??e,(c=t.inventory)==null||c.badges.forEach(m=>{m.id===fl?m.selected=!0:delete m.selected}),y("Profile updated",1),Aae()}const G2=new Pt({dialogId:"editProfileModal",setup:async t=>{t.addEventListener("submit",async e=>{e.preventDefault(),await Oae()})}});function Iae(t){Q2.show({...t,focusFirstInput:!0,beforeAnimation:async e=>{e.querySelector("input").value=""}})}function Pae(t=!1){Q2.hide({clearModalChain:t})}function Zae(){const t=d("#newFilterPresetModal input").val();if(t===""){y("Name cannot be empty",0);return}OG(t),Pae(!0)}async function Nae(t){t.addEventListener("submit",e=>{e.preventDefault(),Zae()})}const Q2=new Pt({dialogId:"newFilterPresetModal",setup:Nae}),Nh=document.querySelector("#pageAccount");d(Nh).on("click",".pbsTime .showAllButton",()=>{z2("time")});d(Nh).on("click",".pbsWords .showAllButton",()=>{z2("words")});d(Nh).on("click",".editProfileButton",()=>{if(!Se()){y("You must be logged in to edit your profile",0);return}const t=A();if(!t){y("Failed to open edit profile modal: No user snapshot found",-1);return}if(t.banned===!0){y("Banned users cannot edit their profile",0);return}$ae()});d(Nh).on("click",".group.history .resultEditTagsButton",t=>{const e=d(t.target).attr("data-result-id"),a=d(t.target).attr("data-tags");qI(e??"",JSON.parse(a??"[]"),"accountPage")});d(Nh).find("button.createFilterPresetBtn").on("click",()=>{Iae()});let ls;function Rae(t){Y2.show({mode:"dialog",focusFirstInput:!0,beforeAnimation:async()=>{Mu("googleSignUpModal"),Ah(d("#googleSignUpModal .captcha")[0],"googleSignUpModal"),Bae(),jC(),ls=t}})}async function ab(){Y2.hide({afterAnimation:async()=>{var t;ls!==void 0&&(y("Sign up process cancelled",0,{duration:5}),us(),ps(),(t=Tk(ls))!=null&&t.isNewUser&&(await K.users.delete(),await ls.user.delete()),Nd(),ls=void 0)}})}async function jae(){var a;if(!ls){y("Missing user credential. Please close the popup and try again.",-1);return}const t=Ub("googleSignUpModal");if(!t){y("Please complete the captcha",0);return}qae(),jC(),Ct();const e=d("#googleSignUpModal input").val();try{if(e.length===0)throw new Error("Name cannot be empty");const s=await K.users.create({body:{name:e,captcha:t}});if(s.status!==200)throw new Error(`Failed to create user: ${s.body.message}`);s.status===200&&(await b$(ls.user,{displayName:e}),await hN(ls.user),y("Account created",1),ps(),us(),await Eh(ls.user),ls=void 0,Qe(),ab())}catch(s){console.log(s);const n=Ge(s,"Failed to sign in with Google");y(n,-1),us(),ps(),mC(),ls&&((a=Tk(ls))!=null&&a.isNewUser)&&(await K.users.delete(),await ls.user.delete()),Nd(),ls=void 0,ab(),Qe();return}}function Dae(){d("#googleSignUpModal button").prop("disabled",!1)}function jC(){d("#googleSignUpModal button").prop("disabled",!0)}function Bae(){d("#googleSignUpModal input").prop("disabled",!1)}function qae(){d("#googleSignUpModal input").prop("disabled",!0)}const hl=new wr(d("#googleSignUpModal input"),{available:{icon:"fa-check",level:1},unavailable:{icon:"fa-times",level:-1},taken:{icon:"fa-user",level:-1},checking:{icon:"fa-circle-notch",spinIcon:!0,level:0}}),Wae=ns(1e3,async()=>{const t=d("#googleSignUpModal input").val();if(!t)return;const e=await K.users.getNameAvailability({params:{name:t}});e.status===200?(hl.show("available",e.body.message),Dae()):e.status===422?hl.show("unavailable",e.body.message):e.status===409?hl.show("taken",e.body.message):(hl.show("unavailable"),y("Failed to check name availability: "+e.body.message,-1))});async function Fae(t){var e;t.addEventListener("submit",a=>{a.preventDefault(),jae()}),(e=t.querySelector("input"))==null||e.addEventListener("input",()=>{if(jC(),d("#googleSignUpModal input").val()===""){hl.hide();return}else hl.show("checking"),Wae()})}D8((t,e)=>{t!==void 0&&e&&Rae(t)});const Y2=new Pt({dialogId:"googleSignUpModal",setup:Fae,customEscapeHandler:async()=>{ab()},customWrapperClickHandler:async()=>{ab()}}),J2=console.log,zae=console.warn,Hae=console.error,X2=new Bs({key:"debugLogs",schema:qt.boolean(),fallback:!1});let Oc=X2.get();function Uae(){Oc=!Oc,eZ(`Debug logs ${Oc?"enabled":"disabled"}`),X2.set(Oc)}function eZ(...t){J2("%cINFO","background:#4CAF50;color: #111;padding:0 5px;border-radius:10px",...t)}function Vae(...t){zae("%cWRN","background:#FFC107;color: #111;padding:0 5px;border-radius:10px",...t)}function Kae(...t){Hae("%cERR","background:#F44336;color: #111;padding:0 5px;border-radius:10px",...t)}function Gae(...t){Oc&&J2("%cDEBG","background:#2196F3;color: #111;padding:0 5px;border-radius:10px",...t)}console.log=eZ;console.warn=Vae;console.error=Kae;console.debug=Gae;let yk=!1;function Qae(t){document.documentElement.style.setProperty("--font",'"'+t.replace(/_/g," ")+'", "Roboto Mono", "Vazirmatn"'),HE(),yk=!0}function zre(){yk&&(Qae(u.fontFamily),yk=!1)}function Yae(){const t=window.navigator.userAgent.toLowerCase(),e=t.includes("mac")&&!t.includes("firefox")?"cmd":"ctrl",a=u.quickRestart==="esc"?"tab":"esc";d("footer .keyTips").html(`
    <key>${u.quickRestart}</key> - restart test<br>
    <key>${a}</key> or <key>${e}</key>+<key>shift</key>+<key>p</key> - command line`)}window.addEventListener("keydown",function(t){t.code==="Space"&&t.target===document.body&&t.preventDefault()});window.addEventListener("beforeunload",t=>{lb(u.mode,u.words,u.time,Pd(),pr()??!1)||pa&&(t.preventDefault(),t.returnValue="")});const Jae=ns(250,()=>{if(ur(),xt()==="test"&&!la)if(u.tapeMode!=="off")_h();else{const t=document.querySelectorAll("#words .word")[ta-1];if(t){const e=Math.floor(t.offsetTop);Ix(e)}}setTimeout(()=>{d("#wordsInput").is(":focus")&&xE()},250)}),Xae=Ck(250,()=>{vh()});d(window).on("resize",()=>{Xae(),Jae()});Gt(t=>{t==="quickRestart"&&Yae()});const tZ=new Bs({key:"accountSettingsMessageDismissed",schema:qt.boolean(),fallback:!1});tZ.get()&&d(".pageSettings .accountSettingsNotice").remove();d(".pageSettings .accountSettingsNotice .dismissAndGo").on("click",()=>{tZ.set(!0),Ra("/account-settings"),d(".pageSettings .accountSettingsNotice").remove()});let vk=!1;const ese=new RegExp("\\p{P}","u");async function tse(t){function e(l,c){let m=l.shiftKey;const f=vk&&c.length>2?2:0,h=!ese.test(c.slice(f,f+2));Yl&&h&&(m=!l.shiftKey);const v=c[(m?1:0)+f]??"",w=c[m?1:0]??"",_=c[0];return v||w||_}let a;try{a=await sh(u.layout)}catch(l){return y(Ge(l,"Failed to emulate event"),-1),null}let s=[];if(a.type==="ansi"?s=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]:a.type==="iso"?s=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]:a.type==="matrix"&&(s=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]),!s.includes(t.code))return null;const n=a.keys,i=n.row1.concat(n.row2).concat(n.row3).concat(n.row4).concat(n.row5),r=s.indexOf(t.code);if(r===-1)return t.code.includes("Numpad")?t.key:null;const o=e(t,i[r]??"");return o!==void 0?o:null}function aZ(t){const e=t.code==="AltLeft"&&navigator.userAgent.includes("Mac");t.code!=="AltRight"&&!e||(t.type==="keydown"&&(vk=!0),t.type==="keyup"&&(vk=!1))}d(document).on("keydown",aZ);d(document).on("keyup",aZ);const sZ=["MediaTrackNext","MediaTrackPrevious","MediaPlayPause","AudioVolumeUp","AudioVolumeDown","AudioVolumeMute"],ase=["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","OS","NumLock","ScrollLock","Scroll","Shift","Super","Symbol","SymbolLock"];let sb=!1,nb=!0,e0=!1,nZ,t0=0,ib=!1;const qS=document.getElementById("wordsInput"),iZ=document.getElementById("koInputVisual");function pi(t){t!==qS.value&&(qS.value=t)}function Yg(){var e;const t=Be(xh());if(isNaN(t)||O9(t),u.keymapMode==="next"&&u.mode!=="zen")if(!u.language.startsWith("korean"))zr(Z.getCurrent().charAt(E.current.length).toString());else{const a=xa.disassemble(Z.getCurrent(),!0),s=xa.disassemble(E.current,!0),n=s.length-1;if(s[n]){const i=s[n].length;try{const r=a[n][i]??a[s.length][i-a[n].length];zr(r)}catch{zr("")}}else{const i=(e=a==null?void 0:a[0])==null?void 0:e[0];i!==void 0&&zr(i)}}}function rZ(){var a,s,n,i;if(!pa||E.history.length===0||ta===0)return;const t=document.querySelectorAll("#words > .word");if(E.history[Z.currentIndex-1]==Z.get(Z.currentIndex-1)&&!u.freedomMode||(a=t[Z.currentIndex-1])!=null&&a.classList.contains("hidden")||u.confidenceMode==="on"||u.confidenceMode==="max")return;const e=(n=(s=t[Z.currentIndex])==null?void 0:s.children[0])==null?void 0:n.classList.contains("incorrect");if(u.stopOnError==="letter"&&e&&li(),E.current=E.popHistory(),wa.popHistory(),Ye(u.funbox).find(r=>{var o;return(o=r.properties)==null?void 0:o.includes("nospace")})&&(E.current=E.current.slice(0,-1),pi(" "+E.current+" ")),Z.decreaseCurrentIndex(),Mx(ta-1),Eb(!0),hv(Z.getCurrent()),li(),u.mode==="zen"){Ch();const r=((i=document.querySelector("#words"))==null?void 0:i.children)??[];for(let o=r.length-1;o>=0;o--){const l=r[o];if(l.classList.contains("newline"))l.remove();else break}}ur(),ad("backWord")}async function WS(){var o,l,c;if(!pa||E.current===""||sd()&&u.language.startsWith("chinese"))return;u.mode==="zen"&&(d("#words .word.active").removeClass("active"),d("#words").append("<div class='word active'></div>"));const t=Z.getCurrent();for(const m of Ye(u.funbox))(o=m.functions)!=null&&o.handleSpace&&m.functions.handleSpace();sb=!0;const e=aO();E9(Math.round(e)),gE(e);const a=Ye(u.funbox).find(m=>{var f;return(f=m.properties)==null?void 0:f.includes("nospace")})!==void 0,s=t===E.current||u.mode==="zen";if(QO(s,!0),uE(s),s)u.stopOnError==="letter"&&li(),QT(!0,t),E.pushHistory(),Z.increaseCurrentIndex(),hv(Z.getCurrent()),o_(),d_(Z.currentIndex),a||cr(),ad("submitCorrectWord");else{a||(u.playSoundOnError==="off"||u.blindMode?cr():$b()),mE(Z.getCurrent()),lE();const m=E.current.length;if(m<=Z.getCurrent().length&&(m>=wa.current.length?wa.current+="_":wa.current=wa.current.substring(0,m)+"_"+wa.current.substring(m+1)),u.stopOnError!=="off"){if(u.difficulty==="expert"||u.difficulty==="master"){Fc("difficulty");return}u.stopOnError==="word"&&(sb=!1,ad("incorrectLetter","_"),li(),ur());return}QT(!1,t),u.blindMode?u.highlightMode!=="off"&&h9(ta):f9(ta),E.pushHistory(),Z.increaseCurrentIndex(),hv(Z.getCurrent()),o_(),d_(Z.currentIndex),ad("submitErrorWord"),(u.difficulty==="expert"||u.difficulty==="master")&&Fc("difficulty")}wa.pushHistory();const n=Z.currentIndex===Z.length;if(eC()&&n){eu();return}let i;u.mode==="zen"?i=E.current.length:i=Z.getCurrent().length;const r=xZ(u.minBurstCustomSpeed,i);if(u.minBurst==="fixed"&&e<u.minBurstCustomSpeed||u.minBurst==="flex"&&e<r){Fc("min burst");return}if(u.keymapMode==="react"&&uO(" ",!0),(u.mode==="words"||u.mode==="custom"||u.mode==="quote"||u.mode==="zen")&&Ch(),(u.mode==="time"||u.mode==="words"||u.mode==="custom"||u.mode==="quote")&&(n?(ib=!0,Ct(),await eS(),Qe(),ib=!1):eS()),Mx(ta+1),Eb(),ur(),!u.showAllLines||u.mode==="time"||u.mode==="custom"&&Yt()===0||u.mode==="custom"&&ua()==="time"){const m=Math.floor(((l=document.querySelectorAll("#words .word")[ta-1])==null?void 0:l.offsetTop)??0);let f;try{f=Math.floor(((c=document.querySelectorAll("#words .word")[ta])==null?void 0:c.offsetTop)??0)}catch{f=0}f>m&&Ix(m)}}function sse(t,e){var n;if(!nb)return!1;if(u.mode==="zen")return!0;if(E.getKoreanStatus()){const r=xa.disassemble(Z.getCurrent())[e];return r===void 0?!1:r===t}const a=Z.getCurrent()[e];if(a===void 0)return!1;if(a===t)return!0;const s=Ye(u.funbox).find(i=>{var r;return(r=i.functions)==null?void 0:r.isCharCorrect});return(n=s==null?void 0:s.functions)!=null&&n.isCharCorrect?s.functions.isCharCorrect(t,a):!!(u.language.startsWith("russian")&&(t===""||t===""||t==="e")&&(a===""||a===""||a==="e")||(t===""||t===""||t==="'"||t===""||t==="")&&(a===""||a===""||a==="'"||a===""||a==="")||(t==='"'||t===""||t===""||t==="")&&(a==='"'||a===""||a===""||a==="")||(t===""||t===""||t==="-")&&(a==="-"||a===""||a===""))}function Zs(t,e,a){var _,S;if(kd||la)return;if(t===""&&Z.getCurrent()[e]!==""){for(let M=0;M<3;M++)Zs(".",e+M);return}if(t===""&&Z.getCurrent()[e]!==""){Zs("o",e),Zs("e",e+1);return}if(t===""&&Z.getCurrent()[e]!==""){Zs("a",e),Zs("e",e+1);return}console.debug("Handling char",t,e,a);const s=performance.now(),n=E.getKoreanStatus();for(const M of Ye(u.funbox))(_=M.functions)!=null&&_.handleChar&&(t=M.functions.handleChar(t));const i=Ye(u.funbox).find(M=>{var I;return(I=M.properties)==null?void 0:I.includes("nospace")})!==void 0;if(t!==`
`&&t!=="	"&&/\s/.test(t)){if(i)return;if(WS(),u.difficulty!=="normal"||u.strictSpace&&u.mode!=="zen"||u.stopOnError==="word"&&e>0){if(sb){sb=!1;return}}else return}if(u.mode!=="zen"&&Z.getCurrent()[e]!==`
`&&t===`
`||!pa&&!GV(s))return;Oo(!0),_E();const r=sse(t,e);let o;if(r&&u.mode!=="zen"&&(t=n?xa.disassemble(Z.getCurrent())[e]??"":Z.getCurrent().charAt(e)),!r&&t===`
`){if(E.current==="")return;t=" "}if(E.current===""&&f3(s),n||u.language.startsWith("korean")?(o=(a??"").slice(1),iZ.innerText=o.slice(-1)):u.language.startsWith("chinese")?o=(a??"").slice(1):o=E.current.substring(0,e)+t+E.current.substring(e+1),!r&&sd()&&!u.language.startsWith("korean")){E.current=o,li(),ur();return}if(QO(r),uE(r),r||(lE(),mE(Z.getCurrent())),X9(u.mode==="zen"?t:Z.getCurrent()[e]??"",r),r||u.playSoundOnError==="off"||u.blindMode?cr():$b(),u.keymapMode==="react"&&uO(t,r),u.difficulty!=="master")if(nb)t0=0;else{t0++,t0>=5&&y("Opposite shift mode is on.",0,{important:!0,customTitle:"Reminder"});return}if(wa.current==="")wa.current+=n?xa.disassemble(o).join(""):o;else{const M=n?xa.disassemble(wa.current).length:wa.current.length;e>=M?wa.current+=n?xa.disassemble(t).concat():t:r||(wa.current=wa.current.substring(0,e)+t+wa.current.substring(e+1))}if(o_(),d_(Z.currentIndex),u.difficulty!=="master"&&u.stopOnError==="letter"&&!r){u.blindMode||li(E.current+t);return}ad(r?"correctLetter":"incorrectLetter",t);const l=(S=document.querySelectorAll("#words .word"))==null?void 0:S[ta];if((n?xa.disassemble(E.current).length:E.current.length)===1&&Z.currentIndex===0&&(l==null||l.offsetTop,void 0),u.mode==="zen"&&e<30||u.mode!=="zen"&&o.length<Z.getCurrent().length+20?E.current=o:console.error("Hitting word limit"),!r&&u.difficulty==="master"){Fc("difficulty");return}if(u.mode!=="zen"){const M=Z.getCurrent(),me=Z.currentIndex===Z.length-1,P=eC(),$=M===E.current,T=u.quickEnd&&!u.language.startsWith("korean")&&M.length===E.current.length&&u.stopOnError==="off",L=u.language.startsWith("chinese");if(me&&P&&($||T)&&(!L||a!==void 0&&e+2==a.length)){eu();return}}const m=l==null?void 0:l.offsetTop;li();const f=l==null?void 0:l.offsetTop;m<f&&!g_&&E.current.length>1&&(u.mode==="zen"?u.showAllLines||Ix(m):(E.current=E.current.slice(0,-1),li())),(i&&E.current.length===Z.getCurrent().length||t===`
`&&r)&&WS();const h=Z.getCurrent(),v=/^\t+/.test(Z.getCurrent()),w=h[E.current.length]==="	";setTimeout(()=>{if(r&&u.language.startsWith("code")&&v&&w){const M=new KeyboardEvent("keydown",{key:"Tab",code:"Tab"});document.dispatchEvent(M)}},0),t!==`
`&&ur()}function nse(t,e){if(kd){t.preventDefault();return}let a=!1;(u.mode==="zen"&&!t.shiftKey||Mm&&!t.shiftKey)&&(a=!0);const s=Ka("commandLineWrapper")||e;if(u.quickRestart==="esc"){if(s||xt()==="login")return;if(t.preventDefault(),!la&&a){Zs("	",E.current.length),pi(" "+E.current);return}}else if(u.quickRestart==="tab"){if(s||xt()==="login")return;if(xt()!=="test"){Ra("/");return}if(t.shiftKey?jt():Em(),!la&&a){t.preventDefault(),Zs("	",E.current.length),pi(" "+E.current);return}bt({event:t})}else{if(s||xt()!=="test"||la)return;if(a){t.preventDefault(),Zs("	",E.current.length),pi(" "+E.current);return}setTimeout(()=>{var n;((n=document.activeElement)==null?void 0:n.id)!=="wordsInput"&&Oo(!1)},0)}}d("#wordsInput").on("keydown",t=>{const e=xt()==="test",a=Ka("commandLineWrapper"),s=Ka("leaderboardsWrapper"),n=ob();e&&!a&&!s&&!n&&!la&&t.key!=="Enter"&&!ib||t.preventDefault()});let a0=-1;d(document).on("keydown",async t=>{var l,c,m;if(xt()==="loading"){console.debug("Ignoring keydown event on loading page.");return}if(sZ.includes(t.key)){console.debug(`Key ${t.key} is on the list of ignored keys. Stopping keydown event.`);return}const e=d("#wordsInput").is(":focus"),a=xt()==="test",s=Ka("commandLineWrapper"),n=Ka("leaderboardsWrapper"),i=ob(),r=a&&!s&&!n&&!i&&!la&&(e||t.key!=="Enter")&&!ib;if(r&&!e&&!["Enter"," ","Escape","Tab",...ase].includes(t.key)&&(Mb(),u.showOutOfFocusWarning&&!t.ctrlKey&&!t.metaKey&&t.preventDefault()),t.key==="Tab"&&nse(t,i),t.key==="Escape"&&u.quickRestart==="esc"){if(Ka("commandLineWrapper")||i)return;if(xt()!=="test"){Ra("/");return}t.shiftKey?jt():Em(),bt({event:t})}if(t.key==="Enter"&&u.quickRestart==="enter"){const f=document.activeElement;if((f==null?void 0:f.tagName)==="BUTTON"||(f==null?void 0:f.tagName)==="A"||(f==null?void 0:f.classList.contains("button"))||(f==null?void 0:f.classList.contains("textButton"))||(f==null?void 0:f.tagName)==="INPUT"&&(f==null?void 0:f.id)!=="wordsInput"||Ka("commandLineWrapper")||i)return;if(xt()!=="test"){Ra("/");return}if(la){bt({event:t});return}u.mode==="zen"||(!ev&&!u.funbox.includes("58008")||(ev||u.funbox.includes("58008"))&&t.shiftKey)&&(t.shiftKey?jt():Em(),bt({event:t}))}if(!r)return;if(!((l=t.originalEvent)!=null&&l.isTrusted)||ks){t.preventDefault();return}if(dE(),t.key==="Backspace"&&(cr(),/INPUT|SELECT|TEXTAREA/i.test(t.target.tagName)||t.preventDefault(),u.confidenceMode==="max")){t.preventDefault();return}if(t.key==="Backspace"&&E.current.length===0&&(rZ(),E.current&&pi(" "+E.current+" ")),t.key==="Enter")if(t.shiftKey){if(u.mode==="zen")eu();else if(!lb(u.mode,u.words,u.time,Pd(),pr()??!1)){const f=Date.now()-a0;a0===-1||f>200?(a0=Date.now(),f>=5e3&&y("Please double tap shift+enter to confirm bail out",0,{important:!0,duration:5})):(j1(!0),eu())}}else Zs(`
`,E.current.length),pi(" "+E.current),Yg();if(t.key==="Dead"&&!sd()){cr();const f=(c=document.querySelectorAll("#words .word"))==null?void 0:c[ta],h=E.current.length,v=f==null?void 0:f.querySelectorAll("letter")[h];v&&v.classList.toggle("dead")}if(u.oppositeShiftMode!=="off")if(u.oppositeShiftMode==="keymap"&&u.keymapLayout!=="overrideSync"){const f=await sh(u.keymapLayout).catch(()=>{});if(f===void 0){y("Failed to load keymap layout",-1);return}const h=TE(t.key,f);nb=h===void 0?!0:c_(h)}else nb=c_(t.code);const o=Ye(u.funbox).find(f=>{var h;return(h=f.functions)==null?void 0:h.preventDefaultEvent});if((m=o==null?void 0:o.functions)!=null&&m.preventDefaultEvent&&await o.functions.preventDefaultEvent(t)&&(t.preventDefault(),Zs(t.key,E.current.length),Yg(),pi(" "+E.current)),u.layout!=="default"&&!(t.ctrlKey||t.altKey&&window.navigator.platform.search("Linux")>-1)){const f=await tse(t);f!==null&&(t.preventDefault(),Zs(f,E.current.length),Yg(),pi(" "+E.current))}nZ=t.key==="Backspace"||t.key==="delete"});d("#wordsInput").on("keydown",t=>{var a;if((a=t.originalEvent)!=null&&a.repeat){console.log("spacing debug keydown STOPPED - repeat",t.key,t.code,t.which);return}UH(t),t.code==="NumpadEnter"&&u.funbox.includes("58008")&&(t.code="Space"),t.code.includes("Arrow")&&u.funbox.includes("arrows")&&(t.code="NoCode");const e=performance.now();setTimeout(()=>{const s=t.code===""||t.which===231?"NoCode":t.code;g3(e,s)},0)});d("#wordsInput").on("keyup",t=>{var a;if((a=t.originalEvent)!=null&&a.repeat){console.log("spacing debug keydown STOPPED - repeat",t.key,t.code,t.which);return}t.code==="NumpadEnter"&&u.funbox.includes("58008")&&(t.code="Space"),t.code.includes("Arrow")&&u.funbox.includes("arrows")&&(t.code="NoCode");const e=performance.now();setTimeout(()=>{const s=t.code===""||t.which===231?"NoCode":t.code;cE(e,s)},0)});d("#wordsInput").on("keyup",t=>{var e;if(!((e=t.originalEvent)!=null&&e.isTrusted)||ks){t.preventDefault();return}VH(t),sZ.includes(t.key)});d("#wordsInput").on("beforeinput",t=>{var e;(e=t.originalEvent)!=null&&e.isTrusted&&t.target.value===""&&(t.target.value=" ")});d("#wordsInput").on("input",t=>{var l;if(!((l=t.originalEvent)!=null&&l.isTrusted)||ks){t.target.value=" ";return}if(ob()){t.preventDefault();return}dE(),(u.layout==="default"||u.layout==="korean")&&t.target.value.normalize().match(/[\uac00-\ud7af]|[\u1100-\u11ff]|[\u3130-\u318f]|[\ua960-\ua97f]|[\ud7b0-\ud7ff]/g)&&E.setKoreanStatus(!0);const a=E.getKoreanStatus(),s=u.language.startsWith("chinese"),n=t.target.value.normalize(),i=a?xa.disassemble(n).join("").slice(1):n.slice(1),r=a?xa.disassemble(E.current).join(""):E.current;if(a&&!nZ&&(e0||n.slice(1).length<E.current.length&&xa.disassemble(E.current.slice(-1)).length>1)){e0=!e0;return}if(u.layout!=="default"&&i.length>=r.length){pi(" "+r);return}if(n.length===0&&r.length===0)rZ();else if(i.length<r.length){if(s)if(r.length-i.length<=2&&r.startsWith(r))E.current=i;else{let c=0;for(;i[c]===r[c];)c++;let m=0;u.stopOnError!=="word"&&/.+ .+/.test(i)&&(m=i.indexOf(" ")+1);for(let f=c;f<i.length;f++)Zs(i[f],f-m,n)}else if(a){const c=t.target.value.normalize().slice(1);E.current=c,iZ.innerText=c.slice(-1)}else E.current=i;li(),ur(),sd()||((t==null?void 0:t.originalEvent).inputType==="deleteWordBackward"?ad("setLetterIndex",0):ad("setLetterIndex",r.length-1))}if(i!==r){let c=0;for(;i[c]===r[c];)c++;let m=0;u.stopOnError!=="word"&&/.+ .+/.test(i)&&(m=i.indexOf(" ")+1);for(let f=c;f<i.length;f++)Zs(i[f],f-m,n)}pi(" "+E.current),Yg();const o=sd();setTimeout(()=>{const c=sd();o!==c&&li(),t.target.selectionStart!==t.target.value.length&&(!Ir.test(t.target.value)||(t.target.selectionStart??0)<t.target.value.search(Ir))&&(t.target.selectionStart=t.target.selectionEnd=t.target.value.length)},0)});d("#wordsInput").on("focus",t=>{t.target.selectionStart=t.target.selectionEnd=t.target.value.length});d("#wordsInput").on("copy paste",t=>{t.preventDefault()});d("#wordsInput").on("select selectstart",t=>{t.preventDefault()});d("#wordsInput").on("keydown",t=>{t.key.startsWith("Arrow")&&t.preventDefault()});d("#wordsInput").on("compositionstart",()=>{u.layout==="default"&&(RE(!0),F3(E.current.length))});d("#wordsInput").on("compositionend",()=>{u.layout==="default"&&RE(!1)});const ise=new Bs({key:"merchBannerClosed",schema:qt.boolean(),fallback:!1});function rse(){ise.get()}d(()=>{FC("/css/slimselect.min.css",!0),FC("/css/balloon.min.css",!0),ree(),d("body").css("transition","background .25s, transform .05s"),rse(),setTimeout(()=>{Ye(u.funbox).forEach(t=>{var e,a;return(a=(e=t.functions)==null?void 0:e.applyGlobalCSS)==null?void 0:a.call(e)})},500),d("#app").css("opacity","0").removeClass("hidden").stop(!0,!0).animate({opacity:1},Jt(250)),ma()&&GG().then(()=>{var t;(t=zb())!=null&&t.users.signUp||(IF(),d(".register").addClass("hidden"),d(".login").addClass("hidden"),d(".disabledNotification").removeClass("hidden"))}),bV(),new gN("https://keymash.io/")});let gg=!1;d(document).on("click",".scrollToTopButton",()=>{window.scrollTo({top:0,behavior:l$()?"instant":"smooth"})});d(window).on("scroll",()=>{const t=xt();if(t!=="test"&&(t==="about"||t==="settings"||t==="account")){const e=window.scrollY;!gg&&e>100?(d(".scrollToTopButton").removeClass("invisible"),gg=!0):gg&&e<100&&(d(".scrollToTopButton").addClass("invisible"),gg=!1)}});d("#nocss .requestedStylesheets").html("Requested stylesheets:<br>"+[...document.querySelectorAll("link[rel=stylesheet")].map(t=>t.href).filter(t=>/\/css\/style/gi.test(t)).join("<br>"));d("#nocss .requestedJs").html("Requested Javascript files:<br>"+[...document.querySelectorAll("script")].map(t=>t.src).filter(t=>/(\/js\/mon|\/js\/vendor)/gi.test(t)).join("<br>")+"<br><br>Client version:<br>"+Yf.clientVersion);window.navigator.userAgent.toLowerCase().includes("mac")?d("#nocss .keys").html(`
    <span
      style="
        padding: 1rem;
        display: inline-block;
        border-radius: 1rem;
        background: #2c2e31;
        margin-top: 1rem;
        margin-bottom: 1rem;
      "
    >
      Cmd
    </span>
    +
    <span
      style="
        padding: 1rem;
        display: inline-block;
        border-radius: 1rem;
        background: #2c2e31;
      "
    >
      Shift
    </span>
    +
    <span
      style="
        padding: 1rem;
        display: inline-block;
        border-radius: 1rem;
        background: #2c2e31;
      "
    >
      R
    </span>
  `):d("#nocss .keys").html(`
    <span
      style="
        padding: 1rem;
        display: inline-block;
        border-radius: 1rem;
        background: #2c2e31;
        margin-bottom: 1rem;
      "
    >
      Ctrl
    </span>
    +
    <span
      style="
        padding: 1rem;
        display: inline-block;
        border-radius: 1rem;
        background: #2c2e31;
      "
    >
      Shift
    </span>
    +
    <span
      style="
        padding: 1rem;
        display: inline-block;
        border-radius: 1rem;
        background: #2c2e31;
      "
    >
      R
    </span>
  `);const Qf="videoAdPopupWrapper";async function ose(){if(js(Qf,"popups"),await Jx(),Bb){y("Looks like you're using an adblocker. Video ads will not work until you disable it.",0,{duration:6});return}if(await Xx(),Um){y("Looks like you're using a cookie popup blocker. Video ads will not work without giving your consent through the popup.",0,{duration:7});return}Ka(Qf)||d("#videoAdPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,()=>{window.dataLayer.push({event:"EG_Video"})})}function FS(){Ka(Qf)&&d("#videoAdPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,()=>{d("#videoAdPopupWrapper").addClass("hidden"),Ga(Qf)})}function dse(t){const e=t.event;e==="started"||(e==="finished"?FS():e==="empty"&&(y("Failed to load video ad. Please try again later",-1,{duration:3}),FS()))}d(".pageTest #watchVideoAdButton").on("click",()=>{ose()});$s(Qf);let Yr;async function oZ(t=u.language){if(!Yr)return;const a=(await nh(t)).bcp47??"en-US";Yr.lang=a}async function dZ(){Yr=new SpeechSynthesisUtterance,await oZ()}function lse(){Yr=void 0}async function use(t){window.speechSynthesis.cancel(),Yr===void 0&&await dZ(),Yr!==void 0&&(Yr.text=t,window.speechSynthesis.speak(Yr))}Gt((t,e)=>{t==="funbox"&&(e==="none"?lse():e==="tts"&&dZ()),t==="language"&&u.funbox.split("#").includes("tts")&&oZ()});U9(t=>{use(t)});let Jg=0,lZ,bk,DC=!0;const qo=document.querySelector("#fpsCounter");function uZ(t){if(DC)return;const e=t-bk;if(Jg++,e>500){const a=Be(Jg*1e3/e).toFixed(2);Jg=0,bk=t,cse(a)}window.requestAnimationFrame(uZ)}function Hre(){DC=!1,Jg=0,bk=performance.now(),lZ=window.requestAnimationFrame(uZ),qo.classList.remove("hidden")}function Ure(){cancelAnimationFrame(lZ),DC=!0,qo.classList.add("hidden")}async function cse(t){qo.innerHTML=`FPS ${t}`;const e=parseFloat(t);qo.classList.remove("error"),qo.classList.remove("main"),e<30?qo.classList.add("error"):e>55&&qo.classList.add("main")}const Qu=new wr(d(".page.pageProfileSearch .search input"),{notFound:{icon:"fa-user-slash",level:-1},error:{icon:"fa-times",level:-1},checking:{icon:"fa-circle-notch",spinIcon:!0,level:1}});function pse(){d(".page.pageProfileSearch .search button").addClass("disabled"),d(".page.pageProfileSearch .search input").attr("disabled","disabled")}function mse(){d(".page.pageProfileSearch .search button").removeClass("disabled"),d(".page.pageProfileSearch .search input").removeAttr("disabled")}function fse(){return d(".page.pageProfileSearch .search input").attr("disabled")!==void 0}function zS(){d(".page.pageProfileSearch .search input").trigger("focus")}async function hse(){Qu.hide();const t=d(".page.pageProfileSearch .search input").val();if(t==="")return;Qu.show("checking"),pse(),await Qt(500);const e=await K.users.getProfile({params:{uidOrName:t}});if(mse(),e.status===404){zS(),Qu.show("notFound","User not found");return}else if(e.status!==200){zS(),Qu.show("error",`Error: ${e.body.message}`);return}Qu.hide(),Ra(`/profile/${t}`,{data:e.body.data})}d(".page.pageProfileSearch form").on("submit",t=>{t.preventDefault(),!fse()&&hse()});$s("pageProfileSearch");const cZ=new Bs({key:"lastSeenVersion",schema:qt.string(),fallback:""});let wk=null,rb=null;function gse(t){cZ.set(t)}function yse(){return cZ.get()}async function vse(){const t=await sF(),e=yse();wk=t,rb=e===""?!1:e!==t,(rb||e==="")&&(gse(t),bse())}function bse(){caches.keys().then(function(t){for(const e of t)caches.delete(e)})}async function wse(){return(wk===null||rb===null)&&await vse(),{version:wk,isNew:rb}}function _se(t){d("footer .currentVersion .text").text(t)}function kse(t){t?d("#newVersionIndicator").removeClass("hidden"):d("#newVersionIndicator").addClass("hidden")}async function xse(){const{version:t,isNew:e}=await wse();_se(t),kse(e)}function Cse(t){for(const[e,a]of Object.entries(t))window[e]=a}s3();xse();Oo(!0,!0);Cse({snapshot:A,config:u,toggleFilterDebug:t7,glarsesMode:qU,stats:b9,replay:B3,enableTimerDebug:QH,getTimerStats:iU,toggleUnsmoothedRaw:QU,egVideoListener:dse,toggleDebugLogs:Uae});export{yM as $,bo as A,rM as B,Kie as C,$b as D,dM as E,cr as F,CM as G,qM as H,uM as I,cM as J,BM as K,Am as L,$m as M,TM as N,pM as O,bM as P,wM as Q,oM as R,Vie as S,N3 as T,NT as U,hM as V,Da as W,u as X,ux as Y,gM as Z,cx as _,$a as a,pU as a$,px as a0,Ki as a1,YM as a2,si as a3,LM as a4,mM as a5,lx as a6,AM as a7,fM as a8,OM as a9,l9 as aA,E as aB,Z as aC,$9 as aD,eee as aE,hx as aF,gx as aG,Na as aH,n_ as aI,fg as aJ,Ea as aK,TO as aL,Lh as aM,A as aN,aP as aO,RH as aP,Lm as aQ,Mv as aR,G7 as aS,Vr as aT,Jw as aU,ed as aV,oh as aW,vH as aX,Gk as aY,fO as aZ,KM as a_,NM as aa,RM as ab,Eo as ac,mx as ad,JM as ae,En as af,eE as ag,XM as ah,tE as ai,ph as aj,kM as ak,a3 as al,pr as am,ua as an,x3 as ao,Yt as ap,j1 as aq,eu as ar,Ns as as,_t as at,Tne as au,Ra as av,bb as aw,mh as ax,la as ay,KE as az,jt as b,Qae as b0,FM as b1,zre as b2,oo as b3,Kl as b4,Xo as b5,Pt as b6,Pd as b7,ah as b8,zk as b9,ku as ba,XW as bb,Fk as bc,eF as bd,f2 as be,JI as bf,fx as bg,fh as bh,DH as bi,t3 as bj,ose as bk,F5 as bl,Gl as bm,Lp as bn,xu as bo,b9 as bp,Hre as bq,Ure as br,Oo as bs,GT as bt,nr as bu,ih as bv,wF as bw,xt as bx,Mb as by,oi as c,ho as d,HM as e,Vi as f,dx as g,rn as h,DM as i,WM as j,xM as k,IM as l,PM as m,ZM as n,MM as o,jM as p,zM as q,bt as r,Fn as s,SM as t,lM as u,vM as v,UM as w,EM as x,_M as y,$M as z};